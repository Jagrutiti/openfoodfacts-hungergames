{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/views/NutritionView.vue?0264","webpack:///./src/components/Product.vue?0196","webpack:///./src/components/LogoCardGrid.vue?898e","webpack:///./src/components/Menu.vue?5aa2","webpack:///./src/views/InsightListView.vue?dffb","webpack:///./src/components/Pagination.vue?c0cb","webpack:///./src/views/LogoSearchView.vue?7b91","webpack:///./src/views/NutritionInteractiveView.vue?bd6d","webpack:///./src/App.vue","webpack:///./src/components/Menu.vue","webpack:///./src/settings.js","webpack:///./src/components/Helper.vue","webpack:///./src/components/Helper.vue?e412","webpack:///./src/components/Menu.vue?e357","webpack:///./src/App.vue?8ecf","webpack:///./src/views/QuestionView.vue","webpack:///./src/const.js","webpack:///./src/utils.js","webpack:///./src/robotoff.js","webpack:///./src/components/Product.vue","webpack:///./src/countries.js","webpack:///./src/off.js","webpack:///./src/components/Product.vue?5901","webpack:///./src/components/LoadingSpinner.vue","webpack:///./src/components/LoadingSpinner.vue?c176","webpack:///./src/components/QuestionFilter/index.vue","webpack:///./src/components/QuestionFilter/const.js","webpack:///./src/components/QuestionFilter/index.vue?0c5f","webpack:///./src/components/QuestionFilter/filterHelpers.js","webpack:///./src/components/AnnotationCounter.vue","webpack:///./src/components/AnnotationCounter.vue?7fc9","webpack:///./src/views/QuestionView.vue?ead6","webpack:///./src/views/NutritionView.vue","webpack:///./src/views/NutritionView.vue?99b4","webpack:///./src/views/NutritionInteractiveView.vue","webpack:///./src/utils/tableExtraction.js","webpack:///./src/components/InteractiveImage.vue","webpack:///./src/utils/tableAnotation.js","webpack:///./src/components/InteractiveImage.vue?c572","webpack:///./src/components/NutritionTable.vue","webpack:///./src/components/NutritionTable.vue?1448","webpack:///./src/views/NutritionInteractiveView.vue?61e2","webpack:///./src/views/TableAnnotation.vue","webpack:///./src/views/TableAnnotation.vue?2616","webpack:///./src/views/SettingsView.vue","webpack:///./src/i18n/messages.js","webpack:///./src/views/SettingsView.vue?d87e","webpack:///./src/views/InsightListView.vue","webpack:///./src/components/Pagination.vue","webpack:///./src/components/Pagination.vue?2044","webpack:///./src/views/InsightListView.vue?a13c","webpack:///./src/views/LogoSearchView.vue","webpack:///./src/components/LogoCardGrid.vue","webpack:///./src/components/LogoCardGrid.vue?772f","webpack:///./src/views/LogoSearchView.vue?6910","webpack:///./src/views/LogoAnnotationView.vue","webpack:///./src/views/LogoAnnotationView.vue?5a5f","webpack:///./src/views/LogoUpdateView.vue","webpack:///./src/views/LogoUpdateView.vue?a2b0","webpack:///./src/views/EcoScoreMenu.vue","webpack:///./src/views/EcoScoreMenu.vue?4344","webpack:///./src/views/secretTool.vue","webpack:///./src/views/secretTool.vue?bb20","webpack:///./src/views/SubsetQuestionView.vue","webpack:///./src/views/questions.js","webpack:///./src/views/SubsetQuestionView.vue?8136","webpack:///./src/main.js","webpack:///./src/assets/questionsScreenshot.png","webpack:///./src/components/Helper.vue?a544","webpack:///./src/components/LoadingSpinner.vue?cb70","webpack:///./src/components/NutritionTable.vue?6d9a","webpack:///./src/views/TableAnnotation.vue?8311","webpack:///./src/assets/logoNameLabel.png","webpack:///./src/App.vue?f43f","webpack:///./src/views/SubsetQuestionView.vue?c5ff","webpack:///./src/assets sync nonrecursive \\.png$","webpack:///./src/assets/logoGeneral.png","webpack:///./src/views/LogoAnnotationView.vue?bace","webpack:///./src/assets/memLogo.png","webpack:///./src/views/EcoScoreMenu.vue?6ce6","webpack:///./src/views/secretTool.vue?03a4","webpack:///./src/components/AnnotationCounter.vue?9b19","webpack:///./src/views/QuestionView.vue?4974","webpack:///./src/assets/logo.png","webpack:///./src/components/QuestionFilter/index.vue?5429","webpack:///./src/assets sync nonrecursive \\.json$","webpack:///./src/components/InteractiveImage.vue?9d65"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","attached","src","item","icon","simple","class","menu","to","label","active-class","menuItems","position","openHelper","open","helperIsOpen","closeHelper","STORAGE_KEY","localSettings","fetch","JSON","parse","localStorage","getItem","save","settings","setItem","stringify","update","this","getLang","urlParams","URLSearchParams","location","search","urlLanguage","has","lang","navigator","language","userLanguage","split","close","scrolling","image","wrapped","size","helpInformations","pageKey","imageSize","imgUrl","title","texts","text","aligned","top","percent","pageRatio","color","pageIndex","prev","$t","keys","primary","next","positive","explanations","welcome","page1","page2","page3","logos","imageName","forEach","urlKey","currentPath","translatedExplanations","currentPathKey","console","debug","translations","rep","props","Boolean","$router","history","current","path","watch","$route","computed","Math","floor","methods","$emit","max","min","render","__scopeId","intialSettings","type","components","Helper","filter","Menu","style","filters","currentQuestion","question","valueTagQuestionsURL","target","currentQuestionImageUrl","transitions","canvas","checkOrientation","crossOrigine","default-position","stencilSize","default-boundaries","stencil-props","data-inverted","data-tooltip","annotate","show","loading","noRemainingQuestion","barcode","currentQuestionBarcode","remainingCount","remainingQuestionCount","lastAnnotations","sessionAnnotatedCount","ROBOTOFF_API_URL","OFF_URL","OFF_API_URL","OFF_IMAGE_URL","OFF_SEARCH","NO_QUESTION_LEFT","setURLParams","parameters","set","newRelativePathQuery","pathname","toString","pushState","getURLParam","removeEmptyKeys","obj","undefined","insightId","annotation","axios","post","withCredentials","questionsByProductCode","code","then","questions","source_image_url","sortBy","insightTypes","valueTag","brands","country","count","params","insight_types","value_tag","loadLogo","logoId","updateLogo","put","searchLogos","annotated","getLogoAnnotations","index","url","annotateLogos","annotations","getInsights","page","getUserStatistics","username","getCroppedImageUrl","imageUrl","boundingBox","y_min","x_min","y_max","x_max","getLogosImages","logoIds","join","loaded","productName","href","productUrl","productEditUrl","imagesPreview","hideImage","images","options","imageZoomOptions","ingredientsText","countries","countryMap","id","getCookie","cookies","document","cookie","trim","startsWith","getUsername","sessionCookie","isNext","el","getProduct","getProductUrl","getProductEditUrl","getImageUrl","imagePath","combineURLs","getTableExtractionAI","img","x0","y0","x1","y1","getNutritionToFillUrl","creator","category","creatorTagNumber","categoryTagNumber","BARCODE_REGEX","splitBarcode","match","exec","splittedBarcode","off","countriesTags","toolbar","rotateLeft","rotateRight","product","product_name","ingredients_text","countries_tags","map","imagesDisplayUrl","isNaN","mounted","centered","required","default","String","selectedInsightType","availableInsightTypes","insightType","selectDirectlyInsightType","removeFilter","countryFilter","brandFilter","sortByPopularity","formIsClose","openForm","selectInsightType","placeholder","formValues","clearFormField","countryNames","populateBrandFilter","fluid","selection","setPopulateBrandFilter","resetForm","validateForm","insightTypesNames","brand","product_weight","key2urlParam","$props","updateURLParams","loadBrands","closeForm","filterKey","x","randomInsightTypeChoices","getRandomInsightType","random","getInitialInsightType","urlParamValue","getInitialFilterValues","annotatedCount","sortedLastAnnotations","insight_id","insight_type","Number","Array","historyAnnotatedCount","reverse","robotoff","catch","error","log","reformatTagMapping","à","â","ä","é","è","ê","ë","î","ï","ô","ö","û","ù","ü","output","toLowerCase","entries","replace","RegExp","Product","AnnotationCounter","LoadingSpinner","Cropper","QuestionFilter","valueTagTimeout","questionBuffer","seenInsightIds","Set","handler","newFilters","oldFilters","loadQuestions","deep","newBuffer","includes","clean","dataToAdd","q","add","updateLastAnnotations","updateRemainingQuestionCount","newCount","append","vm","addEventListener","event","nodeName","rotateImage","bufferIsEmpty","imageRotationClass","productBuffer","celled","definition","currentProductData","nutritiveValue","disabled","visible","isInvalid","getNutrimentUnits","deleteProduct","skipProduct","validate","getProducts","nbOfPages","randomPage","products","valueTagInput","clearValueTagInput","addProducts","newProducts","concat","imageId","pop","a","toDelete","nutrimentId","toFill","unit","quantity","resetProductData","newProductBuffer","oldProductBuffer","contributor","setCategory","toggleHistoryIsOpen","step","ref","imageURL","changeCropCoordinate","v-if","coordinates","clickableBoxes","anotationToValidate","bestMatch","boxesHighlight","nutrimentToFill","boxes","attributedBoxesIds","onlyPredictions","useOnlyPredictions","nutriPredictionAccepted","nutriPredictionCanceled","validateHumanAnnotation","step-number","active","basisData","inputmode","v-else-if","prevStep","canGoNext","nextStep","unselectPicture","canValidate","setNutrimentValueIndex","nutrimentToFillIndex","selectLine","historyIsOpen","status","require","nutrimentTranslation","distance","closest","OVERLAPPING_THRESHOLD","isOverlapping","boxA","boxB","maxY","minY","overlapDist","addExpression","trad","expression","nutriKey","word","remapTranslation","translationTree","nutryKey","cleanTrad","normalize","splitted","boxIsInside","box","minX","maxX","nbComplet","y","hasPointInside","addGlobalBox","extremaValues","extractValues","cleanText","grams","matchAll","milligrams","mcg","percents","kJ","kcal","all","getNutrimentBoxes","filteredBoxes","linkBoxes","seenBoxes","k","parseInt","currentSolution","translation","description","getValues","values","group","again","newGrams","newMilligrams","newMcg","newPercents","newKJ","newKcal","newAll","boxesIndexes","filterBoxes","ocrData","angle","width","height","boundingPoly","vertices","sort","b","diffX","X_sorted_indexes","_","ocr","getOCRdata","responses","textAnnotations","getData","transforms","rotate","nutriments","except","normalizedSearch","wrapperStyle","imageStyle","svgStyle","imageWidth","imageHeight","boxBoundingPath","displayBox","displayedBox","removeDisplayedBox","potentialNutriments","proposition","validateProposition","validateValue","cancelNutrimentPrediction","validateNutrimentPrediction","points2Path","points","point","points2Key","pA","pB","compare3points","pC","getConvexPoints","sortedPoints","enveloppe","bord","pointIndex","getCenter","sum","reduce","getBoxes","boxIndex","getGraphConnexComponents","graph","node2component","neighbors","minComponentId","getHullPaths","component2nodes","node","componentId","accumulateur","nodeId","componentKey","nodeId1","nodeId2","sortKeys","node1Key","node2Key","start","end","isInRectangle","x2","y2","Xmin","Ymin","Xmax","Ymax","rotateSize","radians","PI","abs","cos","sin","getStyleTransforms","flip","scaleX","scaleY","transform","horizontal","vertical","imageClass","Function","calculatedImageSize","calculatedSize","fill","enabled","transition","time","timingFunction","left","coefficient","virtualSize","compensations","scale","onChangeImage","$refs","refreshImage","refresh","destroyed","removeEventListener","interactiveElementStyle","naturalHeight","naturalWidth","root","clientWidth","clientHeight","complete","sortedKeys","nutritiveKey","updateNutriIndexToFill","selectable","warning","negative","updateValue","$event","updateUnit","remove","model","prop","kept","SEEN_CODES","page_size","ceil","InteractiveImage","NutritionTable","isServingSize","nutritiveId","extracted","nutritionPredictionIndex","nextPage","productCode","productLang","image_nutrition_url","imgId","imgid","proposedNutriments","currentValue","nutriKeys","flatMap","valueBoxes","tableExtraction","nextPrediction","initial","nutriBoxes","keysToAdd","descrition","val","accumulator","nextIndex","cropper","cat","nbPages","seenCodes","replaceProducts","oldCodes","getBasisTextForAPI","withData","withoutData","basisText","correctedData","response","sizes","full","small","for","messages","currentState","click","urlImg","moveAt","stopDragging","isDraggingCropRectangle","visibleBoxes","mouseover","currentLinks","cx","cy","memorizedGraph","neighbours","nodeKey","neighbourKey","clickLink","clickNode","showSavedLines","savedLines","line","lineId","canNotValidate","center","dominant-baseline","text-anchor","showSavedColumns","savedColumns","column","columnId","keyIsDown","cursor","lastElement","convexHalls","groupId","showCorppingRectangle","cropRectangle","startDraggingStart","startDraggingEnd","previousStep","dataQuality","skip","0","1","2","3","batchOfInsights","annnotated","currentlyDragged","lineIterator","columnIterator","savedCellsGraph","boxKey","isSaved","savingDict","dicKey","findIndex","reset","alert","lines","columns","boxId2cellId","cellId","boxId","lineIds","columnIds","row_index","column_index","cell_id","crop","loadOCR","textAnnotationsUrl","Image","onload","listOfInsights","insights","source_image","node1","node2","offsetX","offsetY","previousBoxKey","find","lastBoxKey","lineKey","newTextAnnotations","saveLang","selectedLang","langs","toUpperCase","en","it","fr","de","es","ro","nl","ar","ca","zh","da","he","hu","pt","ru","sv","uk","vi","bg","pl","hr","ko","et","$i18n","locale","data-label","barcodeFilter","valueTagFilter","insightTypeFilter","annotationFilter","loadInsights","resultCount","insight","filterBarcode","getQuestionUrl","formatDatetime","timestamp","completed_at","automatic_processing","currentPage","page-count","pageCount","updatedPage","paginationLabels","first","hasFirst","items","disable","goto","hasLast","last","labels","valPrev","valNext","extraPrev","extraNext","dotsBefore","dotsAfter","Pagination","pageSize","datetime","logo","selected","annotation_type","toggleSelectLogo","editLogoURL","externalLogoURL","toFixed","annotation_value","bounding_box","LogoCardGrid","sendAnnotations","valueInput","typeInput","isValidAnnotation","tabindex","selectLogos","selectedLogos","unselectedLogos","defaultValue","noLogoAvailable","targetLogoId","annCount","loadLogos","results","logo_id","logoData","select","cropURL","annotationValue","annotationType","card","remainingQuestions","fr_labels","zzzzzzzz","setRemainingQuestions","dataLabel","labelData","lab","setLabel","labelLogo","toggle","nbSelected","LOADING","validatedInsights","setTimeout","fetchNewQuestions","refQuestion","refValue","indsighIdAlreadyInQuestions","productIds","productIndex","Vue","use","SuiVue","VueRouter","Viewer","VueI18n","config","productionTip","directive","componentUpdated","firstElementChild","focus","inserted","routes","redirect","component","InsightListView","QuestionView","EcoScoreMenu","SecretTool","NutritionView","NutritionInteractiveView","TableAnnotation","SettingsView","LogoAnnotationView","LogoSearchView","LogoUpdateView","SubsetQuestionView","router","i18n","fallbackLocale","VueMatomo","host","siteId","h","App","$mount","webpackContext","req","webpackContextResolve","e","Error","resolve"],"mappings":"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","file":"js/app.15386f3a.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./NutritionView.vue?vue&type=style&index=0&id=5dbd3b68&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Product.vue?vue&type=style&index=0&id=592dbe0e&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./LogoCardGrid.vue?vue&type=style&index=0&id=4b9a2898&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Menu.vue?vue&type=style&index=0&id=f3b219c4&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./InsightListView.vue?vue&type=style&index=0&id=0ac7f909&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Pagination.vue?vue&type=style&index=0&id=4e54b946&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./LogoSearchView.vue?vue&type=style&index=0&id=ade22f58&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./NutritionInteractiveView.vue?vue&type=style&index=0&id=db4d336a&scoped=true&lang=css\"","<template>\n  <div>\n\n    <Menu />\n    <sui-segment attached=\"bottom\">\n      <router-view />\n    </sui-segment>\n\n  </div>\n</template>\n\n<script>\n\nimport Menu from \"./components/Menu\";\n\nexport default {\n  name: \"app\",\n  components: { Menu },\n  data: function() {\n    return {};\n  }\n};\n</script>\n\n<style scoped>\n.menu-container {\n  margin-bottom: 1rem;\n}\n\n.segment {\n  border: none!important;\n}\n</style>\n","<template>\n  <sui-menu attached=\"top\">\n    <sui-dropdown item icon=\"bars\" simple class=\"mobile only\">\n      <sui-dropdown-menu>\n        <template v-for=\"item in menu\">\n          <sui-dropdown-header v-if=\"!item.to\" :key=\"item.label\">\n            {{ item.label }}\n          </sui-dropdown-header>\n          <sui-dropdown-divider v-if=\"!item.label\" :key=\"item.label\" />\n          <router-link\n            active-class=\"active\"\n            class=\"item\"\n            :to=\"item.to\"\n            :key=\"item.label\"\n            v-if=\"item.to\"\n          >\n            {{ item.label }}\n          </router-link>\n        </template>\n      </sui-dropdown-menu>\n    </sui-dropdown>\n\n    <sui-menu-item class=\"item mobile hidden\">\n      <img src=\"~/../assets/logo.png\" />\n    </sui-menu-item>\n\n    <router-link\n      v-for=\"item in menuItems\"\n      active-class=\"active\"\n      class=\"item mobile hidden\"\n      :to=\"item.to\"\n      :key=\"item.to\"\n    >\n      {{ item.label }}\n    </router-link>\n\n    <sui-menu-menu position=\"right\">\n      <sui-menu-item v-on:click=\"openHelper\" class=\"helpButton\">\n        <sui-icon name=\"help\" />\n      </sui-menu-item>\n    </sui-menu-menu>\n    <Helper :open=\"helperIsOpen\" v-on:close-helper=\"closeHelper\" />\n  </sui-menu>\n</template>\n\n<script>\nimport { localSettings } from \"../settings\";\nimport Helper from \"./Helper\";\n\nconst intialSettings = localSettings.fetch();\nlocalSettings.update(\"tuto-done\", true);\n\nexport default {\n  data: function () {\n    return {\n      menu: [\n        { label: this.$t(\"menu.games\") },\n        { label: this.$t(\"menu.questions\"), to: \"/questions\" },\n        { label: this.$t(\"menu.logos\"), to: \"/logos\" },\n        { label: this.$t(\"menu.eco-score\"), to: \"/eco-score\" },\n        // {label: this.$t('menu.nutritions'), to:'/nutritions'},\n        {},\n        { label: this.$t(\"menu.manage\"), type: \"header\" },\n        { label: this.$t(\"menu.insights\"), to: \"/insights\" },\n        { label: this.$t(\"menu.settings\"), to: \"/settings\" },\n      ],\n      helperIsOpen: !intialSettings[\"tuto-done\"],\n    };\n  },\n  components: { Helper },\n  computed: {\n    menuItems: function () {\n      return this.menu.filter((item) => {\n        return item.to;\n      });\n    },\n  },\n  methods: {\n    closeHelper: function () {\n      this.helperIsOpen = false;\n    },\n    openHelper: function () {\n      this.helperIsOpen = true;\n    },\n  },\n};\n</script>\n\n<style scoped>\n.menu-container {\n  margin-bottom: 1rem;\n}\n.helpButton:hover {\n  cursor: pointer;\n  background-color: rgba(0, 0, 0, 0.05);\n}\n</style>\n","const STORAGE_KEY = 'hunger-game-settings';\n\nexport const localSettings = {\n    fetch: function () {\n        return JSON.parse(localStorage.getItem(STORAGE_KEY) || '{}')\n    },\n    save: function (settings) {\n        localStorage.setItem(STORAGE_KEY, JSON.stringify(settings))\n    },\n    update: function (key, value) {\n        const settings = this.fetch();\n        settings[key] = value\n        this.save(settings);\n    }\n}\n\nexport const getLang = () => {\n    const settings = localSettings.fetch();\n\n    const urlParams = new URLSearchParams(window.location.search)\n    const urlLanguage = urlParams.has(\"language\") && urlParams.get(\"language\")\n\n    return (\n        urlLanguage ||\n        settings.lang ||\n        (navigator.language || navigator.userLanguage).split('-')[0]\n    )\n}\n","<template>\n  <div>\n    <sui-modal :open=\"open\" v-on:changed=\"close\">\n      <sui-modal-content scrolling image>\n        <sui-image\n          wrapped\n          :size=\"helpInformations[pageKey].imageSize || 'medium'\"\n          :src=\"helpInformations[pageKey].imgUrl\"\n        />\n\n        <sui-modal-description>\n          <sui-header>{{ helpInformations[pageKey].title }}</sui-header>\n          <p\n            v-for=\"(text, key) in helpInformations[pageKey].texts\"\n            :key=\"key\"\n            class=\"explanationText\"\n          >\n            {{ text }}\n          </p>\n        </sui-modal-description>\n      </sui-modal-content>\n\n      <sui-segment aligned=\"right\">\n        <sui-progress attached top :percent=\"pageRatio\" color=\"green\" />\n        <sui-button v-if=\"pageIndex > 0\" @click.native=\"prev\">\n          {{ $t(\"helper.previous\") }}\n        </sui-button>\n\n        <sui-button\n          v-if=\"Object.keys(helpInformations).length > pageIndex + 1\"\n          primary\n          @click.native=\"next\"\n        >\n          {{ $t(\"helper.next\") }}\n        </sui-button>\n\n        <sui-button v-else positive @click.native=\"close\">\n          {{ $t(\"helper.close\") }}\n        </sui-button>\n      </sui-segment>\n    </sui-modal>\n  </div>\n</template>\n\n<script>\n// potential image size (default is medium) :\n// \"mini\" | \"tiny\" | \"small\" | \"medium\" | \"large\" | \"big\" | \"huge\" | \"massive\"\nconst explanations = {\n  welcome: {\n    page1: {},\n    page2: {\n      image: \"questionsScreenshot.png\",\n      imageSize: \"huge\",\n    },\n    page3: {\n      image: \"logoGeneral.png\",\n      imageSize: \"huge\",\n    },\n  },\n  logos: {\n    page1: {\n      image: \"logoGeneral.png\",\n    },\n    page2: {\n      image: \"memLogo.png\",\n    },\n    page3: {\n      image: \"logoNameLabel.png\",\n      imageSize: \"large\",\n    },\n  },\n};\n\nconst images = require.context(\"../assets/\", false, /\\.png$/);\nconst getImageUrl = (imageName) => images(\"./\" + (imageName || \"logo.png\"));\n\n// set imageUrl in explanations\nObject.keys(explanations).forEach((urlKey) => {\n  Object.keys(explanations[urlKey]).forEach((pageKey) => {\n    explanations[urlKey][pageKey].imgUrl = getImageUrl(\n      explanations[urlKey][pageKey].image || null\n    );\n  });\n});\n\nconst getHelpInformations = (currentPath, translatedExplanations) => {\n  let currentPathKey = currentPath.slice(1);\n  console.debug(translatedExplanations);\n\n  if (!(currentPathKey in translatedExplanations)) {\n    currentPathKey = \"welcome\";\n  }\n\n  const translations = translatedExplanations[currentPathKey];\n  const rep = {};\n\n  Object.keys(translations).forEach((pageKey) => {\n    const { title, ...texts } = translations[pageKey];\n    rep[pageKey] = {\n      title,\n      texts: { ...texts },\n      ...(explanations[currentPathKey] && explanations[currentPathKey][pageKey]\n        ? explanations[currentPathKey][pageKey]\n        : {}),\n    };\n  });\n  console.debug(rep);\n  return rep;\n};\n\n// const translateHelpInformation = (explanations, rootKey, t) => {\n\n// }\n\nexport default {\n  name: \"IntroductionView\",\n  props: { open: Boolean },\n  data: function() {\n    return {\n      pageIndex: 0,\n      helpInformations: getHelpInformations(\n        this.$router.history.current.path,\n        this.$t(\"helper\")\n      ),\n    };\n  },\n  watch: {\n    $route() {\n      this.helpInformations = getHelpInformations(\n        this.$router.history.current.path,\n        this.$t(\"helper\")\n      );\n      this.pageIndex = 0;\n    },\n  },\n  computed: {\n    pageRatio: function() {\n      if (Object.keys(this.helpInformations).length === 1) {\n        return 100;\n      }\n      return Math.floor(\n        100 * (this.pageIndex / (Object.keys(this.helpInformations).length - 1))\n      );\n    },\n    pageKey: function() {\n      return `page${this.pageIndex + 1}`;\n    },\n  },\n  methods: {\n    close: function() {\n      this.$emit(\"close-helper\");\n    },\n    prev: function() {\n      this.pageIndex = Math.max(0, this.pageIndex - 1);\n    },\n    next: function() {\n      this.pageIndex = Math.min(\n        Object.keys(this.helpInformations).length - 1,\n        this.pageIndex + 1\n      );\n    },\n  },\n};\n</script>\n<style scoped>\n.explanationText {\n  font-size: 1.3rem;\n}\n</style>\n","import { render } from \"./Helper.vue?vue&type=template&id=37b42367&scoped=true\"\nimport script from \"./Helper.vue?vue&type=script&lang=js\"\nexport * from \"./Helper.vue?vue&type=script&lang=js\"\n\nimport \"./Helper.vue?vue&type=style&index=0&id=37b42367&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-37b42367\"\n\nexport default script","import { render } from \"./Menu.vue?vue&type=template&id=f3b219c4&scoped=true\"\nimport script from \"./Menu.vue?vue&type=script&lang=js\"\nexport * from \"./Menu.vue?vue&type=script&lang=js\"\n\nimport \"./Menu.vue?vue&type=style&index=0&id=f3b219c4&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-f3b219c4\"\n\nexport default script","import { render } from \"./App.vue?vue&type=template&id=5dc6acac&scoped=true\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=5dc6acac&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-5dc6acac\"\n\nexport default script","<template>\n  <div class=\"ui grid stackable\">\n    <div class=\"five wide column centered\">\n      <div class=\"insight-column\">\n        <QuestionFilter v-model=\"filters\" />\n        <div class=\"ui divider\" />\n        <div class=\"ui hidden divider\"></div>\n        <div v-if=\"currentQuestion\">\n          <h3>{{ currentQuestion.question }}</h3>\n          <div v-if=\"valueTagQuestionsURL.length\">\n            <router-link :to=\"valueTagQuestionsURL\" target=\"_blank\">\n              <div class=\"ui big label\">\n                {{ currentQuestion.value }}\n                <i\n                  style=\"margin-left: 0.5rem\"\n                  class=\"external alternate icon small blue\"\n                ></i>\n              </div>\n            </router-link>\n          </div>\n          <div v-else>\n            <div class=\"ui big label\">{{ currentQuestion.value }}</div>\n          </div>\n          <div class=\"ui divider hidden\"></div>\n          <cropper\n            style=\"height: 300px; margin:auto\"\n            :src=\"currentQuestionImageUrl\"\n            :transitions=\"false\"\n            :canvas=\"false\"\n            :checkOrientation=\"false\"\n            :crossOrigine=\"false\"\n            :default-position=\"{\n              left: 0,\n              top: 0,\n            }\"\n            :stencilSize=\"\n              ({ boundaries }) => {\n                return {\n                  width: boundaries.width,\n                  height: boundaries.height,\n                };\n              }\n            \"\n            default-boundaries=\"fit\"\n            :stencil-props=\"{\n              handlers: {},\n              movable: false,\n              resizable: false,\n            }\"\n          />\n          <div class=\"ui divider hidden\"></div>\n\n          <div>\n            <button\n              data-inverted\n              data-tooltip=\"Shortcut: N\"\n              class=\"ui big negative button annotate\"\n              @click=\"annotate(0)\"\n            >\n              <i class=\"trash icon\"></i>\n              {{ $t(\"questions.no\") }}\n            </button>\n            <button\n              data-inverted\n              data-tooltip=\"Shortcut: K\"\n              class=\"ui big button annotate\"\n              @click=\"annotate(-1)\"\n            >\n              <i class=\"question icon\"></i>\n              {{ $t(\"questions.skip\") }}\n            </button>\n            <button\n              data-inverted\n              data-tooltip=\"Shortcut: O\"\n              class=\"ui big positive button annotate\"\n              @click=\"annotate(1)\"\n            >\n              <i class=\"check icon\"></i>\n              {{ $t(\"questions.yes\") }}\n            </button>\n          </div>\n        </div>\n        <div class=\"flex-center\" v-else style=\"margin-top: 100px\">\n          <LoadingSpinner :show=\"loading\" />\n          <div v-if=\"noRemainingQuestion\">\n            <h2>{{ $t(\"questions.no_questions_remaining\") }}</h2>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"six wide column centered\">\n      <Product :barcode=\"currentQuestionBarcode\" />\n    </div>\n    <div class=\"three wide column annotation-column\">\n      <AnnotationCounter\n        :remainingCount=\"remainingQuestionCount\"\n        :lastAnnotations=\"lastAnnotations\"\n        :sessionAnnotatedCount=\"sessionAnnotatedCount\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nimport { Cropper } from \"vue-advanced-cropper\";\nimport robotoffService from \"../robotoff\";\nimport { NO_QUESTION_LEFT } from \"../const\";\nimport Product from \"../components/Product\";\nimport LoadingSpinner from \"../components/LoadingSpinner\";\nimport QuestionFilter from \"../components/QuestionFilter/index\";\nimport { getInitialFilterValues } from \"../components/QuestionFilter/filterHelpers\";\n\nimport AnnotationCounter from \"../components/AnnotationCounter\";\n\nconst reformatTagMapping = {\n  \" \": \"-\",\n  \"'\": \"-\",\n  \"&\": \"\",\n  à: \"a\",\n  â: \"a\",\n  ä: \"a\",\n  é: \"e\",\n  è: \"e\",\n  ê: \"e\",\n  ë: \"e\",\n  î: \"i\",\n  ï: \"i\",\n  ô: \"o\",\n  ö: \"o\",\n  û: \"u\",\n  ù: \"u\",\n  ü: \"u\",\n};\n\nconst reformatValueTag = (value) => {\n  let output = value.trim().toLowerCase();\n  for (const [search, replace] of Object.entries(reformatTagMapping)) {\n    output = output.replace(new RegExp(search, \"g\"), replace);\n  }\n  output = output.replace(/-{2,}/g, \"-\");\n  return output;\n};\n\nexport default {\n  name: \"QuestionView\",\n  components: {\n    Product,\n    AnnotationCounter,\n    LoadingSpinner,\n    Cropper,\n    QuestionFilter,\n  },\n  data: function() {\n    return {\n      valueTagTimeout: null,\n      questionBuffer: [],\n      currentQuestion: null,\n      remainingQuestionCount: 0,\n      lastAnnotations: [],\n      sessionAnnotatedCount: 0,\n      seenInsightIds: new Set(),\n      filters: { ...getInitialFilterValues() },\n    };\n  },\n  watch: {\n    filters: {\n      handler: function(newFilters, oldFilters) {\n        if (\n          oldFilters === null ||\n          JSON.stringify(newFilters) !== JSON.stringify(oldFilters)\n        ) {\n          // when filters change reload questions\n          this.loadQuestions(true);\n        }\n      },\n      deep: true,\n    },\n    questionBuffer: function(newBuffer) {\n      // update the current question\n      if (\n        this.questionBuffer.length > 0 &&\n        this.questionBuffer[0] !== NO_QUESTION_LEFT\n      ) {\n        this.currentQuestion = this.questionBuffer[0];\n      } else {\n        this.currentQuestion = null;\n      }\n\n      // Fetch new questions to keep more than 9 questions in the buffer.\n      // Also send request for buffer sizes 0, 1, 2, 3 In cas a network problem occured\n      if (\n        (newBuffer.length == 9 || newBuffer.length < 4) &&\n        !newBuffer.includes(NO_QUESTION_LEFT)\n      ) {\n        this.loadQuestions(false);\n      }\n    },\n  },\n  methods: {\n    loadQuestions: function(clean = false) {\n      if (clean) {\n        this.questionBuffer = [];\n      }\n      const sortBy = this.filters.sortByPopularity ? \"popular\" : \"random\";\n      const count = 10;\n      robotoffService\n        .questions(\n          sortBy,\n          this.filters.selectedInsightType,\n          this.filters.valueTag,\n          reformatValueTag(this.filters.brandFilter),\n          this.filters.countryFilter !== \"en:world\"\n            ? this.filters.countryFilter\n            : null,\n          count\n        )\n        .then((result) => {\n          this.remainingQuestionCount = result.data.count;\n          if (result.data.questions.length == 0) {\n            if (!this.questionBuffer.includes(NO_QUESTION_LEFT)) {\n              if (clean) {\n                this.questionBuffer = [NO_QUESTION_LEFT];\n              } else {\n                this.questionBuffer = [\n                  ...this.questionBuffer,\n                  NO_QUESTION_LEFT,\n                ];\n              }\n            }\n            return;\n          }\n\n          const dataToAdd = [];\n          result.data.questions.forEach((q) => {\n            if (!this.seenInsightIds.has(q.insight_id)) {\n              dataToAdd.push(q);\n              this.seenInsightIds.add(q.insight_id);\n            }\n          });\n          if (\n            result.data.questions.length < count &&\n            (clean || !this.questionBuffer.includes(NO_QUESTION_LEFT))\n          ) {\n            dataToAdd.push(NO_QUESTION_LEFT);\n          }\n          if (clean) {\n            this.questionBuffer = [...dataToAdd];\n          } else {\n            this.questionBuffer = [...this.questionBuffer, ...dataToAdd];\n          }\n        });\n    },\n\n    updateLastAnnotations(question, annotation) {\n      this.lastAnnotations.push({\n        question,\n        annotation,\n      });\n\n      if (this.lastAnnotations.length > 10) {\n        this.lastAnnotations.shift();\n      }\n    },\n    annotate: function(annotation) {\n      if (annotation !== -1) {\n        robotoffService.annotate(this.currentQuestion.insight_id, annotation);\n        this.updateLastAnnotations(this.currentQuestion, annotation);\n        this.remainingQuestionCount -= 1;\n        this.sessionAnnotatedCount += 1;\n      }\n      this.currentQuestion = null;\n      this.questionBuffer = [...this.questionBuffer.slice(1)];\n    },\n    updateRemainingQuestionCount: function(newCount) {\n      this.remainingQuestionCount = newCount;\n    },\n  },\n  computed: {\n    currentQuestionImageUrl: function() {\n      if (this.currentQuestion.source_image_url) {\n        return this.currentQuestion.source_image_url;\n      }\n      return \"https://static.openfoodfacts.org/images/image-placeholder.png\";\n    },\n    loading: function() {\n      return !this.noRemainingQuestion && this.currentQuestion == null;\n    },\n    noRemainingQuestion: function() {\n      return (\n        this.questionBuffer.length === 1 &&\n        this.questionBuffer[0] === NO_QUESTION_LEFT\n      );\n    },\n    currentQuestionBarcode: function() {\n      if (this.currentQuestion && this.currentQuestion !== NO_QUESTION_LEFT) {\n        return this.currentQuestion.barcode;\n      } else {\n        return null;\n      }\n    },\n    valueTagQuestionsURL: function() {\n      if (\n        this.currentQuestion !== null &&\n        this.currentQuestion !== NO_QUESTION_LEFT &&\n        this.currentQuestion.value_tag\n      ) {\n        const urlParams = new URLSearchParams();\n        urlParams.append(\"type\", this.filters.selectedInsightType);\n        urlParams.append(\n          \"value_tag\",\n          reformatValueTag(this.currentQuestion.value_tag)\n        );\n        return `/questions?${urlParams.toString()}`;\n      }\n      return \"\";\n    },\n  },\n  mounted() {\n    const vm = this;\n    this.loadQuestions();\n    window.addEventListener(\"keyup\", function(event) {\n      if (event.target.nodeName == \"BODY\") {\n        if (event.key === \"k\") vm.annotate(-1);\n        if (event.key === \"n\") vm.annotate(0);\n        if (event.key === \"o\") vm.annotate(1);\n        if (event.key === \"p\") vm.rotateImage();\n      }\n    });\n  },\n};\n</script>\n\n<style scoped>\nbutton.annotate {\n  padding: 2rem 2.5rem;\n}\n\n.flex-center {\n  display: flex;\n  justify-content: center;\n}\n\n.insight-column {\n  text-align: center;\n}\n\n.annotation-column {\n  background-color: #686868;\n}\n</style>\n","export const ROBOTOFF_API_URL = \"https://robotoff.openfoodfacts.org/api/v1\";\nexport const OFF_URL = \"https://world.openfoodfacts.org\";\nexport const OFF_API_URL = `${OFF_URL}/api/v0`;\nexport const OFF_IMAGE_URL = \"https://static.openfoodfacts.org/images/products\";\nexport const OFF_SEARCH = \"https://world.openfoodfacts.org/cgi/search.pl\";\n\nexport const NO_QUESTION_LEFT = \"NO_QUESTION_LEFT\";\n","export const updateURLParam = (key, value) => {\n  const urlParams = new URLSearchParams(window.location.search);\n  urlParams.set(key, value);\n  const newRelativePathQuery =\n    window.location.pathname + \"?\" + urlParams.toString();\n  history.pushState(null, \"\", newRelativePathQuery);\n};\n\nexport const setURLParams = (parameters) => {\n  const urlParams = new URLSearchParams();\n  Object.keys(parameters).forEach((key) => {\n    if (parameters[key]) {\n      urlParams.set(key, parameters[key]);\n    }\n  });\n\n  const newRelativePathQuery =\n    window.location.pathname + \"?\" + urlParams.toString();\n  history.pushState(null, \"\", newRelativePathQuery);\n};\n\nexport const deleteURLParam = (key) => {\n  const urlParams = new URLSearchParams(window.location.search);\n\n  if (!urlParams.has(key)) {\n    return;\n  }\n\n  urlParams.delete(key);\n\n  const newRelativePathQuery =\n    window.location.pathname +\n    (urlParams.toString().length ? `?${urlParams.toString()}` : \"\");\n\n  history.pushState(null, \"\", newRelativePathQuery);\n};\n\nexport const getURLParam = (key) => {\n  const urlParams = new URLSearchParams(window.location.search);\n\n  if (!urlParams.has(key)) {\n    return \"\";\n  }\n\n  return urlParams.get(key);\n};\n\nexport const removeEmptyKeys = (obj) => {\n  Object.keys(obj).forEach(\n    (key) => (obj[key] === undefined || obj[key] === \"\") && delete obj[key]\n  );\n  return obj;\n};\n","import axios from 'axios';\nimport { ROBOTOFF_API_URL } from \"./const\"\nimport { getLang } from \"./settings\";\nimport { removeEmptyKeys } from './utils'\n\nexport default {\n\n  annotate(insightId, annotation) {\n    return axios.post(\n      `${ROBOTOFF_API_URL}/insights/annotate`,\n      new URLSearchParams(\n        `insight_id=${insightId}&annotation=${annotation}&update=1`,\n      ),\n      { withCredentials: true },\n    )\n  },\n\n  questionsByProductCode(code) {\n    return axios.get(\n      `${ROBOTOFF_API_URL}/questions/${code}`    \n    ).then(result => {\n      let questions = result.data.questions;\n      result.data.questions = questions.filter(question => question.source_image_url);\n      return result;\n    })\n  },\n\n  questions(sortBy, insightTypes, valueTag, brands, country, count = 10) {\n    const lang = getLang();\n    return axios.get(\n      `${ROBOTOFF_API_URL}/questions/${sortBy}`, {\n      params: removeEmptyKeys({\n        count, lang, insight_types: insightTypes, value_tag: valueTag, brands, country\n      })\n    }\n    ).then(result => {\n      let questions = result.data.questions;\n      result.data.questions = questions.filter(question => question.source_image_url);\n      return result;\n    })\n  },\n\n  loadLogo(logoId) {\n    return axios.get(\n      `${ROBOTOFF_API_URL}/images/logos/${logoId}`\n    )\n  },\n\n  updateLogo(logoId, value, type) {\n    return axios.put(\n      `${ROBOTOFF_API_URL}/images/logos/${logoId}`, removeEmptyKeys({\n        withCredentials: true, value, type\n      })\n    )\n  },\n\n  searchLogos(barcode, value, type, count = 25) {\n    return axios.get(\n      `${ROBOTOFF_API_URL}/images/logos`, {\n      params: removeEmptyKeys({\n        annotated: 1, barcode, value, type, count\n      })\n    }\n    )\n  },\n\n  getLogoAnnotations(logoId, index, count) {\n    const url = logoId.length > 0\n      ? `${ROBOTOFF_API_URL}/ann/${logoId}`\n      : `${ROBOTOFF_API_URL}/ann`;\n    return axios.get(\n      url, {\n      params: removeEmptyKeys({\n        index, count\n      })\n    }\n    )\n  },\n\n  annotateLogos(annotations) {\n    return axios.post(\n      `${ROBOTOFF_API_URL}/images/logos/annotate`, removeEmptyKeys(\n        {\n          withCredentials: true, annotations,\n        }\n      )\n    )\n  },\n\n  getInsights(barcode, insightTypes, valueTag, annotation, page, count = 25) {\n    let annotated\n    if (annotation.length && annotation == \"not_annotated\") {\n      annotated = \"0\";\n    }\n    return axios.get(\n      `${ROBOTOFF_API_URL}/insights`, {\n      params: removeEmptyKeys({\n        barcode, insight_types: insightTypes,\n        value_tag: valueTag, annotation, page,\n        annotated, count\n      })\n    }\n    )\n  },\n\n  getUserStatistics(username) {\n    return axios.get(`${ROBOTOFF_API_URL}/users/statistics/${username}`)\n  },\n\n  getCroppedImageUrl(imageUrl, boundingBox) {\n    const [y_min, x_min, y_max, x_max] = boundingBox;\n    return `${ROBOTOFF_API_URL}/images/crop?image_url=${imageUrl}&y_min=${y_min}&x_min=${x_min}&y_max=${y_max}&x_max=${x_max}`;\n  },\n\n  getLogosImages(logoIds) {\n    return axios.get(\n      `${ROBOTOFF_API_URL}/images/logos?logo_ids=${logoIds.join(\",\")}`\n    )\n  }\n}\n","<template>\n  <div v-if=\"loaded\" class=\"product-card\">\n    <h3>{{ productName }}</h3>\n\n    <a target=\"_blank\" :href=\"productUrl\" class=\"ui button primary\">{{\n      $t(\"questions.view\")\n    }}</a>\n\n    <a target=\"_blank\" :href=\"productEditUrl\" class=\"ui button\">{{\n      $t(\"questions.edit\")\n    }}</a>\n\n    <div class=\"ui divider\"></div>\n\n    <div v-if=\"imagesPreview.length > 0\">\n      <div class=\"ui basic segment\">\n        <sui-checkbox v-model=\"hideImage\">\n          {{ $t(\"questions.hide_images\") }}\n        </sui-checkbox>\n      </div>\n\n      <viewer\n        :images=\"imagesPreview\"\n        :options=\"imageZoomOptions\"\n        v-if=\"!hideImage\"\n      >\n        <img\n          :src=\"url\"\n          v-for=\"url in imagesPreview\"\n          :key=\"url\"\n          loading=\"lazy\"\n          style=\"max-height: 200px; max-width: 200px; margin-right: 3px\"\n        />\n      </viewer>\n      <div class=\"ui divider\"></div>\n    </div>\n    <p v-if=\"brands\">\n      <strong>{{ $t(\"questions.brands\") }} :</strong>\n      {{ brands }}\n    </p>\n    <p v-if=\"ingredientsText\">\n      <strong>{{ $t(\"questions.ingredients\") }}:</strong>\n      {{ ingredientsText }}\n    </p>\n    <p v-if=\"countries\">\n      <strong>{{ $t(\"questions.countries\") }}:</strong>\n      {{ countries }}\n    </p>\n  </div>\n</template>\n\n<script>\nimport { localSettings } from \"../settings\";\nimport { countryMap } from \"../countries\";\nimport offService from \"../off\";\n\nconst BARCODE_REGEX = /(...)(...)(...)(.*)$/;\nconst splitBarcode = (barcode) => {\n  const match = BARCODE_REGEX.exec(barcode);\n\n  if (match !== null) {\n    match.shift();\n    return match;\n  }\n\n  return [barcode];\n};\n\nconst getImageRootURL = (barcode) => {\n  const splittedBarcode = splitBarcode(barcode);\n\n  if (splittedBarcode === null) {\n    return null;\n  }\n  return offService.getImageUrl(splittedBarcode.join(\"/\"));\n};\n\nexport default {\n  name: \"Product\",\n  props: [\"barcode\"],\n\n  data: function () {\n    return {\n      hideImage: localSettings.fetch()[\"hideImage\"] || false,\n\n      productName: \"\",\n      brands: \"\",\n      ingredientsText: \"\",\n      countriesTags: [],\n      images: {},\n      loaded: false,\n      imageZoomOptions: {\n        toolbar: {\n          rotateLeft: 1,\n          rotateRight: 1,\n        },\n      },\n    };\n  },\n\n  watch: {\n    barcode: function (value) {\n      if (value) {\n        this.update();\n      } else {\n        this.productName = \"\";\n        this.brands = \"\";\n        this.ingredientsText = \"\";\n        this.countriesTags = [];\n        this.images = {};\n        this.loaded = false;\n      }\n    },\n\n    hideImage: function (value) {\n      localSettings.update(\"hideImage\", value);\n    },\n  },\n  methods: {\n    update: function () {\n      offService.getProduct(this.barcode).then((result) => {\n        const product = result.data.product;\n        this.productName = product.product_name || \"\";\n        this.brands = product.brands || \"\";\n        this.ingredientsText = product.ingredients_text || \"\";\n        this.countriesTags = product.countries_tags || [];\n        this.images = product.images || {};\n        this.loaded = true;\n      });\n    },\n  },\n  computed: {\n    productUrl: function () {\n      if (this.barcode === null) {\n        return \"\";\n      }\n      return offService.getProductUrl(this.barcode);\n    },\n    productEditUrl: function () {\n      if (this.barcode === null) {\n        return \"\";\n      }\n      return offService.getProductEditUrl(this.barcode);\n    },\n    countries: function () {\n      return this.countriesTags.map((c) => countryMap[c]).join(\", \");\n    },\n    imagesPreview: function () {\n      const imagesDisplayUrl = [];\n      for (const key of Object.keys(this.images)) {\n        if (!isNaN(key)) {\n          const imageUrl = `${getImageRootURL(this.barcode)}/${key}.jpg`;\n          imagesDisplayUrl.push(imageUrl);\n        }\n      }\n      return imagesDisplayUrl;\n    },\n  },\n  mounted() {\n    if (this.barcode) {\n      this.update();\n    }\n  },\n};\n</script>\n\n<style scoped>\n@media only screen and (max-width: 767px) {\n  .product-card {\n    text-align: center;\n  }\n}\n\n.product-image {\n  max-width: 250px;\n  max-height: 250px;\n  margin: 0 3px;\n}\n</style>\n","import countries from \"./data/countries\";\n\n\nexport const countryMap = function () {\n    const countryMap = {};\n    countries.forEach(c => {\n        countryMap[c.id] = c.label;\n    })\n    return countryMap;\n}();","import { getLang } from \"./settings\";\nimport { OFF_API_URL, OFF_IMAGE_URL, OFF_SEARCH } from \"./const\";\nimport axios from \"axios\";\nimport combineURLs from \"axios/lib/helpers/combineURLs\";\n\nexport default {\n  getCookie(name) {\n    const cookies = document.cookie\n      .split(\";\")\n      .filter((item) => item.trim().startsWith(`${name}=`));\n    if (cookies.length) {\n      const cookie = cookies[0];\n      return cookie.split(\"=\", 2)[1];\n    }\n    return \"\";\n  },\n\n  getUsername() {\n    const sessionCookie = this.getCookie(\"session\");\n\n    if (!sessionCookie.length) {\n      return \"\";\n    }\n\n    let isNext = false;\n    let username = \"\";\n    sessionCookie.split(\"&\").forEach((el) => {\n      if (el === \"user_id\") {\n        isNext = true;\n      } else if (isNext) {\n        username = el;\n        isNext = false;\n      }\n    });\n    return username;\n  },\n\n  getProduct(barcode) {\n    return axios.get(\n      `${OFF_API_URL}/product/${barcode}.json?fields=product_name,brands,ingredients_text,countries_tags,images`\n    );\n  },\n\n  getProductUrl(barcode) {\n    const lang = getLang();\n    return `https://world${\n      lang === \"en\" ? \"\" : \"-\" + lang\n    }.openfoodfacts.org/product/${barcode}`;\n  },\n\n  getProductEditUrl(barcode) {\n    const lang = getLang();\n    return `https://world${\n      lang === \"en\" ? \"\" : \"-\" + lang\n    }.openfoodfacts.org/cgi/product.pl?type=edit&code=${barcode}`;\n  },\n\n  getImageUrl(imagePath) {\n    return combineURLs(OFF_IMAGE_URL, imagePath);\n  },\n\n  getTableExtractionAI({ img, x0, y0, x1, y1 }) {\n    return `https://off-nutri-test.azurewebsites.net/api/get-nutri-table?name=${img}%7C(${x0},${y0},${x1},${y1})`;\n  },\n\n  getNutritionToFillUrl({ page, country, creator, category, code = false }) {\n    if (code) {\n      return `https://world.openfoodfacts.org/api/v0/product/${code}.json?fields=code,states,lang,image_nutrition_url,product_name,nutriments,images,creator,countries`;\n    }\n    let creatorTagNumber = 2;\n    let categoryTagNumber = 2;\n    if (country) {\n      creatorTagNumber += 1;\n      categoryTagNumber += 1;\n    }\n    if (creator) {\n      categoryTagNumber += 1;\n    }\n\n    return `${OFF_SEARCH}?json=true&${\n      page ? `page=${page}&` : \"\"\n    }fields=code,states,lang,image_nutrition_url,product_name,nutriments,images,creator,countries&action=process&sort_by=last_modified_t&tagtype_0=states&tag_contains_0=contains&tag_0=photos-validated&tagtype_1=states&tag_contains_1=contains&tag_1=nutrition-facts-to-be-completed${\n      country\n        ? `&tagtype_2=countries&tag_contains_2=contains&tag_2=${country}`\n        : \"\"\n    }${\n      creator\n        ? `&tagtype_${creatorTagNumber}=creator&tag_contains_${creatorTagNumber}=contains&tag_${creatorTagNumber}=${creator}`\n        : \"\"\n    }\n      ${\n        category\n          ? `&tagtype_${categoryTagNumber}=categories&tag_contains_${categoryTagNumber}=contains&tag_${categoryTagNumber}=${category}`\n          : \"\"\n      }`;\n  },\n};\n","import { render } from \"./Product.vue?vue&type=template&id=592dbe0e&scoped=true\"\nimport script from \"./Product.vue?vue&type=script&lang=js\"\nexport * from \"./Product.vue?vue&type=script&lang=js\"\n\nimport \"./Product.vue?vue&type=style&index=0&id=592dbe0e&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-592dbe0e\"\n\nexport default script","<template>\n  <div :class=\"{centered: centered}\">\n    <div class=\"ui active inline loader\" v-if=\"show\" :class=\"[size]\"></div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"LoadingSpinner\",\n  props: {\n    show: {\n      type: Boolean,\n      required: true\n    },\n    centered: {\n      type: Boolean,\n      required: false,\n      default: true\n    },\n    size: {\n      type: String,\n      required: false,\n      default: 'huge'\n    }\n  }\n};\n</script>\n\n<style scoped>\n.centered {\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n}\n</style>\n","import { render } from \"./LoadingSpinner.vue?vue&type=template&id=66aae622&scoped=true\"\nimport script from \"./LoadingSpinner.vue?vue&type=script&lang=js\"\nexport * from \"./LoadingSpinner.vue?vue&type=script&lang=js\"\n\nimport \"./LoadingSpinner.vue?vue&type=style&index=0&id=66aae622&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-66aae622\"\n\nexport default script","<template>\n  <div class=\"root\">\n    <div>\n      <sui-dropdown\n        class=\"ui label blue large\"\n        :text=\"$t('questions.' + value.selectedInsightType)\"\n      >\n        <sui-dropdown-menu>\n          <sui-dropdown-item\n            v-for=\"insightType of availableInsightTypes\"\n            :key=\"insightType\"\n            @click=\"selectDirectlyInsightType(insightType)\"\n            >{{ $t(\"questions.\" + insightType) }}</sui-dropdown-item\n          >\n        </sui-dropdown-menu>\n      </sui-dropdown>\n\n      <div v-if=\"value.valueTag\" class=\"ui label large\">\n        {{ $t(\"questions.filters.short_label.value\") }}: {{ value.valueTag\n        }}<i class=\"icon close\" @click=\"removeFilter('valueTag')\"></i>\n      </div>\n      <div v-if=\"value.countryFilter\" class=\"ui label large\">\n        {{ $t(\"questions.filters.short_label.country\") }}:\n        {{ value.countryFilter\n        }}<i class=\"icon close\" @click=\"removeFilter('countryFilter')\"></i>\n      </div>\n      <div v-if=\"value.brandFilter\" class=\"ui label large\">\n        {{ $t(\"questions.filters.short_label.brand\") }}: {{ value.brandFilter\n        }}<i class=\"icon close\" @click=\"removeFilter('brandFilter')\"></i>\n      </div>\n      <div v-if=\"value.sortByPopularity\" class=\"ui label large\">\n        {{ $t(\"questions.filters.short_label.popularity\")\n        }}<i class=\"icon close\" @click=\"removeFilter('sortByPopularity')\"></i>\n      </div>\n    </div>\n    <div v-if=\"formIsClose\" class=\"openForm\">\n      <button class=\"ui button\" @click=\"openForm\">\n        <i class=\"icon edit\" />{{ $t(\"questions.filters.actions.edit\") }}\n      </button>\n    </div>\n    <div v-else>\n      <div class=\"ui divider\" />\n      <div class=\"ui form styled\">\n        <div class=\"field\">\n          <label>{{ $t(\"questions.filters.long_label.type\") }}</label>\n          <button\n            class=\"ui button\"\n            :class=\"{\n              primary: insightType === formValues.selectedInsightType,\n            }\"\n            v-for=\"insightType of availableInsightTypes\"\n            :key=\"insightType\"\n            @click=\"selectInsightType(insightType)\"\n          >\n            {{ $t(\"questions.\" + insightType) }}\n          </button>\n        </div>\n\n        <div class=\"ui field\">\n          <label>{{ $t(\"questions.filters.long_label.value\") }}</label>\n          <div class=\"ui icon input \">\n            <input\n              :placeholder=\"$t('questions.filters.placeholders.value')\"\n              v-model=\"formValues.valueTag\"\n            />\n            <i\n              @click=\"clearFormField('valueTag')\"\n              v-if=\"formValues.valueTag\"\n              class=\"times link icon\"\n            ></i>\n          </div>\n        </div>\n\n        <div class=\"ui field\">\n          <label>{{ $t(\"questions.filters.long_label.country\") }}</label>\n          <select class=\"ui fluid dropdown\" v-model=\"formValues.countryFilter\">\n            <option value=\"\">World</option>\n            <option\n              :value=\"country\"\n              v-for=\"country in countryNames\"\n              :key=\"country\"\n              >{{ country.slice(3) }}</option\n            >\n          </select>\n        </div>\n\n        <div class=\"field\">\n          <label>{{ $t(\"questions.filters.long_label.brand\") }}</label>\n          <sui-dropdown\n            :options=\"populateBrandFilter ? brands : []\"\n            v-model=\"formValues.brandFilter\"\n            :text=\"$t('questions.filters.placeholders.brand')\"\n            search\n            fluid\n            selection\n            v-on:filtered=\"setPopulateBrandFilter\"\n          />\n        </div>\n\n        <div class=\"ui segment\">\n          <div class=\"field\">\n            <div class=\"ui toggle checkbox\">\n              <input\n                v-model=\"formValues.sortByPopularity\"\n                type=\"checkbox\"\n                name=\"sortBy\"\n              />\n              <label>{{ $t(\"questions.popularity_sort\") }}</label>\n            </div>\n          </div>\n        </div>\n        <div class=\"ui actions\">\n          <button class=\"ui button\" @click=\"resetForm\">\n            {{ $t(\"questions.filters.actions.cancel\") }}\n          </button>\n          <button class=\"ui primary button\" @click=\"validateForm\">\n            {{ $t(\"questions.filters.actions.apply\") }}\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { setURLParams } from \"../../utils\";\nimport { countryNames, insightTypesNames, key2urlParam } from \"./const\";\n\nexport default {\n  props: [\"value\"],\n  data() {\n    return {\n      availableInsightTypes: insightTypesNames,\n      countryNames,\n      formIsClose: true,\n      formValues: {},\n      brands: undefined,\n      populateBrandFilter: false,\n    };\n  },\n  mounted() {\n    this.formValues = { ...this.$props.value };\n    this.updateURLParams(this.formValues);\n  },\n  methods: {\n    openForm: function() {\n      this.formIsClose = false;\n      this.loadBrands();\n    },\n    closeForm: function() {\n      this.formIsClose = true;\n      this.populateBrandFilter = false;\n    },\n    selectInsightType: function(insightType) {\n      this.formValues.selectedInsightType = insightType;\n    },\n    selectDirectlyInsightType: function(insightType) {\n      if (this.$props.value.selectedInsightType !== insightType) {\n        this.formValues.selectedInsightType = insightType;\n        this.formValues.valueTag = \"\";\n        this.validateForm();\n      }\n    },\n    clearFormField: function(key) {\n      this.formValues[key] = \"\";\n    },\n\n    updateURLParams: function(params) {\n      const urlParams = {};\n      Object.keys(params).forEach((key) => {\n        const value =\n          key === \"sortByPopularity\"\n            ? params.sortByPopularity || \"\"\n            : params[key];\n        urlParams[key2urlParam[key]] = value;\n      });\n\n      setURLParams(urlParams);\n    },\n    validateForm: function() {\n      this.$emit(\"input\", { ...this.formValues });\n      this.updateURLParams(this.formValues);\n\n      this.closeForm();\n    },\n    resetForm: function() {\n      this.formValues = { ...this.$props.value };\n\n      this.closeForm();\n    },\n    removeFilter: function(filterKey) {\n      this.formValues = {\n        ...this.formValues,\n        [filterKey]: filterKey === \"sortByPopularity\" ? false : \"\",\n      };\n      this.$emit(\"input\", {\n        ...this.$props.value,\n        [filterKey]: filterKey === \"sortByPopularity\" ? false : \"\",\n      });\n    },\n    loadBrands: async function() {\n      // Load list of brand when fields is acivated\n      if (this.brands === undefined) {\n        this.brands = []; // set empty list to avoid multiple trigge of the json loading\n        const images = require.context(\"../../assets/\", false, /\\.json$/);\n        this.brands = images(\"./brands.json\").map((x) => ({\n          text: x,\n          value: x,\n          key: x,\n        }));\n      }\n    },\n    setPopulateBrandFilter: function() {\n      this.populateBrandFilter = true;\n    },\n  },\n};\n</script>\n\n<style scoped>\n.root {\n  text-align: start;\n}\n.openForm {\n  width: 100%;\n  text-align: center;\n}\n</style>\n","export const countryNames = [\n  \"en:belgium\",\n  \"en:denmark\",\n  \"en:france\",\n  \"en:germany\",\n  \"en:italy\",\n  \"en:netherlands\",\n  \"en:portugal\",\n  \"en:spain\",\n  \"en:sweden\",\n  \"en:switzerland\",\n  \"en:united-states\",\n  \"en:canada\",\n  \"en:australia\",\n  \"en:united-kingdom\",\n];\n\nexport const insightTypesNames = {\n  label: \"label\",\n  category: \"category\",\n  brand: \"brand\",\n  product_weight: \"product_weight\",\n};\n\nexport const key2urlParam = {\n  valueTag: \"value_tag\",\n  brandFilter: \"brand\",\n  countryFilter: \"country\",\n  selectedInsightType: \"type\",\n  sortByPopularity: \"sorted\",\n};\n","import { render } from \"./index.vue?vue&type=template&id=27d0d616&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=27d0d616&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-27d0d616\"\n\nexport default script","import { getURLParam } from \"../../utils\";\n\nconst randomInsightTypeChoices = [\"label\", \"category\", \"brand\"];\n\nconst getRandomInsightType = () =>\n  randomInsightTypeChoices[\n    Math.floor(randomInsightTypeChoices.length * Math.random())\n  ];\n\nconst getInitialInsightType = () => {\n  const urlParamValue = getURLParam(\"type\");\n\n  if (urlParamValue.length) {\n    return urlParamValue;\n  }\n\n  return getRandomInsightType();\n};\n\nexport const getInitialFilterValues = () => {\n  return {\n    valueTag: getURLParam(\"value_tag\"),\n    brandFilter: getURLParam(\"brand\"),\n    countryFilter: getURLParam(\"country\"),\n    selectedInsightType: getInitialInsightType(),\n    sortByPopularity: !!getURLParam(\"sorted\"),\n  };\n};\n","<template>\n  <div class=\"main-column\">\n    <h3>{{$t('questions.annotations')}}</h3>\n    <p>\n      {{$t('questions.remaining_annotations')}}\n      <strong>{{ remainingCount }}</strong>\n    </p>\n    <p>\n      {{$t('questions.annotated_annotations')}}:\n      <strong>{{ annotatedCount }}</strong>\n    </p>\n    <div class=\"ui divider\" />\n    <h3>{{$t('questions.last_annotations')}}</h3>\n    <div v-for=\"annotation in sortedLastAnnotations\" :key=\"annotation.question.insight_id\">\n      <a\n        target=\"_blank\"\n        :href=\"getProductUrl(annotation.question.barcode)\"\n      >{{ annotation.question.insight_type }}: {{ annotation.question.value }}</a>\n      <i v-if=\"annotation.annotation == 1\" class=\"check green icon\"></i>\n      <i v-else-if=\"annotation.annotation == -1\" class=\"question icon\"></i>\n      <i v-else-if=\"annotation.annotation == 0\" class=\"times red icon\"></i>\n    </div>\n  </div>\n</template>\n\n<script>\nimport robotoffService from \"../robotoff\";\nimport offService from \"../off\";\n\nexport default {\n  name: \"AnnotationCounter\",\n  props: {\n    remainingCount: {\n      type: Number,\n      required: true\n    },\n    lastAnnotations: {\n      type: Array,\n      required: true\n    },\n    sessionAnnotatedCount: {\n      type: Number,\n      required: true\n    }\n  },\n  data: function() {\n    return {\n      username: offService.getUsername(),\n      historyAnnotatedCount: 0\n    };\n  },\n  methods: {\n    getProductUrl: function(barcode) {\n      return offService.getProductUrl(barcode);\n    }\n  },\n  computed: {\n    sortedLastAnnotations: function() {\n      const lastAnnotations = this.lastAnnotations.slice();\n      return lastAnnotations.reverse();\n    },\n    annotatedCount: function() {\n      return this.historyAnnotatedCount + this.sessionAnnotatedCount;\n    }\n  },\n  mounted() {\n    if (this.username.length) {\n      robotoffService\n        .getUserStatistics(this.username)\n        .then(result => {\n          this.historyAnnotatedCount = result.data.count.annotations;\n        })\n        .catch(error => window.console.log(error));\n    }\n  }\n};\n</script>\n\n<style scoped>\n.main-column {\n  padding: 1.5rem 1.5rem;\n  background-color: #686868;\n  color: #ffffff;\n}\n\na {\n  color: #ffffff;\n}\n</style>\n","import { render } from \"./AnnotationCounter.vue?vue&type=template&id=11ffedee&scoped=true\"\nimport script from \"./AnnotationCounter.vue?vue&type=script&lang=js\"\nexport * from \"./AnnotationCounter.vue?vue&type=script&lang=js\"\n\nimport \"./AnnotationCounter.vue?vue&type=style&index=0&id=11ffedee&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-11ffedee\"\n\nexport default script","import { render } from \"./QuestionView.vue?vue&type=template&id=1e9968b6&scoped=true\"\nimport script from \"./QuestionView.vue?vue&type=script&lang=js\"\nexport * from \"./QuestionView.vue?vue&type=script&lang=js\"\n\nimport \"./QuestionView.vue?vue&type=style&index=0&id=1e9968b6&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-1e9968b6\"\n\nexport default script","<template>\n  <div class=\"ui grid stackable\">\n    <div class=\"four wide column centered\">\n      <div v-if=\"bufferIsEmpty\">\n        <p v-if=\"loading\">Loading ...</p>\n        <p v-else>No remaining images</p>\n      </div>\n      <div v-else class=\"insight-column\">\n        <h3>{{ productName }}</h3>\n        <a target=\"_blank\" :href=\"productUrl\" class=\"ui button primary\">{{\n          $t(\"questions.view\")\n        }}</a>\n        <a target=\"_blank\" :href=\"productEditUrl\" class=\"ui button\">{{\n          $t(\"questions.edit\")\n        }}</a>\n        <div class=\"ui divider\"></div>\n        <viewer :options=\"imageZoomOptions\" style=\"height: 300px\">\n          <img\n            :class=\"[imageRotationClass]\"\n            :src=\"productBuffer[0]['image_nutrition_url']\"\n            style=\"max-height: 300px;\n          max-width: 300px;\"\n          />\n        </viewer>\n      </div>\n    </div>\n    <div class=\"ten wide column centered\">\n      <sui-table celled definition>\n        <sui-table-header>\n          <sui-table-header-cell />\n          <sui-table-header-cell>{{\n            $t(\"nutrition.table.value\")\n          }}</sui-table-header-cell>\n          <sui-table-header-cell>{{\n            $t(\"nutrition.table.ispresent\")\n          }}</sui-table-header-cell>\n        </sui-table-header>\n        <sui-table-row\n          v-for=\"nutritiveValue in currentProductData\"\n          :key=\"nutritiveValue.id\"\n        >\n          <sui-table-cell>{{\n            $t(`nutrition.nutriments.${nutritiveValue.id}`)\n          }}</sui-table-cell>\n          <sui-table-cell style=\"display: flex\">\n            <sui-input\n              :disabled=\"!nutritiveValue.visible\"\n              style=\"flex-grow:1\"\n              :error=\"isInvalid(currentProductData[nutritiveValue.id]['data'])\"\n              v-model=\"currentProductData[nutritiveValue.id]['data']\"\n            />\n\n            <sui-dropdown\n              :disabled=\"!nutritiveValue.visible\"\n              style=\"min-width: 3rem\"\n              selection\n              :placeholder=\"$t('nutrition.table.unit')\"\n              v-if=\"getNutrimentUnits(nutritiveValue.id).length > 1\"\n              v-model=\"currentProductData[nutritiveValue.id]['unit']\"\n              :options=\"getNutrimentUnits(nutritiveValue.id)\"\n              class=\"unit\"\n            />\n\n            <span class=\"unit\" v-else>{{\n              getNutrimentUnits(nutritiveValue.id)[0]\n            }}</span>\n          </sui-table-cell>\n          <sui-table-cell>\n            <sui-checkbox\n              name=\"public\"\n              :label=\"\n                nutritiveValue.visible\n                  ? $t('nutrition.present')\n                  : $t('nutrition.absent')\n              \"\n              v-model=\"currentProductData[nutritiveValue.id]['visible']\"\n            />\n          </sui-table-cell>\n        </sui-table-row>\n      </sui-table>\n      <div>\n        <button\n          data-tooltip=\"Shortcut: d\"\n          class=\"ui button red annotate\"\n          @click=\"deleteProduct()\"\n        >\n          {{ $t(\"nutrition.delete\") }}\n        </button>\n        <button\n          data-tooltip=\"Shortcut: k\"\n          class=\"ui button annotate\"\n          @click=\"skipProduct()\"\n        >\n          {{ $t(\"nutrition.skip\") }}\n        </button>\n        <button\n          data-tooltip=\"Shortcut: v\"\n          class=\"ui button green annotate\"\n          @click=\"validate()\"\n        >\n          {{ $t(\"nutrition.validate\") }}\n        </button>\n      </div>\n    </div>\n\n    <!-- <div class=\"six wide column centered\">\n      <Product :barcode=\"currentQuestionBarcode\" />\n    </div>\n    <div class=\"three wide column annotation-column\">\n      <AnnotationCounter\n        :remainingCount=\"remainingQuestionCount\"\n        :lastAnnotations=\"lastAnnotations\"\n        :sessionAnnotatedCount=\"sessionAnnotatedCount\"\n      />\n    </div>-->\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n// import { localSettings } from \"../settings\";\nimport nutrimentsDefaultUnit from \"../data/nutritions\";\nimport { OFF_URL } from \"../const\";\nimport offService from \"../off\";\n// import { annotate as robotoffAnnotate } from \"../robotoff\";\n// import Product from \"../components/Product\";\n// import AnnotationCounter from \"../components/AnnotationCounter\";\n\nconst getProducts = async (nbOfPages) => {\n  const randomPage = Math.floor(Math.random() * nbOfPages);\n  const {\n    data: { products },\n  } = await axios(\n    `${OFF_URL}/state/photos-validated/state/nutrition-facts-to-be-completed/${randomPage}.json?fields=code,lang,image_nutrition_url,product_name`\n  );\n  return products;\n};\n\nexport default {\n  name: \"NutritionView\",\n  components: {},\n  data: function() {\n    return {\n      valueTagInput: \"\",\n      imageZoomOptions: {\n        toolbar: {\n          rotateLeft: 1,\n          rotateRight: 1,\n        },\n      },\n      loading: false,\n      productBuffer: [],\n      currentProductData: {},\n    };\n  },\n  computed: {\n    productName: function() {\n      if (\n        this.productBuffer.length === 0 ||\n        this.productBuffer[0].product_name === null\n      ) {\n        return \"\";\n      }\n      return this.productBuffer[0].product_name;\n    },\n    productUrl: function() {\n      if (\n        this.productBuffer.length === 0 ||\n        this.productBuffer[0].code === null\n      ) {\n        return \"\";\n      }\n      return offService.getProductUrl(this.productBuffer[0].code);\n    },\n    productEditUrl: function() {\n      if (\n        this.productBuffer.length === 0 ||\n        this.productBuffer[0].code === null\n      ) {\n        return \"\";\n      }\n      return offService.getProductEditUrl(this.productBuffer[0].code);\n    },\n    bufferIsEmpty: function() {\n      return this.productBuffer.length === 0;\n    },\n  },\n  methods: {\n    isInvalid(value) {\n      return !value.match(\"^((<|>|<=|>=|~|.)*[0-9]+| *)$\");\n    },\n    clearValueTagInput() {\n      this.valueTagInput = \"\";\n    },\n    addProducts: async function() {\n      this.loading = true;\n      const newProducts = await getProducts(20);\n      this.productBuffer = this.productBuffer.concat(newProducts);\n      this.loading = false;\n    },\n    skipProduct() {\n      this.productBuffer.shift();\n    },\n    deleteProduct() {\n      const imageUrl = this.productBuffer[0][\"image_nutrition_url\"];\n      const imageId = imageUrl\n        .split(\"/\")\n        .pop()\n        .split(\".\")[0]; //get the first part of the image off/.../nutrition_fr.400.jpg => nutrition_fr\n\n      axios.post(\n        `${OFF_URL}/cgi/product_image_unselect.pl?`,\n        new URLSearchParams(`code=${this.productBuffer[0].code}&id=${imageId}`)\n      );\n\n      // this.productBuffer.shift();\n    },\n    validate() {\n      const toDelete = Object.keys(this.currentProductData).filter(\n        (nutrimentId) => !this.currentProductData[nutrimentId].visible\n      );\n      const toFill = Object.keys(this.currentProductData)\n        .filter(\n          (nutrimentId) =>\n            this.currentProductData[nutrimentId] &&\n            this.currentProductData[nutrimentId].visible &&\n            this.currentProductData[nutrimentId].data &&\n            this.isInvalid(this.currentProductData[nutrimentId].data) &&\n            this.currentProductData[nutrimentId].data.length > 0\n        )\n        .map((nutrimentId) => ({\n          name: nutrimentId,\n          value: `${this.currentProductData[nutrimentId].data}${this\n            .currentProductData[nutrimentId].unit || \"\"}`,\n          quantity: this.currentProductData[nutrimentId].data,\n          unit: this.currentProductData[nutrimentId].unit,\n        }));\n\n      axios.post(\n        `${OFF_URL}/cgi/product_jqm2.pl?`,\n        new URLSearchParams(\n          `${toFill\n            .map((data) => `${data.name}=${data.quantity}&`)\n            .join(\"\")}${toFill\n            .map((data) => (data.unit ? `${data.name}_unit=${data.unit}&` : \"\"))\n            .join(\"\")}${toDelete.map((name) => `${name}=\"\"&`).join(\"\")}code=${\n            this.productBuffer[0][\"code\"]\n          }`\n        )\n      ); // The status of the response is not displayed so no need to wait the response\n    },\n    resetProductData() {\n      const data = {};\n\n      for (const nutrimentId of Object.keys(nutrimentsDefaultUnit)) {\n        data[nutrimentId] = {\n          id: nutrimentId,\n          data: \"\",\n          unit: nutrimentsDefaultUnit[nutrimentId],\n          visible: true,\n        };\n      }\n      this.currentProductData = data;\n    },\n    getNutrimentUnits(nutrimentId) {\n      switch (nutrimentId) {\n        case \"nutriment_energy-kcal\":\n          return [\"kcal\"];\n        case \"nutriment_energy-kj\":\n          return [\"kJ\"];\n        default:\n          return [\n            { text: \"g\", value: \"g\" },\n            { text: \"mg\", value: \"mg\" },\n          ];\n      }\n    },\n  },\n  watch: {\n    productBuffer: function(newProductBuffer, oldProductBuffer) {\n      if (newProductBuffer.length <= 5 && !this.loading) {\n        this.addProducts();\n      }\n      if (\n        newProductBuffer[0] &&\n        (!oldProductBuffer[0] ||\n          newProductBuffer[0].code !== oldProductBuffer[0].code)\n      ) {\n        //if we have a product to display, and this product just changed\n        this.resetProductData();\n      }\n    },\n  },\n  mounted: function() {\n    this.addProducts();\n\n    const vm = this;\n    window.addEventListener(\"keyup\", function(event) {\n      if (event.target.nodeName == \"BODY\") {\n        if (event.key === \"k\") vm.skipProduct();\n        if (event.key === \"v\") vm.validate();\n      }\n    });\n  },\n};\n</script>\n\n<style scoped>\n.shadow {\n  opacity: 0.2;\n}\n.unit {\n  margin-left: 1rem;\n}\nbutton.annotate {\n  padding: 2rem 2.5rem;\n}\n</style>\n","import { render } from \"./NutritionView.vue?vue&type=template&id=5dbd3b68&scoped=true\"\nimport script from \"./NutritionView.vue?vue&type=script&lang=js\"\nexport * from \"./NutritionView.vue?vue&type=script&lang=js\"\n\nimport \"./NutritionView.vue?vue&type=style&index=0&id=5dbd3b68&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-5dbd3b68\"\n\nexport default script","<template>\n  <div class=\"ui grid stackable\">\n    <div class=\"eight wide column centered\">\n      <!--four wide column centered-->\n      <div class=\"filters\">\n        <div class=\"column\">\n          <select v-model=\"country\">\n            <option value=\"\">country</option>\n            <option>Australia</option>\n            <option>Austria</option>\n            <option>Belgium</option>\n            <option>Denmark</option>\n            <option>France</option>\n            <option>Germany</option>\n            <option>Greece</option>\n            <option>Italy</option>\n            <option>Sweden</option>\n            <option>Switzerland</option>\n            <option>United Kingdom</option>\n            <option>United States</option>\n          </select>\n          <input v-model=\"contributor\" placeholder=\"contributor\" />\n        </div>\n        <div>\n          <button\n            class=\"ui button\"\n            :class=\"{ positive: category === 'baby-milks' }\"\n            @click=\"setCategory('baby-milks')\"\n          >\n            baby-milks\n          </button>\n          <button\n            class=\"ui button\"\n            :class=\"{ positive: category === 'waters' }\"\n            @click=\"setCategory('waters')\"\n          >\n            waters\n          </button>\n        </div>\n        <button @click=\"search\">\n          {{ $t(\"nutrition.search\") }}\n        </button>\n        <button @click=\"toggleHistoryIsOpen\">\n          {{ $t(\"nutrition.history.open\") }}\n        </button>\n      </div>\n      <div v-if=\"bufferIsEmpty\">\n        <p v-if=\"loading\">Loading ...</p>\n        <p v-else>No remaining images</p>\n      </div>\n      <template v-else>\n        <h3>{{ productName }}</h3>\n        <div>\n          <a target=\"_blank\" :href=\"productUrl\" class=\"ui button primary\">{{\n            $t(\"questions.view\")\n          }}</a>\n          <a target=\"_blank\" :href=\"productEditUrl\" class=\"ui button\">{{\n            $t(\"questions.edit\")\n          }}</a>\n        </div>\n        <div class=\"ui divider\"></div>\n        <!-- ask what type is the image -->\n\n        <template v-if=\"step == 0\">\n          <cropper\n            class=\"imageDisplay\"\n            ref=\"cropper\"\n            :src=\"imageURL\"\n            :canvas=\"false\"\n            :checkOrientation=\"false\"\n            :crossOrigine=\"false\"\n            @change=\"changeCropCoordinate\"\n          />\n          <div style=\"text-align: center\">\n            <button @click=\"rotateLeft\" class=\"ui icon button\">\n              <i class=\"undo icon\"></i>\n            </button>\n            <button @click=\"rotateRight\" class=\"ui icon button\">\n              <i class=\"redo icon\"></i>\n            </button>\n          </div>\n        </template>\n        <template v-else>\n          <div\n            :style=\"\n              `width: min(50vw, 800px); height: calc(min(50vw, 800px) * ${\n                imageZoomOptions.coordinates\n                  ? imageZoomOptions.coordinates.height /\n                    imageZoomOptions.coordinates.width\n                  : 1\n              })`\n            \"\n          >\n            <interactiveImage\n              :v-if=\"imageZoomOptions.image\"\n              :image=\"imageZoomOptions.image\"\n              :coordinates=\"imageZoomOptions.coordinates\"\n              :clickableBoxes=\"clickableBoxes\"\n              :anotationToValidate=\"anotationToValidate\"\n              :bestMatch=\"bestMatch\"\n              :boxesHighlight=\"nutrimentToFill.boxes\"\n              :attributedBoxesIds=\"attributedBoxesIds\"\n              :onlyPredictions=\"useOnlyPredictions\"\n              v-on:nutriPredictionAccept=\"nutriPredictionAccepted\"\n              v-on:nutriPredictionCancel=\"nutriPredictionCanceled\"\n              v-on:validatedBox=\"validateHumanAnnotation\"\n            />\n          </div>\n        </template>\n      </template>\n\n      <div class=\"questionContainer annotateLine\">\n        <sui-step-group step-number=\"four\">\n          <sui-step :active=\"step == 0\" :title=\"$t('nutrition.steps.1')\" />\n          <sui-step :active=\"step == 1\" :title=\"$t('nutrition.steps.2')\" />\n          <sui-step\n            :active=\"step == 2 || step == 3\"\n            :title=\"$t('nutrition.steps.3')\"\n          />\n          <sui-step :active=\"step == 4\" :title=\"$t('nutrition.steps.4')\" />\n        </sui-step-group>\n        <template v-if=\"step == 1\">\n          <div class=\"line2\">\n            <span>{{ $t(`nutrition.basis`) }}</span>\n            <sui-input\n              :error=\"isInvalid(basisData['quantity'])\"\n              v-model=\"basisData['quantity']\"\n              style=\"width:5rem\"\n              v-focus\n              inputmode=\"decimal\"\n            /><span style=\"font-size:1.5rem; margin-right: 0.5rem;\">g/ml</span>\n            <sui-checkbox\n              :label=\"$t(`nutrition.servingSize`)\"\n              v-model=\"basisData['isServingSize']\"\n            />\n          </div>\n        </template>\n        <template :v-else-if=\"step >= 0 && step <= 4\">\n          <div class=\"line2\">\n            <p v-if=\"step == 0\">\n              {{ $t(\"nutrition.instructions.cropTheTable\") }}\n            </p>\n            <p v-if=\"step == 2\">\n              {{ $t(\"nutrition.instructions.verifyNutrimentDetected\") }}\n            </p>\n            <p v-if=\"step == 3\">\n              {{ $t(\"nutrition.instructions.selectMissingNutriments\") }}\n            </p>\n            <p v-if=\"step == 4\">\n              {{ $t(\"nutrition.instructions.selectValue\") }}\n              <span class=\"nutrimentName\">{{\n                $t(`nutrition.nutriments.${nutrimentToFill.id}`)\n              }}</span>\n            </p>\n          </div>\n        </template>\n\n        <div class=\"line4\">\n          <button\n            class=\"ui button annotate\"\n            :class=\"{ disabled: step === 0 }\"\n            @click=\"prevStep()\"\n          >\n            {{ $t(\"nutrition.prev\") }}\n          </button>\n          <button\n            class=\"ui button annotate\"\n            :class=\"{ disabled: !canGoNext }\"\n            @click=\"nextStep()\"\n          >\n            {{ $t(\"nutrition.next\") }}\n          </button>\n        </div>\n        <div class=\"line4\">\n          <button\n            class=\"ui button negative annotate\"\n            @click=\"unselectPicture()\"\n          >\n            {{ $t(\"nutrition.unselect_picture\") }}\n          </button>\n          <button class=\"ui button annotate\" @click=\"skipProduct()\">\n            {{ $t(\"nutrition.skip\") }}\n          </button>\n          <button\n            class=\"ui button positive annotate\"\n            :class=\"{ disabled: !canValidate }\"\n            @click=\"validate()\"\n          >\n            {{ $t(\"nutrition.validate\") }}\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"eight wide column centered\">\n      <div class=\"table\">\n        <NutritionTable\n          v-model=\"currentProductData\"\n          v-on:setNurtiIndex=\"setNutrimentValueIndex\"\n          :nutrimentToFillIndex=\"nutrimentToFillIndex\"\n          :selectLine=\"step === 4\"\n        />\n      </div>\n    </div>\n    <sui-modal v-model=\"historyIsOpen\">\n      <sui-modal-header>{{ $t(\"nutrition.history.title\") }}</sui-modal-header>\n      <sui-modal-content scrolling>\n        <table class=\"ui celled table\">\n          <thead>\n            <tr>\n              <th>{{ $t(\"nutrition.history.status\") }}</th>\n              <th>{{ $t(\"nutrition.history.product name\") }}</th>\n              <th></th>\n              <th></th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              v-for=\"product in history\"\n              :key=\"product.code\"\n              :class=\"{\n                positive: product.status === 'VALIDATED',\n                negative:\n                  product.status === 'SKIP' || product.status === 'WRONG_IMAGE',\n              }\"\n            >\n              <td>\n                {{ $t(`nutrition.history.${product.status}`) }}\n              </td>\n              <td>{{ product.name }}</td>\n\n              <td>\n                <a target=\"_blank\" :href=\"getProductUrl(product.code)\">{{\n                  $t(\"nutrition.history.view\")\n                }}</a>\n              </td>\n              <td>\n                <a target=\"_blank\" :href=\"getProductEditUrl(product.code)\">{{\n                  $t(\"nutrition.history.edit\")\n                }}</a>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </sui-modal-content>\n      <sui-modal-actions>\n        <sui-button positive @click.native=\"toggleHistoryIsOpen\">\n          {{ $t(\"nutrition.history.close\") }}\n        </sui-button>\n      </sui-modal-actions>\n    </sui-modal>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport nutrimentsDefaultUnit from \"../data/nutritions\";\nimport tableExtraction from \"../utils/tableExtraction\";\nimport { OFF_URL } from \"../const\"; //OFF_IMAGE_URL\nimport offService from \"../off\";\nimport { Cropper } from \"vue-advanced-cropper\";\nimport \"vue-advanced-cropper/dist/style.css\";\nimport InteractiveImage from \"../components/InteractiveImage\";\nimport NutritionTable from \"../components/NutritionTable\";\nconst SEEN_CODES = \"SEEN_CODES\";\n\nconst getProducts = async (\n  page,\n  country = \"\",\n  contributor = \"\",\n  category = \"\",\n  code = \"\"\n) => {\n  if (code) {\n    const {\n      data: { product },\n    } = await axios(\n      offService.getNutritionToFillUrl({\n        page,\n        country,\n        category,\n        creator: contributor,\n        code,\n      })\n    );\n    return [product];\n  } else {\n    const {\n      data: { products, count, page_size },\n    } = await axios(\n      offService.getNutritionToFillUrl({\n        page,\n        country,\n        category,\n        creator: contributor,\n      })\n    );\n    return [products, Math.ceil(count / page_size)];\n  }\n};\n\nexport default {\n  name: \"NutritionView\",\n  components: {\n    Cropper,\n    InteractiveImage,\n    NutritionTable,\n  },\n  data: function() {\n    return {\n      loading: false,\n      productBuffer: [],\n      currentProductData: {},\n      basisData: { quantity: \"100\", isServingSize: false },\n      nutritiveId: -2,\n      imageZoomOptions: {\n        coordinates: null,\n        image: null,\n      },\n      extracted: null,\n      step: 0,\n      nutritionPredictionIndex: 0,\n      nutrimentToFillIndex: 0,\n      country: \"\",\n      contributor: \"\",\n      category: \"\",\n      history: [],\n      historyIsOpen: false,\n      nextPage: 1,\n    };\n  },\n  computed: {\n    productCode: function() {\n      if (\n        this.productBuffer.length === 0 ||\n        this.productBuffer[0].code === null\n      ) {\n        return \"\";\n      }\n      return this.productBuffer[0].code;\n    },\n    productName: function() {\n      if (\n        this.productBuffer.length === 0 ||\n        this.productBuffer[0].product_name === null\n      ) {\n        return \"\";\n      }\n      return this.productBuffer[0].product_name;\n    },\n    productUrl: function() {\n      if (\n        this.productBuffer.length === 0 ||\n        this.productBuffer[0].code === null\n      ) {\n        return \"\";\n      }\n      return offService.getProductUrl(this.productBuffer[0].code);\n    },\n    productEditUrl: function() {\n      if (\n        this.productBuffer.length === 0 ||\n        this.productBuffer[0].code === null\n      ) {\n        return \"\";\n      }\n      return offService.getProductEditUrl(this.productBuffer[0].code);\n    },\n    productLang: function() {\n      if (\n        this.productBuffer.length === 0 ||\n        this.productBuffer[0].lang === null\n      ) {\n        return \"\";\n      }\n      return this.productBuffer[0].lang;\n    },\n    imageURL: function() {\n      if (\n        this.productBuffer.length === 0 ||\n        this.productBuffer[0].image_nutrition_url === null\n      ) {\n        return \"\";\n      }\n      const imgId = this.productBuffer[0].images[\n        `nutrition_${this.productBuffer[0].lang}`\n      ].imgid;\n      return `${\n        this.productBuffer[0][\"image_nutrition_url\"].split(\"nutrition_\")[0]\n      }${imgId}.jpg`;\n      // return `${OFF_IMAGE_URL}${this.productBuffer[0].image_url}`;\n    },\n    bufferIsEmpty: function() {\n      return this.productBuffer.length === 0;\n    },\n    proposedNutriments: function() {\n      return \"\";\n    },\n    boxes: function() {\n      if (!this.extracted || !this.extracted.filteredBoxes) {\n        return [];\n      }\n      return this.extracted.filteredBoxes;\n    },\n    clickableBoxes: function() {\n      if (this.step === 3) {\n        return this.extracted.filteredBoxes.map((box) => {\n          return {\n            boxes: [{ ...box }],\n            values: box.description,\n          };\n        });\n      }\n      if (this.step === 4) {\n        return this.extracted.values.map(({ boxesIndexes, text }) => {\n          return {\n            boxes: boxesIndexes.map((i) => this.extracted.filteredBoxes[i]),\n            values: text[0],\n          };\n        });\n      }\n      return [];\n    },\n    anotationToValidate: function() {\n      if (this.step !== 2) {\n        return {};\n      }\n      return {\n        text: this.extracted.nutriments[this.nutritionPredictionIndex][\"text\"],\n        key: this.extracted.nutriments[this.nutritionPredictionIndex][\"key\"],\n        boxes: this.extracted.nutriments[this.nutritionPredictionIndex][\n          \"boxes\"\n        ].map((i) => this.extracted.filteredBoxes[i]),\n      };\n    },\n    currentValue: function() {\n      if (\n        !this.extracted ||\n        !this.extracted.values ||\n        this.nutritiveId < 0 ||\n        this.nutritiveId >= this.extracted.values.length\n      ) {\n        return {};\n      }\n      return this.extracted.values[this.nutritiveId];\n    },\n    nutriKeys: function() {\n      return Object.keys(this.currentProductData).sort(\n        (a, b) => this.currentProductData[a].y - this.currentProductData[b].y\n      );\n    },\n    useOnlyPredictions: function() {\n      return this.step === 3;\n    },\n    nutrimentToFill() {\n      if (this.step !== 4) {\n        return {};\n      }\n      const key = this.nutriKeys[this.nutrimentToFillIndex];\n      return this.currentProductData[key];\n    },\n    attributedBoxesIds() {\n      return [\n        ...Object.keys(this.currentProductData).flatMap((key) =>\n          this.currentProductData[key].boxes.map((x) => x.id)\n        ),\n        ...Object.keys(this.currentProductData).flatMap((key) =>\n          this.currentProductData[key].valueBoxes\n            ? this.currentProductData[key].valueBoxes.map((x) => x.id)\n            : []\n        ),\n      ];\n    },\n    canValidate() {\n      return this.step === 4;\n    },\n    canGoNext() {\n      if (this.step === 4) {\n        return false;\n      }\n      if (\n        this.step === 3 &&\n        Object.keys(this.currentProductData).length === 0\n      ) {\n        return false;\n      }\n      return true;\n    },\n  },\n  methods: {\n    bestMatch({ search, lang = \"\" }) {\n      if (this.step !== 3) {\n        return [];\n      }\n      return tableExtraction.bestMatch({\n        search,\n        lang,\n        except: Object.keys(this.currentProductData),\n      });\n    },\n    prevStep() {\n      if (this.step === 1) {\n        // return to cropp step. But before that must erase all the computed data because boxes will not be the same\n        this.resetProductData();\n        return null;\n      }\n      if (this.step == 2) {\n        this.step -= 1;\n        return null;\n      }\n      if (this.step == 3) {\n        this.step -= 2;\n        return null;\n      }\n      if (this.step == 4) {\n        this.step -= 1;\n        return null;\n      }\n    },\n    nextStep() {\n      this.step += 1;\n      if (this.step === 1) {\n        this.extracted = {\n          ...tableExtraction.getData(\n            this.productBuffer[0].ocrData,\n            this.imageZoomOptions\n          ),\n        };\n      }\n      if (this.step === 2) {\n        this.nextPrediction();\n      }\n    },\n    nextPrediction(initial = true) {\n      let index = this.nutritionPredictionIndex;\n      if (!initial) {\n        index += 1;\n      }\n      while (\n        index < this.extracted.nutriments.length &&\n        (!this.extracted.nutriments[index].key ||\n          this.currentProductData[this.extracted.nutriments[index].key] !==\n            undefined)\n      ) {\n        // We stop on a box only if there is a prediction not already attributed\n        index += 1;\n      }\n      if (index == this.extracted.nutriments.length) {\n        this.nextStep();\n      } else {\n        this.nutritionPredictionIndex = index;\n      }\n    },\n    nutriPredictionAccepted() {\n      const { key, boxes: nutriBoxes } = this.extracted.nutriments[\n        this.nutritionPredictionIndex\n      ];\n      const keysToAdd = [];\n      if (key === \"nutriment_energy\") {\n        keysToAdd.push(\"nutriment_energy-kj\");\n        keysToAdd.push(\"nutriment_energy-kcal\");\n      } else {\n        keysToAdd.push(key);\n      }\n      const boxes = this.boxes;\n      keysToAdd.forEach((k) => {\n        this.currentProductData = {\n          ...this.currentProductData,\n          [k]: {\n            id: k,\n            data: \"\",\n            unit: nutrimentsDefaultUnit[k],\n            x: Math.min(...nutriBoxes.map((i) => boxes[i].minX)),\n            y: Math.min(...nutriBoxes.map((i) => boxes[i].minY)),\n            boxes: [...nutriBoxes.map((i) => boxes[i])],\n            valueBoxes: [],\n          },\n        };\n      });\n      this.nextPrediction(false);\n    },\n    nutriPredictionCanceled() {\n      this.nextPrediction(false);\n    },\n    validateHumanAnnotation(descrition) {\n      if (this.step === 3) {\n        const { key, boxes } = descrition;\n        const keysToAdd = [];\n        if (key === \"nutriment_energy\") {\n          keysToAdd.push(\"nutriment_energy-kj\");\n          keysToAdd.push(\"nutriment_energy-kcal\");\n        } else {\n          keysToAdd.push(key);\n        }\n        keysToAdd.forEach((k) => {\n          this.currentProductData = {\n            ...this.currentProductData,\n            [k]: {\n              id: k,\n              data: \"\",\n              unit: nutrimentsDefaultUnit[k],\n              x: Math.min(...boxes.map((box) => box.minX)),\n              y: Math.min(...boxes.map((box) => box.minY)),\n              boxes: [...boxes.map((x) => ({ ...x }))],\n              valueBoxes: [],\n            },\n          };\n        });\n      } else if (this.step === 4) {\n        const { values, boxes } = descrition;\n        const val = values\n          .toLowerCase()\n          .match(\"^((<|>|<=|>=|~|.)*[0-9]+| *)\")\n          .filter((x) => x !== \"\")[0];\n        let unit = values\n          .toLowerCase()\n          .match(/[a-z]*/g)\n          .filter((x) => x !== \"\")[0];\n        if (unit === \"kj\") {\n          unit = \"kJ\";\n        }\n        this.currentProductData = {\n          ...this.currentProductData,\n          [this.nutrimentToFill.id]: {\n            ...this.currentProductData[this.nutrimentToFill.id],\n            valueBoxes: [...boxes.map((x) => ({ ...x }))],\n            data: val,\n            unit: unit,\n          },\n        };\n        if (\n          false ===\n          this.nutriKeys.reduce(\n            (accumulator, currentValue) =>\n              accumulator && !!this.currentProductData[currentValue].data,\n            true\n          )\n        ) {\n          // if there is a nutriment not filled\n          let nextIndex =\n            (this.nutrimentToFillIndex + 1) % this.nutriKeys.length;\n          while (\n            nextIndex !== this.nutrimentToFillIndex &&\n            this.currentProductData[this.nutriKeys[nextIndex]].data\n          ) {\n            nextIndex = (nextIndex + 1) % this.nutriKeys.length;\n          }\n          this.nutrimentToFillIndex = nextIndex;\n        }\n      }\n    },\n    setNutrimentValueIndex(index) {\n      this.nutrimentToFillIndex = index;\n    },\n    rotateLeft() {\n      this.$refs.cropper.rotate(-90);\n    },\n    rotateRight() {\n      this.$refs.cropper.rotate(90);\n    },\n    setCategory(cat) {\n      if (this.category === cat) {\n        this.category = \"\";\n      } else {\n        this.category = cat;\n      }\n    },\n    isInvalid(value) {\n      return !value.match(\"^((<|>|<=|>=|~|.)*[0-9]+| *)$\");\n    },\n    getProductUrl(code) {\n      return offService.getProductUrl(code);\n    },\n    getProductEditUrl(code) {\n      return offService.getProductEditUrl(code);\n    },\n    toggleHistoryIsOpen() {\n      this.historyIsOpen = !this.historyIsOpen;\n    },\n    changeCropCoordinate({ coordinates, image }) {\n      this.imageZoomOptions = {\n        ...this.imageZoomOptions,\n        coordinates,\n        image,\n        minX: coordinates.left,\n        maxX: coordinates.left + coordinates.width,\n        minY: coordinates.top,\n        maxY: coordinates.top + coordinates.height,\n      };\n    },\n    addProducts: async function(country, contributor, category) {\n      if (this.$route.params.code) {\n        this.loading = true;\n        const newProducts = await getProducts(\n          1,\n          country,\n          contributor,\n          category,\n          this.$route.params.code\n        );\n        this.productBuffer = [...newProducts];\n        this.loading = false;\n      } else {\n        this.loading = true;\n        const [newProducts, nbPages] = await getProducts(\n          this.nextPage,\n          country,\n          contributor,\n          category\n        );\n        this.nextPage = 1 + Math.floor(nbPages * Math.random());\n        const seenCodes = JSON.parse(localStorage.getItem(SEEN_CODES) || \"[]\");\n\n        this.productBuffer = this.productBuffer.concat(\n          newProducts.filter(({ code }) => !seenCodes.includes(code))\n        );\n        this.loading = false;\n      }\n    },\n    replaceProducts: async function(country, contributor, category) {\n      this.loading = true;\n      const [newProducts, nbPages] = await getProducts(\n        1,\n        country,\n        contributor,\n        category\n      );\n      this.nextPage = 1 + Math.floor(nbPages * Math.random());\n      const seenCodes = JSON.parse(localStorage.getItem(SEEN_CODES) || \"[]\");\n      this.productBuffer = [...newProducts].filter(\n        ({ code }) => !seenCodes.includes(code)\n      );\n      this.loading = false;\n    },\n    unselectPicture: function() {\n      axios.post(\n        `https://world.openfoodfacts.org/cgi/product_image_unselect.pl?`,\n        new URLSearchParams(\n          `code=${this.productBuffer[0][\"code\"]}&id=nutrition${\n            this.productBuffer[0].image_nutrition_url\n              .split(\"nutrition\")[1]\n              .split(\".\")[0]\n          }`\n        )\n      );\n      this.skipProduct(\"WRONG_IMAGE\");\n    },\n    skipProduct(status = \"SKIP\") {\n      this.history.push({\n        code: this.productCode,\n        name: this.productName,\n        status: status,\n      });\n      const oldCodes = JSON.parse(\n        localStorage.getItem(SEEN_CODES) || \"[]\"\n      ).slice(0, 1000);\n      localStorage.setItem(\n        SEEN_CODES,\n        JSON.stringify([this.productCode, ...oldCodes])\n      );\n\n      this.productBuffer.shift();\n    },\n    getBasisTextForAPI() {\n      if (this.basisData.quantity && !this.isInvalid(this.basisData.quantity)) {\n        if (this.basisData.isServingSize) {\n          return `nutrition_data_per=serving&serving_size=${this.basisData.quantity}g`;\n        }\n        return `nutrition_data_per=${this.basisData.quantity}g`;\n      }\n      return \"\";\n    },\n    validate() {\n      this.history.push({\n        code: this.productCode,\n        name: this.productName,\n        status: \"VALIDATED\",\n      });\n      const oldCodes = JSON.parse(\n        localStorage.getItem(SEEN_CODES) || \"[]\"\n      ).slice(0, 1000);\n      localStorage.setItem(\n        SEEN_CODES,\n        JSON.stringify([this.productCode, ...oldCodes])\n      );\n\n      const withData = Object.keys(this.currentProductData)\n        .filter(\n          (nutrimentId) =>\n            this.currentProductData[nutrimentId] &&\n            this.currentProductData[nutrimentId].data &&\n            !this.isInvalid(this.currentProductData[nutrimentId].data) &&\n            this.currentProductData[nutrimentId].data.length > 0\n        )\n        .map((nutrimentId) => ({\n          name: nutrimentId,\n          value: `${this.currentProductData[nutrimentId].data}${this\n            .currentProductData[nutrimentId].unit || \"\"}`,\n          quantity: this.currentProductData[nutrimentId].data,\n          unit: this.currentProductData[nutrimentId].unit,\n        }));\n      const withoutData = Object.keys(this.currentProductData)\n        .filter(\n          (nutrimentId) =>\n            this.currentProductData[nutrimentId] &&\n            !this.currentProductData[nutrimentId].data\n        )\n        .map((nutrimentId) => ({\n          name: nutrimentId,\n          value: \"\",\n          quantity: \"\",\n          unit: \"\",\n        }));\n      const basisText = this.getBasisTextForAPI();\n      axios.post(\n        `${OFF_URL}/cgi/product_jqm2.pl?`,\n        new URLSearchParams(\n          `${withData\n            .map((data) => `${data.name}=${data.quantity}&`)\n            .join(\"\")}${withData\n            .map((data) => (data.unit ? `${data.name}_unit=${data.unit}&` : \"\"))\n            .join(\"\")}${withoutData.map((name) => `${name}=\"\"&`).join(\"\")}${\n            basisText ? `${basisText}&` : \"\"\n          }code=${this.productBuffer[0][\"code\"]}`\n        )\n      ); // The status of the response is not displayed so no need to wait the response\n      const correctedData = {};\n      withData.forEach((data) => {\n        correctedData[data.name] = `${data.quantity}&`;\n      });\n      // axios.post(\"https://amathjourney.com/api/off/correct/\", {\n      //   code: this.productCode,\n      //   true_value: correctedData,\n      // });\n      this.productBuffer.shift();\n    },\n    resetProductData() {\n      this.currentProductData = {};\n      this.basisData = {\n        quantity: \"100\",\n        isServingSize: false,\n      };\n      this.extracted = null;\n      this.step = 0;\n      this.nutritionPredictionIndex = 0;\n      this.nutrimentToFillIndex = 0;\n    },\n    search() {\n      this.replaceProducts(this.country, this.contributor, this.category);\n    },\n  },\n  watch: {\n    productCode: function() {\n      // watch when a new question is asked\n      this.resetProductData();\n      if (this.productBuffer.length <= 5 && !this.loading) {\n        this.addProducts(this.country, this.contributor, this.category);\n      }\n      if (\n        this.productBuffer[0] &&\n        this.productBuffer[0].image_nutrition_url &&\n        this.productBuffer[0].lang\n      ) {\n        const imgId = this.productBuffer[0].images[\n          `nutrition_${this.productBuffer[0].lang}`\n        ].imgid;\n        const imageUrl = `${\n          this.productBuffer[0].image_nutrition_url\n            .split(\"nutrition\")[0]\n            .split(\"products\")[1]\n        }${imgId}.jpg`;\n        const code = this.productBuffer[0].code;\n        tableExtraction\n          .getOCRdata(imageUrl)\n          .then((response) => {\n            if (this.productBuffer[0].code === code) {\n              // const nutritionKey = `nutrition_${this.productBuffer[0].lang}`;\n              this.productBuffer[0] = {\n                ...this.productBuffer[0],\n                ocrData: response,\n                sizes: {\n                  full: {\n                    ...this.productBuffer[0].images[imgId].sizes.full,\n                  },\n                  small: {\n                    ...this.productBuffer[0].images[imgId].sizes[\"400\"],\n                  },\n                },\n              };\n            }\n          })\n          .catch(() => {\n            // TODO : should notify the server that the OCR does not exist\n            if (this.productBuffer[0].code === code) {\n              this.skipProduct();\n            }\n          });\n      }\n    },\n    nutriKeys: function() {\n      // prevent overflow\n      if (this.nutrimentToFillIndex >= this.nutriKeys.length) {\n        this.nutrimentToFillIndex =\n          this.nutrimentToFillIndex % this.nutriKeys.length || 0;\n      }\n    },\n  },\n  mounted: function() {\n    this.addProducts();\n  },\n};\n</script>\n\n<style scoped>\n.shadow {\n  opacity: 0.2;\n}\n.unit {\n  margin-left: 1rem;\n}\nbutton.annotate {\n  padding: 1rem 1.5rem;\n}\n.center {\n  text-align: center;\n  margin: 0 0;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  flex-grow: 0;\n  flex-shrink: 1;\n}\n.selectPictures {\n  display: flex;\n  flex-wrap: nowrap;\n  flex-direction: row;\n  overflow: auto;\n}\n.selectPictures > img {\n  margin: 2rem;\n}\n.selectPictures > .selected {\n  border: 5px solid blue;\n}\n.imageDisplay {\n  background: #ddd !important;\n  max-height: 100vw;\n  width: 90vw;\n}\n.questionGrid {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n}\n.questionGrid button {\n  margin: 0.5rem 1rem;\n}\n.questionContainer {\n  position: sticky;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(255, 255, 255, 0.7);\n  padding: 0.5rem 0.5rem;\n}\n.line1,\n.line2,\n.line3,\n.line4 {\n  display: flex;\n  flex-direction: row;\n  width: 100%;\n  margin-bottom: 4px;\n}\n.line2 {\n  justify-content: center;\n  align-items: center;\n}\n.line3 {\n  justify-content: space-between;\n}\n.line1 {\n  justify-content: space-around;\n}\n.line4 {\n  justify-content: stretch;\n}\n.line4 button {\n  flex-grow: 1;\n}\n.line1 button {\n  padding: 0.5rem 1rem;\n  border-radius: 2rem;\n  margin-bottom: 0.5rem;\n}\n.nutrimentName {\n  color: blue;\n  font-size: 1.5rem;\n}\n\n.filters {\n  display: flex;\n  justify-content: space-between;\n}\n.filters > .column {\n  display: flex;\n  flex-direction: column;\n}\n.filters input {\n  margin-top: 0.5rem;\n}\n.table {\n  position: sticky;\n  top: 60px;\n}\n</style>\n","const axios = require(\"axios\");\nconst nutrimentTranslation = require(\"../data/nutriments_translation_remapped.json\");\nconst { distance, closest } = require(\"fastest-levenshtein\");\n\nconst OFF_IMAGE_URL = \"https://static.openfoodfacts.org/images/products\";\nconst OVERLAPPING_THRESHOLD = 0.75;\n\nconst isOverlapping = (boxA, boxB) => {\n  // indicate if two boxes are on the same line\n  // to decide this, we check if boxes Y coordinates overlap on a distance of more than OVERLAPPING_THRESHOLD * min_Y_dist\n  const ref = Math.min(boxA.maxY - boxA.minY, boxB.maxY - boxB.minY);\n  const overlapDist =\n    Math.min(boxA.maxY, boxB.maxY) - Math.max(boxA.minY, boxB.minY);\n  return overlapDist / ref > OVERLAPPING_THRESHOLD;\n};\n\n// the traduction is a tree. For example, \"acide gras\" and \"acide gras saturé\" are represented as follow:\n// {\n//   acide: {\n//     gras: {\n//       nutriKey: \"nutriment_fat\",\n//       saturé: {\n//         nutriKey: \"nutriment_fat_saturated\",\n//       },\n//     },\n//   },\n// }\n//  leafs are represented by \"nutriKey\" which provides the normalized nutriment\n\nconst addExpression = (trad, expression, nutriKey) => {\n  // associate the expression to the nutriKey in the trad\n  if (expression.length === 0) {\n    return null;\n  }\n  const word = expression[0];\n  if (trad[word] === undefined) {\n    trad[word] = {};\n  }\n\n  if (expression.length === 1) {\n    trad[word][\"nutriKey\"] = nutriKey;\n  } else {\n    addExpression(trad[word], expression.slice(1), nutriKey);\n  }\n};\n\nconst remapTranslation = (lang) => {\n  // return \"en\" trad if the language is not available\n  // the translation is the tree define previously\n  // expressions are normalized (lower case without accent)\n\n  if (!Object.keys(nutrimentTranslation).includes(lang)) {\n    //TODO : log in the server that the detected language is not available\n    return remapTranslation(\"en\");\n  }\n  const translationTree = {};\n\n  Object.keys(nutrimentTranslation[lang]).forEach((nutryKey) => {\n    nutrimentTranslation[lang][nutryKey].forEach((trad) => {\n      const cleanTrad = trad\n        .normalize(\"NFD\")\n        .replace(/[\\u0300-\\u036f]/g, \"\")\n        .toLowerCase();\n\n      const splitted = cleanTrad.split(\" \");\n      addExpression(translationTree, splitted, nutryKey);\n    });\n  });\n  return translationTree;\n};\n\nconst boxIsInside = (box, { minX, minY, maxX, maxY }) => {\n  // check if a box has at least a point inside the rectangle\n\n  let nbComplet = 0;\n  box[\"boundingPoly\"][\"vertices\"].forEach(({ x, y }) => {\n    if (x !== undefined && y !== undefined) {\n      nbComplet += 1;\n    }\n  });\n  if (nbComplet < 4) {\n    // remove bounding bx with incomplet number of points\n    return false;\n  }\n  let hasPointInside = false;\n  box[\"boundingPoly\"][\"vertices\"].forEach(({ x, y }) => {\n    if (minX <= x && maxX >= x && minY <= y && maxY >= y) {\n      hasPointInside = true;\n    }\n  });\n  return hasPointInside;\n};\n\nconst addGlobalBox = (box) => {\n  // add the smallest rectangle containing the box\n\n  const extremaValues = {\n    minX: -1,\n    minY: -1,\n    maxX: -1,\n    maxY: -1,\n  };\n\n  box[\"boundingPoly\"][\"vertices\"].forEach(({ x, y }) => {\n    if (x && x > extremaValues.maxX) {\n      extremaValues.maxX = x;\n    }\n    if (y && y > extremaValues.maxY) {\n      extremaValues.maxY = y;\n    }\n    if (x && (x < extremaValues.minX || extremaValues.minX === -1)) {\n      extremaValues.minX = x;\n    }\n    if (y && (y < extremaValues.minY || extremaValues.minY === -1)) {\n      extremaValues.minY = y;\n    }\n  });\n\n  return { ...box, ...extremaValues };\n};\n\nconst extractValues = (text) => {\n  // regexp to detect figures\n\n  const cleanText = text\n    .normalize(\"NFD\")\n    .replace(/[\\u0300-\\u036f]/g, \"\")\n    .toLowerCase()\n    .replace(/,/gi, \".\")\n    .replace(/[^0-9a-z.><=~%]/gi, \"\");\n\n  const grams = [\n    ...cleanText.matchAll(\n      /[<|>|<|=|>|=|~]{0,1}[0-9]*[<|>|<|=|>|=|~|.]*[0-9]*g/g\n    ),\n  ]\n    .map((x) => x[0])\n    .filter((x) => x !== \"g\");\n  const milligrams = [\n    ...cleanText.matchAll(\n      /[<|>|<|=|>|=|~]{0,1}[0-9]*[<|>|<|=|>|=|~|.]*[0-9]*mg/g\n    ),\n  ]\n    .map((x) => x[0])\n    .filter((x) => x !== \"mg\");\n  const mcg = [\n    ...cleanText.matchAll(\n      /[<|>|<|=|>|=|~]{0,1}[0-9]*[<|>|<|=|>|=|~|.]*[0-9]*mcg/g\n    ),\n  ]\n    .map((x) => x[0])\n    .filter((x) => x !== \"mcg\");\n  const percents = [\n    ...cleanText.matchAll(\n      /[<|>|<|=|>|=|~]{0,1}[0-9]*[<|>|<|=|>|=|~|.]*[0-9]*%/g\n    ),\n  ]\n    .map((x) => x[0])\n    .filter((x) => x !== \"%\");\n  const kJ = [...cleanText.matchAll(/[0-9]*[<|>|<|=|>|=|~|.]*[0-9]*kj/g)]\n    .map((x) => x[0])\n    .filter((x) => x !== \"kj\");\n  const kcal = [...cleanText.matchAll(/[0-9]*[<|>|<|=|>|=|~|.]*[0-9]*kcal/g)]\n    .map((x) => x[0])\n    .filter((x) => x !== \"kcal\");\n  //   je n'arrive pas a extraire les chiffres qui ne sont dans aucune liste précédente. Au pire, je chercherai tous les nombre puis filtrer.\n  //   const alone = [\n  //     ...cleanText.matchAll(\n  //       /^(?:[0-9]*[<|>|<|=|>|=|~|.]*[0-9]*){1,}[^(?:kcal)(?:kj)g(?:mg)%]$/g\n  //     ),\n  //   ].map((x) => x[0]);\n\n  const all = [\n    ...cleanText.matchAll(\n      /[<|>|<|=|>|=|~]{0,1}[0-9]*[<|>|<|=|>|=|~|.]*[0-9]*/g\n    ),\n  ]\n    .map((x) => x[0])\n    .filter((x) => ![\"\", \"<\", \">\", \"<\", \"=\", \">\", \"=\", \"~\", \".\"].includes(x));\n  return {\n    grams,\n    milligrams,\n    mcg,\n    percents,\n    kJ,\n    kcal,\n    all,\n    // alone,\n  };\n};\n\nfunction getNutrimentBoxes(filteredBoxes, linkBoxes, lang) {\n  // try to recover all the nutriments\n\n  // TODO\n  // possible improvement : for the first step, instead of searching a box matching the text\n  // we could search for a box containing the text, because some time, boxes contains multiples words\n\n  const translationTree = remapTranslation(lang);\n  const rep = [];\n\n  const seenBoxes = [];\n\n  Object.keys(linkBoxes).forEach((k) => {\n    const i = parseInt(k);\n    if (!seenBoxes.includes(i)) {\n      const currentSolution = {};\n      const boxes = [i];\n      let translation = translationTree;\n\n      let j = i;\n      while (translation !== undefined && j !== null) {\n        let text = filteredBoxes[j].description;\n        text = text\n          .normalize(\"NFD\")\n          .replace(/[\\u0300-\\u036f]/g, \"\")\n          .toLowerCase()\n          .replace(/[^a-z0-9]/g, \"\");\n        if (\n          translation[text] !== undefined &&\n          translation[text][\"nutriKey\"] !== undefined\n        ) {\n          // This is a potential solution\n          currentSolution.key = translation[text][\"nutriKey\"];\n          currentSolution.boxes = [...boxes];\n        }\n        if (translation[text] !== undefined) {\n          translation = translation[text];\n          j = linkBoxes[j];\n          boxes.push(j);\n        } else {\n          translation = translation[text];\n        }\n      }\n\n      rep.push({\n        ...currentSolution,\n        text: currentSolution.boxes\n          ? currentSolution.boxes\n              .map((j) =>\n                filteredBoxes[j].description\n                  .normalize(\"NFD\")\n                  .replace(/[\\u0300-\\u036f]/g, \"\")\n                  .toLowerCase()\n                  .replace(/[^a-z0-9]/g, \"\")\n              )\n              .join(\" \")\n          : filteredBoxes[i].description\n              .normalize(\"NFD\")\n              .replace(/[\\u0300-\\u036f]/g, \"\")\n              .toLowerCase()\n              .replace(/[^a-z0-9]/g, \"\"),\n      });\n      if (currentSolution.boxes) {\n        currentSolution.boxes.forEach((j) => seenBoxes.push(j));\n      }\n    }\n  });\n  return rep;\n}\n\nfunction getValues(filteredBoxes, linkBoxes) {\n  const values = [];\n\n  const seenBoxes = [];\n  Object.keys(linkBoxes).forEach((k) => {\n    const index = parseInt(k);\n    const box = filteredBoxes[index];\n\n    if (!seenBoxes.includes(index)) {\n      seenBoxes.push(index);\n      let text = box.description;\n      let { grams, milligrams, mcg, percents, kJ, kcal, all } = extractValues(\n        text\n      );\n\n      let i = index;\n      const group = [i];\n      let again = true;\n      while (all.length > 0 && linkBoxes[i] !== null && again) {\n        again = false;\n        let {\n          grams: newGrams,\n          milligrams: newMilligrams,\n          mcg: newMcg,\n          percents: newPercents,\n          kJ: newKJ,\n          kcal: newKcal,\n          all: newAll,\n        } = extractValues(text + filteredBoxes[linkBoxes[i]].description);\n        if (\n          grams.length < newGrams.length ||\n          milligrams.length < newMilligrams.length ||\n          mcg.length < newMcg.length ||\n          percents.length < newPercents.length ||\n          kJ.length < newKJ.length ||\n          kcal.length < newKcal.length\n        ) {\n          again = true;\n          seenBoxes.push(linkBoxes[i]);\n          group.push(linkBoxes[i]);\n          i = linkBoxes[i];\n          text = text + filteredBoxes[i].description;\n          grams = newGrams;\n          milligrams = newMilligrams;\n          mcg = newMcg;\n          percents = newPercents;\n          kJ = newKJ;\n          kcal = newKcal;\n          all = newAll;\n        }\n      }\n\n      if (all.length > 0) {\n        values.push({\n          boxesIndexes: [...group],\n          text: [\n            ...grams,\n            ...milligrams,\n            ...mcg,\n            ...percents,\n            ...kJ,\n            ...kcal,\n            ...all,\n          ],\n        });\n      }\n    }\n  });\n\n  return values;\n}\n\nfunction filterBoxes(\n  ocrData,\n  { minX, minY, maxX, maxY, angle, width, height }\n) {\n  // return the list of the boxes inside the rectangle\n  // and provide a tree of which box is one the right of which box and close enough the be part of an expression.\n  while (angle < 0) {\n    angle += 360;\n  }\n  const filteredBoxes = ocrData.boxes\n    .map((box) => ({\n      ...box,\n      boundingPoly: {\n        ...box.boundingPoly,\n        vertices: box.boundingPoly.vertices.map(({ x, y }) => {\n          switch (angle % 360) {\n            case 90:\n              return { x: height - y, y: x };\n            case 180:\n              return { x: width - x, y: height - y };\n            case 270:\n              return { x: y, y: width - x };\n            default:\n              return { x, y };\n          }\n        }),\n      },\n    }))\n    .filter((box) => boxIsInside(box, { minX, minY, maxX, maxY }))\n    .map((box) => addGlobalBox(box))\n    .sort((a, b) => a.minY - b.minY);\n\n  const diffX = filteredBoxes.map((b) => b.maxY - b.minY).sort()[\n    Math.floor(filteredBoxes.length / 2)\n  ];\n\n  let X_sorted_indexes = [...filteredBoxes.map((_, i) => i)];\n  X_sorted_indexes.sort(\n    (a, b) => -filteredBoxes[a].minX + filteredBoxes[b].minX\n  );\n\n  const linkBoxes = {};\n  X_sorted_indexes.forEach((k) => {\n    const i = parseInt(k);\n    linkBoxes[i] = null;\n    let j = i - 1;\n    while (\n      linkBoxes[i] === null &&\n      j >= 0 &&\n      filteredBoxes[j].maxY > filteredBoxes[i].minY\n    ) {\n      if (\n        filteredBoxes[i].maxX - diffX <= filteredBoxes[j].minX &&\n        filteredBoxes[i].maxX + diffX >= filteredBoxes[j].minX &&\n        isOverlapping(filteredBoxes[i], filteredBoxes[j])\n      ) {\n        linkBoxes[i] = j;\n      }\n      j = j - 1;\n    }\n    j = i + 1;\n    while (\n      linkBoxes[i] === null &&\n      j < filteredBoxes.length &&\n      filteredBoxes[j].minY < filteredBoxes[i].maxY\n    ) {\n      if (\n        filteredBoxes[i].maxX - diffX <= filteredBoxes[j].minX &&\n        filteredBoxes[i].maxX + diffX >= filteredBoxes[j].minX &&\n        isOverlapping(filteredBoxes[i], filteredBoxes[j])\n      ) {\n        linkBoxes[i] = j;\n      }\n      j = j + 1;\n    }\n  });\n  return { filteredBoxes, linkBoxes };\n}\n\nconst ocr = {\n  async getOCRdata(imageUrl) {\n    // fetch the OCR\n    const {\n      data: {\n        responses: [{ textAnnotations: textAnnotations }],\n      },\n    } = await axios.get(`${OFF_IMAGE_URL}/${imageUrl.split(\".jpg\")[0]}.json`);\n\n    return {\n      lang: textAnnotations[0][\"locale\"],\n      text: textAnnotations[0][\"description\"],\n      boxes: textAnnotations.slice(1),\n    };\n  },\n  getData(\n    ocrData,\n    {\n      minX,\n      minY,\n      maxX,\n      maxY,\n      image: {\n        width,\n        height,\n        transforms: { rotate: angle = 0 },\n      },\n    }\n  ) {\n    // recover all the information from OCR and the cropping\n\n    const { filteredBoxes, linkBoxes } = filterBoxes(ocrData, {\n      minX,\n      minY,\n      maxX,\n      maxY,\n      angle,\n      width,\n      height,\n    });\n    filteredBoxes.forEach((x, i) => {\n      filteredBoxes[i] = { id: i, ...x };\n    });\n    const values = getValues(filteredBoxes, linkBoxes);\n    const nutriments = getNutrimentBoxes(\n      filteredBoxes,\n      linkBoxes,\n      ocrData.lang\n    );\n    return { filteredBoxes, values, nutriments };\n  },\n\n  bestMatch({ search, lang = \"\", except = [] }) {\n    // for search (a string) return the 5 closest nutriments\n    if (!search) {\n      return [];\n    }\n    let translation = nutrimentTranslation[lang];\n\n    if (!translation) {\n      translation = {};\n    }\n    if (lang !== \"en\") {\n      Object.keys(nutrimentTranslation[\"en\"]).forEach((key) => {\n        if (!translation[key]) {\n          translation[key] = [...nutrimentTranslation[\"en\"][key]];\n        } else {\n          nutrimentTranslation[\"en\"][key].forEach((trad) => {\n            if (!translation[key].includes(trad)) {\n              translation[key].push(trad);\n            }\n          });\n        }\n        translation[key];\n      });\n    }\n\n    const normalizedSearch = search\n      .normalize(\"NFD\")\n      .replace(/[\\u0300-\\u036f]/g, \"\")\n      .toLowerCase();\n    return Object.keys(translation)\n      .filter(\n        (nutriKey) =>\n          !except.includes(nutriKey) &&\n          !(\n            nutriKey === \"nutriment_energy\" &&\n            except.includes(\"nutriment_energy-kj\")\n          )\n      )\n      .map((nutriKey) => {\n        const text = closest(\n          normalizedSearch,\n          translation[nutriKey].map((x) =>\n            x\n              .normalize(\"NFD\")\n              .replace(/[\\u0300-\\u036f]/g, \"\")\n              .toLowerCase()\n          )\n        );\n        // const text = translation[nutriKey][0]\n        //   .normalize(\"NFD\")\n        //   .replace(/[\\u0300-\\u036f]/g, \"\")\n        //   .toLowerCase();\n        return {\n          key: nutriKey,\n          text,\n          d: distance(normalizedSearch, text),\n        };\n      })\n      .sort((a, b) => a.d - b.d)\n      .slice(0, 5);\n  },\n};\nexport default ocr;\n","<script>\nimport { points2Path } from \"../utils/tableAnotation\";\n\nfunction rotateSize(size, angle) {\n  const radians = (angle * Math.PI) / 180;\n  return {\n    width:\n      Math.abs(size.width * Math.cos(radians)) +\n      Math.abs(size.height * Math.sin(radians)),\n    height:\n      Math.abs(size.width * Math.sin(radians)) +\n      Math.abs(size.height * Math.cos(radians)),\n  };\n}\nfunction getStyleTransforms({ rotate, flip, scaleX, scaleY }) {\n  let transform = \"\";\n  transform += ` rotate(${rotate}deg) `;\n  transform += ` scaleX(${scaleX * (flip.horizontal ? -1 : 1)}) `;\n  transform += ` scaleY(${scaleY * (flip.vertical ? -1 : 1)}) `;\n  return transform;\n}\nexport default {\n  props: {\n    coordinates: {\n      type: Object,\n    },\n    transitions: {\n      type: Object,\n    },\n    image: {\n      type: Object,\n      default() {\n        return {};\n      },\n    },\n    imageClass: {\n      type: String,\n    },\n    width: {\n      type: Number,\n    },\n    height: {\n      type: Number,\n    },\n    onlyPredictions: { type: Boolean },\n    clickableBoxes: { type: Array },\n    anotationToValidate: { type: Object },\n    bestMatch: { type: Function },\n    boxesHighlight: { type: Array },\n    attributedBoxesIds: { type: Array }, // list of box_id that as been used (fo nutriment or quantity selection)\n  },\n  data() {\n    return {\n      calculatedImageSize: {\n        width: 0,\n        height: 0,\n      },\n      calculatedSize: {\n        width: 0,\n        height: 0,\n      },\n      displayedBox: {},\n    };\n  },\n  computed: {\n    style() {\n      if (!this.fill) {\n        const result = {};\n        if (this.width) {\n          result.width = `${this.size.width}px`;\n        }\n        if (this.height) {\n          result.height = `${this.size.height}px`;\n        }\n        if (this.transitions && this.transitions.enabled) {\n          result.transition = `${this.transitions.time}ms ${this.transitions.timingFunction}`;\n        }\n        return result;\n      } else {\n        return {};\n      }\n    },\n    imageWidth() {\n      return this.image.width;\n    },\n    imageHeight() {\n      return this.image.height;\n    },\n    wrapperStyle() {\n      const result = {\n        width: `${this.size.width}px`,\n        height: `${this.size.height}px`,\n        left: `calc(50% - ${this.size.width / 2}px)`,\n        top: `calc(50% - ${this.size.height / 2}px)`,\n      };\n      if (this.transitions && this.transitions.enabled) {\n        result.transition = `${this.transitions.time}ms ${this.transitions.timingFunction}`;\n      }\n      return result;\n    },\n    imageStyle() {\n      if (this.coordinates && this.image) {\n        const coefficient = this.coordinates.width / this.size.width;\n        const transforms = {\n          rotate: 0,\n          flip: {\n            horizontal: false,\n            vertical: false,\n          },\n          ...this.image.transforms,\n          scaleX: 1 / coefficient,\n          scaleY: 1 / coefficient,\n        };\n        const width = this.imageSize.width;\n        const height = this.imageSize.height;\n        const virtualSize = rotateSize(\n          {\n            width,\n            height,\n          },\n          transforms.rotate\n        );\n        const result = {\n          width: `${width}px`,\n          height: `${height}px`,\n          left: \"0px\",\n          top: \"0px\",\n        };\n        const compensations = {\n          rotate: {\n            left: ((width - virtualSize.width) * transforms.scaleX) / 2,\n            top: ((height - virtualSize.height) * transforms.scaleY) / 2,\n          },\n          scale: {\n            left: ((1 - transforms.scaleX) * width) / 2,\n            top: ((1 - transforms.scaleY) * height) / 2,\n          },\n        };\n        result.transform =\n          `translate(\n\t\t\t\t${-this.coordinates.left / coefficient -\n          compensations.rotate.left -\n          compensations.scale.left}px,${-this.coordinates.top / coefficient -\n            compensations.rotate.top -\n            compensations.scale.top}px) ` + getStyleTransforms(transforms);\n        if (this.transitions && this.transitions.enabled) {\n          result.transition = `${this.transitions.time}ms ${this.transitions.timingFunction}`;\n        }\n        return result;\n      } else {\n        return {};\n      }\n    },\n    svgStyle() {\n      // the difference with the image style is the rotation\n      // box coordinates are already rotated, so the svg does not need to be rotated\n      if (this.coordinates && this.image) {\n        const coefficient = this.coordinates.width / this.size.width;\n        const transforms = {\n          flip: {\n            horizontal: false,\n            vertical: false,\n          },\n          rotate: 0,\n          ...this.image.transforms,\n          scaleX: 1 / coefficient,\n          scaleY: 1 / coefficient,\n        };\n\n        const { width, height } = rotateSize(this.imageSize, transforms.rotate);\n\n        const result = {\n          width: `${width}px`,\n          height: `${height}px`,\n          left: \"0px\",\n          top: \"0px\",\n        };\n        result.transformOrigin = \"0 0\";\n        result.transform =\n          `translate(\n          ${-this.coordinates.left * transforms.scaleX}px,${-this.coordinates\n            .top * transforms.scaleY}px) ` +\n          getStyleTransforms({ ...transforms, rotate: 0 });\n        if (this.transitions && this.transitions.enabled) {\n          result.transition = `${this.transitions.time}ms ${this.transitions.timingFunction}`;\n        }\n        return result;\n      } else {\n        return {};\n      }\n    },\n    size() {\n      return {\n        width: this.width || this.calculatedSize.width,\n        height: this.height || this.calculatedSize.height,\n      };\n    },\n    imageSize() {\n      return {\n        width: this.image.width || this.calculatedImageSize.width,\n        height: this.image.height || this.calculatedImageSize.height,\n      };\n    },\n    potentialNutriments() {\n      if (!this.displayedBox || !this.displayedBox.values) {\n        return [];\n      }\n      const rep = this.$props.bestMatch({ search: this.displayedBox.values });\n      return rep;\n    },\n  },\n  watch: {\n    clickableBoxes() {\n      this.displayedBox = {};\n    },\n    image(value) {\n      if (value.width || value.height) {\n        this.onChangeImage();\n      }\n    },\n  },\n  mounted() {\n    this.onChangeImage();\n    this.$refs.image.addEventListener(\"load\", () => {\n      this.refreshImage();\n    });\n    window.addEventListener(\"resize\", this.refresh);\n    window.addEventListener(\"orientationchange\", this.refresh);\n  },\n  destroyed() {\n    window.removeEventListener(\"resize\", this.refresh);\n    window.removeEventListener(\"orientationchange\", this.refresh);\n  },\n  methods: {\n    boxBoundingPath(box) {\n      return points2Path(box.boundingPoly.vertices, true);\n    },\n    displayBox(boxIndex) {\n      if (this.displayedBox && this.displayedBox.index === boxIndex) {\n        this.displayedBox = {};\n      } else {\n        this.displayedBox = {\n          index: boxIndex,\n          ...this.$props.clickableBoxes[boxIndex],\n        };\n      }\n    },\n    removeDisplayedBox() {\n      this.displayedBox = {};\n    },\n    validateProposition(nutriKey) {\n      this.$emit(\"validatedBox\", { ...this.displayedBox, key: nutriKey });\n      this.displayedBox = {};\n    },\n    validateValue() {\n      this.$emit(\"validatedBox\", { ...this.displayedBox });\n      this.displayedBox = {};\n    },\n    validateNutrimentPrediction() {\n      this.$emit(\"nutriPredictionAccept\");\n    },\n    cancelNutrimentPrediction() {\n      this.$emit(\"nutriPredictionCancel\");\n    },\n    interactiveElementStyle({ maxX: x, minY: y }) {\n      if (this.coordinates && this.image) {\n        const result = {\n          left: `${((x - this.coordinates.left) * this.size.width) /\n            this.coordinates.width}px`,\n          top: `${((y - this.coordinates.top) * this.size.height) /\n            this.coordinates.height}px`,\n        };\n        return result;\n      } else {\n        return {};\n      }\n    },\n    refreshImage() {\n      const image = this.$refs.image;\n      this.calculatedImageSize.height = image.naturalHeight;\n      this.calculatedImageSize.width = image.naturalWidth;\n    },\n    refresh() {\n      const root = this.$refs.root;\n      if (!this.width) {\n        this.calculatedSize.width = root.clientWidth;\n      }\n      if (!this.height) {\n        this.calculatedSize.height = root.clientHeight;\n      }\n    },\n    onChangeImage() {\n      const image = this.$refs.image;\n      if (image && image.complete) {\n        this.refreshImage();\n      }\n      this.refresh();\n    },\n  },\n};\n</script>\n\n<template>\n  <div class=\"rootContainer\">\n    <div ref=\"root\" class=\"vue-preview\" :style=\"style\">\n      <div ref=\"wrapper\" class=\"wrapper\" :style=\"wrapperStyle\">\n        <img\n          v-show=\"image && image.src\"\n          ref=\"image\"\n          :src=\"image && image.src\"\n          class=\"image\"\n          :style=\"imageStyle\"\n        />\n        <svg\n          class=\"image\"\n          :style=\"svgStyle\"\n          :width=\"imageWidth\"\n          :height=\"imageHeight\"\n        >\n          <rect\n            x0=\"0\"\n            y0=\"0\"\n            :width=\"imageWidth\"\n            :height=\"imageHeight\"\n            class=\"nutriHighlight\"\n          />\n          <g v-for=\"(data, j) in clickableBoxes\" :key=\"j\">\n            <path\n              v-for=\"(box, i) in data.boxes\"\n              :key=\"`${j}-${i}`\"\n              :d=\"boxBoundingPath(box)\"\n              :class=\"{\n                highlight: displayedBox.index === i,\n                alreadyUsed: attributedBoxesIds.includes(box.id),\n              }\"\n              @click=\"displayBox(j)\"\n            />\n          </g>\n          <g v-if=\"anotationToValidate && anotationToValidate.boxes\">\n            <path\n              v-for=\"box in anotationToValidate.boxes\"\n              :key=\"box.minX\"\n              :d=\"boxBoundingPath(box)\"\n              class=\"nutriHighlight\"\n            />\n          </g>\n          <g v-if=\"boxesHighlight\">\n            <path\n              v-for=\"box in boxesHighlight\"\n              :key=\"box.minX\"\n              :d=\"boxBoundingPath(box)\"\n              class=\"boxHighlighted\"\n            />\n          </g>\n        </svg>\n      </div>\n    </div>\n\n    <!-- the clicked box Nutritive Information -->\n    <div\n      v-if=\"displayedBox && displayedBox.values !== undefined\"\n      class=\"anotation\"\n      :style=\"\n        interactiveElementStyle(\n          displayedBox.boxes[displayedBox.boxes.length - 1]\n        )\n      \"\n      v-focus\n    >\n      <input v-model=\"displayedBox.values\" />\n      <template v-if=\"onlyPredictions\">\n        <button @click=\"removeDisplayedBox\">X</button>\n        <ol class=\"propositions\">\n          <li v-for=\"proposition in potentialNutriments\" :key=\"proposition.key\">\n            <button @click=\"validateProposition(proposition.key)\">\n              {{ proposition.key }}({{ proposition.text }})\n            </button>\n          </li>\n        </ol>\n      </template>\n      <template v-else>\n        <br />\n        <button @click=\"removeDisplayedBox\">X</button>\n        <button @click=\"validateValue\">V</button>\n      </template>\n    </div>\n\n    <!-- The nutrition to verify -->\n    <div\n      class=\"anotation\"\n      v-if=\"anotationToValidate && anotationToValidate.boxes\"\n      :style=\"\n        interactiveElementStyle(\n          anotationToValidate.boxes[anotationToValidate.boxes.length - 1]\n        )\n      \"\n    >\n      {{ anotationToValidate.text }}\n      <button @click=\"cancelNutrimentPrediction\">X</button>\n      <button @click=\"validateNutrimentPrediction\">V</button>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.rootContainer {\n  position: relative;\n  width: 100%;\n  height: 100%;\n}\n.vue-preview {\n  overflow: hidden;\n  box-sizing: border-box;\n\n  width: 100%;\n  height: 100%;\n}\n.fill {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n}\n.wrapper {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n}\n.image {\n  pointer-events: none;\n  position: absolute;\n  user-select: none;\n  transform-origin: center;\n  max-width: none !important;\n}\npath {\n  stroke: red;\n  stroke-width: 2;\n  fill: red;\n  fill-opacity: 0.3;\n  pointer-events: all;\n  cursor: pointer;\n}\nrect {\n  fill-opacity: 0.1;\n  fill: white;\n  pointer-events: all;\n}\ng:hover path {\n  stroke: red;\n  stroke-width: 5;\n\n  cursor: pointer;\n}\n.highlight {\n  stroke: red;\n  stroke-width: 5;\n}\n\n.boxHighlighted {\n  stroke: blue;\n  stroke-width: 5;\n  fill: blue;\n}\n\n.alreadyUsed {\n  fill: green;\n}\n\n.anotation {\n  background-color: white;\n  position: absolute;\n  z-index: 1000;\n  text-align: left;\n}\n.anotation button {\n  margin: 0.5rem 0.5rem 0 0;\n}\n\n.propositions li {\n  padding-bottom: 2px;\n  font-size: 1.2rem;\n}\n.propositions {\n  list-style: none;\n  position: relative;\n  background: white;\n  padding: 0 1rem;\n}\n</style>\n","export const points2Path = (points, close) =>\n  \"M \" +\n  points.map((point) => `${point.x} ${point.y}`).join(\" L \") +\n  (close ? \" Z\" : \"\");\n\nexport const points2Key = (points) =>\n  [...points]\n    .sort((pA, pB) => (pA.x == pB.x ? pA.y - pB.y : pA.x - pB.x))\n    .map((point) => `(${point.x},${point.y})`)\n    .join(\"\");\n\nconst compare3points = (pA, pB, pC) =>\n  (pB.x - pA.x) * (pC.y - pA.y) - (pB.y - pA.y) * (pC.x - pA.x) > 0;\n\nexport const getConvexPoints = (points) => {\n  const sortedPoints = [...points].sort((pA, pB) => pA.x - pB.x);\n\n  const enveloppe = [0];\n\n  while (\n    enveloppe[enveloppe.length - 1] !== enveloppe[0] ||\n    enveloppe.length === 1\n  ) {\n    const a = enveloppe[enveloppe.length - 1];\n    for (let b = 0; b < sortedPoints.length; b++) {\n      if (a !== b) {\n        let bord = true;\n        let c = 0;\n        while (c < sortedPoints.length && bord) {\n          if (\n            c !== a &&\n            c !== b &&\n            compare3points(sortedPoints[a], sortedPoints[b], sortedPoints[c])\n          ) {\n            bord = false;\n          }\n          c++;\n        }\n        if (bord) {\n          enveloppe.push(b);\n        }\n      }\n    }\n  }\n  return enveloppe\n    .slice(0, enveloppe.length)\n    .map((pointIndex) => sortedPoints[pointIndex]);\n};\n\nexport const getCenter = (points) => {\n  const sum = points.reduce((pA, pB) => ({ x: pA.x + pB.x, y: pA.y + pB.y }), {\n    x: 0,\n    y: 0,\n  });\n  return { x: sum.x / points.length, y: sum.y / points.length };\n};\n\nexport const getBoxes = (textAnnotations) => {\n  const rep = {};\n  textAnnotations.forEach((box, boxIndex) => {\n    if (boxIndex > 0) {\n      rep[points2Key(box.boundingPoly.vertices)] = {\n        id: points2Key(box.boundingPoly.vertices),\n        boxIndex: boxIndex,\n        points: box.boundingPoly.vertices,\n        path: points2Path(box.boundingPoly.vertices, true),\n        text: box.description,\n        visible: true,\n        toDelete: false,\n      };\n    }\n  });\n  return rep;\n};\n\nexport const getGraphConnexComponents = (graph) => {\n  const node2component = {};\n\n  Object.keys(graph).forEach((key, index) => {\n    node2component[key] = index;\n  });\n  Object.keys(graph).forEach((key) => {\n    const neighbors = [...graph[key], key];\n\n    const components = neighbors.map((n) => node2component[n]); //get all components to fusion\n\n    const minComponentId = components.reduce(\n      (a, b) => Math.min(a, b),\n      Object.keys(graph).length\n    );\n\n    Object.keys(graph).forEach((key) => {\n      if (components.includes(node2component[key])) {\n        node2component[key] = minComponentId;\n      }\n    });\n  });\n\n  return node2component;\n};\n\nexport const getHullPaths = (graph, boxes) => {\n  const node2component = getGraphConnexComponents(graph); //associate each noteId to a component number\n  if (boxes === 0) {\n    boxes += 1;\n  }\n\n  // we reverse the key/value\n  // for each component index we get the list of nodeId\n  const component2nodes = {};\n  Object.keys(node2component).forEach((node) => {\n    const componentId = node2component[node];\n    if (component2nodes[componentId] === undefined) {\n      component2nodes[componentId] = [node];\n    } else {\n      component2nodes[componentId].push(node);\n    }\n  });\n\n  //now we will return a dict associated key to convex cell\n  const rep = {};\n  Object.keys(component2nodes).forEach((key) => {\n    const points = component2nodes[key].reduce(\n      (accumulateur, nodeId) => [...accumulateur, ...boxes[nodeId].points],\n      []\n    );\n    const componentKey = [...component2nodes[key]]\n      .sort((nodeId1, nodeId2) => (nodeId1 < nodeId2 ? 1 : -1))\n      .join(\"-\");\n\n    rep[componentKey] = {\n      // rep[points.join(\"//\")] = {\n      path: points2Path(getConvexPoints(points), true),\n      points: points,\n      text: \"\",\n      visible: true,\n      id: componentKey,\n    };\n  });\n\n  return rep;\n};\n\nexport const sortKeys = (node1Key, node2Key) => {\n  const start = node2Key > node1Key ? node2Key : node1Key;\n  const end = node2Key <= node1Key ? node2Key : node1Key;\n  return [start, end];\n};\n\nexport const isInRectangle = (x1, y1, x2, y2, points) => {\n  const Xmin = Math.min(x1, x2);\n  const Ymin = Math.min(y1, y2);\n  const Xmax = Math.max(x1, x2);\n  const Ymax = Math.max(y1, y2);\n\n  for (let i = 0; i < points.length; i++) {\n    if (\n      points[i].x > Xmax ||\n      points[i].x < Xmin ||\n      points[i].y > Ymax ||\n      points[i].y < Ymin\n    ) {\n      return false;\n    }\n  }\n  return true;\n};\n","import { render } from \"./InteractiveImage.vue?vue&type=template&id=195fffac&scoped=true\"\nimport script from \"./InteractiveImage.vue?vue&type=script&lang=js\"\nexport * from \"./InteractiveImage.vue?vue&type=script&lang=js\"\n\nimport \"./InteractiveImage.vue?vue&type=style&index=0&id=195fffac&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-195fffac\"\n\nexport default script","<script>\nexport default {\n  props: {\n    value: Object,\n    nutrimentToFillIndex: Number,\n    selectLine: Boolean,\n  },\n  model: {\n    prop: \"value\",\n    event: \"input\",\n  },\n  computed: {\n    sortedKeys: function() {\n      return Object.keys(this.$props.value).sort(\n        (a, b) => this.$props.value[a].y - this.$props.value[b].y\n      );\n    },\n  },\n  methods: {\n    isInvalid(value) {\n      return !value.match(\"^((<|>|<=|>=|~|.)*[0-9]+| *)$\");\n    },\n    getNutrimentUnits(nutrimentId) {\n      // TODO : allows more units such as micrograms, %, ...\n      switch (nutrimentId) {\n        case \"nutriment_energy-kcal\":\n          return [\"kcal\"];\n        case \"nutriment_energy-kj\":\n          return [\"kJ\"];\n        case \"nutriment_alcohol\":\n          return [];\n        case \"nutriment_ph\":\n          return [];\n        default:\n          return [\"g\", \"mg\", \"µg\", \"IU\"];\n        // { text: \"g\", value: \"g\" },\n        // { text: \"mg\", value: \"mg\" },\n      }\n    },\n    remove(nutritiveKey) {\n      const { ...kept } = this.$props.value;\n      delete kept[nutritiveKey];\n      this.$emit(\"input\", kept);\n    },\n    updateUnit(nutritiveKey) {\n      return (event) => {\n        this.$emit(\"input\", {\n          ...this.$props.value,\n          [nutritiveKey]: {\n            ...this.$props.value[nutritiveKey],\n            [\"unit\"]: event.target.value,\n          },\n        });\n      };\n    },\n    updateValue(nutritiveKey) {\n      return (event) => {\n        this.$emit(\"input\", {\n          ...this.$props.value,\n          [nutritiveKey]: {\n            ...this.$props.value[nutritiveKey],\n            [\"data\"]: event.target.value,\n          },\n        });\n      };\n    },\n    updateNutriIndexToFill(index) {\n      if (this.$props.selectLine) {\n        this.$emit(\"setNurtiIndex\", index);\n      }\n    },\n  },\n};\n</script>\n\n<template>\n  <sui-table celled definition>\n    <sui-table-header>\n      <sui-table-header-cell />\n      <sui-table-header-cell>{{ $t(\"nutrition.value\") }}</sui-table-header-cell>\n    </sui-table-header>\n    <sui-table-row\n      v-for=\"(nutritiveKey, index) in sortedKeys\"\n      :key=\"nutritiveKey\"\n    >\n      <sui-table-cell\n        @click=\"updateNutriIndexToFill(index)\"\n        :selectable=\"selectLine && index !== nutrimentToFillIndex\"\n        :warning=\"selectLine && index === nutrimentToFillIndex\"\n        >{{ $t(`nutrition.nutriments.${nutritiveKey}`) }}</sui-table-cell\n      >\n      <sui-table-cell\n        style=\"display: flex\"\n        :negative=\"isInvalid(value[nutritiveKey]['data'])\"\n      >\n        <input\n          style=\"flex-grow:1\"\n          :value=\"value[nutritiveKey]['data']\"\n          @input=\"updateValue(nutritiveKey)($event)\"\n        />\n        <select\n          style=\"min-width: 3rem\"\n          selection\n          :placeholder=\"$t('nutrition.table.unit')\"\n          v-if=\"getNutrimentUnits(nutritiveKey).length > 1\"\n          :value=\"value[nutritiveKey]['unit']\"\n          @change=\"updateUnit(nutritiveKey)($event)\"\n          :options=\"getNutrimentUnits(nutritiveKey)\"\n          class=\"unit\"\n        >\n          <option v-for=\"unit in getNutrimentUnits(nutritiveKey)\" :key=\"unit\">{{\n            unit\n          }}</option>\n        </select>\n        <span class=\"unit\" v-else>{{\n          getNutrimentUnits(nutritiveKey)[0]\n        }}</span>\n      </sui-table-cell>\n      <sui-table-cell>\n        <button @click=\"remove(nutritiveKey)\">\n          X\n        </button>\n      </sui-table-cell>\n    </sui-table-row>\n  </sui-table>\n</template>\n\n<style scoped>\n.error {\n  border-color: red;\n}\n</style>\n","import { render } from \"./NutritionTable.vue?vue&type=template&id=19f70efe&scoped=true\"\nimport script from \"./NutritionTable.vue?vue&type=script&lang=js\"\nexport * from \"./NutritionTable.vue?vue&type=script&lang=js\"\n\nimport \"./NutritionTable.vue?vue&type=style&index=0&id=19f70efe&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-19f70efe\"\n\nexport default script","import { render } from \"./NutritionInteractiveView.vue?vue&type=template&id=db4d336a&scoped=true\"\nimport script from \"./NutritionInteractiveView.vue?vue&type=script&lang=js\"\nexport * from \"./NutritionInteractiveView.vue?vue&type=script&lang=js\"\n\nimport \"./NutritionInteractiveView.vue?vue&type=style&index=0&id=db4d336a&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-db4d336a\"\n\nexport default script","<template>\n  <div class=\"app\">\n    <div class=\"scollable\">\n      <p class=\"explanations\">{{ this.messages[this.currentState] }}</p>\n      <div class=\"imageContainer\" @click=\"click('')\">\n        <img :src=\"urlImg\" />\n        <svg\n          :width=\"imageWidth\"\n          :height=\"imageHeight\"\n          @mousemove=\"moveAt\"\n          @mouseleave.stop=\"stopDragging\"\n          @mouseup.stop=\"stopDragging\"\n          :class=\"{ desactivateListenersInside: isDraggingCropRectangle }\"\n        >\n          <path\n            v-for=\"box in visibleBoxes\"\n            :d=\"box.path\"\n            :key=\"'box-' + box.id\"\n            @click.stop=\"currentState >= 0 && click(box.id, $event)\"\n            v-on:mouseover=\"currentState >= 0 && mouseover(box.id)\"\n            v-bind:class=\"{\n              toDelete: box.toDelete,\n              selectable: currentState >= 0,\n            }\"\n            class=\"box\"\n          />\n\n          <!-- Links in creation -->\n          <path v-if=\"currentLinks\" :d=\"currentLinks\" class=\"currentLink\" />\n          <circle\n            v-for=\"key in annotations.currentPath\"\n            :key=\"'creationCenter-' + key\"\n            :cx=\"getCenter(boxes[key].points).x\"\n            :cy=\"getCenter(boxes[key].points).y\"\n            r=\"5\"\n            class=\"currentBoxesCenter\"\n          />\n\n          <!-- saved links -->\n          <g\n            v-for=\"(neighbours, nodeKey) in annotations.memorizedGraph\"\n            :key=\"'node-group-' + nodeKey\"\n          >\n            <g\n              v-for=\"neighbourKey in neighbours\"\n              :key=\"'savedLink-' + nodeKey + ' - ' + neighbourKey\"\n            >\n              <line\n                :x1=\"getCenter(boxes[nodeKey].points).x\"\n                :y1=\"getCenter(boxes[nodeKey].points).y\"\n                :x2=\"getCenter(boxes[neighbourKey].points).x\"\n                :y2=\"getCenter(boxes[neighbourKey].points).y\"\n                @click.stop=\"clickLink(nodeKey, neighbourKey)\"\n                v-bind:class=\"{\n                  noPointerEvent: keyIsDown,\n                  youWantToDelete: !keyIsDown,\n                }\"\n                class=\"helpLink\"\n              />\n              <!-- the first link is biger in order to be easier to select (for deleting link interface) -->\n              <line\n                :x1=\"getCenter(boxes[nodeKey].points).x\"\n                :y1=\"getCenter(boxes[nodeKey].points).y\"\n                :x2=\"getCenter(boxes[neighbourKey].points).x\"\n                :y2=\"getCenter(boxes[neighbourKey].points).y\"\n                class=\"savedLink\"\n              />\n            </g>\n            <circle\n              :cx=\"getCenter(boxes[nodeKey].points).x\"\n              :cy=\"getCenter(boxes[nodeKey].points).y\"\n              r=\"15\"\n              @click.stop=\"clickNode(nodeKey)\"\n              :class=\"{\n                youWantToDeleteBoxCenter: !keyIsDown,\n                noPointerEvent: keyIsDown,\n              }\"\n            />\n            <circle\n              :cx=\"getCenter(boxes[nodeKey].points).x\"\n              :cy=\"getCenter(boxes[nodeKey].points).y\"\n              r=\"5\"\n              class=\"savedBoxesCenter\"\n            />\n          </g>\n\n          <!-- saved lines-->\n          <g v-if=\"showSavedLines\" v-bind:class=\"{ unfill: canValidate }\">\n            <g\n              v-for=\"(line, lineId) in savedLines\"\n              :key=\"'saved-line-' + lineId\"\n              class=\"validatedGroup validatedLine\"\n            >\n              <path :d=\"line.path\" />\n              <text\n                v-if=\"canNotValidate\"\n                :x=\"line.center.x\"\n                :y=\"line.center.y\"\n                dominant-baseline=\"middle\"\n                text-anchor=\"middle\"\n              >\n                {{ \"line : \" + lineId }}\n              </text>\n            </g>\n          </g>\n          <!-- saved columns-->\n          <g v-if=\"showSavedColumns\" v-bind:class=\"{ unfill: canValidate }\">\n            <g\n              v-for=\"(column, columnId) in savedColumns\"\n              :key=\"'saved-column-' + columnId\"\n              class=\"validatedGroup validatedColumn\"\n            >\n              <path :d=\"column.path\" />\n              <text\n                v-if=\"canNotValidate\"\n                :x=\"column.center.x\"\n                :y=\"column.center.y\"\n                dominant-baseline=\"middle\"\n                text-anchor=\"middle\"\n              >\n                {{ \"column : \" + columnId }}\n              </text>\n            </g>\n          </g>\n\n          <line\n            v-if=\"annotations.keyIsDown\"\n            :x1=\"`${cursor.x}`\"\n            :y1=\"`${cursor.y}`\"\n            :x2=\"`${annotations.lastElement.x}`\"\n            :y2=\"`${annotations.lastElement.y}`\"\n            class=\"currentLink\"\n          />\n          <!-- groups -->\n          <path\n            v-for=\"(group, groupId) in convexHalls\"\n            :d=\"group.path\"\n            :key=\"'convexHalls-' + groupId\"\n            class=\"convexhall\"\n          />\n\n          <!-- cropping rectangle -->\n\n          <g v-if=\"showCorppingRectangle\" class=\"croppingRectangle\">\n            <path\n              :d=\"\n                `M ${cropRectangle.start.x} ${cropRectangle.start.y} L\n          ${cropRectangle.start.x} ${cropRectangle.end.y} L\n          ${cropRectangle.end.x} ${cropRectangle.end.y} L ${cropRectangle.end.x}\n          ${cropRectangle.start.y} Z`\n              \"\n            />\n            <circle\n              :cx=\"cropRectangle.start.x\"\n              :cy=\"cropRectangle.start.y\"\n              r=\"10\"\n              @mousedown.stop=\"startDraggingStart\"\n            />\n            <circle\n              :cx=\"cropRectangle.end.x\"\n              :cy=\"cropRectangle.end.y\"\n              r=\"10\"\n              @mousedown.stop=\"startDraggingEnd\"\n            />\n          </g>\n        </svg>\n        <div class=\"subActions\">\n          <button v-on:click=\"previousStep\">Prev (p)</button>\n          <button v-on:click=\"nextStep\">Next (n)</button>\n        </div>\n\n        <div class=\"checkboxContainer\">\n          <div class=\"ui checkbox\">\n            <input\n              type=\"checkbox\"\n              name=\"perfect-data\"\n              id=\"perfect-data\"\n              value=\"perfect-data\"\n              v-model=\"dataQuality\"\n            />\n            <label for=\"perfect-data\">The text recognition is perfect</label>\n          </div>\n          <div class=\"ui checkbox\">\n            <input\n              type=\"checkbox\"\n              name=\"bad-data\"\n              id=\"bad-data\"\n              value=\"bad-data\"\n              v-model=\"dataQuality\"\n            />\n            <label for=\"bad-data\">Some words are missing</label>\n          </div>\n        </div>\n\n        <div class=\"actions\">\n          <button v-on:click=\"skip\">skip (k)</button>\n          <button\n            v-on:click=\"validate\"\n            :class=\"{ canValidate: canValidate, disabled: !canValidate }\"\n          >\n            validate (v)\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport {\n  points2Key,\n  getBoxes,\n  getCenter,\n  points2Path,\n  getHullPaths,\n  sortKeys,\n  getConvexPoints,\n  isInRectangle,\n} from \"../utils/tableAnotation.js\";\n\nconst messages = {\n  \"-1\": \"Déplacer le rectangle pour le faire contenir le tableau\",\n  0: \"Merci de regrouper entre elles les boîtes faisant partie d'une même case du tableau\",\n  1: \"Si des boites rouges font partie du tableau, merci de les ajouter (vous pouvez sélectionner une case seule)\",\n  2: \"Reliez entre elles les cellules d'une même ligne\",\n  3: \"Reliez entre elles les cellules d'une même colonne\",\n};\n\nexport default {\n  name: \"TableAnnotationView\",\n  components: {},\n  data: function() {\n    return {\n      urlImg: null,\n      dataQuality: [],\n      messages: messages,\n      loading: false,\n      currentState: -1,\n      boxes: [],\n      imageHeight: 0,\n      imageWidth: 0,\n      insightId: null,\n      batchOfInsights: [],\n      annotations: {\n        annnotated: false,\n        keyIsDown: false,\n        currentPath: [],\n        memorizedGraph: {},\n        lastElement: { x: 0, y: 0 },\n      },\n      cropRectangle: {\n        start: {\n          x: 10,\n          y: 10,\n        },\n        end: {\n          //TODO replace by image size\n          x: 100,\n          y: 100,\n        },\n        currentlyDragged: null,\n      },\n      convexHalls: {},\n      cursor: { x: 0, y: 0 },\n      lineIterator: 0,\n      savedLines: {},\n      columnIterator: 0,\n      savedColumns: {},\n      savedCellsGraph: {},\n    };\n  },\n  computed: {\n    currentLinks: function() {\n      if (this.annotations.currentPath.length < 1) {\n        return \"\";\n      }\n      return points2Path(\n        this.annotations.currentPath.map((boxKey) =>\n          getCenter(this.boxes[boxKey].points)\n        ),\n        false\n      );\n    },\n    keyIsDown: function() {\n      return this.annotations.keyIsDown;\n    },\n    visibleBoxes: function() {\n      return Object.keys(this.boxes)\n        .filter((key) => this.boxes[key].visible)\n        .map((key) => this.boxes[key]);\n    },\n    showSavedLines: function() {\n      return this.currentState === 2 || this.currentState === 4;\n    },\n    showSavedColumns: function() {\n      return this.currentState === 3 || this.currentState === 4;\n    },\n    canValidate: function() {\n      return this.currentState === 4;\n    },\n    canNotValidate: function() {\n      return this.currentState !== 4;\n    },\n    showCorppingRectangle: function() {\n      return this.currentState === -1;\n    },\n    isDraggingCropRectangle: function() {\n      return !!this.cropRectangle.currentlyDragged;\n    },\n  },\n  methods: {\n    isSaved: function(key, savingDict) {\n      for (let dicKey of Object.keys(savingDict)) {\n        if (savingDict[dicKey].keys.findIndex((x) => x === key) >= 0) {\n          return true;\n        }\n      }\n      return false;\n    },\n    reset: function() {\n      this.dataQuality = [];\n      this.currentState = -1;\n      this.boxes = [];\n      this.annotations = {\n        annnotated: false,\n        keyIsDown: false,\n        currentPath: [],\n        memorizedGraph: {},\n        lastElement: { x: 0, y: 0 },\n      };\n      this.cropRectangle = {\n        start: {\n          x: 10,\n          y: 10,\n        },\n        end: {\n          x: 50,\n          y: 50,\n        },\n        currentlyDragged: null,\n      };\n      this.convexHalls = {};\n      this.cursor = { x: 0, y: 0 };\n      this.lineIterator = 0;\n      this.savedLines = {};\n      this.columnIterator = 0;\n      this.savedColumns = {};\n      this.savedCellsGraph = {};\n    },\n    validate: function() {\n      if (!this.canValidate) {\n        return null;\n      }\n      if (this.dataQuality.length === 0) {\n        alert(\"Please give us your opinion on the text recognition\");\n        return null;\n      }\n      if (this.dataQuality.length > 1) {\n        alert(\n          \"Please select only one box for giving your opinion on text recognition\"\n        );\n        return null;\n      }\n      //get ids of boxes concerned by lines and colmuns\n      const lines = {};\n      const columns = {};\n      const boxId2cellId = {};\n\n      Object.keys(this.savedLines).map((lineId) => {\n        this.savedLines[lineId].keys.forEach((cellId) => {\n          cellId.split(\"-\").forEach((boxId) => {\n            if (lines[boxId] === undefined) {\n              lines[boxId] = [lineId];\n            } else {\n              lines[boxId] = [...lines[boxId], lineId];\n            }\n            if (boxId2cellId[boxId] === undefined) {\n              boxId2cellId[boxId] = cellId;\n            }\n          });\n        });\n      });\n\n      Object.keys(this.savedColumns).map((columnId) => {\n        this.savedColumns[columnId].keys.forEach((cellId) => {\n          cellId.split(\"-\").forEach((boxId) => {\n            if (columns[boxId] === undefined) {\n              columns[boxId] = [columnId];\n            } else {\n              columns[boxId] = [...columns[boxId], columnId];\n            }\n            if (boxId2cellId[boxId] === undefined) {\n              boxId2cellId[boxId] = cellId;\n            }\n          });\n        });\n      });\n\n      const rep = {};\n\n      this.textAnnotations.forEach((annotation) => {\n        const key = points2Key(annotation.boundingPoly.vertices);\n        let lineIds;\n        let columnIds;\n        if (lines[key] === undefined) {\n          lineIds = [];\n        } else {\n          lineIds = lines[key];\n        }\n        if (columns[key] === undefined) {\n          columnIds = [];\n        } else {\n          columnIds = columns[key];\n        }\n\n        rep[key] = {\n          ...annotation,\n          row_index: lineIds,\n          column_index: columnIds,\n          cell_id: boxId2cellId[key] || null,\n        };\n      });\n\n      axios.post(\n        `https://robotoff.openfoodfacts.org/api/v1/insights/annotate`,\n        new URLSearchParams(\n          `insight_id=${this.insightId}&annotation=1&data=${JSON.stringify({\n            textAnnotations: rep,\n            crop: this.cropRectangle,\n            dataQuality: this.dataQuality[0],\n          })}`\n        )\n      );\n\n      this.skip();\n    },\n    getCenter: function(points) {\n      return getCenter(points);\n    },\n    skip: async function() {\n      this.batchOfInsights = this.batchOfInsights.slice(1);\n\n      if (this.batchOfInsights.length > 0 && this.batchOfInsights.length < 5) {\n        this.loadOCR();\n      } else if (this.batchOfInsights.length === 0) {\n        await this.loadOCR();\n      }\n      const vm = this;\n\n      this.urlImg = this.batchOfInsights[0].urlImg;\n      this.insightId = this.batchOfInsights[0].insightId;\n\n      const {\n        data: { responses: responses },\n      } = await axios.get(this.batchOfInsights[0].textAnnotationsUrl);\n      this.textAnnotations = responses[0].textAnnotations;\n\n      var img = new Image();\n      img.onload = function() {\n        vm.imageHeight = img.height;\n        vm.imageWidth = img.width;\n      };\n      img.src = this.urlImg;\n\n      this.reset();\n      this.boxes = getBoxes(this.textAnnotations);\n\n      return null;\n    },\n    loadOCR: async function() {\n      this.loading = true;\n      const {\n        data: { insights: listOfInsights },\n      } = await axios.get(\n        \"https://robotoff.openfoodfacts.org/api/v1/insights/random?type=nutrition_table_structure\"\n      );\n\n      this.batchOfInsights = [\n        ...this.batchOfInsights,\n        ...listOfInsights.map(({ source_image, id }) => {\n          return {\n            urlImg: `https://static.openfoodfacts.org/images/products${source_image}`,\n            textAnnotationsUrl: `https://static.openfoodfacts.org/images/products${source_image\n              .split(\".\")\n              .slice(0, -1)\n              .join(\".\")}.json`,\n            insightId: id,\n          };\n        }),\n      ];\n\n      this.loading = false;\n    },\n    clickLink: function(node1, node2) {\n      if (!this.annotations.keyIsDown) {\n        const [start, end] = sortKeys(node1, node2);\n\n        this.annotations.memorizedGraph = {\n          ...this.annotations.memorizedGraph,\n          [start]: [\n            ...this.annotations.memorizedGraph[start].filter((x) => x !== end),\n          ],\n        };\n      }\n    },\n    clickNode: function(nodeId) {\n      if (!this.annotations.keyIsDown) {\n        delete this.annotations.memorizedGraph[nodeId];\n        this.annotations.memorizedGraph = {\n          ...this.annotations.memorizedGraph,\n        };\n\n        Object.keys(this.annotations.memorizedGraph).forEach((key) => {\n          const index = this.annotations.memorizedGraph[key].findIndex(\n            (x) => x === nodeId\n          );\n          if (index >= 0) {\n            this.annotations.memorizedGraph = {\n              ...this.annotations.memorizedGraph,\n              [key]: [\n                ...this.annotations.memorizedGraph[key].slice(0, index),\n                ...this.annotations.memorizedGraph[key].slice(index + 1),\n              ],\n            };\n          }\n        });\n      }\n    },\n    click: function(boxKey, event) {\n      if (!this.annotations.keyIsDown && boxKey) {\n        //We are now making links\n        this.annotations.keyIsDown = true;\n        this.annotations.currentPath = [boxKey];\n        this.annotations.lastElement = getCenter(this.boxes[boxKey].points);\n        this.cursor.x = event.offsetX;\n        this.cursor.y = event.offsetY;\n      } else if (this.annotations.keyIsDown) {\n        this.annotations.annnotated = true;\n\n        //we should stop making links\n        this.annotations.keyIsDown = false;\n\n        //save graph\n\n        // be sure that each node is a key in dictionary\n        this.annotations.currentPath.forEach((boxKey) => {\n          if (this.annotations.memorizedGraph[boxKey] === undefined) {\n            this.annotations.memorizedGraph[boxKey] = [];\n          }\n        });\n\n        // fill dictionaly with lexicographic order\n        this.annotations.currentPath.forEach((boxKey, index) => {\n          if (index > 0) {\n            const previousBoxKey = this.annotations.currentPath[index - 1];\n            const [start, end] = sortKeys(boxKey, previousBoxKey);\n\n            if (\n              !this.annotations.memorizedGraph[start].find((x) => x === end)\n            ) {\n              this.annotations.memorizedGraph[start].push(end);\n            }\n          }\n        });\n        this.annotations.currentPath = [];\n      }\n    },\n    moveAt: function(event) {\n      if (this.annotations.keyIsDown) {\n        this.cursor.x = event.offsetX;\n        this.cursor.y = event.offsetY;\n      }\n      if (\n        this.currentState === -1 &&\n        this.cropRectangle.currentlyDragged === \"end\"\n      ) {\n        this.cropRectangle.end.x = event.offsetX;\n        this.cropRectangle.end.y = event.offsetY;\n      }\n      if (\n        this.currentState === -1 &&\n        this.cropRectangle.currentlyDragged === \"start\"\n      ) {\n        this.cropRectangle.start.x = event.offsetX;\n        this.cropRectangle.start.y = event.offsetY;\n      }\n    },\n    stopDragging: function() {\n      this.cropRectangle.currentlyDragged = null;\n\n      Object.keys(this.boxes).forEach((key) => {\n        this.boxes[key].toDelete = !isInRectangle(\n          this.cropRectangle.start.x,\n          this.cropRectangle.start.y,\n          this.cropRectangle.end.x,\n          this.cropRectangle.end.y,\n          this.boxes[key].points\n        );\n      });\n    },\n    startDraggingStart: function() {\n      this.cropRectangle.currentlyDragged = \"start\";\n    },\n    startDraggingEnd: function() {\n      this.cropRectangle.currentlyDragged = \"end\";\n    },\n    mouseover: function(boxKey) {\n      if (!this.annotations.keyIsDown) {\n        return null;\n      }\n      if (\n        this.annotations.currentPath[\n          this.annotations.currentPath.length - 1\n        ] === boxKey\n      ) {\n        // The current box is the last one added -> so we remove it\n        if (this.annotations.currentPath.length > 1) {\n          this.annotations.currentPath.pop();\n          const lastBoxKey = this.annotations.currentPath[\n            this.annotations.currentPath.length - 1\n          ];\n          this.annotations.lastElement = getCenter(\n            this.boxes[lastBoxKey].points\n          );\n        }\n      } else if (!this.annotations.currentPath.find((x) => x === boxKey)) {\n        this.annotations.currentPath.push(boxKey);\n        this.annotations.lastElement = getCenter(this.boxes[boxKey].points);\n      }\n    },\n    nextStep: function() {\n      this.click();\n      if (this.currentState === -1) {\n        Object.keys(this.boxes).forEach((key) => {\n          this.boxes[key].visible = !this.boxes[key].toDelete;\n        });\n        this.currentState = 0;\n      }\n      if (\n        this.currentState === 0 ||\n        (this.annotations.annnotated && this.currentState === 1)\n      ) {\n        //Show cells created by goupin boxes\n        // can append if we click on next for the first time\n        // or if we were in the verification step and made modifications\n\n        this.convexHalls = getHullPaths(\n          this.annotations.memorizedGraph,\n          this.boxes\n        );\n        if (Object.keys(this.convexHalls).length !== 0) {\n          Object.keys(this.boxes).forEach((key) => {\n            this.boxes[key].toDelete = !Object.keys(\n              this.annotations.memorizedGraph\n            ).includes(key);\n          });\n          this.annotations.keyIsDown = false;\n          this.annotations.currentPath = [];\n          this.annotations.lastElement = { x: 0, y: 0 };\n          this.annotations.annnotated = false;\n          this.currentState = 1;\n        }\n      } else if (this.currentState === 1) {\n        // the association boxes -> cells is done by the key in convex hull\n        // since the key of a set is the concatenation of the boxes id contained in the cell\n        this.savedCellsGraph = { ...this.annotations.memorizedGraph };\n\n        this.boxes = { ...this.convexHalls };\n        this.convexHalls = {};\n\n        this.annotations.memorizedGraph = {};\n        this.savedLines = {};\n        this.lineIterator = 0;\n\n        this.currentState = 2;\n        //Now we are ready to select lines\n      } else if (this.currentState === 2) {\n        if (Object.keys(this.annotations.memorizedGraph).length === 0) {\n          if (\n            Object.keys(this.boxes).findIndex(\n              (key) => !this.isSaved(key, this.savedLines)\n            ) < 0\n          ) {\n            this.currentState = 3;\n\n            this.columnIterator = 0;\n            this.savedColumns = {};\n\n            Object.keys(this.savedLines).forEach((lineKey) =>\n              this.savedLines[lineKey].keys.forEach((nodeId) => {\n                this.boxes[nodeId].visible = true;\n              })\n            );\n          } else {\n            alert(\n              \"Tu n'as rien sélectionné, je ne peux donc pas ajouter de nouvelle ligne\"\n            );\n          }\n        } else {\n          const points = Object.keys(this.annotations.memorizedGraph).reduce(\n            (accumulateur, nodeId) => [\n              ...accumulateur,\n              ...this.boxes[nodeId].points,\n            ],\n            []\n          );\n\n          const keys = Object.keys(this.annotations.memorizedGraph);\n          this.savedLines[this.lineIterator] = {\n            keys: [...keys],\n            path: points2Path(getConvexPoints(points), true),\n            center: getCenter(points),\n          };\n\n          this.lineIterator += 1;\n          this.annotations.memorizedGraph = {};\n        }\n      } else if (this.currentState === 3) {\n        if (Object.keys(this.annotations.memorizedGraph).length === 0) {\n          if (\n            Object.keys(this.boxes).findIndex(\n              (key) => !this.isSaved(key, this.savedColumns)\n            ) < 0\n          ) {\n            this.currentState = 4;\n          } else {\n            alert(\n              \"Tu n'as rien sélectionné, je ne peux donc pas ajouter de nouvelle colonne\"\n            );\n          }\n        } else {\n          const points = Object.keys(this.annotations.memorizedGraph).reduce(\n            (accumulateur, nodeId) => [\n              ...accumulateur,\n              ...this.boxes[nodeId].points,\n            ],\n            []\n          );\n          this.savedColumns[this.columnIterator] = {\n            keys: [...Object.keys(this.annotations.memorizedGraph)],\n            path: points2Path(getConvexPoints(points), true),\n            center: getCenter(points),\n          };\n\n          this.columnIterator += 1;\n          this.annotations.memorizedGraph = {};\n        }\n      }\n    },\n    previousStep: function() {\n      this.click();\n      if (this.currentState === 0) {\n        Object.keys(this.boxes).forEach((key) => {\n          this.boxes[key].visible = true;\n        });\n        this.stopDragging();\n        this.annotations.memorizedGraph = {};\n        this.annotations.keyIsDown = false;\n        this.annotations.currentPath = [];\n        this.annotations.lastElement = { x: 0, y: 0 };\n        this.annotations.annnotated = false;\n        this.currentState = -1;\n      } else if (this.currentState === 1) {\n        this.currentState = 0;\n        //reset current anotations\n\n        this.annotations.memorizedGraph = {};\n        this.annotations.keyIsDown = false;\n        this.annotations.currentPath = [];\n        this.annotations.lastElement = { x: 0, y: 0 };\n        this.annotations.annnotated = false;\n\n        //remove saved annotations\n        this.convexHalls = {};\n        Object.keys(this.boxes).forEach((key) => {\n          this.boxes[key].toDelete = false;\n        });\n      } else if (this.currentState === 2) {\n        if (Object.keys(this.annotations.memorizedGraph).length > 0) {\n          //remove currently made graph\n          this.annotations.memorizedGraph = {};\n        } else if (this.lineIterator > 0) {\n          // remove last saved line\n          this.lineIterator -= 1;\n\n          delete this.savedLines[this.lineIterator];\n        } else {\n          // go back to cell selection\n\n          this.savedLines = {};\n          this.lineIterator = 0;\n          this.currentState = 1;\n\n          this.annotations.memorizedGraph = { ...this.savedCellsGraph };\n\n          // refind the OCR boxes\n          this.boxes = getBoxes(this.textAnnotations);\n          //remove what is outside of the cropped version\n          Object.keys(this.boxes).forEach((key) => {\n            this.boxes[key].visible = isInRectangle(\n              this.cropRectangle.start.x,\n              this.cropRectangle.start.y,\n              this.cropRectangle.end.x,\n              this.cropRectangle.end.y,\n              this.boxes[key].points\n            );\n          });\n\n          // put linked boxes as to be deleted\n          Object.keys(this.boxes).forEach((key) => {\n            this.boxes[key].toDelete = !Object.keys(\n              this.annotations.memorizedGraph\n            ).includes(key);\n          });\n\n          //get cells\n          this.convexHalls = getHullPaths(\n            this.annotations.memorizedGraph,\n            this.boxes\n          );\n\n          //reset annotations\n          this.annotations.keyIsDown = false;\n          this.annotations.currentPath = [];\n          this.annotations.lastElement = { x: 0, y: 0 };\n          this.annotations.annnotated = false;\n        }\n      } else if (this.currentState === 3) {\n        if (Object.keys(this.annotations.memorizedGraph).length > 0) {\n          //remove currently made graph\n          this.annotations.memorizedGraph = {};\n        } else if (this.columnIterator > 0) {\n          // remove las saved line\n          this.columnIterator -= 1;\n\n          delete this.savedColumns[this.columnIterator];\n        } else {\n          // go back to cell selection\n\n          this.savedColumns = {};\n          this.columnIterator = 0;\n          this.currentState = 2;\n\n          this.annotations.memorizedGraph = {};\n\n          //reset annotations\n          this.annotations.keyIsDown = false;\n          this.annotations.currentPath = [];\n          this.annotations.lastElement = { x: 0, y: 0 };\n          this.annotations.annnotated = false;\n        }\n      } else if (this.currentState === 4) {\n        this.currentState = 3;\n      }\n    },\n  },\n  watch: {\n    textAnnotations: function(newTextAnnotations) {\n      this.boxes = getBoxes(newTextAnnotations);\n    },\n  },\n  mounted: async function() {\n    const vm = this;\n\n    await this.loadOCR();\n\n    this.urlImg = this.batchOfInsights[0].urlImg;\n    this.insightId = this.batchOfInsights[0].insightId;\n\n    const {\n      data: { responses: responses },\n    } = await axios.get(this.batchOfInsights[0].textAnnotationsUrl);\n    this.textAnnotations = responses[0].textAnnotations;\n\n    var img = new Image();\n    img.onload = function() {\n      vm.imageHeight = img.height;\n      vm.imageWidth = img.width;\n    };\n    img.src = this.urlImg;\n\n    this.boxes = getBoxes(this.textAnnotations);\n\n    window.addEventListener(\"keyup\", function(event) {\n      if (event.target.nodeName == \"BODY\") {\n        if (event.key === \"k\") vm.skip();\n        if (event.key === \"n\") vm.nextStep();\n        if (event.key === \"v\") vm.validate();\n        if (event.key === \"p\") vm.previousStep();\n      }\n    });\n  },\n};\n</script>\n\n<style scoped>\n.app {\n  text-align: center;\n}\n\n.imageContainer {\n  position: relative;\n  display: inline-block;\n  text-align: left;\n}\n\n.imageContainer svg {\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n.box {\n  fill: blue;\n  fill-opacity: 0.1;\n  stroke: blue;\n  stroke-width: 1;\n}\n\n.selectable:hover {\n  stroke: blue;\n  fill: blue;\n  stroke-width: 4;\n  fill-opacity: 0.5;\n  cursor: pointer;\n}\n\n.toDelete {\n  fill: red;\n  fill-opacity: 0.3;\n}\n\n.currentLink,\n.currentBoxesCenter {\n  pointer-events: none;\n  stroke: blue;\n  stroke-width: 5;\n  fill: none;\n}\n\n.savedLink,\n.savedBoxesCenter {\n  pointer-events: none;\n  stroke: black;\n  stroke-width: 5;\n  fill: none;\n}\n\n.youWantToDeleteBoxCenter:hover {\n  stroke: red;\n  stroke-width: 5;\n  stroke-dasharray: 5, 5;\n  fill: transparent;\n}\n.youWantToDeleteBoxCenter:hover {\n  cursor: pointer;\n}\n.youWantToDeleteBoxCenter:hover + circle {\n  stroke: transparent;\n}\n.youWantToDelete {\n  stroke: transparent;\n  stroke-width: 15;\n}\n.youWantToDelete:hover {\n  cursor: pointer;\n}\n.youWantToDelete:hover + line {\n  stroke: red;\n  stroke-dasharray: 5, 5;\n}\n\n.noPointerEvent {\n  pointer-events: none;\n}\n\n.convexhall {\n  pointer-events: none;\n  stroke: blue;\n  stroke-width: 5;\n  fill: none;\n}\n\n.validatedGroup {\n  pointer-events: none;\n  stroke-width: 5;\n  fill-opacity: 0.2;\n}\n\n.validatedLine {\n  stroke: #aa00ff;\n  fill: #aa00ff;\n}\n\n.validatedColumn {\n  stroke: #4527a0;\n  fill: #4527a0;\n}\n.unfill .validatedGroup {\n  fill: none;\n}\n\n.validatedGroup text {\n  font-size: 1.5rem;\n  font-weight: bolder;\n  fill: white;\n  fill-opacity: 1;\n  stroke: none;\n}\n.states {\n  display: flex;\n  justify-content: space-evenly;\n  margin-bottom: 0.5rem;\n}\n.states div {\n  flex-grow: 1;\n  height: 2rem;\n  text-align: center;\n  vertical-align: middle;\n  line-height: 2rem;\n  text-align: center;\n  transition: color 0.2s, background-color 0.2s;\n  background-color: lightgrey;\n  color: black;\n}\n\n.states .currentState {\n  background-color: #1769aa;\n  color: white;\n}\n.states .doneState {\n  background-color: #2196f3;\n  color: white;\n}\n\n.explanations {\n  font-size: 1.3rem;\n}\n.actions,\n.subActions {\n  display: flex;\n  justify-content: stretch;\n}\n\n.actions button,\n.subActions button,\n.checkboxContainer .checkbox {\n  padding: 1rem;\n  font-size: 1.7rem;\n  border: 0;\n}\n.checkboxContainer {\n  text-align: left;\n}\n\n.checkboxContainer label {\n  margin-bottom: 1.5rem;\n}\n.actions button {\n  color: white;\n  flex-grow: 1;\n}\n\n.subActions button:hover {\n  background-color: lightgrey;\n  cursor: pointer;\n}\n\n.subActions {\n  margin-bottom: 1rem;\n  justify-content: space-between;\n}\n\n.actions button:first-child {\n  background-color: red;\n}\n.actions .canValidate {\n  background-color: green;\n  cursor: pointer;\n}\n.actions .disabled {\n  background-color: #a5d6a7;\n}\n\n.croppingRectangle path {\n  stroke: black;\n  stroke-width: 5;\n  fill: green;\n  fill-opacity: 0.5;\n}\n\n.croppingRectangle circle {\n  stroke: black;\n  stroke-width: 5;\n  fill: green;\n  cursor: pointer;\n}\n\n.desactivateListenersInside * {\n  pointer-events: none;\n}\n\n.scollable {\n  overflow: auto;\n}\n</style>\n","import { render } from \"./TableAnnotation.vue?vue&type=template&id=6d01ef04&scoped=true\"\nimport script from \"./TableAnnotation.vue?vue&type=script&lang=js\"\nexport * from \"./TableAnnotation.vue?vue&type=script&lang=js\"\n\nimport \"./TableAnnotation.vue?vue&type=style&index=0&id=6d01ef04&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-6d01ef04\"\n\nexport default script","<template>\n  <div class=\"ui stackable grid container\">\n    <div class=\"five wide column\">\n      <h2>{{ $t(\"settings.settings\") }}</h2>\n      <form class=\"ui form\" v-on:submit.prevent=\"saveLang\">\n        <div class=\"field\">\n          <div class=\"ui action input labeled\">\n            <div class=\"ui label\">{{ $t(\"settings.language\") }}</div>\n            <select v-model=\"selectedLang\" class=\"ui fluid dropdown\">\n              <option\n                v-for=\"(lang, i) in langs\"\n                :key=\"`Lang${i}`\"\n                :value=\"lang\"\n              >\n                {{ lang.toUpperCase() }}\n              </option>\n            </select>\n          </div>\n        </div>\n        <button class=\"ui button primary\">{{ $t(\"settings.save\") }}</button>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { localSettings } from \"../settings\";\nimport messages from \"../i18n/messages\";\n\nexport default {\n  name: \"SettingsView\",\n  props: [],\n\n  data: function () {\n    return {\n      selectedLang: this.$i18n.locale,\n      langs: Object.keys(messages),\n    };\n  },\n  \n  methods: {\n    saveLang: function () {\n      this.$i18n.locale = this.selectedLang;\n      localSettings.update(\"lang\", this.$i18n.locale);\n    },\n  },\n};\n</script>\n","import it from './it'\nimport en from './en'\nimport fr from './fr'\nimport de from './de'\nimport es from './es'\nimport ro from './ro'\nimport nl from './nl'\nimport ar from './ar'\nimport ca from './ca'\nimport zh from './zh'\nimport da from './da'\nimport he from './he'\nimport hu from './hu'\nimport id from './id'\nimport pt from './pt'\nimport ru from './ru'\nimport sv from './sv'\nimport uk from './uk'\nimport vi from './vi'\nimport bg from './bg'\nimport pl from './pl'\nimport hr from './hr'\nimport ko from './ko'\nimport et from './et'\n\nexport default {\n  en,\n  it,\n  fr,\n  de,\n  es,\n  ro,\n  nl,\n  ar,\n  ca,\n  zh,\n  da,\n  he,\n  hu,\n  id,\n  pt,\n  ru,\n  sv,\n  uk,\n  vi,\n  bg,\n  pl,\n  hr,\n  ko,\n  et,\n}\n","import { render } from \"./SettingsView.vue?vue&type=template&id=32b7bc76\"\nimport script from \"./SettingsView.vue?vue&type=script&lang=js\"\nexport * from \"./SettingsView.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\n  <div class=\"ui container\">\n    <div>\n      <h2>{{ $t(\"insights.insights\") }}</h2>\n      <form class=\"ui stackable form\">\n        <div class=\"two fields\">\n          <div class=\"field\">\n            <label>{{ $t(\"insights.barcode\") }}</label>\n            <input\n              :placeholder=\"$t('insights.barcode_placeholder')\"\n              v-model=\"barcodeFilter\"\n            />\n          </div>\n          <div class=\"field\">\n            <label>{{ $t(\"insights.value_tag\") }}</label>\n            <input\n              type=\"text\"\n              :placeholder=\"$t('insights.value_placeholder')\"\n              v-model=\"valueTagFilter\"\n            />\n          </div>\n        </div>\n        <div class=\"two fields\">\n          <div class=\"field\">\n            <label>{{ $t(\"insights.type\") }}</label>\n            <select class=\"ui search dropdown\" v-model=\"insightTypeFilter\">\n              <option value>{{ $t(\"insights.all\") }}</option>\n              <option value=\"label\">{{ $t(\"insights.label\") }}</option>\n              <option value=\"product_weight\">{{\n                $t(\"insights.product_weight\")\n              }}</option>\n              <option value=\"category\">{{ $t(\"insights.category\") }}</option>\n              <option value=\"expiration_date\">{{\n                $t(\"insights.expiration_date\")\n              }}</option>\n              <option value=\"packager_code\">{{\n                $t(\"insights.packager_code\")\n              }}</option>\n            </select>\n          </div>\n          <div class=\"field\">\n            <label>{{ $t(\"insights.annotated\") }}</label>\n            <select class=\"ui search dropdown\" v-model=\"annotationFilter\">\n              <option value>{{ $t(\"insights.all\") }}</option>\n              <option value=\"-1\">{{ $t(\"insights.skipped\") }}</option>\n              <option value=\"0\">{{ $t(\"insights.rejected\") }}</option>\n              <option value=\"1\">{{ $t(\"insights.accepted\") }}</option>\n              <option value=\"not_annotated\">{{\n                $t(\"insights.not_annotated\")\n              }}</option>\n            </select>\n          </div>\n        </div>\n        <input\n          class=\"ui submit button primary\"\n          type=\"submit\"\n          :value=\"$t('insights.search')\"\n          @click.prevent=\"loadInsights\"\n        />\n      </form>\n      <div class=\"ui divider\" />\n      <p v-if=\"!loading\">\n        <strong>{{ $t(\"insights.count\") }}</strong>\n        {{ resultCount }}\n      </p>\n    </div>\n    <LoadingSpinner :show=\"loading\" />\n    <table class=\"ui celled table\" v-if=\"!loading\">\n      <thead class=\"mobile hidden\">\n        <tr>\n          <th>{{ $t(\"insights.barcode\") }}</th>\n          <th>{{ $t(\"insights.id\") }}</th>\n          <th>{{ $t(\"insights.type\") }}</th>\n          <th>{{ $t(\"insights.value\") }}</th>\n          <th>{{ $t(\"insights.created_at\") }}</th>\n          <th>{{ $t(\"insights.completed_at\") }}</th>\n          <th>{{ $t(\"insights.annotation\") }}</th>\n          <th>{{ $t(\"insights.automatic\") }}</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"insight in insights\" :key=\"insight.id\">\n          <td data-label=\"Barcode\">\n            <span class=\"mobile only list__label\"\n              >{{ $t(\"insights.barcode\") }} </span\n            ><a href=\"#\" @click=\"filterBarcode(insight.barcode)\">{{\n              insight.barcode\n            }}</a\n            ><a target=\"_blank\" :href=\"getProductUrl(insight.barcode)\"\n              ><i class=\"large icon eye link_icon\"/></a\n            ><a target=\"_blank\" :href=\"getProductEditUrl(insight.barcode)\"\n              ><i class=\"large icon edit link_icon\"\n            /></a>\n          </td>\n          <td data-label=\"Id\">\n            <span class=\"mobile only list__label\">{{ $t(\"insights.id\") }} </span\n            >{{ insight.id }}\n          </td>\n          <td data-label=\"Type\">\n            <span class=\"mobile only list__label\"\n              >{{ $t(\"insights.type\") }} </span\n            >{{ insight.type }}\n          </td>\n          <td data-label=\"Value\">\n            <span class=\"mobile only list__label\"\n              >{{ $t(\"insights.value\") }} </span\n            >{{ insight.value || insight.value_tag }}\n            <a\n              target=\"_blank\"\n              :href=\"getQuestionUrl(insight.type, insight.value_tag)\"\n              v-if=\"getQuestionUrl(insight.type, insight.value_tag)\"\n              ><i class=\"large icon external alternate link_icon\"\n            /></a>\n          </td>\n          <td data-label=\"Created at\">\n            <span class=\"mobile only list__label\"\n              >{{ $t(\"insights.created_at\") }} </span\n            >{{ formatDatetime(insight.timestamp) }}\n          </td>\n          <td data-label=\"Completed at\">\n            <span class=\"mobile only list__label\"\n              >{{ $t(\"insights.completed_at\") }} </span\n            >{{ formatDatetime(insight.completed_at) }}\n          </td>\n          <td data-label=\"Annotation\">\n            <span class=\"mobile only list__label\"\n              >{{ $t(\"insights.annotation\") }}\n            </span>\n            <i\n              v-if=\"insight.annotation == 1\"\n              class=\"large green checkmark icon\"\n            ></i>\n            <i\n              v-else-if=\"insight.annotation == 0\"\n              class=\"large red times icon\"\n            ></i>\n            <i\n              v-else-if=\"insight.annotation == -1\"\n              class=\"large grey question icon\"\n            ></i>\n          </td>\n          <td data-label=\"Automatic\">\n            <span class=\"mobile only list__label\"\n              >{{ $t(\"insights.automatic\") }}\n            </span>\n            <i\n              v-if=\"insight.automatic_processing\"\n              class=\"large green checkmark icon\"\n            ></i>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n    <div v-if=\"resultCount\">\n      <pagination\n        v-model=\"currentPage\"\n        :page-count=\"pageCount\"\n        v-on:change=\"updatedPage\"\n      ></pagination>\n    </div>\n  </div>\n</template>\n\n<script>\nimport robotoffService from \"../robotoff\";\nimport Pagination from \"../components/Pagination\";\nimport LoadingSpinner from \"../components/LoadingSpinner\";\nimport { getURLParam } from \"../utils\";\nimport offService from \"../off\";\n\nexport default {\n  name: \"InsightListView\",\n  components: { Pagination, LoadingSpinner },\n  data: function() {\n    return {\n      currentPage: 1,\n      insights: [],\n      pageSize: 25,\n      resultCount: 0,\n      barcodeFilter: getURLParam(\"code\"),\n      insightTypeFilter: \"\",\n      annotationFilter: \"\",\n      valueTagFilter: \"\",\n      loading: false,\n    };\n  },\n  computed: {\n    pageCount: function() {\n      if (this.resultCount == 0) {\n        return 0;\n      }\n\n      let count = Math.floor(this.resultCount / this.pageSize);\n      if (this.resultCount % this.pageSize !== 0) {\n        count += 1;\n      }\n      return count;\n    },\n  },\n  methods: {\n    getProductUrl: function(code) {\n      if (!code) {\n        return \"\";\n      }\n      return offService.getProductUrl(code);\n    },\n    getProductEditUrl: function(code) {\n      if (!code) {\n        return \"\";\n      }\n      return offService.getProductEditUrl(code);\n    },\n    getQuestionUrl: function(type, value_tag) {\n      if (\n        !value_tag ||\n        ![\"category\", \"brand\", \"product_weight\", \"label\"].includes(type)\n      ) {\n        return \"\";\n      }\n      return `https://hunger.openfoodfacts.org/questions?type=${type}&value_tag=${value_tag}`;\n    },\n    filterBarcode: function(code) {\n      this.barcodeFilter = code;\n      this.loadInsights();\n    },\n    formatDatetime: function(datetime) {\n      if (!datetime) {\n        return null;\n      }\n      return datetime.split(\".\")[0];\n    },\n    updatedPage: function() {\n      this.loadInsights();\n    },\n    loadInsights: function() {\n      this.loading = true;\n      robotoffService\n        .getInsights(\n          this.barcodeFilter,\n          this.insightTypeFilter,\n          this.valueTagFilter,\n          this.annotationFilter,\n          this.currentPage,\n          this.pageSize\n        )\n        .then((result) => {\n          this.insights = result.data.insights;\n          this.resultCount = result.data.count;\n          this.loading = false;\n        })\n        .catch(() => {\n          this.loading = false;\n        });\n    },\n  },\n  mounted() {\n    this.loadInsights();\n  },\n};\n</script>\n<style>\n.list__label {\n  font-weight: bold;\n}\na > .link_icon {\n  margin: 5px;\n}\n</style>\n","<template>\n  <ul class=\"pagination\">\n    <li class=\"pagination-item mobile hidden\" v-if=\"paginationLabels.first\">\n      <button\n        @click=\"first\"\n        :disabled=\"hasFirst\"\n        class=\"compact ui button\"\n        v-html=\"paginationLabels.first\"\n      ></button>\n    </li>\n\n    <li class=\"pagination-item mobile hidden\" v-if=\"paginationLabels.prev\">\n      <button\n        @click=\"prev\"\n        :disabled=\"hasFirst\"\n        class=\"compact ui button\"\n        v-html=\"paginationLabels.prev\"\n      ></button>\n    </li>\n\n    <li v-for=\"page in items\" :key=\"page.label\" class=\"pagination-item\">\n      <span v-if=\"page.disable\">...</span>\n      <button\n        v-else\n        @click=\"goto(page.label)\"\n        class=\"compact ui button\"\n        :class=\"`${page.active ? 'primary' : ''}`\"\n      >{{ page.label }}</button>\n    </li>\n\n    <li v-if=\"paginationLabels.next\" class=\"pagination-item mobile hidden\">\n      <button\n        @click=\"next\"\n        :disabled=\"hasLast\"\n        class=\"compact ui button\"\n        v-html=\"paginationLabels.next\"\n      ></button>\n    </li>\n\n    <li v-if=\"paginationLabels.last\" class=\"pagination-item mobile hidden\">\n      <button\n        @click=\"last\"\n        :disabled=\"hasLast\"\n        class=\"compact ui button\"\n        v-html=\"paginationLabels.last\"\n      ></button>\n    </li>\n  </ul>\n</template>\n\n<script>\nexport default {\n  props: {\n    value: {\n      // current page\n      type: Number,\n      required: true\n    },\n    pageCount: {\n      // page numbers\n      type: Number,\n      required: true\n    },\n    labels: {\n      type: Object,\n      required: false,\n      default: () => ({})\n    }\n  },\n\n  data() {\n    return {\n      paginationLabels: {\n        first: \"&laquo;\",\n        prev: \"&lsaquo;\",\n        next: \"&rsaquo;\",\n        last: \"&raquo;\"\n      }\n    };\n  },\n\n  mounted() {\n    if (this.value > this.pageCount) {\n      this.$emit(\"input\", this.pageCount);\n    }\n  },\n\n  computed: {\n    items() {\n      let valPrev = this.value > 1 ? this.value - 1 : 1; // for easier navigation - gives one previous page\n      let valNext =\n        this.value < this.pageCount ? this.value + 1 : this.pageCount; // one next page\n      let extraPrev = valPrev === 3 ? 2 : null;\n      let extraNext =\n        valNext === this.pageCount - 2 ? this.pageCount - 1 : null;\n      let dotsBefore = valPrev > 3 ? 2 : null;\n      let dotsAfter = valNext < this.pageCount - 2 ? this.pageCount - 1 : null;\n\n      let output = [];\n\n      for (let i = 1; i <= this.pageCount; i += 1) {\n        if (\n          [\n            1,\n            this.pageCount,\n            this.value,\n            valPrev,\n            valNext,\n            extraPrev,\n            extraNext,\n            dotsBefore,\n            dotsAfter\n          ].includes(i)\n        ) {\n          output.push({\n            label: i,\n            active: this.value === i,\n            disable: [dotsBefore, dotsAfter].includes(i)\n          });\n        }\n      }\n\n      return output;\n    },\n\n    hasFirst() {\n      return this.value === 1;\n    },\n\n    hasLast() {\n      return this.value === this.pageCount;\n    }\n  },\n\n  watch: {\n    value: function() {\n      this.$emit(\"change\");\n    }\n  },\n\n  methods: {\n    first() {\n      if (!this.hasFirst) {\n        this.$emit(\"input\", 1);\n      }\n    },\n\n    prev() {\n      if (!this.hasFirst) {\n        this.$emit(\"input\", this.value - 1);\n      }\n    },\n\n    goto(page) {\n      this.$emit(\"input\", page);\n    },\n\n    next() {\n      if (!this.hasLast) {\n        this.$emit(\"input\", this.value + 1);\n      }\n    },\n\n    last() {\n      if (!this.hasLast) {\n        this.$emit(\"input\", this.pageCount);\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n.pagination {\n  padding-inline-start: 0;\n  text-align: center;\n}\n.pagination-item {\n  display: inline-block;\n  list-style: none;\n}\n</style>\n","import { render } from \"./Pagination.vue?vue&type=template&id=4e54b946&scoped=true\"\nimport script from \"./Pagination.vue?vue&type=script&lang=js\"\nexport * from \"./Pagination.vue?vue&type=script&lang=js\"\n\nimport \"./Pagination.vue?vue&type=style&index=0&id=4e54b946&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-4e54b946\"\n\nexport default script","import { render } from \"./InsightListView.vue?vue&type=template&id=0ac7f909\"\nimport script from \"./InsightListView.vue?vue&type=script&lang=js\"\nexport * from \"./InsightListView.vue?vue&type=script&lang=js\"\n\nimport \"./InsightListView.vue?vue&type=style&index=0&id=0ac7f909&lang=css\"\nscript.render = render\n\nexport default script","<template>\n  <div class=\"ui container\">\n    <div>\n      <h2>{{$t(\"logos.search\")}}</h2>\n      <div class=\"ui divider hidden\" />\n      <form class=\"ui form\" v-on:submit.prevent=\"search\">\n        <div class=\"three fields\">\n          <div class=\"field\">\n            <input type=\"text\" name=\"value\" :placeholder=\"$t('logos.value')\" v-model.trim=\"value\" />\n          </div>\n          <div class=\"field\">\n            <input type=\"text\" name=\"barcode\" :placeholder=\"$t('logos.barcode')\" v-model.trim=\"barcode\" />\n          </div>\n          <div class=\"field\">\n            <select class=\"ui fluid dropdown\" v-model=\"type\">\n              <option value>{{$t(\"logos.type\")}}</option>\n              <option value=\"label\">{{$t(\"logos.label\")}}</option>\n              <option value=\"brand\">{{$t(\"logos.brand\")}}</option>\n              <option value=\"packager_code\">{{$t(\"logos.packager_code\")}}</option>\n              <option value=\"packaging\">{{$t(\"logos.packaging\")}}</option>\n              <option value=\"qr_code\">{{$t(\"logos.qr_code\")}}</option>\n              <option value=\"category\">{{$t(\"logos.category\")}}</option>\n              <option value=\"nutrition_label\">{{$t(\"logos.nutrition_label\")}}</option>\n              <option value=\"store\">{{$t(\"logos.store\")}}</option>\n            </select>\n          </div>\n          <div class=\"field\">\n            <input type=\"number\" name=\"count\" v-model.trim=\"count\" />\n          </div>\n          <div class=\"field\">\n            <button type=\"submit\" class=\"ui button primary\">{{$t(\"logos.search\")}}</button>\n          </div>\n        </div>\n      </form>\n      <div class=\"ui divider hidden\" />\n      <LoadingSpinner :show=\"loading\" />\n      <div v-if=\"!loading && logos.length > 0\">\n        <p>{{$t(\"logos.number_of_results\")}} {{ resultCount }}</p>\n        <LogoCardGrid :logos=\"logos\" :selectable=\"false\" />\n      </div>\n      <div v-if=\"!loading && logos.length == 0\">\n        <p>\n          <strong>{{$t(\"logos.no_found\")}}</strong>\n        </p>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport robotoffService from \"../robotoff\";\nimport offService from \"../off\";\nimport LogoCardGrid from \"../components/LogoCardGrid\";\nimport LoadingSpinner from \"../components/LoadingSpinner\";\n\n\nconst transformLogo = logo => {\n  logo.image.url = robotoffService.getCroppedImageUrl(\n    offService.getImageUrl(logo.image.source_image),\n    logo.bounding_box\n  )\n  return logo;\n};\n\nexport default {\n  name: \"InsightListView\",\n  components: { LogoCardGrid , LoadingSpinner},\n  data: function() {\n    return {\n      logos: [],\n      value: \"\",\n      barcode: \"\",\n      type: \"\",\n      resultCount: 0,\n      count: 25,\n      loading: false\n    };\n  },\n  computed: {},\n  methods: {\n    search: function() {\n      this.loading = true\n      robotoffService\n        .searchLogos(this.barcode, this.value, this.type, this.count)\n        .then(({ data }) => {\n          this.logos = data.logos.map(transformLogo);\n          this.resultCount = data.count;\n          this.loading = false;\n        })\n        .catch(() => {\n          this.loading = false;\n        })\n    }\n  },\n  mounted() {\n    this.search();\n  }\n};\n</script>\n\n<style scoped>\n.borderless-button {\n  color: #2185d0;\n  cursor: pointer;\n}\n\n.borderless-button:hover {\n  text-decoration: underline;\n}\n</style>\n","<template>\n  <div>\n    <div class=\"ui grid\">\n      <div\n        class=\"four wide mobile-landscape eight wide mobile four wide tablet three wide computer column\"\n        v-for=\"logo in logos\"\n        :key=\"logo.id\"\n      >\n        <div\n          class=\"ui fluid card ann-logo\"\n          @click=\"toggleSelectLogo(logo)\"\n          :class=\"{selected: logo.selected, annotated: logo.annotation_type }\"\n        >\n          <div class=\"content actions\">\n            <div class=\"left floated meta\">\n              <router-link :to=\"editLogoURL(logo)\" target=\"_blank\">\n                <i class=\"edit icon\"></i>\n              </router-link>\n            </div>\n            <div class=\"right floated meta\">\n              <router-link :to=\"externalLogoURL(logo)\" target=\"_blank\">\n                <i class=\"external alternate icon blue\"></i>\n              </router-link>\n            </div>\n          </div>\n          <div class=\"content logo-image\">\n            <img loading=\"lazy\" :src=\"logo.image.url\" />\n          </div>\n          <div class=\"content distance\">\n            <p v-if=\"logo.distance\">{{$t(\"logos.distance\")}} {{ logo.distance.toFixed(1) }}</p>\n            <p\n              v-if=\"logo.annotation_value\"\n            >{{$t(\"logos.annotation\")}}{{ logo.annotation_value }} ({{ logo.annotation_type }})</p>\n            <p\n              v-else-if=\"logo.annotation_type\"\n            >{{$t(\"logos.annotation\")}}({{ logo.annotation_type }})</p>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"LogoCardGrid\",\n  props: {\n    logos: {\n      type: Array,\n      required: true\n    },\n    selectable: {\n      type: Boolean,\n      default: true\n    }\n  },\n  data: function() {\n    return {};\n  },\n  methods: {\n    externalLogoURL: function(logo) {\n      return `/logos?logo_id=${logo.id}`;\n    },\n    editLogoURL: function(logo) {\n      return `/logos/${logo.id}`;\n    },\n    toggleSelectLogo: function(logo) {\n      if (!this.selectable || logo.annotation_value) return;\n      this.$emit(\"toggle-select-logo\", logo);\n    }\n  },\n  computed: {},\n  mounted() {}\n};\n</script>\n\n<style scoped>\n.ann-logo.selected {\n  background-color: #4a5971;\n  color: #ffffff;\n}\n\n.ann-logo.annotated {\n  background-color: #797979;\n  color: #ffffff;\n}\n.ui.card {\n  height: 100%;\n}\n\n.ui.card>.actions {\n  flex-grow: 0;\n}\n\n.ui.card>.logo-image {\n  display: flex;\n  align-items: center;\n  flex-grow: 1;\n  justify-content: center;\n}\n\n.ui.card>.logo-image>img {\n  max-width: 100%;\n}\n\n.ui.card>.distance {\n  flex-grow: 0;\n}\n\n@media only screen\nand (max-width: 767px)\nand (orientation: landscape) {\n  .ui.grid>[class*=\"four wide mobile-landscape\"].column {\n    width: 25%!important;\n  }\n}\n</style>\n","import { render } from \"./LogoCardGrid.vue?vue&type=template&id=4b9a2898&scoped=true\"\nimport script from \"./LogoCardGrid.vue?vue&type=script&lang=js\"\nexport * from \"./LogoCardGrid.vue?vue&type=script&lang=js\"\n\nimport \"./LogoCardGrid.vue?vue&type=style&index=0&id=4b9a2898&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-4b9a2898\"\n\nexport default script","import { render } from \"./LogoSearchView.vue?vue&type=template&id=ade22f58&scoped=true\"\nimport script from \"./LogoSearchView.vue?vue&type=script&lang=js\"\nexport * from \"./LogoSearchView.vue?vue&type=script&lang=js\"\n\nimport \"./LogoSearchView.vue?vue&type=style&index=0&id=ade22f58&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-ade22f58\"\n\nexport default script","<template>\n  <div class=\"ui container\">\n    <h2>{{$t(\"logos.annotations\")}}</h2>\n    <LoadingSpinner :show=\"logos.length== 0 && loading\" />\n    <div v-if=\"logos.length > 0\">\n      <form class=\"ui form\" v-on:submit.prevent=\"sendAnnotations\">\n        <div class=\"three fields\">\n          <div class=\"field\">\n            <input type=\"text\" name=\"value\" :placeholder=\"$t('logos.value')\" v-model.trim=\"valueInput\" />\n          </div>\n          <div class=\"field\">\n            <select class=\"ui fluid dropdown\" v-model=\"typeInput\">\n              <option value>{{$t(\"logos.type\")}}</option>\n              <option value=\"label\">{{$t(\"logos.label\")}}</option>\n              <option value=\"brand\">{{$t(\"logos.brand\")}}</option>\n              <option value=\"packager_code\">{{$t(\"logos.packager_code\")}}</option>\n              <option value=\"packaging\">{{$t(\"logos.packaging\")}}</option>\n              <option value=\"qr_code\">{{$t(\"logos.qr_code\")}}</option>\n              <option value=\"category\">{{$t(\"logos.category\")}}</option>\n              <option value=\"nutrition_label\">{{$t(\"logos.nutrition_label\")}}</option>\n              <option value=\"store\">{{$t(\"logos.store\")}}</option>\n            </select>\n          </div>\n          <div class=\"field\">\n            <LoadingSpinner :size=\"'medium'\" :centered=\"false\" :show=\"logos.length > 0 && loading\" />\n            <button\n              v-if=\"!loading\"\n              type=\"submit\"\n              class=\"ui button primary\"\n              tabindex=\"0\"\n              :class=\"{ disabled: !isValidAnnotation }\"\n            >{{$t(\"logos.submit\")}}</button>\n          </div>\n        </div>\n      </form>\n      <div class=\"ui divider hidden\" />\n      <div v-if=\"logos.length > 0\">\n        <div>\n          <p>\n            <span @click=\"selectLogos(true)\" class=\"borderless-button\">{{$t(\"logos.select_all\")}}</span> /\n            <span @click=\"selectLogos(false)\" class=\"borderless-button\">{{$t(\"logos.unselect_all\")}}</span>\n          </p>\n        </div>\n        <div class=\"ui divider hidden\" />\n        <LogoCardGrid\n          v-if=\"selectedLogos.length > 0\"\n          :logos=\"selectedLogos\"\n          v-on:toggle-select-logo=\"toggleSelectLogo\"\n        />\n        <LogoCardGrid\n          :logos=\"unselectedLogos\"\n          v-on:toggle-select-logo=\"toggleSelectLogo\"\n          v-if=\"unselectedLogos.length > 0\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport robotoffService from \"../robotoff\";\nimport offService from \"../off\";\nimport LogoCardGrid from \"../components/LogoCardGrid\";\nimport { getURLParam } from \"../utils\";\nimport LoadingSpinner from \"../components/LoadingSpinner\";\n\n\nconst transformLogo = logo => {\n  logo.image.url = robotoffService.getCroppedImageUrl(\n    offService.getImageUrl(logo.image.source_image), logo.bounding_box\n  )\n  logo.selected = false;\n  return logo;\n};\n\nconst getAnnCount = defaultValue => {\n  const count = getURLParam(\"count\");\n  if (count.length == 0) return defaultValue;\n  return parseInt(count, 10) || defaultValue;\n};\n\nexport default {\n  name: \"InsightListView\",\n  components: { LogoCardGrid , LoadingSpinner },\n  data: function() {\n    return {\n      logos: [],\n      noLogoAvailable: false,\n      valueInput: \"\",\n      typeInput: \"\",\n      targetLogoId: getURLParam(\"logo_id\"),\n      annCount: getAnnCount(100),\n      loading: false\n    };\n  },\n  computed: {\n    isValidAnnotation: function() {\n      if (this.logos.length === 0) return false;\n      if (this.typeInput.length === 0) return false;\n      if (this.selectedLogos.length === 0) return false;\n      if (\n        this.valueInput.length === 0 &&\n        [\"label\", \"brand\", \"category\", \"store\"].includes(this.typeInput)\n      )\n        return false;\n      return true;\n    },\n    selectedLogos: function() {\n      return this.logos.filter(l => l.selected === true);\n    },\n    unselectedLogos: function() {\n      return this.logos.filter(l => l.selected === false);\n    }\n  },\n  methods: {\n    loadLogos: function() {\n      this.loading = true;\n      robotoffService\n        .getLogoAnnotations(this.targetLogoId, getURLParam(\"index\"), this.annCount)\n        .then(({ data }) => {\n          const results = data.results;\n          robotoffService\n            .getLogosImages(results.map(r => r.logo_id))\n            .then(response => {\n              this.loading = false;\n              const logoData = response.data.logos;\n              this.logos = results\n                .map(r => ({\n                  distance: r.distance,\n                  ...logoData.filter(l => l.id == r.logo_id)[0]\n                }))\n                .map(transformLogo);\n            })\n            .catch(() => {\n              this.loading = false;\n            })\n        })\n        .catch (() => {\n          this.loading = false;\n        })\n    },\n    toggleSelectLogo: function(logo) {\n      const logoId = logo.id;\n      const l = this.logos.filter(logo => logo.id === logoId)[0];\n      l.selected = !l.selected;\n    },\n    sendAnnotations: function() {\n      let value = this.valueInput.toLowerCase();\n\n      if (this.typeInput === \"packager_code\" || this.typeInput === \"qr_code\") {\n        value = \"\";\n      }\n      const annotations = this.selectedLogos.map(logo => ({\n        logo_id: logo.id,\n        value: value,\n        type: this.typeInput\n      }))\n      this.loading = true;\n      robotoffService\n        .annotateLogos(annotations)\n        .then(() => {\n          this.loading = false;\n          this.targetLogoId = \"\";\n          this.loadLogos();\n        })\n        .catch(() => {\n          this.loading = false;\n        })\n      this.valueInput = \"\";\n      this.typeInput = \"\";\n    },\n    selectLogos: function(select) {\n      this.logos.forEach(logo => {\n        if (logo.annotation_value) return;\n        logo.selected = select;\n      });\n    }\n  },\n  mounted() {\n    this.loadLogos();\n  }\n};\n</script>\n\n<style scoped>\n.borderless-button {\n  color: #2185d0;\n  cursor: pointer;\n}\n\n.borderless-button:hover {\n  text-decoration: underline;\n}\n</style>\n","import { render } from \"./LogoAnnotationView.vue?vue&type=template&id=2b92e4f2&scoped=true\"\nimport script from \"./LogoAnnotationView.vue?vue&type=script&lang=js\"\nexport * from \"./LogoAnnotationView.vue?vue&type=script&lang=js\"\n\nimport \"./LogoAnnotationView.vue?vue&type=style&index=0&id=2b92e4f2&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-2b92e4f2\"\n\nexport default script","<template>\n  <div class=\"ui container\">\n    <div>\n      <h2>{{$t(\"logos.detail\")}}</h2>\n      <p>{{$t(\"logos.id\")}} {{ logoId }}</p>\n      <p>{{$t(\"logos.barcode\")}} {{ barcode }}</p>\n      <p>\n        <a :href=\"imageURL\">{{$t(\"logos.full_image\")}}</a>\n      </p>\n      <img width=\"300px\" :src=\"cropURL\" />\n      <div class=\"ui divider\" />\n      <form class=\"ui form\" v-on:submit.prevent=\"updateLogo\">\n        <div class=\"three fields\">\n          <div class=\"field\">\n            <input type=\"text\" name=\"value\" :placeholder=\"$t('logos.value')\" v-model.trim=\"annotationValue\" />\n          </div>\n          <div class=\"field\">\n            <select class=\"ui fluid dropdown\" v-model=\"annotationType\">\n              <option value>{{$t(\"logos.type\")}}</option>\n              <option value=\"label\">{{$t(\"logos.label\")}}</option>\n              <option value=\"brand\">{{$t(\"logos.brand\")}}</option>\n              <option value=\"packager_code\">{{$t(\"logos.packager_code\")}}</option>\n              <option value=\"packaging\">{{$t(\"logos.packaging\")}}</option>\n              <option value=\"qr_code\">{{$t(\"logos.qr_code\")}}</option>\n              <option value=\"category\">{{$t(\"logos.category\")}}</option>\n              <option value=\"nutrition_label\">{{$t(\"logos.nutrition_label\")}}</option>\n              <option value=\"store\">{{$t(\"logos.store\")}}</option>\n            </select>\n          </div>\n          <div class=\"field\">\n            <LoadingSpinner :size=\"'medium'\" :centered=\"false\" :show=\"loading\" />\n            <button v-if=\"!loading\" type=\"submit\" class=\"ui button primary\" tabindex=\"0\">{{$t(\"logos.update\")}}</button>\n          </div>\n        </div>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport LoadingSpinner from \"../components/LoadingSpinner\";\nimport robotoffService from \"../robotoff\";\nimport offService from \"../off\";\n\nconst getImageURL = logo => offService.getImageUrl(logo.image.source_image);\n\nconst getCropURL = logo => {\n  return robotoffService.getCroppedImageUrl(\n    getImageURL(logo), logo.bounding_box\n  )\n};\n\nexport default {\n  name: \"InsightListView\",\n  components: {LoadingSpinner},\n  data: function() {\n    return {\n      annotationValue: \"\",\n      annotationType: \"\",\n      imageURL: \"\",\n      cropURL: \"\",\n      barcode: \"\",\n      loading: false\n    };\n  },\n  computed: {\n    logoId: function() {\n      return this.$route.params.id;\n    }\n  },\n  methods: {\n    loadLogo: function() {\n      this.loading = true;\n      robotoffService\n        .loadLogo(this.logoId)\n        .then(({ data }) => {\n          this.imageURL = getImageURL(data);\n          this.cropURL = getCropURL(data);\n          this.annotationValue = data.annotation_value;\n          this.annotationType = data.annotation_type;\n          this.barcode = data.image.barcode;\n          this.loading = false;\n        })\n        .catch(() => {\n          this.loading = false;\n        })\n    },\n    updateLogo: function() {\n      if (this.annotationType.length == 0) return;\n      let value = this.annotationValue.toLowerCase();\n      if (\n        this.annotationType === \"packager_code\" ||\n        this.annotationType === \"qr_code\"\n      ) {\n        value = \"\";\n      }\n      this.loading = true;\n      robotoffService\n        .updateLogo(this.logoId, value, this.annotationType)\n        .then(() => {\n          this.loading = false;\n          window.console.log(\"Updated!\");\n        })\n        .catch(() => {\n          this.loading = false;\n        })\n    }\n  },\n  mounted() {\n    this.loadLogo();\n  }\n};\n</script>\n","import { render } from \"./LogoUpdateView.vue?vue&type=template&id=1cc33b8e\"\nimport script from \"./LogoUpdateView.vue?vue&type=script&lang=js\"\nexport * from \"./LogoUpdateView.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\n  <div class=\"container\">\n    <div class=\"ui card\" v-for=\"card in labels.fr\" :key=\"card.value_tag\">\n      <router-link :to=\"card.url\" target=\"_blank\">\n        <div class=\"image\">\n          <img :src=\"card.logo\" />\n        </div>\n        <div class=\"content\">\n          <span class=\"header\">{{ card.value_tag }}</span>\n          <div\n            class=\"floating ui label\"\n            :class=\"card.remainingQuestions === '0' ? 'green' : 'red'\"\n          >\n            {{ card.remainingQuestions || \"...\" }}\n          </div>\n        </div>\n      </router-link>\n    </div>\n  </div>\n</template>\n\n<script>\nimport robotoffService from \"../robotoff\";\n\nconst fr_labels = [\n  {\n    url: \"questions?type=label&value_tag=en:organic\",\n    value_tag: \"en:organic\",\n    logo:\n      \"https://world-fr.openfoodfacts.org/images/lang/fr/labels/bio.96x90.png\",\n  },\n  {\n    url: \"questions?type=label&value_tag=en:eu-organic\",\n    value_tag: \"en:eu-organic\",\n    logo:\n      \"https://world.openfoodfacts.org/images/lang/en/labels/eu-organic.135x90.svg\",\n  },\n  {\n    url: \"questions?type=label&value_tag=en:ab-agriculture-biologique\",\n    value_tag: \"en:ab-agriculture-biologique\",\n    logo:\n      \"https://world.openfoodfacts.org/images/lang/en/labels/ab-agriculture-biologique.74x90.svg\",\n  },\n  {\n    url: \"questions?type=label&value_tag=en:eg-oko-verordnung\",\n    value_tag: \"en:eg-oko-verordnung\",\n    logo:\n      \"https://world-fr.openfoodfacts.org/images/lang/en/labels/eg-oko-verordnung.110x90.svg\",\n  },\n  {\n    url: \"questions?type=label&value_tag=fr:haute-valeur-environnementale\",\n    value_tag: \"fr:haute-valeur-environnementale\",\n    logo:\n      \"https://world-fr.openfoodfacts.org/images/lang/fr/labels/haute-valeur-environnementale.90x90.svg\",\n  },\n  {\n    url: \"questions?type=label&value_tag=fr:label-rouge\",\n    value_tag: \"fr:label-rouge\",\n    logo:\n      \"https://world-fr.openfoodfacts.org/images/lang/fr/labels/label-rouge.90x90.svg\",\n  },\n  {\n    url: \"questions?type=label&value_tag=fr:bleu-blanc-coeur\",\n    value_tag: \"fr:bleu-blanc-coeur\",\n    logo:\n      \"https://world-fr.openfoodfacts.org/images/lang/fr/labels/bleu-blanc-coeur.98x90.svg\",\n  },\n  {\n    url: \"questions?type=label&value_tag=en:roundtable-on-sustainable-palm-oil\",\n    value_tag: \"en:roundtable-on-sustainable-palm-oil\",\n    logo:\n      \"https://world-fr.openfoodfacts.org/images/lang/en/labels/roundtable-on-sustainable-palm-oil.90x90.svg\",\n  },\n  {\n    url:\n      \"questions?type=label&country=en:france&value_tag=en:rainforest-alliance\",\n    value_tag: \"en:rainforest-alliance\",\n    logo:\n      \"https://world-fr.openfoodfacts.org/images/lang/en/labels/rainforest-alliance.90x90.svg\",\n  },\n  {\n    url: \"questions?type=label&value_tag=fr:fairtrade\",\n    value_tag: \"fr:fairtrade\",\n    logo:\n      \"https://world-fr.openfoodfacts.org/images/lang/en/labels/fairtrade-international.77x90.svg\",\n  },\n  {\n    url: \"questions?type=label&value_tag=fr:max-havelaar\",\n    value_tag: \"fr:Max-Havelaar\",\n    logo:\n      \"https://world-fr.openfoodfacts.org/images/lang/en/labels/fairtrade-international.77x90.svg\",\n  },\n  {\n    url: \"questions?type=label&value_tag=en:sustainable-seafood-msc\",\n    value_tag: \"en:sustainable-seafood-msc\",\n    logo:\n      \"https://world-fr.openfoodfacts.org/images/lang/en/labels/sustainable-seafood-msc.126x90.svg\",\n  },\n  {\n    url: \"questions?type=label&value_tag=en:responsible-aquaculture-asc\",\n    value_tag: \"en:responsible-aquaculture-asc\",\n    logo:\n      \"https://world-fr.openfoodfacts.org/images/lang/en/labels/responsible-aquaculture-asc.188x90.svg\",\n  },\n];\n\nexport default {\n  name: \"EcoScoreMenuView\",\n  data: function() {\n    return {\n      zzzzzzzz: \"lklqjsdskljsljf\",\n      labels: {\n        fr: fr_labels,\n      },\n    };\n  },\n  computed: {},\n  methods: {\n    setRemainingQuestions: function({ value_tag }) {\n      const count = 10;\n      robotoffService\n        .questions(\"random\", \"label\", value_tag, null, null, count)\n        .then((result) => {\n          this.labels = {\n            ...this.labels,\n            fr: this.labels.fr.map((dataLabel) => {\n              if (value_tag !== dataLabel.value_tag) {\n                return dataLabel;\n              }\n              return {\n                ...dataLabel,\n                remainingQuestions:\n                  result.data.count === 0 ? \"0\" : result.data.count,\n              };\n            }),\n          };\n        });\n    },\n  },\n  mounted() {\n    const vm = this;\n    this.labels.fr.forEach((labelData) => {\n      vm.setRemainingQuestions(labelData);\n    });\n  },\n};\n</script>\n\n<style scoped>\n.container {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(310px, 1fr));\n}\n.header {\n  color: black;\n  font-size: 1.5rem;\n  padding: 0 0 1rem 0.5rem;\n}\n.card {\n  width: 300px;\n  height: 350px;\n}\n.image {\n  text-align: center;\n  height: 300px;\n  width: 300px;\n  position: relative;\n}\n.image img {\n  max-height: 100%;\n  max-width: 100%;\n  height: 300px;\n  width: 300px;\n}\n</style>\n","import { render } from \"./EcoScoreMenu.vue?vue&type=template&id=46339154&scoped=true\"\nimport script from \"./EcoScoreMenu.vue?vue&type=script&lang=js\"\nexport * from \"./EcoScoreMenu.vue?vue&type=script&lang=js\"\n\nimport \"./EcoScoreMenu.vue?vue&type=style&index=0&id=46339154&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-46339154\"\n\nexport default script","<template>\n  <div class=\"ui\">\n    <div>\n      <button\n        class=\"ui big button\"\n        @click=\"setLabel(lab)\"\n        v-for=\"lab in labels\"\n        :key=\"lab\"\n        :class=\"{ primary: lab === label }\"\n      >\n        {{ lab }}\n      </button>\n    </div>\n    <div v-if=\"loading\"><LoadingSpinner show /></div>\n    <div v-else-if=\"noRemainingQuestion\">No more questions</div>\n    <div v-else>\n      <h3>\n        {{ questions[0].question }}\n        <span class=\"ui big label\">{{ questions[0].value }}</span>\n        <br />\n        <img class=\"logo\" :src=\"labelLogo[label]\" />\n      </h3>\n      <div class=\"ui grid stackable\">\n        <div\n          class=\"ui\"\n          v-for=\"question in questions\"\n          :key=\"question.insight_id\"\n          @click=\"toggle(question.insight_id)\"\n          :class=\"{ selected: question.selected }\"\n        >\n          <img :src=\"question.source_image_url\" />\n          <div v-if=\"question.selected\" class=\"filter\"></div>\n        </div>\n      </div>\n      <button class=\"ui big positive button validateButton\" @click=\"validate()\">\n        <i class=\"check icon\"></i>\n        {{ nbSelected }}\n      </button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport robotoffService from \"../robotoff\";\nimport LoadingSpinner from \"../components/LoadingSpinner\";\n\nconst NO_QUESTION_LEFT = \"NO_QUESTION_LEFT\";\nconst LOADING = \"LOADING\";\n\nconst labels = [\"en:eu-organic\", \"en:sustainable-seafood-msc\"];\n\nexport default {\n  name: \"QuestionView\",\n  components: { LoadingSpinner },\n  data: function() {\n    return {\n      status: LOADING,\n      labels: labels,\n      label: \"en:eu-organic\",\n      labelLogo: {\n        \"en:eu-organic\":\n          \"https://world.openfoodfacts.org/images/lang/en/labels/eu-organic.135x90.svg\",\n        \"en:sustainable-seafood-msc\":\n          \"https://world-fr.openfoodfacts.org/images/lang/en/labels/sustainable-seafood-msc.126x90.svg\",\n      },\n      questions: [],\n    };\n  },\n  methods: {\n    validate() {\n      const validatedInsights = this.questions\n        .filter(({ selected }) => selected === true)\n        .map(({ insight_id }) => insight_id);\n\n      validatedInsights.forEach((insight_id, index) => {\n        setTimeout(function() {\n          robotoffService.annotate(insight_id, 1);\n        }, index * 100);\n      });\n      this.questions = [];\n      this.fetchNewQuestions();\n    },\n    toggle(insight_id) {\n      this.questions = this.questions.map((x) =>\n        x.insight_id === insight_id ? { ...x, selected: !x.selected } : x\n      );\n    },\n    setLabel(label) {\n      if (this.label !== label) {\n        this.label = label;\n        this.questions = [];\n        this.fetchNewQuestions();\n      }\n    },\n    fetchNewQuestions() {\n      this.status = LOADING;\n      const count = 50;\n      robotoffService\n        .questions(\"random\", \"label\", this.label, null, null, count)\n        .then((result) => {\n          if (result.data.questions.length == 0) {\n            this.status = NO_QUESTION_LEFT;\n            return;\n          }\n          const refQuestion =\n            this.questions.length > 0\n              ? this.questions[0].question\n              : result.data.questions[0].question;\n          const refValue =\n            this.questions.length > 0\n              ? this.questions[0].value\n              : result.data.questions[0].value;\n          const indsighIdAlreadyInQuestions = this.questions.map(\n            ({ insight_id }) => insight_id\n          );\n\n          this.questions = [\n            ...this.questions,\n            ...result.data.questions.filter(\n              ({ insight_id, question, value }) =>\n                !indsighIdAlreadyInQuestions.includes(insight_id) &&\n                refValue === value &&\n                refQuestion === question\n            ),\n          ];\n          this.status = \"done\";\n        });\n    },\n  },\n  computed: {\n    loading: function() {\n      return this.status === LOADING && this.questions.length === 0;\n    },\n    noRemainingQuestion: function() {\n      return this.status === NO_QUESTION_LEFT;\n    },\n    nbSelected: function() {\n      return this.questions.filter((x) => x.selected === true).length;\n    },\n  },\n  mounted() {\n    this.fetchNewQuestions();\n  },\n};\n</script>\n\n<style scoped>\n.filter {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(0, 255, 0, 0.3);\n}\nh3 {\n  margin-bottom: 4rem;\n  text-align: center;\n}\n.logo {\n  height: 4rem;\n  width: auto;\n}\n.selected {\n  position: relative;\n}\n.selected img {\n  filter: url(\"#teal-lightgreen\");\n  border: solid green 5px;\n}\n.container {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(310px, 1fr));\n}\n.header {\n  color: black;\n  font-size: 1.5rem;\n  padding: 0 0 1rem 0.5rem;\n}\n.card {\n  width: 300px;\n  height: 350px;\n}\n.image {\n  text-align: center;\n  height: 300px;\n  width: 300px;\n  position: relative;\n}\nimg {\n  max-height: 100%;\n  max-width: 100%;\n  height: 300px;\n  width: 300px;\n}\n.validateButton {\n  position: fixed;\n  right: 50px;\n  bottom: 50px;\n}\n</style>\n","import { render } from \"./secretTool.vue?vue&type=template&id=8b162032&scoped=true\"\nimport script from \"./secretTool.vue?vue&type=script&lang=js\"\nexport * from \"./secretTool.vue?vue&type=script&lang=js\"\n\nimport \"./secretTool.vue?vue&type=style&index=0&id=8b162032&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-8b162032\"\n\nexport default script","<template>\n  <div class=\"ui grid stackable\">\n    <div class=\"five wide column centered\">\n      <div class=\"insight-column\">\n        <QuestionFilter v-model=\"filters\" />\n        <div class=\"ui divider\" />\n        <div class=\"ui hidden divider\"></div>\n        <div v-if=\"currentQuestion\">\n          <h3>{{ currentQuestion.question }}</h3>\n          <div>\n            <div class=\"ui big label\">{{ currentQuestion.value }}</div>\n          </div>\n          <div class=\"ui divider hidden\"></div>\n          <cropper\n            style=\"height: 300px; margin:auto\"\n            :src=\"currentQuestionImageUrl\"\n            :transitions=\"false\"\n            :canvas=\"false\"\n            :checkOrientation=\"false\"\n            :crossOrigine=\"false\"\n            :default-position=\"{\n              left: 0,\n              top: 0,\n            }\"\n            :stencilSize=\"\n              ({ boundaries }) => {\n                return {\n                  width: boundaries.width,\n                  height: boundaries.height,\n                };\n              }\n            \"\n            default-boundaries=\"fit\"\n            :stencil-props=\"{\n              handlers: {},\n              movable: false,\n              resizable: false,\n            }\"\n          />\n          <div class=\"ui divider hidden\"></div>\n\n          <div>\n            <button\n              data-inverted\n              data-tooltip=\"Shortcut: N\"\n              class=\"ui big negative button annotate\"\n              @click=\"annotate(0)\"\n            >\n              <i class=\"trash icon\"></i>\n              {{ $t(\"questions.no\") }}\n            </button>\n            <button\n              data-inverted\n              data-tooltip=\"Shortcut: K\"\n              class=\"ui big button annotate\"\n              @click=\"annotate(-1)\"\n            >\n              <i class=\"question icon\"></i>\n              {{ $t(\"questions.skip\") }}\n            </button>\n            <button\n              data-inverted\n              data-tooltip=\"Shortcut: O\"\n              class=\"ui big positive button annotate\"\n              @click=\"annotate(1)\"\n            >\n              <i class=\"check icon\"></i>\n              {{ $t(\"questions.yes\") }}\n            </button>\n          </div>\n        </div>\n        <div class=\"flex-center\" v-else style=\"margin-top: 100px\">\n          <LoadingSpinner :show=\"loading\" />\n          <div v-if=\"noRemainingQuestion\">\n            <h2>{{ $t(\"questions.no_questions_remaining\") }}</h2>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"six wide column centered\">\n      <Product :barcode=\"currentQuestionBarcode\" />\n    </div>\n    <div class=\"three wide column annotation-column\">\n      <AnnotationCounter\n        :remainingCount=\"productIds.length\"\n        :lastAnnotations=\"lastAnnotations\"\n        :sessionAnnotatedCount=\"sessionAnnotatedCount\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nimport { Cropper } from \"vue-advanced-cropper\";\nimport robotoffService from \"../robotoff\";\nimport { NO_QUESTION_LEFT } from \"../const\";\nimport Product from \"../components/Product\";\nimport LoadingSpinner from \"../components/LoadingSpinner\";\nimport AnnotationCounter from \"../components/AnnotationCounter\";\nimport productIds from \"./questions.js\";\n\nexport default {\n  name: \"QuestionView\",\n  components: {\n    Product,\n    AnnotationCounter,\n    LoadingSpinner,\n    Cropper,\n  },\n  data: function() {\n    return {\n      valueTagTimeout: null,\n      questionBuffer: [],\n      currentQuestion: null,\n      remainingQuestionCount: productIds.length,\n      lastAnnotations: [],\n      sessionAnnotatedCount: 0,\n      seenInsightIds: new Set(),\n      productIds,\n    };\n  },\n  watch: {\n    filters: {\n      handler: function(newFilters, oldFilters) {\n        if (\n          oldFilters === null ||\n          JSON.stringify(newFilters) !== JSON.stringify(oldFilters)\n        ) {\n          // when filters change reload questions\n          this.loadQuestions(true);\n        }\n      },\n      deep: true,\n    },\n    questionBuffer: function(newBuffer) {\n      // update the current question\n      if (\n        this.questionBuffer.length > 0 &&\n        this.questionBuffer[0] !== NO_QUESTION_LEFT\n      ) {\n        this.currentQuestion = this.questionBuffer[0];\n      } else {\n        this.currentQuestion = null;\n      }\n\n      // Fetch new questions to keep more than 9 questions in the buffer.\n      // Also send request for buffer sizes 0, 1, 2, 3 In cas a network problem occured\n      if (\n        (newBuffer.length == 9 || newBuffer.length < 4) &&\n        !newBuffer.includes(NO_QUESTION_LEFT)\n      ) {\n        this.loadQuestions(false);\n      }\n    },\n  },\n  methods: {\n    loadQuestions: async function(clean = false) {\n      if (clean) {\n        this.questionBuffer = [];\n      }\n      console.log(\"loadQuestions\");\n      while (this.productIds.length > 0 && this.questionBuffer < 5) {\n        const productIndex = Math.floor(this.productIds.length * Math.random());\n        const [code] = this.productIds.splice(productIndex, 1);\n\n        const result = await robotoffService.questionsByProductCode(code);\n        console.log(result);\n        this.remainingQuestionCount = result.data.count;\n\n        const dataToAdd = [];\n        result.data.questions.forEach((q) => {\n          if (!this.seenInsightIds.has(q.insight_id)) {\n            dataToAdd.push(q);\n            this.seenInsightIds.add(q.insight_id);\n          }\n        });\n        this.questionBuffer = [...this.questionBuffer, ...dataToAdd];\n      }\n\n      if (this.questionBuffer.length === 0 && this.productIds.length === 0) {\n        this.questionBuffer = [NO_QUESTION_LEFT];\n      }\n    },\n\n    updateLastAnnotations(question, annotation) {\n      this.lastAnnotations.push({\n        question,\n        annotation,\n      });\n\n      if (this.lastAnnotations.length > 10) {\n        this.lastAnnotations.shift();\n      }\n    },\n    annotate: function(annotation) {\n      if (annotation !== -1) {\n        robotoffService.annotate(this.currentQuestion.insight_id, annotation);\n        this.updateLastAnnotations(this.currentQuestion, annotation);\n        this.remainingQuestionCount -= 1;\n        this.sessionAnnotatedCount += 1;\n      }\n      this.currentQuestion = null;\n      this.questionBuffer = [...this.questionBuffer.slice(1)];\n    },\n    updateRemainingQuestionCount: function(newCount) {\n      this.remainingQuestionCount = newCount;\n    },\n  },\n  computed: {\n    currentQuestionImageUrl: function() {\n      if (this.currentQuestion.source_image_url) {\n        return this.currentQuestion.source_image_url;\n      }\n      return \"https://static.openfoodfacts.org/images/image-placeholder.png\";\n    },\n    loading: function() {\n      return !this.noRemainingQuestion && this.currentQuestion == null;\n    },\n    noRemainingQuestion: function() {\n      return (\n        this.questionBuffer.length === 1 &&\n        this.questionBuffer[0] === NO_QUESTION_LEFT\n      );\n    },\n    currentQuestionBarcode: function() {\n      if (this.currentQuestion && this.currentQuestion !== NO_QUESTION_LEFT) {\n        return this.currentQuestion.barcode;\n      } else {\n        return null;\n      }\n    },\n  },\n  mounted() {\n    const vm = this;\n    this.loadQuestions();\n    window.addEventListener(\"keyup\", function(event) {\n      if (event.target.nodeName == \"BODY\") {\n        if (event.key === \"k\") vm.annotate(-1);\n        if (event.key === \"n\") vm.annotate(0);\n        if (event.key === \"o\") vm.annotate(1);\n        if (event.key === \"p\") vm.rotateImage();\n      }\n    });\n  },\n};\n</script>\n\n<style scoped>\nbutton.annotate {\n  padding: 2rem 2.5rem;\n}\n\n.flex-center {\n  display: flex;\n  justify-content: center;\n}\n\n.insight-column {\n  text-align: center;\n}\n\n.annotation-column {\n  background-color: #686868;\n}\n</style>\n","export default [\n  \"11791423\",\n  \"20024703\",\n  \"20080181\",\n  \"20093709\",\n  \"20266387\",\n  \"20452735\",\n  \"20884338\",\n  \"20961725\",\n  \"26065007\",\n  \"7622210713780\",\n  \"5010477348395\",\n  \"3182180012190\",\n  \"3175681066632\",\n  \"3033710073467\",\n  \"3664346306003\",\n  \"3366321051983\",\n  \"3242274000059\",\n  \"5010477348517\",\n  \"7622210444141\",\n  \"3168930010890\",\n  \"7613034916891\",\n  \"7613036024419\",\n  \"7613037059281\",\n  \"5038862130929\",\n  \"5411188118121\",\n  \"3017760635295\",\n  \"7613036668910\",\n  \"3023291122005\",\n  \"3175681135895\",\n  \"5010477348432\",\n  \"3502110009401\",\n  \"3073781071955\",\n  \"5038862162500\",\n  \"8000500290767\",\n  \"8719200082267\",\n  \"3256540001794\",\n  \"3392460481671\",\n  \"3168930008996\",\n  \"3256540000643\",\n  \"3095756308019\",\n  \"3155251204350\",\n  \"3431410001023\",\n  \"3083681093926\",\n  \"3017760000406\",\n  \"3564700002841\",\n  \"7613036277563\",\n  \"3560071172305\",\n  \"3038350013507\",\n  \"3038354221106\",\n  \"3229820796581\",\n  \"3245412155154\",\n  \"3248830862963\",\n  \"3256224311126\",\n  \"3273220182246\",\n  \"3521042004322\",\n  \"3560071099220\",\n  \"5410188031102\",\n  \"5053827209564\",\n  \"3021762416769\",\n  \"3029330002765\",\n  \"3103220009079\",\n  \"3178531008110\",\n  \"3242274004651\",\n  \"3250392571313\",\n  \"3259011105977\",\n  \"3270190207702\",\n  \"3284230007146\",\n  \"3538280837254\",\n  \"3560071013066\",\n  \"3599740004050\",\n  \"3599740007297\",\n  \"4006985902977\",\n  \"4008400390529\",\n  \"5010477348319\",\n  \"7614500035788\",\n  \"8410031936506\",\n  \"3083681012293\",\n  \"3240931531106\",\n  \"3250392355289\",\n  \"3760049797756\",\n  \"4056489009412\",\n  \"3021761206811\",\n  \"7613037091182\",\n  \"7613037987355\",\n  \"3019081240103\",\n  \"3103220041734\",\n  \"3250392409494\",\n  \"3252920039395\",\n  \"3255290251466\",\n  \"3380380077296\",\n  \"3560070778126\",\n  \"3560071006327\",\n  \"3564700008867\",\n  \"7613036667852\",\n  \"3168930156833\",\n  \"3580280744834\",\n  \"3033491279744\",\n  \"5053827204163\",\n  \"3041090061639\",\n  \"3155251205388\",\n  \"3229820788098\",\n  \"7613034938688\",\n  \"3664346305983\",\n  \"8719200031524\",\n  \"3073781099249\",\n  \"3302740776106\",\n  \"3178530408379\",\n  \"3178530404241\",\n  \"3421557501142\",\n  \"5410188011326\",\n  \"7613038406541\",\n  \"3184670001363\",\n  \"3178530405743\",\n  \"3245412590214\",\n  \"3103220033838\",\n  \"5038862160506\",\n  \"3045320104196\",\n  \"3056440083599\",\n  \"3498425800058\",\n  \"3123340008288\",\n  \"7622210337115\",\n  \"3366321052386\",\n  \"3083681057843\",\n  \"8721800082318\",\n  \"3023260005872\",\n  \"3033710001057\",\n  \"3083680085335\",\n  \"4056489009979\",\n  \"3182180012183\",\n  \"5053827216722\",\n  \"3250392559748\",\n  \"3302748497027\",\n  \"4003247102304\",\n  \"3284230001991\",\n  \"3095757413019\",\n  \"3228857000920\",\n  \"3259426021053\",\n  \"3366321054236\",\n  \"5010477348593\",\n  \"3276170011185\",\n  \"8714100614754\",\n  \"3095757047108\",\n  \"3103220033371\",\n  \"5053827199667\",\n  \"3095758914010\",\n];\n","import { render } from \"./SubsetQuestionView.vue?vue&type=template&id=51c14bb9&scoped=true\"\nimport script from \"./SubsetQuestionView.vue?vue&type=script&lang=js\"\nexport * from \"./SubsetQuestionView.vue?vue&type=script&lang=js\"\n\nimport \"./SubsetQuestionView.vue?vue&type=style&index=0&id=51c14bb9&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-51c14bb9\"\n\nexport default script","import Vue from \"vue\";\nimport VueRouter from \"vue-router\";\nimport VueI18n from \"vue-i18n\";\nimport Viewer from \"v-viewer\";\nimport VueMatomo from \"vue-matomo\";\nimport \"./semantic-ui-utils/main.css\";\nimport App from \"./App.vue\";\nimport QuestionView from \"./views/QuestionView.vue\";\nimport NutritionView from \"./views/NutritionView.vue\";\nimport NutritionInteractiveView from \"./views/NutritionInteractiveView.vue\";\nimport TableAnnotation from \"./views/TableAnnotation.vue\";\nimport SettingsView from \"./views/SettingsView.vue\";\nimport InsightListView from \"./views/InsightListView.vue\";\nimport LogoSearchView from \"./views/LogoSearchView.vue\";\nimport LogoAnnotationView from \"./views/LogoAnnotationView.vue\";\nimport LogoUpdateView from \"./views/LogoUpdateView.vue\";\nimport EcoScoreMenu from \"./views/EcoScoreMenu.vue\";\nimport SecretTool from \"./views/secretTool.vue\";\nimport SubsetQuestionView from \"./views/SubsetQuestionView.vue\";\nimport \"viewerjs/dist/viewer.css\";\nimport SuiVue from \"semantic-ui-vue\";\nimport messages from \"./i18n/messages\";\nimport { getLang } from \"./settings\";\n\nVue.use(SuiVue);\nVue.use(VueRouter);\nVue.use(Viewer);\nVue.use(VueI18n);\nVue.config.productionTip = false;\n\nVue.directive(\"focus\", {\n  componentUpdated: function(el) {\n    el.firstElementChild.focus();\n  },\n  inserted: function(el) {\n    el.firstElementChild.focus();\n  },\n});\n\nconst routes = [\n  { path: \"/\", redirect: \"/questions\" },\n  { path: \"/insights\", component: InsightListView },\n  { path: \"/questions\", component: QuestionView },\n  { path: \"/eco-score\", component: EcoScoreMenu },\n  { path: \"/secretTools\", component: SecretTool },\n  { path: \"/nutritions\", component: NutritionView },\n  { path: \"/nutritionInteractive\", component: NutritionInteractiveView },\n  { path: \"/nutritionInteractive/:code\", component: NutritionInteractiveView },\n  { path: \"/table\", component: TableAnnotation },\n  { path: \"/settings\", component: SettingsView },\n  { path: \"/logos\", component: LogoAnnotationView },\n  { path: \"/logos/search\", component: LogoSearchView },\n  { path: \"/logos/:id\", component: LogoUpdateView },\n  { path: \"/subsetQuestion\", component: SubsetQuestionView },\n];\n\nconst router = new VueRouter({\n  mode: \"history\",\n  routes,\n});\n\nconst i18n = new VueI18n({\n  locale: getLang(),\n  messages,\n  fallbackLocale: \"en\",\n});\n\nVue.use(VueMatomo, {\n  // Configure your matomo server and site by providing\n  host: \"https://analytics.openfoodfacts.org/\",\n  siteId: 3,\n  router: router, // Enables automatically registering page views on the router\n});\n\nnew Vue({\n  router,\n  i18n,\n  render: (h) => h(App),\n}).$mount(\"#app\");\n","module.exports = __webpack_public_path__ + \"img/questionsScreenshot.6522c541.png\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Helper.vue?vue&type=style&index=0&id=37b42367&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./LoadingSpinner.vue?vue&type=style&index=0&id=66aae622&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./NutritionTable.vue?vue&type=style&index=0&id=19f70efe&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./TableAnnotation.vue?vue&type=style&index=0&id=6d01ef04&scoped=true&lang=css\"","module.exports = __webpack_public_path__ + \"img/logoNameLabel.b6c61dca.png\";","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./App.vue?vue&type=style&index=0&id=5dc6acac&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./SubsetQuestionView.vue?vue&type=style&index=0&id=51c14bb9&scoped=true&lang=css\"","var map = {\n\t\"./logo.png\": \"cf05\",\n\t\"./logoGeneral.png\": \"9228\",\n\t\"./logoNameLabel.png\": \"830b\",\n\t\"./memLogo.png\": \"9d5d\",\n\t\"./questionsScreenshot.png\": \"6192\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"9142\";","module.exports = __webpack_public_path__ + \"img/logoGeneral.6d043eae.png\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./LogoAnnotationView.vue?vue&type=style&index=0&id=2b92e4f2&scoped=true&lang=css\"","module.exports = __webpack_public_path__ + \"img/memLogo.7d2de489.png\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./EcoScoreMenu.vue?vue&type=style&index=0&id=46339154&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./secretTool.vue?vue&type=style&index=0&id=8b162032&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./AnnotationCounter.vue?vue&type=style&index=0&id=11ffedee&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./QuestionView.vue?vue&type=style&index=0&id=1e9968b6&scoped=true&lang=css\"","module.exports = __webpack_public_path__ + \"img/logo.6c31b90b.png\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=27d0d616&scoped=true&lang=css\"","var map = {\n\t\"./brands.json\": \"bf35\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"d731\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./InteractiveImage.vue?vue&type=style&index=0&id=195fffac&scoped=true&lang=css\""],"sourceRoot":""}