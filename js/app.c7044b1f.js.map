{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/Helper.vue?c4bd","webpack:///./src/components/Menu.vue?1f27","webpack:///./src/views/NutritionView.vue?75bf","webpack:///./src/App.vue?2212","webpack:///./src/views/LogoAnnotationView.vue?54d6","webpack:///./src/components/AnnotationCounter.vue?cf26","webpack:///./src/App.vue?c374","webpack:///./src/components/Menu.vue?f5d3","webpack:///./src/settings.js","webpack:///./src/components/Helper.vue?e84f","webpack:///src/components/Helper.vue","webpack:///./src/components/Helper.vue?920d","webpack:///./src/components/Helper.vue?a443","webpack:///src/components/Menu.vue","webpack:///./src/components/Menu.vue?5be4","webpack:///./src/components/Menu.vue?7573","webpack:///./src/components/Login.vue?b07f","webpack:///./src/const.js","webpack:///./src/off.js","webpack:///src/components/Login.vue","webpack:///./src/components/Login.vue?c847","webpack:///./src/components/Login.vue?3ca4","webpack:///src/App.vue","webpack:///./src/App.vue?60d0","webpack:///./src/App.vue?315a","webpack:///./src/views/QuestionView.vue?c862","webpack:///./src/utils.js","webpack:///./src/robotoff.js","webpack:///./src/components/Product.vue?897b","webpack:///./src/countries.js","webpack:///src/components/Product.vue","webpack:///./src/components/Product.vue?627f","webpack:///./src/components/Product.vue?62e1","webpack:///./src/components/LoadingSpinner.vue?7ca6","webpack:///src/components/LoadingSpinner.vue","webpack:///./src/components/LoadingSpinner.vue?7995","webpack:///./src/components/LoadingSpinner.vue?712d","webpack:///./src/components/QuestionFilter/index.vue?ca17","webpack:///./src/components/QuestionFilter/const.js","webpack:///src/components/QuestionFilter/index.vue","webpack:///./src/components/QuestionFilter/index.vue?c829","webpack:///./src/components/QuestionFilter/index.vue?ae1e","webpack:///./src/components/QuestionFilter/filterHelpers.js","webpack:///./src/components/AnnotationCounter.vue?a007","webpack:///src/components/AnnotationCounter.vue","webpack:///./src/components/AnnotationCounter.vue?f2fd","webpack:///./src/components/AnnotationCounter.vue?b9f3","webpack:///src/views/QuestionView.vue","webpack:///./src/views/QuestionView.vue?dc1f","webpack:///./src/views/QuestionView.vue?e5bb","webpack:///./src/views/NutritionView.vue?dc27","webpack:///src/views/NutritionView.vue","webpack:///./src/views/NutritionView.vue?740e","webpack:///./src/views/NutritionView.vue?d992","webpack:///./src/views/NutritionInteractiveView.vue?b5ab","webpack:///./src/utils/tableExtraction.js","webpack:///./src/components/InteractiveImage.vue?0c45","webpack:///./src/utils/tableAnotation.js","webpack:///src/components/InteractiveImage.vue","webpack:///./src/components/InteractiveImage.vue?6f14","webpack:///./src/components/InteractiveImage.vue?71d6","webpack:///./src/components/NutritionTable.vue?b277","webpack:///src/components/NutritionTable.vue","webpack:///./src/components/NutritionTable.vue?dc10","webpack:///./src/components/NutritionTable.vue?23c7","webpack:///src/views/NutritionInteractiveView.vue","webpack:///./src/views/NutritionInteractiveView.vue?9d99","webpack:///./src/views/NutritionInteractiveView.vue?2bca","webpack:///./src/views/TableAnnotation.vue?3984","webpack:///src/views/TableAnnotation.vue","webpack:///./src/views/TableAnnotation.vue?deee","webpack:///./src/views/TableAnnotation.vue?035b","webpack:///./src/views/SettingsView.vue?2835","webpack:///./src/i18n/messages.js","webpack:///src/views/SettingsView.vue","webpack:///./src/views/SettingsView.vue?c51e","webpack:///./src/views/SettingsView.vue","webpack:///./src/views/InsightListView.vue?ef0b","webpack:///./src/components/Pagination.vue?332c","webpack:///src/components/Pagination.vue","webpack:///./src/components/Pagination.vue?0ab9","webpack:///./src/components/Pagination.vue?5e6a","webpack:///src/views/InsightListView.vue","webpack:///./src/views/InsightListView.vue?f2af","webpack:///./src/views/InsightListView.vue?2ae2","webpack:///./src/views/LogoSearchView.vue?2e30","webpack:///./src/components/LogoCardGrid.vue?5b2e","webpack:///src/components/LogoCardGrid.vue","webpack:///./src/components/LogoCardGrid.vue?2f01","webpack:///./src/components/LogoCardGrid.vue?3a14","webpack:///src/views/LogoSearchView.vue","webpack:///./src/views/LogoSearchView.vue?b7f8","webpack:///./src/views/LogoSearchView.vue?461d","webpack:///./src/views/LogoAnnotationView.vue?53c8","webpack:///src/views/LogoAnnotationView.vue","webpack:///./src/views/LogoAnnotationView.vue?4383","webpack:///./src/views/LogoAnnotationView.vue?ac41","webpack:///./src/views/LogoUpdateView.vue?0b2b","webpack:///src/views/LogoUpdateView.vue","webpack:///./src/views/LogoUpdateView.vue?ac50","webpack:///./src/views/LogoUpdateView.vue","webpack:///./src/views/EcoScoreMenu.vue?cde4","webpack:///src/views/EcoScoreMenu.vue","webpack:///./src/views/EcoScoreMenu.vue?3b15","webpack:///./src/views/EcoScoreMenu.vue?6c59","webpack:///./src/views/secretTool.vue?1838","webpack:///src/views/secretTool.vue","webpack:///./src/views/secretTool.vue?2163","webpack:///./src/views/secretTool.vue?65bd","webpack:///./src/views/SubsetQuestionView.vue?7bcd","webpack:///./src/views/questions.js","webpack:///src/views/SubsetQuestionView.vue","webpack:///./src/views/SubsetQuestionView.vue?8e6a","webpack:///./src/views/SubsetQuestionView.vue?f8a9","webpack:///./src/main.js","webpack:///./src/assets/questionsScreenshot.png","webpack:///./src/components/QuestionFilter/index.vue?fcc5","webpack:///./src/assets/logoNameLabel.png","webpack:///./src/components/LoadingSpinner.vue?e8ca","webpack:///./src/components/LogoCardGrid.vue?2236","webpack:///./src/assets sync nonrecursive \\.png$","webpack:///./src/assets/logoGeneral.png","webpack:///./src/views/TableAnnotation.vue?52ed","webpack:///./src/views/QuestionView.vue?87c1","webpack:///./src/views/LogoSearchView.vue?f1d6","webpack:///./src/assets/memLogo.png","webpack:///./src/components/Pagination.vue?9502","webpack:///./src/views/InsightListView.vue?7a4e","webpack:///./src/components/Login.vue?34c2","webpack:///./src/views/secretTool.vue?7ac5","webpack:///./src/views/SubsetQuestionView.vue?e729","webpack:///./src/assets/logo.png","webpack:///./src/assets sync nonrecursive \\.json$","webpack:///./src/views/EcoScoreMenu.vue?02d8","webpack:///./src/components/InteractiveImage.vue?1e96","webpack:///./src/views/NutritionInteractiveView.vue?b335","webpack:///./src/components/Product.vue?9f15","webpack:///./src/components/NutritionTable.vue?de58"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","staticRenderFns","staticClass","_l","item","to","_e","label","_v","_s","on","openHelper","helperIsOpen","closeHelper","STORAGE_KEY","localSettings","fetch","JSON","parse","localStorage","getItem","save","settings","setItem","stringify","update","getLang","urlParams","URLSearchParams","location","search","urlLanguage","has","lang","navigator","language","userLanguage","split","open","close","helpInformations","pageKey","imageSize","imgUrl","title","text","pageRatio","pageIndex","nativeOn","$event","prev","arguments","$t","keys","next","welcome","page1","page2","image","page3","logos","explanations","forEach","urlKey","console","debug","translatedExplanations","currentPathKey","translations","rep","texts","props","watch","$route","computed","Math","floor","methods","$emit","max","min","component","menu","intialSettings","components","menuItems","filter","modalIsOpen","closeModal","ROBOTOFF_API_URL","OFF_URL","OFF_API_URL","OFF_IMAGE_URL","OFF_SEARCH","NO_QUESTION_LEFT","getCookie","cookies","document","cookie","trim","startsWith","getAuthStatus","axios","getUsername","sessionCookie","isNext","username","el","getProduct","barcode","getProductUrl","getProductEditUrl","getImageUrl","imagePath","combineURLs","getTableExtractionAI","img","x0","y0","x1","y1","getNutritionToFillUrl","page","country","creator","category","code","creatorTagNumber","categoryTagNumber","isAuthenticated","openModal","log","newIsAuthenticated","oldIsAuthenticated","mounted","off","model","callback","$$v","filters","expression","currentQuestion","question","valueTagQuestionsURL","staticStyle","currentQuestionImageUrl","left","top","ref","boundaries","width","height","handlers","movable","resizable","annotate","loading","currentQuestionBarcode","remainingQuestionCount","lastAnnotations","sessionAnnotatedCount","setURLParams","parameters","set","newRelativePathQuery","pathname","toString","history","pushState","getURLParam","removeEmptyKeys","obj","undefined","insightId","annotation","post","withCredentials","questionsByProductCode","then","questions","source_image_url","sortBy","insightTypes","valueTag","brands","count","params","insight_types","value_tag","loadLogo","logoId","updateLogo","type","put","searchLogos","annotated","getLogoAnnotations","index","url","annotateLogos","annotations","getInsights","getUserStatistics","getCroppedImageUrl","imageUrl","boundingBox","y_min","x_min","y_max","x_max","getLogosImages","logoIds","join","productName","productUrl","productEditUrl","imagesPreview","hideImage","imageZoomOptions","ingredientsText","countries","countryMap","id","match","splittedBarcode","countriesTags","images","loaded","toolbar","rotateLeft","rotateRight","map","isNaN","imagesDisplayUrl","class","centered","size","show","Boolean","required","default","String","selectedInsightType","insightType","selectDirectlyInsightType","removeFilter","countryFilter","brandFilter","openForm","primary","formValues","selectInsightType","directives","rawName","domProps","target","composing","$set","clearFormField","$$selectedVal","Array","options","selected","val","_value","multiple","populateBrandFilter","setPopulateBrandFilter","isArray","sortByPopularity","_i","$$a","$$el","$$c","checked","$$i","concat","resetForm","validateForm","countryNames","insightTypesNames","brand","product_weight","key2urlParam","availableInsightTypes","formIsClose","updateURLParams","loadBrands","closeForm","$props","randomInsightTypeChoices","getRandomInsightType","random","getInitialInsightType","urlParamValue","getInitialFilterValues","remainingCount","annotatedCount","insight_id","insight_type","Number","historyAnnotatedCount","sortedLastAnnotations","reverse","robotoff","à","â","ä","é","è","ê","ë","î","ï","ô","ö","û","ù","ü","output","replace","RegExp","Product","AnnotationCounter","LoadingSpinner","Cropper","QuestionFilter","valueTagTimeout","questionBuffer","seenInsightIds","Set","handler","loadQuestions","deep","clean","updateLastAnnotations","updateRemainingQuestionCount","newCount","noRemainingQuestion","append","addEventListener","event","nodeName","vm","rotateImage","imageRotationClass","productBuffer","nutritiveValue","visible","isInvalid","currentProductData","getNutrimentUnits","deleteProduct","skipProduct","validate","valueTagInput","product_name","bufferIsEmpty","clearValueTagInput","addProducts","nutrimentId","quantity","unit","resetProductData","newProductBuffer","contributor","positive","setCategory","toggleHistoryIsOpen","step","imageURL","changeCropCoordinate","style","coordinates","clickableBoxes","anotationToValidate","bestMatch","nutrimentToFill","boxes","attributedBoxesIds","useOnlyPredictions","nutriPredictionAccepted","nutriPredictionCanceled","validateHumanAnnotation","basisData","disabled","prevStep","canGoNext","nextStep","unselectPicture","canValidate","nutrimentToFillIndex","setNutrimentValueIndex","historyIsOpen","product","status","negative","require","nutrimentTranslation","distance","closest","OVERLAPPING_THRESHOLD","isOverlapping","boxA","boxB","maxY","minY","overlapDist","addExpression","trad","nutriKey","word","remapTranslation","includes","translationTree","nutryKey","cleanTrad","normalize","toLowerCase","splitted","boxIsInside","box","minX","maxX","nbComplet","x","y","hasPointInside","addGlobalBox","extremaValues","extractValues","cleanText","grams","matchAll","milligrams","mcg","percents","kJ","kcal","all","getNutrimentBoxes","filteredBoxes","linkBoxes","seenBoxes","k","parseInt","currentSolution","translation","description","getValues","values","group","again","newGrams","newMilligrams","newMcg","newPercents","newKJ","newKcal","newAll","boxesIndexes","filterBoxes","ocrData","angle","boundingPoly","vertices","sort","a","b","diffX","X_sorted_indexes","_","ocr","getOCRdata","responses","textAnnotations","getData","transforms","rotate","nutriments","except","normalizedSearch","src","imageWidth","imageHeight","highlight","displayedBox","alreadyUsed","boxBoundingPath","displayBox","interactiveElementStyle","removeDisplayedBox","proposition","validateProposition","validateValue","cancelNutrimentPrediction","validateNutrimentPrediction","points2Path","points","point","points2Key","pA","pB","compare3points","pC","getConvexPoints","sortedPoints","enveloppe","bord","pointIndex","getCenter","sum","reduce","getBoxes","boxIndex","path","toDelete","getGraphConnexComponents","graph","node2component","neighbors","minComponentId","getHullPaths","component2nodes","node","componentId","accumulateur","nodeId","componentKey","nodeId1","nodeId2","sortKeys","node1Key","node2Key","start","end","isInRectangle","x2","y2","Xmin","Ymin","Xmax","Ymax","rotateSize","getStyleTransforms","transform","transitions","imageClass","onlyPredictions","boxesHighlight","calculatedImageSize","calculatedSize","fill","enabled","transition","wrapperStyle","imageStyle","flip","horizontal","vertical","scaleX","coefficient","scaleY","scale","svgStyle","potentialNutriments","onChangeImage","$refs","refresh","destroyed","removeEventListener","refreshImage","naturalHeight","naturalWidth","root","clientWidth","clientHeight","complete","nutritiveKey","selectLine","updateNutriIndexToFill","updateValue","updateUnit","remove","prop","sortedKeys","kept","InteractiveImage","NutritionTable","nutritiveId","extracted","nutritionPredictionIndex","nextPage","productCode","productLang","proposedNutriments","currentValue","nutriKeys","tableExtraction","nextPrediction","initial","keysToAdd","nextIndex","cropper","cat","replaceProducts","getBasisTextForAPI","isServingSize","withData","correctedData","messages","currentState","click","urlImg","desactivateListenersInside","isDraggingCropRectangle","moveAt","stopPropagation","stopDragging","selectable","mouseover","currentLinks","neighbours","nodeKey","neighbourKey","noPointerEvent","keyIsDown","youWantToDelete","clickLink","youWantToDeleteBoxCenter","clickNode","unfill","line","lineId","center","column","columnId","cursor","lastElement","groupId","cropRectangle","startDraggingStart","startDraggingEnd","previousStep","dataQuality","skip","0","1","2","3","batchOfInsights","annnotated","currentPath","memorizedGraph","currentlyDragged","convexHalls","lineIterator","savedLines","columnIterator","savedColumns","savedCellsGraph","visibleBoxes","showSavedLines","showSavedColumns","canNotValidate","showCorppingRectangle","isSaved","savingDict","dicKey","findIndex","reset","alert","cellId","lines","boxId","boxId2cellId","columns","lineIds","columnIds","row_index","column_index","cell_id","loadOCR","boxKey","offsetX","offsetY","pop","newTextAnnotations","preventDefault","saveLang","selectedLang","toUpperCase","en","it","fr","de","es","ro","nl","ar","ca","zh","da","he","hu","pt","ru","sv","uk","vi","bg","pl","hr","ko","et","$i18n","locale","langs","barcodeFilter","valueTagFilter","insightTypeFilter","annotationFilter","loadInsights","resultCount","insight","filterBarcode","getQuestionUrl","formatDatetime","timestamp","completed_at","pageCount","updatedPage","currentPage","paginationLabels","hasFirst","first","active","goto","hasLast","last","labels","items","disable","dotsBefore","dotsAfter","insights","pageSize","datetime","modifiers","$forceUpdate","logo","annotation_type","toggleSelectLogo","editLogoURL","externalLogoURL","toFixed","annotation_value","sendAnnotations","valueInput","typeInput","isValidAnnotation","selectLogos","selectedLogos","unselectedLogos","defaultValue","noLogoAvailable","targetLogoId","annCount","loadLogos","select","cropURL","annotationValue","annotationType","card","remainingQuestions","zzzzzzzz","fr_labels","setRemainingQuestions","labelData","lab","setLabel","labelLogo","toggle","nbSelected","LOADING","validatedInsights","setTimeout","fetchNewQuestions","productIds","Vue","use","SuiVue","VueRouter","Viewer","VueI18n","config","productionTip","directive","componentUpdated","firstElementChild","focus","inserted","routes","redirect","InsightListView","QuestionView","EcoScoreMenu","SecretTool","NutritionView","NutritionInteractiveView","TableAnnotation","SettingsView","LogoAnnotationView","LogoSearchView","LogoUpdateView","SubsetQuestionView","router","i18n","fallbackLocale","VueMatomo","host","siteId","render","h","App","$mount","webpackContext","req","webpackContextResolve","e","Error","resolve"],"mappings":"aACE,SAASA,EAAqBC,GAQ7B,IAPA,IAMIC,EAAUC,EANVC,EAAWH,EAAK,GAChBI,EAAcJ,EAAK,GACnBK,EAAiBL,EAAK,GAIHM,EAAI,EAAGC,EAAW,GACpCD,EAAIH,EAASK,OAAQF,IACzBJ,EAAUC,EAASG,GAChBG,OAAOC,UAAUC,eAAeC,KAAKC,EAAiBX,IAAYW,EAAgBX,IACpFK,EAASO,KAAKD,EAAgBX,GAAS,IAExCW,EAAgBX,GAAW,EAE5B,IAAID,KAAYG,EACZK,OAAOC,UAAUC,eAAeC,KAAKR,EAAaH,KACpDc,EAAQd,GAAYG,EAAYH,IAG/Be,GAAqBA,EAAoBhB,GAE5C,MAAMO,EAASC,OACdD,EAASU,OAATV,GAOD,OAHAW,EAAgBJ,KAAKK,MAAMD,EAAiBb,GAAkB,IAGvDe,IAER,SAASA,IAER,IADA,IAAIC,EACIf,EAAI,EAAGA,EAAIY,EAAgBV,OAAQF,IAAK,CAG/C,IAFA,IAAIgB,EAAiBJ,EAAgBZ,GACjCiB,GAAY,EACRC,EAAI,EAAGA,EAAIF,EAAed,OAAQgB,IAAK,CAC9C,IAAIC,EAAQH,EAAeE,GACG,IAA3BX,EAAgBY,KAAcF,GAAY,GAE3CA,IACFL,EAAgBQ,OAAOpB,IAAK,GAC5Be,EAASM,EAAoBA,EAAoBC,EAAIN,EAAe,KAItE,OAAOD,EAIR,IAAIQ,EAAmB,GAKnBhB,EAAkB,CACrB,IAAO,GAGJK,EAAkB,GAGtB,SAASS,EAAoB1B,GAG5B,GAAG4B,EAAiB5B,GACnB,OAAO4B,EAAiB5B,GAAU6B,QAGnC,IAAIC,EAASF,EAAiB5B,GAAY,CACzCK,EAAGL,EACH+B,GAAG,EACHF,QAAS,IAUV,OANAf,EAAQd,GAAUW,KAAKmB,EAAOD,QAASC,EAAQA,EAAOD,QAASH,GAG/DI,EAAOC,GAAI,EAGJD,EAAOD,QAKfH,EAAoBM,EAAIlB,EAGxBY,EAAoBO,EAAIL,EAGxBF,EAAoBQ,EAAI,SAASL,EAASM,EAAMC,GAC3CV,EAAoBW,EAAER,EAASM,IAClC3B,OAAO8B,eAAeT,EAASM,EAAM,CAAEI,YAAY,EAAMC,IAAKJ,KAKhEV,EAAoBe,EAAI,SAASZ,GACX,qBAAXa,QAA0BA,OAAOC,aAC1CnC,OAAO8B,eAAeT,EAASa,OAAOC,YAAa,CAAEC,MAAO,WAE7DpC,OAAO8B,eAAeT,EAAS,aAAc,CAAEe,OAAO,KAQvDlB,EAAoBmB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQlB,EAAoBkB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,kBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKxC,OAAOyC,OAAO,MAGvB,GAFAvB,EAAoBe,EAAEO,GACtBxC,OAAO8B,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOlB,EAAoBQ,EAAEc,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRtB,EAAoB0B,EAAI,SAAStB,GAChC,IAAIM,EAASN,GAAUA,EAAOiB,WAC7B,WAAwB,OAAOjB,EAAO,YACtC,WAA8B,OAAOA,GAEtC,OADAJ,EAAoBQ,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRV,EAAoBW,EAAI,SAASgB,EAAQC,GAAY,OAAO9C,OAAOC,UAAUC,eAAeC,KAAK0C,EAAQC,IAGzG5B,EAAoB6B,EAAI,IAExB,IAAIC,EAAaC,OAAO,gBAAkBA,OAAO,iBAAmB,GAChEC,EAAmBF,EAAW3C,KAAKsC,KAAKK,GAC5CA,EAAW3C,KAAOf,EAClB0D,EAAaA,EAAWG,QACxB,IAAI,IAAItD,EAAI,EAAGA,EAAImD,EAAWjD,OAAQF,IAAKP,EAAqB0D,EAAWnD,IAC3E,IAAIU,EAAsB2C,EAI1BzC,EAAgBJ,KAAK,CAAC,EAAE,kBAEjBM,K,6ECvJT,W,0qLCAA,W,k34CCAA,W,o8sBCAA,W,kCCAA,W,qhLCAA,W,0iJCAI,G,UAAS,WAAa,IAAIyC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,QAAQA,EAAG,SAASA,EAAG,cAAc,CAACE,MAAM,CAAC,SAAW,WAAW,CAACF,EAAG,gBAAgB,IAAI,KACpMG,EAAkB,GCDlB,EAAS,WAAa,IAAIP,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,WAAW,CAACE,MAAM,CAAC,SAAW,QAAQ,CAACF,EAAG,eAAe,CAACI,YAAY,cAAcF,MAAM,CAAC,KAAO,GAAG,KAAO,OAAO,OAAS,KAAK,CAACF,EAAG,oBAAoB,CAACJ,EAAIS,GAAIT,EAAQ,MAAE,SAASU,GAAM,MAAO,CAAGA,EAAKC,GAAoFX,EAAIY,KAApFR,EAAG,sBAAsB,CAACd,IAAIoB,EAAKG,OAAO,CAACb,EAAIc,GAAG,IAAId,EAAIe,GAAGL,EAAKG,OAAO,OAAkBH,EAAKG,MAAmDb,EAAIY,KAAhDR,EAAG,uBAAuB,CAACd,IAAIoB,EAAKG,QAAkBH,EAAO,GAAEN,EAAG,cAAc,CAACd,IAAIoB,EAAKG,MAAML,YAAY,OAAOF,MAAM,CAAC,eAAe,SAAS,GAAKI,EAAKC,KAAK,CAACX,EAAIc,GAAG,IAAId,EAAIe,GAAGL,EAAKG,OAAO,OAAOb,EAAIY,UAAS,IAAI,GAAGR,EAAG,gBAAgB,CAACI,YAAY,sBAAsB,CAACJ,EAAG,MAAM,CAACE,MAAM,CAAC,IAAM,EAAQ,aAA2BN,EAAIS,GAAIT,EAAa,WAAE,SAASU,GAAM,OAAON,EAAG,cAAc,CAACd,IAAIoB,EAAKC,GAAGH,YAAY,qBAAqBF,MAAM,CAAC,eAAe,SAAS,GAAKI,EAAKC,KAAK,CAACX,EAAIc,GAAG,IAAId,EAAIe,GAAGL,EAAKG,OAAO,UAAST,EAAG,gBAAgB,CAACE,MAAM,CAAC,SAAW,UAAU,CAACF,EAAG,gBAAgB,CAACI,YAAY,aAAaQ,GAAG,CAAC,MAAQhB,EAAIiB,aAAa,CAACb,EAAG,WAAW,CAACE,MAAM,CAAC,KAAO,WAAW,IAAI,GAAGF,EAAG,SAAS,CAACE,MAAM,CAAC,KAAON,EAAIkB,cAAcF,GAAG,CAAC,eAAehB,EAAImB,gBAAgB,IACjqC,EAAkB,GCDhBC,G,0FAAc,wBAEPC,EAAgB,CACzBC,MAAO,WACH,OAAOC,KAAKC,MAAMC,aAAaC,QAAQN,IAAgB,OAE3DO,KAAM,SAAUC,GACZH,aAAaI,QAAQT,EAAaG,KAAKO,UAAUF,KAErDG,OAAQ,SAAUzC,EAAKN,GACnB,IAAM4C,EAAW3B,KAAKqB,QACtBM,EAAStC,GAAON,EAChBiB,KAAK0B,KAAKC,KAILI,EAAU,WACnB,IAAMJ,EAAWP,EAAcC,QAEzBW,EAAY,IAAIC,gBAAgBrC,OAAOsC,SAASC,QAChDC,EAAcJ,EAAUK,IAAI,aAAeL,EAAUrD,IAAI,YAE/D,OACIyD,GACAT,EAASW,OACRC,UAAUC,UAAYD,UAAUE,cAAcC,MAAM,KAAK,ICzB9D,EAAS,WAAa,IAAI3C,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,YAAY,CAACE,MAAM,CAAC,KAAON,EAAI4C,MAAM5B,GAAG,CAAC,QAAUhB,EAAI6C,QAAQ,CAACzC,EAAG,oBAAoB,CAACE,MAAM,CAAC,UAAY,GAAG,MAAQ,KAAK,CAACF,EAAG,YAAY,CAACE,MAAM,CAAC,QAAU,GAAG,KAAON,EAAI8C,iBAAiB9C,EAAI+C,SAASC,WAAa,SAAS,IAAMhD,EAAI8C,iBAAiB9C,EAAI+C,SAASE,UAAU7C,EAAG,wBAAwB,CAACA,EAAG,aAAa,CAACJ,EAAIc,GAAGd,EAAIe,GAAGf,EAAI8C,iBAAiB9C,EAAI+C,SAASG,UAAUlD,EAAIS,GAAIT,EAAI8C,iBAAiB9C,EAAI+C,SAAc,OAAE,SAASI,EAAK7D,GAAK,OAAOc,EAAG,IAAI,CAACd,IAAIA,EAAIkB,YAAY,mBAAmB,CAACR,EAAIc,GAAG,IAAId,EAAIe,GAAGoC,GAAM,WAAU,IAAI,GAAG/C,EAAG,cAAc,CAACE,MAAM,CAAC,QAAU,UAAU,CAACF,EAAG,eAAe,CAACE,MAAM,CAAC,SAAW,GAAG,IAAM,GAAG,QAAUN,EAAIoD,UAAU,MAAQ,WAAYpD,EAAIqD,UAAY,EAAGjD,EAAG,aAAa,CAACkD,SAAS,CAAC,MAAQ,SAASC,GAAQ,OAAOvD,EAAIwD,KAAKlG,MAAM,KAAMmG,cAAc,CAACzD,EAAIc,GAAG,IAAId,EAAIe,GAAGf,EAAI0D,GAAG,oBAAoB,OAAO1D,EAAIY,KAAMhE,OAAO+G,KAAK3D,EAAI8C,kBAAkBnG,OAASqD,EAAIqD,UAAY,EAAGjD,EAAG,aAAa,CAACE,MAAM,CAAC,QAAU,IAAIgD,SAAS,CAAC,MAAQ,SAASC,GAAQ,OAAOvD,EAAI4D,KAAKtG,MAAM,KAAMmG,cAAc,CAACzD,EAAIc,GAAG,IAAId,EAAIe,GAAGf,EAAI0D,GAAG,gBAAgB,OAAOtD,EAAG,aAAa,CAACE,MAAM,CAAC,SAAW,IAAIgD,SAAS,CAAC,MAAQ,SAASC,GAAQ,OAAOvD,EAAI6C,MAAMvF,MAAM,KAAMmG,cAAc,CAACzD,EAAIc,GAAG,IAAId,EAAIe,GAAGf,EAAI0D,GAAG,iBAAiB,QAAQ,IAAI,IAAI,IACl1C,EAAkB,G,oEC8CtB,GACEG,QAAS,CACPC,MAAO,GACPC,MAAO,CACLC,MAAO,0BACPhB,UAAW,QAEbiB,MAAO,CACLD,MAAO,kBACPhB,UAAW,SAGfkB,MAAO,CACLJ,MAAO,CACLE,MAAO,mBAETD,MAAO,CACLC,MAAO,eAETC,MAAO,CACLD,MAAO,oBACPhB,UAAW,WAKjB,YACA,8CAGApG,OAAO+G,KAAKQ,GAAcC,SAAQ,SAAlC,GACExH,OAAO+G,KAAKQ,EAAaE,IAASD,SAAQ,SAA5C,GACID,EAAaE,GAAQtB,GAASE,OAAS,EAC3C,2BAKA,oBACE,IAAF,aACEqB,QAAQC,MAAMC,GAERC,KAAkBD,IACtBC,EAAiB,WAGnB,IAAF,OACA,KAaE,OAXA7H,OAAO+G,KAAKe,GAAcN,SAAQ,SAApC,GACI,IAAJ,uCACIO,EAAI5B,GAAW,OAAnB,OAAmB,CAAnB,CACMG,MAAN,EACM0B,MAAO,OAAb,OAAa,CAAb,OACA,cACA,QACA,OAGEN,QAAQC,MAAMI,GACPA,GAOT,GACEpG,KAAM,mBACNsG,MAAO,CAAT,cACE1I,KAAM,WACJ,MAAO,CACLkH,UAAW,EACXP,iBAAkB,EACxB,kCACA,qBAIEgC,MAAO,CACLC,OADJ,WAEM9E,KAAK6C,iBAAmB,EAC9B,kCACA,mBAEM7C,KAAKoD,UAAY,IAGrB2B,SAAU,CACR5B,UAAW,WACT,OAAkD,IAA9CxG,OAAO+G,KAAK1D,KAAK6C,kBAAkBnG,OAC9B,IAEFsI,KAAKC,MAClB,mEAGInC,QAAS,WACP,MAAO,OAAb,2BAGEoC,QAAS,CACPtC,MAAO,WACL5C,KAAKmF,MAAM,iBAEb5B,KAAM,WACJvD,KAAKoD,UAAY4B,KAAKI,IAAI,EAAGpF,KAAKoD,UAAY,IAEhDO,KAAM,WACJ3D,KAAKoD,UAAY4B,KAAKK,IAC5B,4CACA,qBC9JgV,I,wBCQ5UC,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIa,EAAAA,E,QC8Bf,YACAlE,EAAcU,OAAO,aAAa,GAElC,OACE5F,KAAM,WACJ,MAAO,CACLqJ,KAAM,CACZ,CAAQ,MAAR,uBACA,CAAQ,MAAR,0BAAQ,GAAR,cACA,CAAQ,MAAR,sBAAQ,GAAR,UACA,CAAQ,MAAR,0BAAQ,GAAR,cAEM,GACN,CAAQ,MAAR,uBAAQ,KAAR,UACA,CAAQ,MAAR,yBAAQ,GAAR,aACA,CAAQ,MAAR,yBAAQ,GAAR,cAEMtE,cAAeuE,EAAe,eAGlCC,WAAY,CAAd,UACEV,SAAU,CACRW,UAAW,WACT,OAAO1F,KAAKuF,KAAKI,QAAO,SAA9B,GACQ,OAAOlF,EAAKC,QAIlBwE,QAAS,CACPhE,YAAa,WACXlB,KAAKiB,cAAe,GAEtBD,WAAY,WACVhB,KAAKiB,cAAe,KClFoT,ICQ1U,G,UAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,OAIa,I,QCnBX,EAAS,WAAa,IAAIlB,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,YAAY,CAACE,MAAM,CAAC,KAAON,EAAI6F,cAAc,CAACzF,EAAG,oBAAoB,CAACA,EAAG,wBAAwB,CAACA,EAAG,aAAa,CAACJ,EAAIc,GAAG,WAAWV,EAAG,IAAI,CAACJ,EAAIc,GAAG,yEAAyE,IAAI,GAAGV,EAAG,cAAc,CAACE,MAAM,CAAC,QAAU,UAAU,CAACF,EAAG,aAAa,CAACkD,SAAS,CAAC,MAAQ,SAASC,GAAQ,OAAOvD,EAAI8F,WAAWxI,MAAM,KAAMmG,cAAc,CAACzD,EAAIc,GAAG,IAAId,EAAIe,GAAGf,EAAI0D,GAAG,iBAAiB,QAAQ,IAAI,IAC5gB,EAAkB,GCDTqC,G,8BAAmB,6CACnBC,EAAU,kCACVC,EAAc,GAAH,OAAMD,EAAN,WACXE,EAAgB,mDAChBC,EAAa,gDAEbC,EAAmB,mB,0CCDjB,GACbC,UADa,SACH9H,GACR,IAAM+H,EAAUC,SAASC,OACtB7D,MAAM,KACNiD,QAAO,SAAClF,GAAD,OAAUA,EAAK+F,OAAOC,WAAZ,UAA0BnI,EAA1B,SACpB,GAAI+H,EAAQ3J,OAAQ,CAClB,IAAM6J,EAASF,EAAQ,GACvB,OAAOE,EAAO7D,MAAM,IAAK,GAAG,GAE9B,MAAO,IAGTgE,cAZa,WAaX,OAAOC,IAAMhI,IAAI,gDAGnBiI,YAhBa,WAiBX,IAAMC,EAAgB7G,KAAKoG,UAAU,WAErC,IAAKS,EAAcnK,OACjB,MAAO,GAGT,IAAIoK,GAAS,EACTC,EAAW,GASf,OARAF,EAAcnE,MAAM,KAAKyB,SAAQ,SAAC6C,GACrB,YAAPA,EACFF,GAAS,EACAA,IACTC,EAAWC,EACXF,GAAS,MAGNC,GAGTE,WApCa,SAoCFC,GACT,OAAOP,IAAMhI,IAAN,UACFqH,EADE,oBACqBkB,EADrB,6EAKTC,cA1Ca,SA0CCD,GACZ,IAAM5E,EAAOP,IACb,6BACW,OAATO,EAAgB,GAAK,IAAMA,EAD7B,sCAE8B4E,IAGhCE,kBAjDa,SAiDKF,GAChB,IAAM5E,EAAOP,IACb,6BACW,OAATO,EAAgB,GAAK,IAAMA,EAD7B,4DAEoD4E,IAGtDG,YAxDa,SAwDDC,GACV,OAAOC,IAAYtB,EAAeqB,IAGpCE,qBA5Da,YA4DiC,IAAvBC,EAAuB,EAAvBA,IAAKC,EAAkB,EAAlBA,GAAIC,EAAc,EAAdA,GAAIC,EAAU,EAAVA,GAAIC,EAAM,EAANA,GACtC,kFAA4EJ,EAA5E,eAAsFC,EAAtF,YAA4FC,EAA5F,YAAkGC,EAAlG,YAAwGC,EAAxG,MAGFC,sBAhEa,YAgE6D,IAAlDC,EAAkD,EAAlDA,KAAMC,EAA4C,EAA5CA,QAASC,EAAmC,EAAnCA,QAASC,EAA0B,EAA1BA,SAA0B,IAAhBC,YAAgB,SACxE,GAAIA,EACF,+DAAyDA,EAAzD,sGAEF,IAAIC,EAAmB,EACnBC,EAAoB,EASxB,OARIL,IACFI,GAAoB,EACpBC,GAAqB,GAEnBJ,IACFI,GAAqB,GAGvB,UAAUnC,EAAV,sBACE6B,EAAO,QAAH,OAAWA,EAAX,KAAqB,GAD3B,6RAGEC,EAAO,6DACmDA,GACtD,IALN,OAOEC,EAAO,mBACSG,EADT,iCACkDA,EADlD,yBACmFA,EADnF,YACuGH,GAC1G,GATN,mBAYIC,EAAQ,mBACQG,EADR,oCACqDA,EADrD,yBACuFA,EADvF,YAC4GH,GAChH,MC3EZ,GACEhM,KAAM,WACJ,MAAO,CACLoM,gBAAiB,KACjB1C,aAAa,IAIjBV,QAAS,CACPW,WAAY,WACV7F,KAAK4F,aAAc,GAErB2C,UAAW,WACTvI,KAAK4F,aAAc,IAGvBf,MAAO,CACLyD,gBAAiB,SAArB,KAKM,GAJAjE,QAAQmE,IAAI,CACVC,mBAAR,EACQC,mBAAR,IAEUA,IAAuBD,EAI3B,OAAQA,GACN,KAAK,EACHzI,KAAK6F,aACL,MACF,KAAK,EACH7F,KAAKuI,eAIbI,QAnCF,WAmCA,WACIC,EACJ,gBACA,iBACM,EAAN,sBAEA,kBACM,EAAN,wBChE+U,ICQ3U,G,UAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,OAIa,I,QCLf,GACEtK,KAAM,MACNmH,WAAY,CAAd,gBACEvJ,KAAM,WACJ,MAAO,KClBmT,KCQ1T,I,UAAY,eACd,GACA,EACAoE,GACA,EACA,KACA,WACA,OAIa,M,QCnBX,GAAS,WAAa,IAAIP,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACI,YAAY,qBAAqB,CAACJ,EAAG,MAAM,CAACI,YAAY,6BAA6B,CAACJ,EAAG,MAAM,CAACI,YAAY,kBAAkB,CAACJ,EAAG,iBAAiB,CAAC0I,MAAM,CAAC9J,MAAOgB,EAAW,QAAE+I,SAAS,SAAUC,GAAMhJ,EAAIiJ,QAAQD,GAAKE,WAAW,aAAa9I,EAAG,MAAM,CAACI,YAAY,eAAeJ,EAAG,MAAM,CAACI,YAAY,sBAAuBR,EAAmB,gBAAEI,EAAG,MAAM,CAACA,EAAG,KAAK,CAACJ,EAAIc,GAAGd,EAAIe,GAAGf,EAAImJ,gBAAgBC,aAAcpJ,EAAIqJ,qBAA2B,OAAEjJ,EAAG,MAAM,CAACA,EAAG,cAAc,CAACE,MAAM,CAAC,GAAKN,EAAIqJ,qBAAqB,OAAS,WAAW,CAACjJ,EAAG,MAAM,CAACI,YAAY,gBAAgB,CAACR,EAAIc,GAAG,IAAId,EAAIe,GAAGf,EAAImJ,gBAAgBnK,OAAO,KAAKoB,EAAG,IAAI,CAACI,YAAY,qCAAqC8I,YAAY,CAAC,cAAc,iBAAiB,GAAGlJ,EAAG,MAAM,CAACA,EAAG,MAAM,CAACI,YAAY,gBAAgB,CAACR,EAAIc,GAAGd,EAAIe,GAAGf,EAAImJ,gBAAgBnK,YAAYoB,EAAG,MAAM,CAACI,YAAY,sBAAsBJ,EAAG,UAAU,CAACkJ,YAAY,CAAC,OAAS,QAAQ,OAAS,QAAQhJ,MAAM,CAAC,IAAMN,EAAIuJ,wBAAwB,aAAc,EAAM,QAAS,EAAM,kBAAmB,EAAM,cAAe,EAAM,mBAAmB,CACtoCC,KAAM,EACNC,IAAK,GACL,YAAc,SAAUC,GACtB,IAAIC,EAAaD,EAAIC,WAErB,MAAO,CACLC,MAAOD,EAAWC,MAClBC,OAAQF,EAAWE,SAErB,qBAAqB,MAAM,gBAAgB,CAC7CC,SAAU,GACVC,SAAS,EACTC,WAAW,MACR5J,EAAG,MAAM,CAACI,YAAY,sBAAsBJ,EAAG,MAAM,CAACA,EAAG,SAAS,CAACI,YAAY,kCAAkCF,MAAM,CAAC,gBAAgB,GAAG,eAAe,eAAeU,GAAG,CAAC,MAAQ,SAASuC,GAAQ,OAAOvD,EAAIiK,SAAS,MAAM,CAAC7J,EAAG,IAAI,CAACI,YAAY,eAAeR,EAAIc,GAAG,IAAId,EAAIe,GAAGf,EAAI0D,GAAG,iBAAiB,OAAOtD,EAAG,SAAS,CAACI,YAAY,yBAAyBF,MAAM,CAAC,gBAAgB,GAAG,eAAe,eAAeU,GAAG,CAAC,MAAQ,SAASuC,GAAQ,OAAOvD,EAAIiK,UAAU,MAAM,CAAC7J,EAAG,IAAI,CAACI,YAAY,kBAAkBR,EAAIc,GAAG,IAAId,EAAIe,GAAGf,EAAI0D,GAAG,mBAAmB,OAAOtD,EAAG,SAAS,CAACI,YAAY,kCAAkCF,MAAM,CAAC,gBAAgB,GAAG,eAAe,eAAeU,GAAG,CAAC,MAAQ,SAASuC,GAAQ,OAAOvD,EAAIiK,SAAS,MAAM,CAAC7J,EAAG,IAAI,CAACI,YAAY,eAAeR,EAAIc,GAAG,IAAId,EAAIe,GAAGf,EAAI0D,GAAG,kBAAkB,UAAU,GAAGtD,EAAG,MAAM,CAACI,YAAY,cAAc8I,YAAY,CAAC,aAAa,UAAU,CAAClJ,EAAG,iBAAiB,CAACE,MAAM,CAAC,KAAON,EAAIkK,WAAYlK,EAAuB,oBAAEI,EAAG,MAAM,CAACA,EAAG,KAAK,CAACJ,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,0CAA0C1D,EAAIY,MAAM,IAAI,KAAKR,EAAG,MAAM,CAACI,YAAY,4BAA4B,CAACJ,EAAG,UAAU,CAACE,MAAM,CAAC,QAAUN,EAAImK,2BAA2B,GAAG/J,EAAG,MAAM,CAACI,YAAY,uCAAuC,CAACJ,EAAG,oBAAoB,CAACE,MAAM,CAAC,eAAiBN,EAAIoK,uBAAuB,gBAAkBpK,EAAIqK,gBAAgB,sBAAwBrK,EAAIsK,0BAA0B,MACr5C,GAAkB,G,mICPTC,I,UAAe,SAACC,GAC3B,IAAMvI,EAAY,IAAIC,gBACtBtF,OAAO+G,KAAK6G,GAAYpG,SAAQ,SAAC9E,GAC3BkL,EAAWlL,IACb2C,EAAUwI,IAAInL,EAAKkL,EAAWlL,OAIlC,IAAMoL,EACJ7K,OAAOsC,SAASwI,SAAW,IAAM1I,EAAU2I,WAC7CC,QAAQC,UAAU,KAAM,GAAIJ,KAmBjBK,GAAc,SAACzL,GAC1B,IAAM2C,EAAY,IAAIC,gBAAgBrC,OAAOsC,SAASC,QAEtD,OAAKH,EAAUK,IAAIhD,GAIZ2C,EAAUrD,IAAIU,GAHZ,IAME0L,GAAkB,SAACC,GAI9B,OAHArO,OAAO+G,KAAKsH,GAAK7G,SACf,SAAC9E,GAAD,YAAuB4L,IAAbD,EAAI3L,IAAmC,KAAb2L,EAAI3L,YAAuB2L,EAAI3L,MAE9D2L,GC9CM,IAEbhB,SAFa,SAEJkB,EAAWC,GAClB,OAAOxE,IAAMyE,KAAN,UACFtF,EADE,sBAEL,IAAI7D,gBAAJ,qBACgBiJ,EADhB,uBACwCC,EADxC,cAGA,CAAEE,iBAAiB,KAIvBC,uBAZa,SAYUnD,GACrB,OAAOxB,IAAMhI,IAAN,UACFmH,EADE,sBAC4BqC,IACjCoD,MAAK,SAAAhO,GACL,IAAIiO,EAAYjO,EAAOrB,KAAKsP,UAE5B,OADAjO,EAAOrB,KAAKsP,UAAYA,EAAU7F,QAAO,SAAAwD,GAAQ,OAAIA,EAASsC,oBACvDlO,MAIXiO,UAtBa,SAsBHE,EAAQC,EAAcC,EAAUC,EAAQ7D,GAAqB,IAAZ8D,EAAY,uDAAJ,GAC3DxJ,EAAOP,IACb,OAAO4E,IAAMhI,IAAN,UACFmH,EADE,sBAC4B4F,GAAU,CAC3CK,OAAQhB,GAAgB,CACtBe,QAAOxJ,OAAM0J,cAAeL,EAAcM,UAAWL,EAAUC,SAAQ7D,cAGzEuD,MAAK,SAAAhO,GACL,IAAIiO,EAAYjO,EAAOrB,KAAKsP,UAE5B,OADAjO,EAAOrB,KAAKsP,UAAYA,EAAU7F,QAAO,SAAAwD,GAAQ,OAAIA,EAASsC,oBACvDlO,MAIX2O,SArCa,SAqCJC,GACP,OAAOxF,IAAMhI,IAAN,UACFmH,EADE,yBAC+BqG,KAIxCC,WA3Ca,SA2CFD,EAAQpN,EAAOsN,GACxB,OAAO1F,IAAM2F,IAAN,UACFxG,EADE,yBAC+BqG,GAAUpB,GAAgB,CAC5DM,iBAAiB,EAAMtM,QAAOsN,WAKpCE,YAnDa,SAmDDrF,EAASnI,EAAOsN,GAAkB,IAAZP,EAAY,uDAAJ,GACxC,OAAOnF,IAAMhI,IAAN,UACFmH,EADE,iBAC+B,CACpCiG,OAAQhB,GAAgB,CACtByB,UAAW,EAAGtF,UAASnI,QAAOsN,OAAMP,aAM1CW,mBA7Da,SA6DMN,EAAQO,EAAOZ,GAChC,IAAMa,EAAMR,EAAOzP,OAAS,EAAhB,UACLoJ,EADK,gBACmBqG,GADnB,UAELrG,EAFK,QAGZ,OAAOa,IAAMhI,IACXgO,EAAK,CACLZ,OAAQhB,GAAgB,CACtB2B,QAAOZ,aAMbc,cA1Ea,SA0ECC,GACZ,OAAOlG,IAAMyE,KAAN,UACFtF,EADE,0BACwCiF,GAC3C,CACEM,iBAAiB,EAAMwB,kBAM/BC,YApFa,SAoFD5F,EAASyE,EAAcC,EAAUT,EAAYpD,GAAkB,IACrEyE,EADyDV,EAAY,uDAAJ,GAKrE,OAHIX,EAAWzO,QAAwB,iBAAdyO,IACvBqB,EAAY,KAEP7F,IAAMhI,IAAN,UACFmH,EADE,aAC2B,CAChCiG,OAAQhB,GAAgB,CACtB7D,UAAS8E,cAAeL,EACxBM,UAAWL,EAAUT,aAAYpD,OACjCyE,YAAWV,aAMjBiB,kBApGa,SAoGKhG,GAChB,OAAOJ,IAAMhI,IAAN,UAAamH,EAAb,6BAAkDiB,KAG3DiG,mBAxGa,SAwGMC,EAAUC,GAC3B,sBAAqCA,EAArC,GAAOC,EAAP,KAAcC,EAAd,KAAqBC,EAArB,KAA4BC,EAA5B,KACA,gBAAUxH,EAAV,kCAAoDmH,EAApD,kBAAsEE,EAAtE,kBAAqFC,EAArF,kBAAoGC,EAApG,kBAAmHC,IAGrHC,eA7Ga,SA6GEC,GACb,OAAO7G,IAAMhI,IAAN,UACFmH,EADE,kCACwC0H,EAAQC,KAAK,SCpH5D,GAAS,WAAa,IAAI1N,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAQF,EAAU,OAAEI,EAAG,MAAM,CAACI,YAAY,gBAAgB,CAACJ,EAAG,KAAK,CAACJ,EAAIc,GAAGd,EAAIe,GAAGf,EAAI2N,gBAAgBvN,EAAG,IAAI,CAACI,YAAY,oBAAoBF,MAAM,CAAC,OAAS,SAAS,KAAON,EAAI4N,aAAa,CAAC5N,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,sBAAsBtD,EAAG,IAAI,CAACI,YAAY,YAAYF,MAAM,CAAC,OAAS,SAAS,KAAON,EAAI6N,iBAAiB,CAAC7N,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,sBAAsBtD,EAAG,MAAM,CAACI,YAAY,eAAgBR,EAAI8N,cAAcnR,OAAS,EAAGyD,EAAG,MAAM,CAACA,EAAG,MAAM,CAACI,YAAY,oBAAoB,CAACJ,EAAG,eAAe,CAAC0I,MAAM,CAAC9J,MAAOgB,EAAa,UAAE+I,SAAS,SAAUC,GAAMhJ,EAAI+N,UAAU/E,GAAKE,WAAW,cAAc,CAAClJ,EAAIc,GAAG,IAAId,EAAIe,GAAGf,EAAI0D,GAAG,0BAA0B,QAAQ,GAAK1D,EAAI+N,UAAmR/N,EAAIY,KAA5QR,EAAG,SAAS,CAACE,MAAM,CAAC,OAASN,EAAI8N,cAAc,QAAU9N,EAAIgO,mBAAmBhO,EAAIS,GAAIT,EAAiB,eAAE,SAAS4M,GAAK,OAAOxM,EAAG,MAAM,CAACd,IAAIsN,EAAItD,YAAY,CAAC,aAAa,QAAQ,YAAY,QAAQ,eAAe,OAAOhJ,MAAM,CAAC,IAAMsM,EAAI,QAAU,aAAY,GAAYxM,EAAG,MAAM,CAACI,YAAY,gBAAgB,GAAGR,EAAIY,KAAMZ,EAAU,OAAEI,EAAG,IAAI,CAACA,EAAG,SAAS,CAACJ,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,qBAAqB,QAAQ1D,EAAIc,GAAG,IAAId,EAAIe,GAAGf,EAAI8L,QAAQ,OAAO9L,EAAIY,KAAMZ,EAAmB,gBAAEI,EAAG,IAAI,CAACA,EAAG,SAAS,CAACJ,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,0BAA0B,OAAO1D,EAAIc,GAAG,IAAId,EAAIe,GAAGf,EAAIiO,iBAAiB,OAAOjO,EAAIY,KAAMZ,EAAa,UAAEI,EAAG,IAAI,CAACA,EAAG,SAAS,CAACJ,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,wBAAwB,OAAO1D,EAAIc,GAAG,IAAId,EAAIe,GAAGf,EAAIkO,WAAW,OAAOlO,EAAIY,OAAOZ,EAAIY,MAC5+C,GAAkB,G,yBCETuN,GAAa,WACtB,IAAMA,EAAa,GAInB,OAHAD,GAAU9J,SAAQ,SAAA/F,GACd8P,EAAW9P,EAAE+P,IAAM/P,EAAEwC,SAElBsN,EALe,GCqD1B,0BACA,eACE,IAAF,aAEE,OAAc,OAAVE,GACFA,EAAMjR,QACCiR,GAGF,CAAClH,IAGV,eACE,IAAF,QAEE,OAAwB,OAApBmH,EACK,KAEFzF,EAAT,0BAGA,IACEtK,KAAM,UACNsG,MAAO,CAAC,WAER1I,KAAM,WACJ,MAAO,CACL4R,UAAW1M,EAAcC,QAAQ,eAAgB,EAEjDqM,YAAa,GACb7B,OAAQ,GACRmC,gBAAiB,GACjBM,cAAe,GACfC,OAAQ,GACRC,QAAQ,EACRT,iBAAkB,CAChBU,QAAS,CACPC,WAAY,EACZC,YAAa,MAMrB9J,MAAO,CACLqC,QAAS,SAAb,GACUnI,EACFiB,KAAK8B,UAEL9B,KAAK0N,YAAc,GACnB1N,KAAK6L,OAAS,GACd7L,KAAKgO,gBAAkB,GACvBhO,KAAKsO,cAAgB,GACrBtO,KAAKuO,OAAS,GACdvO,KAAKwO,QAAS,IAIlBV,UAAW,SAAf,GACM1M,EAAcU,OAAO,YAAa/C,KAGtCmG,QAAS,CACPpD,OAAQ,WAAZ,WACM8G,EAAN,2CACQ,IAAR,iBACQ,EAAR,+BACQ,EAAR,oBACQ,EAAR,uCACQ,EAAR,mCACQ,EAAR,oBACQ,EAAR,eAIE7D,SAAU,CACR4I,WAAY,WACV,OAAqB,OAAjB3N,KAAKkH,QACA,GAEF0B,EAAb,6BAEIgF,eAAgB,WACd,OAAqB,OAAjB5N,KAAKkH,QACA,GAEF0B,EAAb,iCAEIqF,UAAW,WACT,OAAOjO,KAAKsO,cAAcM,KAAI,SAApC,+BAEIf,cAAe,WAEb,IADA,IAAN,KACA,0DACQ,IAAKgB,MAAMxP,GAAM,CACf,IAAV,mDACUyP,EAAiB9R,KAAKiQ,IAG1B,OAAO6B,IAGXnG,QAjFF,WAkFQ3I,KAAKkH,SACPlH,KAAK8B,WChKsU,MCQ7U,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,OAIa,M,QCnBX,GAAS,WAAa,IAAI/B,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAAC4O,MAAM,CAACC,SAAUjP,EAAIiP,WAAW,CAAEjP,EAAQ,KAAEI,EAAG,MAAM,CAACI,YAAY,0BAA0BwO,MAAM,CAAChP,EAAIkP,QAAQlP,EAAIY,QACzN,GAAkB,GCMtB,IACErC,KAAM,iBACNsG,MAAO,CACLsK,KAAM,CACJ7C,KAAM8C,QACNC,UAAU,GAEZJ,SAAU,CACR3C,KAAM8C,QACNC,UAAU,EACVC,SAAS,GAEXJ,KAAM,CACJ5C,KAAMiD,OACNF,UAAU,EACVC,QAAS,UCtByU,MCQpV,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,OAIa,M,QCnBX,GAAS,WAAa,IAAItP,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACI,YAAY,QAAQ,CAACJ,EAAG,MAAM,CAACA,EAAG,eAAe,CAACI,YAAY,sBAAsBF,MAAM,CAAC,KAAON,EAAI0D,GAAG,aAAe1D,EAAIhB,MAAMwQ,uBAAuB,CAACpP,EAAG,oBAAoBJ,EAAIS,GAAIT,EAAyB,uBAAE,SAASyP,GAAa,OAAOrP,EAAG,oBAAoB,CAACd,IAAImQ,EAAYzO,GAAG,CAAC,MAAQ,SAASuC,GAAQ,OAAOvD,EAAI0P,0BAA0BD,MAAgB,CAACzP,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,aAAe+L,UAAmB,IAAI,GAAIzP,EAAIhB,MAAc,SAAEoB,EAAG,MAAM,CAACI,YAAY,kBAAkB,CAACR,EAAIc,GAAG,IAAId,EAAIe,GAAGf,EAAI0D,GAAG,wCAAwC,KAAK1D,EAAIe,GAAGf,EAAIhB,MAAM6M,WAAWzL,EAAG,IAAI,CAACI,YAAY,aAAaQ,GAAG,CAAC,MAAQ,SAASuC,GAAQ,OAAOvD,EAAI2P,aAAa,kBAAkB3P,EAAIY,KAAMZ,EAAIhB,MAAmB,cAAEoB,EAAG,MAAM,CAACI,YAAY,kBAAkB,CAACR,EAAIc,GAAG,IAAId,EAAIe,GAAGf,EAAI0D,GAAG,0CAA0C,KAAK1D,EAAIe,GAAGf,EAAIhB,MAAM4Q,gBAAgBxP,EAAG,IAAI,CAACI,YAAY,aAAaQ,GAAG,CAAC,MAAQ,SAASuC,GAAQ,OAAOvD,EAAI2P,aAAa,uBAAuB3P,EAAIY,KAAMZ,EAAIhB,MAAiB,YAAEoB,EAAG,MAAM,CAACI,YAAY,kBAAkB,CAACR,EAAIc,GAAG,IAAId,EAAIe,GAAGf,EAAI0D,GAAG,wCAAwC,KAAK1D,EAAIe,GAAGf,EAAIhB,MAAM6Q,cAAczP,EAAG,IAAI,CAACI,YAAY,aAAaQ,GAAG,CAAC,MAAQ,SAASuC,GAAQ,OAAOvD,EAAI2P,aAAa,qBAAqB3P,EAAIY,KAAMZ,EAAIhB,MAAsB,iBAAEoB,EAAG,MAAM,CAACI,YAAY,kBAAkB,CAACR,EAAIc,GAAG,IAAId,EAAIe,GAAGf,EAAI0D,GAAG,8CAA8CtD,EAAG,IAAI,CAACI,YAAY,aAAaQ,GAAG,CAAC,MAAQ,SAASuC,GAAQ,OAAOvD,EAAI2P,aAAa,0BAA0B3P,EAAIY,MAAM,GAAIZ,EAAe,YAAEI,EAAG,MAAM,CAACI,YAAY,YAAY,CAACJ,EAAG,SAAS,CAACI,YAAY,YAAYQ,GAAG,CAAC,MAAQhB,EAAI8P,WAAW,CAAC1P,EAAG,IAAI,CAACI,YAAY,cAAcR,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,mCAAmC,SAAStD,EAAG,MAAM,CAACA,EAAG,MAAM,CAACI,YAAY,eAAeJ,EAAG,MAAM,CAACI,YAAY,kBAAkB,CAACJ,EAAG,MAAM,CAACI,YAAY,SAAS,CAACJ,EAAG,QAAQ,CAACJ,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,yCAAyC1D,EAAIS,GAAIT,EAAyB,uBAAE,SAASyP,GAAa,OAAOrP,EAAG,SAAS,CAACd,IAAImQ,EAAYjP,YAAY,YAAYwO,MAAM,CACrnEe,QAASN,IAAgBzP,EAAIgQ,WAAWR,qBACxCxO,GAAG,CAAC,MAAQ,SAASuC,GAAQ,OAAOvD,EAAIiQ,kBAAkBR,MAAgB,CAACzP,EAAIc,GAAG,IAAId,EAAIe,GAAGf,EAAI0D,GAAG,aAAe+L,IAAc,WAAU,GAAGrP,EAAG,MAAM,CAACI,YAAY,YAAY,CAACJ,EAAG,QAAQ,CAACJ,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,0CAA0CtD,EAAG,MAAM,CAACI,YAAY,kBAAkB,CAACJ,EAAG,QAAQ,CAAC8P,WAAW,CAAC,CAAC3R,KAAK,QAAQ4R,QAAQ,UAAUnR,MAAOgB,EAAIgQ,WAAmB,SAAE9G,WAAW,wBAAwB5I,MAAM,CAAC,YAAcN,EAAI0D,GAAG,yCAAyC0M,SAAS,CAAC,MAASpQ,EAAIgQ,WAAmB,UAAGhP,GAAG,CAAC,MAAQ,SAASuC,GAAWA,EAAO8M,OAAOC,WAAqBtQ,EAAIuQ,KAAKvQ,EAAIgQ,WAAY,WAAYzM,EAAO8M,OAAOrR,WAAYgB,EAAIgQ,WAAmB,SAAE5P,EAAG,IAAI,CAACI,YAAY,kBAAkBQ,GAAG,CAAC,MAAQ,SAASuC,GAAQ,OAAOvD,EAAIwQ,eAAe,gBAAgBxQ,EAAIY,SAASR,EAAG,MAAM,CAACI,YAAY,YAAY,CAACJ,EAAG,QAAQ,CAACJ,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,4CAA4CtD,EAAG,SAAS,CAAC8P,WAAW,CAAC,CAAC3R,KAAK,QAAQ4R,QAAQ,UAAUnR,MAAOgB,EAAIgQ,WAAwB,cAAE9G,WAAW,6BAA6B1I,YAAY,oBAAoBQ,GAAG,CAAC,OAAS,SAASuC,GAAQ,IAAIkN,EAAgBC,MAAM7T,UAAU+I,OAAO7I,KAAKwG,EAAO8M,OAAOM,SAAQ,SAASlS,GAAG,OAAOA,EAAEmS,YAAW/B,KAAI,SAASpQ,GAAG,IAAIoS,EAAM,WAAYpS,EAAIA,EAAEqS,OAASrS,EAAEO,MAAM,OAAO6R,KAAO7Q,EAAIuQ,KAAKvQ,EAAIgQ,WAAY,gBAAiBzM,EAAO8M,OAAOU,SAAWN,EAAgBA,EAAc,OAAO,CAACrQ,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,KAAK,CAACN,EAAIc,GAAG,WAAWd,EAAIS,GAAIT,EAAgB,cAAE,SAASiI,GAAS,OAAO7H,EAAG,SAAS,CAACd,IAAI2I,EAAQmI,SAAS,CAAC,MAAQnI,IAAU,CAACjI,EAAIc,GAAGd,EAAIe,GAAGkH,EAAQlI,MAAM,WAAU,KAAKK,EAAG,MAAM,CAACI,YAAY,SAAS,CAACJ,EAAG,QAAQ,CAACJ,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,0CAA0CtD,EAAG,eAAe,CAACE,MAAM,CAAC,QAAUN,EAAIgR,oBAAsBhR,EAAI8L,OAAS,GAAG,KAAO9L,EAAI0D,GAAG,wCAAwC,OAAS,GAAG,MAAQ,GAAG,UAAY,IAAI1C,GAAG,CAAC,SAAWhB,EAAIiR,wBAAwBnI,MAAM,CAAC9J,MAAOgB,EAAIgQ,WAAsB,YAAEjH,SAAS,SAAUC,GAAMhJ,EAAIuQ,KAAKvQ,EAAIgQ,WAAY,cAAehH,IAAME,WAAW,6BAA6B,GAAG9I,EAAG,MAAM,CAACI,YAAY,cAAc,CAACJ,EAAG,MAAM,CAACI,YAAY,SAAS,CAACJ,EAAG,MAAM,CAACI,YAAY,sBAAsB,CAACJ,EAAG,QAAQ,CAAC8P,WAAW,CAAC,CAAC3R,KAAK,QAAQ4R,QAAQ,UAAUnR,MAAOgB,EAAIgQ,WAA2B,iBAAE9G,WAAW,gCAAgC5I,MAAM,CAAC,KAAO,WAAW,KAAO,UAAU8P,SAAS,CAAC,QAAUM,MAAMQ,QAAQlR,EAAIgQ,WAAWmB,kBAAkBnR,EAAIoR,GAAGpR,EAAIgQ,WAAWmB,iBAAiB,OAAO,EAAGnR,EAAIgQ,WAA2B,kBAAGhP,GAAG,CAAC,OAAS,SAASuC,GAAQ,IAAI8N,EAAIrR,EAAIgQ,WAAWmB,iBAAiBG,EAAK/N,EAAO8M,OAAOkB,IAAID,EAAKE,QAAuB,GAAGd,MAAMQ,QAAQG,GAAK,CAAC,IAAIrI,EAAI,KAAKyI,EAAIzR,EAAIoR,GAAGC,EAAIrI,GAAQsI,EAAKE,QAASC,EAAI,GAAIzR,EAAIuQ,KAAKvQ,EAAIgQ,WAAY,mBAAoBqB,EAAIK,OAAO,CAAC1I,KAAayI,GAAK,GAAIzR,EAAIuQ,KAAKvQ,EAAIgQ,WAAY,mBAAoBqB,EAAItR,MAAM,EAAE0R,GAAKC,OAAOL,EAAItR,MAAM0R,EAAI,UAAYzR,EAAIuQ,KAAKvQ,EAAIgQ,WAAY,mBAAoBuB,OAAUnR,EAAG,QAAQ,CAACJ,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,uCAAuCtD,EAAG,MAAM,CAACI,YAAY,cAAc,CAACJ,EAAG,SAAS,CAACI,YAAY,YAAYQ,GAAG,CAAC,MAAQhB,EAAI2R,YAAY,CAAC3R,EAAIc,GAAG,IAAId,EAAIe,GAAGf,EAAI0D,GAAG,qCAAqC,OAAOtD,EAAG,SAAS,CAACI,YAAY,oBAAoBQ,GAAG,CAAC,MAAQhB,EAAI4R,eAAe,CAAC5R,EAAIc,GAAG,IAAId,EAAIe,GAAGf,EAAI0D,GAAG,oCAAoC,gBAC5wG,GAAkB,G,0BCHTmO,I,UAAe,CAC1B,aACA,aACA,YACA,aACA,WACA,iBACA,cACA,WACA,YACA,iBACA,mBACA,YACA,eACA,sBAGWC,GAAoB,CAC/BjR,MAAO,QACPsH,SAAU,WACV4J,MAAO,QACPC,eAAgB,kBAGLC,GAAe,CAC1BpG,SAAU,YACVgE,YAAa,QACbD,cAAe,UACfJ,oBAAqB,OACrB2B,iBAAkB,UCmGpB,IACEtM,MAAO,CAAC,SACR1I,KAFF,WAGI,MAAO,CACL+V,sBAAuBJ,GACvBD,aAAN,GACMM,aAAa,EACbnC,WAAY,GACZlE,YAAQZ,EACR8F,qBAAqB,IAGzBpI,QAZF,WAaI3I,KAAK+P,WAAa,OAAtB,OAAsB,CAAtB,sBACI/P,KAAKmS,gBAAgBnS,KAAK+P,aAE5B7K,QAAS,CACP2K,SAAU,WACR7P,KAAKkS,aAAc,EACnBlS,KAAKoS,cAEPC,UAAW,WACTrS,KAAKkS,aAAc,EACnBlS,KAAK+Q,qBAAsB,GAE7Bf,kBAAmB,SAAvB,GACMhQ,KAAK+P,WAAWR,oBAAsBC,GAExCC,0BAA2B,SAA/B,GACUzP,KAAKsS,OAAOvT,MAAMwQ,sBAAwBC,IAC5CxP,KAAK+P,WAAWR,oBAAsBC,EACtCxP,KAAK+P,WAAWnE,SAAW,GAC3B5L,KAAK2R,iBAGTpB,eAAgB,SAApB,GACMvQ,KAAK+P,WAAW1Q,GAAO,IAGzB8S,gBAAiB,SAArB,GACM,IAAN,KACMxV,OAAO+G,KAAKqI,GAAQ5H,SAAQ,SAAlC,GACQ,IAAR,EACA,uBACA,uBACA,KACQnC,EAAUgQ,GAAa3S,IAAQN,KAGjCuL,GAAatI,IAEf2P,aAAc,WACZ3R,KAAKmF,MAAM,QAAS,OAA1B,OAA0B,CAA1B,qBACMnF,KAAKmS,gBAAgBnS,KAAK+P,YAE1B/P,KAAKqS,aAEPX,UAAW,WACT1R,KAAK+P,WAAa,OAAxB,OAAwB,CAAxB,sBAEM/P,KAAKqS,aAEP3C,aAAc,SAAlB,GACM1P,KAAK+P,WAAa,OAAxB,OAAwB,CAAxB,kBACA,iBADA,sBAEA,+BAEM/P,KAAKmF,MAAM,QAAS,OAA1B,OAA0B,CAA1B,kBACA,mBADA,sBAEA,iCAGIiN,WAAY,WAAhB,wJAEA,kBACA,eACA,YACA,uDACA,OACA,QACA,WARA,qGAAgB,GAYZpB,uBAAwB,WACtBhR,KAAK+Q,qBAAsB,KCrN6T,MCQ1V,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,OAIa,M,QCjBTwB,GAA2B,CAAC,QAAS,WAAY,SAEjDC,GAAuB,kBAC3BD,GACEvN,KAAKC,MAAMsN,GAAyB7V,OAASsI,KAAKyN,YAGhDC,GAAwB,WAC5B,IAAMC,EAAgB7H,GAAY,QAElC,OAAI6H,EAAcjW,OACTiW,EAGFH,MAGII,GAAyB,WACpC,MAAO,CACLhH,SAAUd,GAAY,aACtB8E,YAAa9E,GAAY,SACzB6E,cAAe7E,GAAY,WAC3ByE,oBAAqBmD,KACrBxB,mBAAoBpG,GAAY,YCzBhC,GAAS,WAAa,IAAI/K,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACI,YAAY,eAAe,CAACJ,EAAG,KAAK,CAACJ,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,6BAA6BtD,EAAG,IAAI,CAACJ,EAAIc,GAAG,IAAId,EAAIe,GAAGf,EAAI0D,GAAG,oCAAoC,KAAKtD,EAAG,SAAS,CAACJ,EAAIc,GAAGd,EAAIe,GAAGf,EAAI8S,qBAAqB1S,EAAG,IAAI,CAACJ,EAAIc,GAAG,IAAId,EAAIe,GAAGf,EAAI0D,GAAG,oCAAoC,MAAMtD,EAAG,SAAS,CAACJ,EAAIc,GAAGd,EAAIe,GAAGf,EAAI+S,qBAAqB3S,EAAG,MAAM,CAACI,YAAY,eAAeJ,EAAG,KAAK,CAACJ,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,kCAAkC1D,EAAIS,GAAIT,EAAyB,uBAAE,SAASoL,GAAY,OAAOhL,EAAG,MAAM,CAACd,IAAI8L,EAAWhC,SAAS4J,YAAY,CAAC5S,EAAG,IAAI,CAACE,MAAM,CAAC,OAAS,SAAS,KAAON,EAAIoH,cAAcgE,EAAWhC,SAASjC,WAAW,CAACnH,EAAIc,GAAGd,EAAIe,GAAGqK,EAAWhC,SAAS6J,cAAc,KAAKjT,EAAIe,GAAGqK,EAAWhC,SAASpK,UAAoC,GAAzBoM,EAAWA,WAAiBhL,EAAG,IAAI,CAACI,YAAY,sBAAgD,GAA1B4K,EAAWA,WAAkBhL,EAAG,IAAI,CAACI,YAAY,kBAA4C,GAAzB4K,EAAWA,WAAiBhL,EAAG,IAAI,CAACI,YAAY,mBAAmBR,EAAIY,WAAU,IAC7hC,GAAkB,GC4BtB,I,UAAA,CACErC,KAAM,oBACNsG,MAAO,CACLiO,eAAgB,CACdxG,KAAM4G,OACN7D,UAAU,GAEZhF,gBAAiB,CACfiC,KAAMoE,MACNrB,UAAU,GAEZ/E,sBAAuB,CACrBgC,KAAM4G,OACN7D,UAAU,IAGdlT,KAAM,WACJ,MAAO,CACL6K,SAAU6B,EAAhB,cACMsK,sBAAuB,IAG3BhO,QAAS,CACPiC,cAAe,SAAnB,GACM,OAAOyB,EAAb,mBAGE7D,SAAU,CACRoO,sBAAuB,WACrB,IAAN,+BACM,OAAO/I,EAAgBgJ,WAEzBN,eAAgB,WACd,OAAO9S,KAAKkT,sBAAwBlT,KAAKqK,wBAG7C1B,QApCF,WAoCA,WACQ3I,KAAK+G,SAASrK,QAChB2W,GACN,iCACA,kBACQ,EAAR,kDAEA,mBAAQ,OAAR,4BCxE2V,MCQvV,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,OAIa,M,QC+Ff,IACE,IAAK,IACL,IAAK,IACL,IAAK,GACLC,IAAG,IACHC,IAAG,IACHC,IAAG,IACHC,IAAG,IACHC,IAAG,IACHC,IAAG,IACHC,IAAG,IACHC,IAAG,IACHC,IAAG,IACHC,IAAG,IACHC,IAAG,IACHC,IAAG,IACHC,IAAG,IACHC,IAAG,KAGL,eAEE,IADA,IAAF,yBACA,qFACIC,EAASA,EAAOC,QAAQ,IAAIC,OAAOnS,EAAQ,KAAMkS,GAGnD,OADAD,EAASA,EAAOC,QAAQ,SAAU,KAC3BD,GAGT,IACE9V,KAAM,eACNmH,WAAY,CACV8O,QAAJ,GACIC,kBAAJ,GACIC,eAAJ,GACIC,QAAJ,QACIC,eAAJ,IAEEzY,KAAM,WACJ,MAAO,CACL0Y,gBAAiB,KACjBC,eAAgB,GAChB3L,gBAAiB,KACjBiB,uBAAwB,EACxBC,gBAAiB,GACjBC,sBAAuB,EACvByK,eAAgB,IAAIC,IACpB/L,QAAS,OAAf,OAAe,CAAf,WAGEnE,MAAO,CACLmE,QAAS,CACPgM,QAAS,SAAf,KAEA,UACA,uCAGUhV,KAAKiV,eAAc,IAGvBC,MAAM,GAERL,eAAgB,SAApB,GAGA,8BACA,2BAEQ7U,KAAKkJ,gBAAkBlJ,KAAK6U,eAAe,GAE3C7U,KAAKkJ,gBAAkB,MAM/B,2BACA,eAEQlJ,KAAKiV,eAAc,KAIzB/P,QAAS,CACP+P,cAAe,WAAnB,qEACUE,IACFnV,KAAK6U,eAAiB,IAExB,IAAN,mDACA,KACMxB,GACN,UACA,EACA,iCACA,sBACA,6BACA,wCACA,2BACA,KACA,GAEA,kBAEQ,GADA,EAAR,oCACA,2BAAQ,CAcA,IAAR,KACQ,EAAR,oCACA,qCACY,EAAZ,QACY,EAAZ,qCAIA,4BACA,mCAEU,EAAV,QAGU,EAAV,eADA,EACA,aAEA,oDA7BA,+BAEc,EAAd,eADA,EACA,IAEA,0BACA,kBADA,CAEA,SA4BI+B,sBAvDJ,SAuDA,KACMpV,KAAKoK,gBAAgBpN,KAAK,CACxBmM,SAAR,EACQgC,WAAR,IAGUnL,KAAKoK,gBAAgB1N,OAAS,IAChCsD,KAAKoK,gBAAgBjN,SAGzB6M,SAAU,SAAd,IAC0B,IAAhBmB,IACFkI,GAAR,4CACQrT,KAAKoV,sBAAsBpV,KAAKkJ,gBAAiBiC,GACjDnL,KAAKmK,wBAA0B,EAC/BnK,KAAKqK,uBAAyB,GAEhCrK,KAAKkJ,gBAAkB,KACvBlJ,KAAK6U,eAAiB,OAA5B,QAA4B,CAA5B,+BAEIQ,6BAA8B,SAAlC,GACMrV,KAAKmK,uBAAyBmL,IAGlCvQ,SAAU,CACRuE,wBAAyB,WACvB,OAAItJ,KAAKkJ,gBAAgBuC,iBAChBzL,KAAKkJ,gBAAgBuC,iBAEvB,iEAETxB,QAAS,WACP,OAAQjK,KAAKuV,qBAA+C,MAAxBvV,KAAKkJ,iBAE3CqM,oBAAqB,WACnB,OACN,gCACA,4BAGIrL,uBAAwB,WACtB,OAAIlK,KAAKkJ,iBAAmBlJ,KAAKkJ,kBAAoB/C,EAC5CnG,KAAKkJ,gBAAgBhC,QAErB,MAGXkC,qBAAsB,WACpB,GACN,6BACA,0BACA,+BACA,CACQ,IAAR,sBAMQ,OALApH,EAAUwT,OAAO,OAAQxV,KAAKgJ,QAAQuG,qBACtCvN,EAAUwT,OAClB,YACA,oCAEe,cAAf,qBAEM,MAAO,KAGX7M,QA9KF,WA+KI,IAAJ,OACI3I,KAAKiV,gBACLrV,OAAO6V,iBAAiB,SAAS,SAArC,GACmC,QAAzBC,EAAMtF,OAAOuF,WACG,MAAdD,EAAMrW,KAAauW,EAAG5L,UAAU,GAClB,MAAd0L,EAAMrW,KAAauW,EAAG5L,SAAS,GACjB,MAAd0L,EAAMrW,KAAauW,EAAG5L,SAAS,GACjB,MAAd0L,EAAMrW,KAAauW,EAAGC,oBCrUoT,MCQlV,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,OAIa,M,QCnBX,GAAS,WAAa,IAAI9V,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACI,YAAY,qBAAqB,CAACJ,EAAG,MAAM,CAACI,YAAY,6BAA6B,CAAER,EAAiB,cAAEI,EAAG,MAAM,CAAEJ,EAAW,QAAEI,EAAG,IAAI,CAACJ,EAAIc,GAAG,iBAAiBV,EAAG,IAAI,CAACJ,EAAIc,GAAG,2BAA2BV,EAAG,MAAM,CAACI,YAAY,kBAAkB,CAACJ,EAAG,KAAK,CAACJ,EAAIc,GAAGd,EAAIe,GAAGf,EAAI2N,gBAAgBvN,EAAG,IAAI,CAACI,YAAY,oBAAoBF,MAAM,CAAC,OAAS,SAAS,KAAON,EAAI4N,aAAa,CAAC5N,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,sBAAsBtD,EAAG,IAAI,CAACI,YAAY,YAAYF,MAAM,CAAC,OAAS,SAAS,KAAON,EAAI6N,iBAAiB,CAAC7N,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,sBAAsBtD,EAAG,MAAM,CAACI,YAAY,eAAeJ,EAAG,SAAS,CAACkJ,YAAY,CAAC,OAAS,SAAShJ,MAAM,CAAC,QAAUN,EAAIgO,mBAAmB,CAAC5N,EAAG,MAAM,CAAC4O,MAAM,CAAChP,EAAI+V,oBAAoBzM,YAAY,CAAC,aAAa,QAAQ,YAAY,SAAShJ,MAAM,CAAC,IAAMN,EAAIgW,cAAc,GAAG,6BAA6B,KAAK5V,EAAG,MAAM,CAACI,YAAY,4BAA4B,CAACJ,EAAG,YAAY,CAACE,MAAM,CAAC,OAAS,GAAG,WAAa,KAAK,CAACF,EAAG,mBAAmB,CAACA,EAAG,yBAAyBA,EAAG,wBAAwB,CAACJ,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,6BAA6BtD,EAAG,wBAAwB,CAACJ,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,kCAAkC,GAAG1D,EAAIS,GAAIT,EAAsB,oBAAE,SAASiW,GAAgB,OAAO7V,EAAG,gBAAgB,CAACd,IAAI2W,EAAe7H,IAAI,CAAChO,EAAG,iBAAiB,CAACJ,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAI,wBAA2BuS,EAAiB,QAAQ7V,EAAG,iBAAiB,CAACkJ,YAAY,CAAC,QAAU,SAAS,CAAClJ,EAAG,YAAY,CAACkJ,YAAY,CAAC,YAAY,KAAKhJ,MAAM,CAAC,UAAY2V,EAAeC,QAAQ,MAAQlW,EAAImW,UAAUnW,EAAIoW,mBAAmBH,EAAe7H,IAAI,UAAUtF,MAAM,CAAC9J,MAAOgB,EAAIoW,mBAAmBH,EAAe7H,IAAI,QAASrF,SAAS,SAAUC,GAAMhJ,EAAIuQ,KAAKvQ,EAAIoW,mBAAmBH,EAAe7H,IAAK,OAAQpF,IAAME,WAAW,mDAAoDlJ,EAAIqW,kBAAkBJ,EAAe7H,IAAIzR,OAAS,EAAGyD,EAAG,eAAe,CAACI,YAAY,OAAO8I,YAAY,CAAC,YAAY,QAAQhJ,MAAM,CAAC,UAAY2V,EAAeC,QAAQ,UAAY,GAAG,YAAclW,EAAI0D,GAAG,wBAAwB,QAAU1D,EAAIqW,kBAAkBJ,EAAe7H,KAAKtF,MAAM,CAAC9J,MAAOgB,EAAIoW,mBAAmBH,EAAe7H,IAAI,QAASrF,SAAS,SAAUC,GAAMhJ,EAAIuQ,KAAKvQ,EAAIoW,mBAAmBH,EAAe7H,IAAK,OAAQpF,IAAME,WAAW,mDAAmD9I,EAAG,OAAO,CAACI,YAAY,QAAQ,CAACR,EAAIc,GAAGd,EAAIe,GAAGf,EAAIqW,kBAAkBJ,EAAe7H,IAAI,QAAQ,GAAGhO,EAAG,iBAAiB,CAACA,EAAG,eAAe,CAACE,MAAM,CAAC,KAAO,SAAS,MAAQ2V,EAAeC,QAClgFlW,EAAI0D,GAAG,qBACP1D,EAAI0D,GAAG,qBAAqBoF,MAAM,CAAC9J,MAAOgB,EAAIoW,mBAAmBH,EAAe7H,IAAI,WAAYrF,SAAS,SAAUC,GAAMhJ,EAAIuQ,KAAKvQ,EAAIoW,mBAAmBH,EAAe7H,IAAK,UAAWpF,IAAME,WAAW,uDAAuD,IAAI,OAAM,GAAG9I,EAAG,MAAM,CAACA,EAAG,SAAS,CAACI,YAAY,yBAAyBF,MAAM,CAAC,eAAe,eAAeU,GAAG,CAAC,MAAQ,SAASuC,GAAQ,OAAOvD,EAAIsW,mBAAmB,CAACtW,EAAIc,GAAG,IAAId,EAAIe,GAAGf,EAAI0D,GAAG,qBAAqB,OAAOtD,EAAG,SAAS,CAACI,YAAY,qBAAqBF,MAAM,CAAC,eAAe,eAAeU,GAAG,CAAC,MAAQ,SAASuC,GAAQ,OAAOvD,EAAIuW,iBAAiB,CAACvW,EAAIc,GAAG,IAAId,EAAIe,GAAGf,EAAI0D,GAAG,mBAAmB,OAAOtD,EAAG,SAAS,CAACI,YAAY,2BAA2BF,MAAM,CAAC,eAAe,eAAeU,GAAG,CAAC,MAAQ,SAASuC,GAAQ,OAAOvD,EAAIwW,cAAc,CAACxW,EAAIc,GAAG,IAAId,EAAIe,GAAGf,EAAI0D,GAAG,uBAAuB,UAAU,MACv3B,GAAkB,G,mCC6HtB,6KACA,8BADA,SAIA,cACA,EADA,yEACA,EADA,4DAJA,uBAGA,EAHA,EAGA,cAHA,kBAOA,GAPA,iGAUA,IACEnF,KAAM,gBACNmH,WAAY,GACZvJ,KAAM,WACJ,MAAO,CACLsa,cAAe,GACfzI,iBAAkB,CAChBU,QAAS,CACPC,WAAY,EACZC,YAAa,IAGjB1E,SAAS,EACT8L,cAAe,GACfI,mBAAoB,KAGxBpR,SAAU,CACR2I,YAAa,WACX,OACN,+BACA,0CAEe,GAEF1N,KAAK+V,cAAc,GAAGU,cAE/B9I,WAAY,WACV,OACN,+BACA,kCAEe,GAEF/E,EAAb,2CAEIgF,eAAgB,WACd,OACN,+BACA,kCAEe,GAEFhF,EAAb,+CAEI8N,cAAe,WACb,OAAqC,IAA9B1W,KAAK+V,cAAcrZ,SAG9BwI,QAAS,CACPgR,UADJ,SACA,GACM,OAAQnX,EAAMqP,MAAM,kCAEtBuI,mBAJJ,WAKM3W,KAAKwW,cAAgB,IAEvBI,YAAa,WAAjB,0JACA,gBADA,SAEA,OAFA,OAEA,EAFA,OAGA,gDACA,gBAJA,qGAAiB,GAMbN,YAbJ,WAcMtW,KAAK+V,cAAc5Y,SAErBkZ,cAhBJ,WAiBM,IAAN,+CACA,IACA,WACA,MACA,cAEM,EAAN,iBACA,EADA,mCAEA,mFAKIE,SA9BJ,WA8BA,WACA,+CACA,YAAQ,OAAR,mCAEA,uCACA,QACA,YAAQ,OACR,yBACA,iCACA,8BACA,2CACA,yCAEA,iBAAQ,MAAR,CACUjY,KAAMuY,EACN9X,MAAO,GAAjB,8CACA,gCACU+X,SAAU,EAApB,2BACUC,KAAM,EAAhB,+BAGM,EAAN,iBACA,EADA,yBAEA,8BACA,EACA,iBAAQ,MAAR,gDACA,UAHA,OAGA,EACA,iBAAQ,OAAR,2DACA,UALA,OAKA,mBAAQ,MAAR,gCALA,gBAMA,kCAKIC,iBAhEJ,WAmEM,IAFA,IAAN,KAEA,iDACQ9a,EAAK2a,GAAe,CAClB1I,GAAI0I,EACJ3a,KAAM,GACN6a,KAAM,GAAhB,GACUd,SAAS,GAGbjW,KAAKmW,mBAAqBja,GAE5Bka,kBA7EJ,SA6EA,GACM,OAAQS,GACN,IAAK,wBACH,MAAO,CAAC,QACV,IAAK,sBACH,MAAO,CAAC,MACV,QACE,MAAO,CACjB,CAAY,KAAZ,IAAY,MAAZ,KACA,CAAY,KAAZ,KAAY,MAAZ,UAKEhS,MAAO,CACLkR,cAAe,SAAnB,KACUkB,EAAiBva,QAAU,IAAMsD,KAAKiK,SACxCjK,KAAK4W,eAGb,MACA,MACA,uBAGQ5W,KAAKgX,qBAIXrO,QAAS,WACP3I,KAAK4W,cAEL,IAAJ,OACIhX,OAAO6V,iBAAiB,SAAS,SAArC,GACmC,QAAzBC,EAAMtF,OAAOuF,WACG,MAAdD,EAAMrW,KAAauW,EAAGU,cACR,MAAdZ,EAAMrW,KAAauW,EAAGW,iBC5SqT,MCQnV,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,OAIa,M,QCnBX,GAAS,WAAa,IAAIxW,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACI,YAAY,qBAAqB,CAACJ,EAAG,MAAM,CAACI,YAAY,8BAA8B,CAACJ,EAAG,MAAM,CAACI,YAAY,WAAW,CAACJ,EAAG,MAAM,CAACI,YAAY,UAAU,CAACJ,EAAG,SAAS,CAAC8P,WAAW,CAAC,CAAC3R,KAAK,QAAQ4R,QAAQ,UAAUnR,MAAOgB,EAAW,QAAEkJ,WAAW,YAAYlI,GAAG,CAAC,OAAS,SAASuC,GAAQ,IAAIkN,EAAgBC,MAAM7T,UAAU+I,OAAO7I,KAAKwG,EAAO8M,OAAOM,SAAQ,SAASlS,GAAG,OAAOA,EAAEmS,YAAW/B,KAAI,SAASpQ,GAAG,IAAIoS,EAAM,WAAYpS,EAAIA,EAAEqS,OAASrS,EAAEO,MAAM,OAAO6R,KAAO7Q,EAAIiI,QAAQ1E,EAAO8M,OAAOU,SAAWN,EAAgBA,EAAc,MAAM,CAACrQ,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,KAAK,CAACN,EAAIc,GAAG,aAAaV,EAAG,SAAS,CAACJ,EAAIc,GAAG,eAAeV,EAAG,SAAS,CAACJ,EAAIc,GAAG,aAAaV,EAAG,SAAS,CAACJ,EAAIc,GAAG,aAAaV,EAAG,SAAS,CAACJ,EAAIc,GAAG,aAAaV,EAAG,SAAS,CAACJ,EAAIc,GAAG,YAAYV,EAAG,SAAS,CAACJ,EAAIc,GAAG,aAAaV,EAAG,SAAS,CAACJ,EAAIc,GAAG,YAAYV,EAAG,SAAS,CAACJ,EAAIc,GAAG,WAAWV,EAAG,SAAS,CAACJ,EAAIc,GAAG,YAAYV,EAAG,SAAS,CAACJ,EAAIc,GAAG,iBAAiBV,EAAG,SAAS,CAACJ,EAAIc,GAAG,oBAAoBV,EAAG,SAAS,CAACJ,EAAIc,GAAG,qBAAqBV,EAAG,QAAQ,CAAC8P,WAAW,CAAC,CAAC3R,KAAK,QAAQ4R,QAAQ,UAAUnR,MAAOgB,EAAe,YAAEkJ,WAAW,gBAAgB5I,MAAM,CAAC,YAAc,eAAe8P,SAAS,CAAC,MAASpQ,EAAe,aAAGgB,GAAG,CAAC,MAAQ,SAASuC,GAAWA,EAAO8M,OAAOC,YAAqBtQ,EAAImX,YAAY5T,EAAO8M,OAAOrR,aAAYoB,EAAG,MAAM,CAACA,EAAG,SAAS,CAACI,YAAY,YAAYwO,MAAM,CAAEoI,SAA2B,eAAjBpX,EAAImI,UAA4BnH,GAAG,CAAC,MAAQ,SAASuC,GAAQ,OAAOvD,EAAIqX,YAAY,iBAAiB,CAACrX,EAAIc,GAAG,kBAAkBV,EAAG,SAAS,CAACI,YAAY,YAAYwO,MAAM,CAAEoI,SAA2B,WAAjBpX,EAAImI,UAAwBnH,GAAG,CAAC,MAAQ,SAASuC,GAAQ,OAAOvD,EAAIqX,YAAY,aAAa,CAACrX,EAAIc,GAAG,gBAAgBV,EAAG,SAAS,CAACY,GAAG,CAAC,MAAQhB,EAAIoC,SAAS,CAACpC,EAAIc,GAAG,IAAId,EAAIe,GAAGf,EAAI0D,GAAG,qBAAqB,OAAOtD,EAAG,SAAS,CAACY,GAAG,CAAC,MAAQhB,EAAIsX,sBAAsB,CAACtX,EAAIc,GAAG,IAAId,EAAIe,GAAGf,EAAI0D,GAAG,2BAA2B,SAAU1D,EAAiB,cAAEI,EAAG,MAAM,CAAEJ,EAAW,QAAEI,EAAG,IAAI,CAACJ,EAAIc,GAAG,iBAAiBV,EAAG,IAAI,CAACJ,EAAIc,GAAG,2BAA2B,CAACV,EAAG,KAAK,CAACJ,EAAIc,GAAGd,EAAIe,GAAGf,EAAI2N,gBAAgBvN,EAAG,MAAM,CAACA,EAAG,IAAI,CAACI,YAAY,oBAAoBF,MAAM,CAAC,OAAS,SAAS,KAAON,EAAI4N,aAAa,CAAC5N,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,sBAAsBtD,EAAG,IAAI,CAACI,YAAY,YAAYF,MAAM,CAAC,OAAS,SAAS,KAAON,EAAI6N,iBAAiB,CAAC7N,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,wBAAwBtD,EAAG,MAAM,CAACI,YAAY,eAA4B,GAAZR,EAAIuX,KAAW,CAACnX,EAAG,UAAU,CAACsJ,IAAI,UAAUlJ,YAAY,eAAeF,MAAM,CAAC,IAAMN,EAAIwX,SAAS,QAAS,EAAM,kBAAmB,EAAM,cAAe,GAAOxW,GAAG,CAAC,OAAShB,EAAIyX,wBAAwBrX,EAAG,MAAM,CAACkJ,YAAY,CAAC,aAAa,WAAW,CAAClJ,EAAG,SAAS,CAACI,YAAY,iBAAiBQ,GAAG,CAAC,MAAQhB,EAAI2O,aAAa,CAACvO,EAAG,IAAI,CAACI,YAAY,gBAAgBJ,EAAG,SAAS,CAACI,YAAY,iBAAiBQ,GAAG,CAAC,MAAQhB,EAAI4O,cAAc,CAACxO,EAAG,IAAI,CAACI,YAAY,mBAAmB,CAACJ,EAAG,MAAM,CAACsX,MAAQ,6DAA+D1X,EAAIgO,iBAAiB2J,YACh7F3X,EAAIgO,iBAAiB2J,YAAY9N,OACjC7J,EAAIgO,iBAAiB2J,YAAY/N,MACjC,GAAK,KAAO,CAACxJ,EAAG,mBAAmB,CAACE,MAAM,CAAC,OAAON,EAAIgO,iBAAiBhK,MAAM,MAAQhE,EAAIgO,iBAAiBhK,MAAM,YAAchE,EAAIgO,iBAAiB2J,YAAY,eAAiB3X,EAAI4X,eAAe,oBAAsB5X,EAAI6X,oBAAoB,UAAY7X,EAAI8X,UAAU,eAAiB9X,EAAI+X,gBAAgBC,MAAM,mBAAqBhY,EAAIiY,mBAAmB,gBAAkBjY,EAAIkY,oBAAoBlX,GAAG,CAAC,sBAAwBhB,EAAImY,wBAAwB,sBAAwBnY,EAAIoY,wBAAwB,aAAepY,EAAIqY,4BAA4B,KAAKjY,EAAG,MAAM,CAACI,YAAY,kCAAkC,CAACJ,EAAG,iBAAiB,CAACE,MAAM,CAAC,cAAc,SAAS,CAACF,EAAG,WAAW,CAACE,MAAM,CAAC,OAAqB,GAAZN,EAAIuX,KAAU,MAAQvX,EAAI0D,GAAG,wBAAwBtD,EAAG,WAAW,CAACE,MAAM,CAAC,OAAqB,GAAZN,EAAIuX,KAAU,MAAQvX,EAAI0D,GAAG,wBAAwBtD,EAAG,WAAW,CAACE,MAAM,CAAC,OAAqB,GAAZN,EAAIuX,MAAyB,GAAZvX,EAAIuX,KAAU,MAAQvX,EAAI0D,GAAG,wBAAwBtD,EAAG,WAAW,CAACE,MAAM,CAAC,OAAqB,GAAZN,EAAIuX,KAAU,MAAQvX,EAAI0D,GAAG,yBAAyB,GAAgB,GAAZ1D,EAAIuX,KAAW,CAACnX,EAAG,MAAM,CAACI,YAAY,SAAS,CAACJ,EAAG,OAAO,CAACJ,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,uBAAuBtD,EAAG,YAAY,CAAC8P,WAAW,CAAC,CAAC3R,KAAK,QAAQ4R,QAAQ,YAAY7G,YAAY,CAAC,MAAQ,QAAQhJ,MAAM,CAAC,MAAQN,EAAImW,UAAUnW,EAAIsY,UAAU,aAAa,UAAY,WAAWxP,MAAM,CAAC9J,MAAOgB,EAAIsY,UAAU,YAAavP,SAAS,SAAUC,GAAMhJ,EAAIuQ,KAAKvQ,EAAIsY,UAAW,WAAYtP,IAAME,WAAW,2BAA2B9I,EAAG,OAAO,CAACkJ,YAAY,CAAC,YAAY,SAAS,eAAe,WAAW,CAACtJ,EAAIc,GAAG,UAAUV,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQN,EAAI0D,GAAG,0BAA0BoF,MAAM,CAAC9J,MAAOgB,EAAIsY,UAAU,iBAAkBvP,SAAS,SAAUC,GAAMhJ,EAAIuQ,KAAKvQ,EAAIsY,UAAW,gBAAiBtP,IAAME,WAAW,iCAAiC,IAAIlJ,EAAIY,KAAK,CAACR,EAAG,MAAM,CAACI,YAAY,SAAS,CAAc,GAAZR,EAAIuX,KAAWnX,EAAG,IAAI,CAACJ,EAAIc,GAAG,IAAId,EAAIe,GAAGf,EAAI0D,GAAG,wCAAwC,OAAO1D,EAAIY,KAAkB,GAAZZ,EAAIuX,KAAWnX,EAAG,IAAI,CAACJ,EAAIc,GAAG,IAAId,EAAIe,GAAGf,EAAI0D,GAAG,mDAAmD,OAAO1D,EAAIY,KAAkB,GAAZZ,EAAIuX,KAAWnX,EAAG,IAAI,CAACJ,EAAIc,GAAG,IAAId,EAAIe,GAAGf,EAAI0D,GAAG,mDAAmD,OAAO1D,EAAIY,KAAkB,GAAZZ,EAAIuX,KAAWnX,EAAG,IAAI,CAACJ,EAAIc,GAAG,IAAId,EAAIe,GAAGf,EAAI0D,GAAG,uCAAuC,KAAKtD,EAAG,OAAO,CAACI,YAAY,iBAAiB,CAACR,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAI,wBAA2B1D,EAAI+X,gBAAkB,UAAU/X,EAAIY,QAAQR,EAAG,MAAM,CAACI,YAAY,SAAS,CAACJ,EAAG,SAAS,CAACI,YAAY,qBAAqBwO,MAAM,CAAEuJ,SAAuB,IAAbvY,EAAIuX,MAAavW,GAAG,CAAC,MAAQ,SAASuC,GAAQ,OAAOvD,EAAIwY,cAAc,CAACxY,EAAIc,GAAG,IAAId,EAAIe,GAAGf,EAAI0D,GAAG,mBAAmB,OAAOtD,EAAG,SAAS,CAACI,YAAY,qBAAqBwO,MAAM,CAAEuJ,UAAWvY,EAAIyY,WAAYzX,GAAG,CAAC,MAAQ,SAASuC,GAAQ,OAAOvD,EAAI0Y,cAAc,CAAC1Y,EAAIc,GAAG,IAAId,EAAIe,GAAGf,EAAI0D,GAAG,mBAAmB,SAAStD,EAAG,MAAM,CAACI,YAAY,SAAS,CAACJ,EAAG,SAAS,CAACI,YAAY,8BAA8BQ,GAAG,CAAC,MAAQ,SAASuC,GAAQ,OAAOvD,EAAI2Y,qBAAqB,CAAC3Y,EAAIc,GAAG,IAAId,EAAIe,GAAGf,EAAI0D,GAAG,+BAA+B,OAAOtD,EAAG,SAAS,CAACI,YAAY,qBAAqBQ,GAAG,CAAC,MAAQ,SAASuC,GAAQ,OAAOvD,EAAIuW,iBAAiB,CAACvW,EAAIc,GAAG,IAAId,EAAIe,GAAGf,EAAI0D,GAAG,mBAAmB,OAAOtD,EAAG,SAAS,CAACI,YAAY,8BAA8BwO,MAAM,CAAEuJ,UAAWvY,EAAI4Y,aAAc5X,GAAG,CAAC,MAAQ,SAASuC,GAAQ,OAAOvD,EAAIwW,cAAc,CAACxW,EAAIc,GAAG,IAAId,EAAIe,GAAGf,EAAI0D,GAAG,uBAAuB,UAAU,IAAI,GAAGtD,EAAG,MAAM,CAACI,YAAY,8BAA8B,CAACJ,EAAG,MAAM,CAACI,YAAY,SAAS,CAACJ,EAAG,iBAAiB,CAACE,MAAM,CAAC,qBAAuBN,EAAI6Y,qBAAqB,WAA0B,IAAb7Y,EAAIuX,MAAYvW,GAAG,CAAC,cAAgBhB,EAAI8Y,wBAAwBhQ,MAAM,CAAC9J,MAAOgB,EAAsB,mBAAE+I,SAAS,SAAUC,GAAMhJ,EAAIoW,mBAAmBpN,GAAKE,WAAW,yBAAyB,KAAK9I,EAAG,YAAY,CAAC0I,MAAM,CAAC9J,MAAOgB,EAAiB,cAAE+I,SAAS,SAAUC,GAAMhJ,EAAI+Y,cAAc/P,GAAKE,WAAW,kBAAkB,CAAC9I,EAAG,mBAAmB,CAACJ,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,+BAA+BtD,EAAG,oBAAoB,CAACE,MAAM,CAAC,UAAY,KAAK,CAACF,EAAG,QAAQ,CAACI,YAAY,mBAAmB,CAACJ,EAAG,QAAQ,CAACA,EAAG,KAAK,CAACA,EAAG,KAAK,CAACJ,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,gCAAgCtD,EAAG,KAAK,CAACJ,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,sCAAsCtD,EAAG,MAAMA,EAAG,UAAUA,EAAG,QAAQJ,EAAIS,GAAIT,EAAW,SAAE,SAASgZ,GAAS,OAAO5Y,EAAG,KAAK,CAACd,IAAI0Z,EAAQ5Q,KAAK4G,MAAM,CAChsIoI,SAA6B,cAAnB4B,EAAQC,OAClBC,SACqB,SAAnBF,EAAQC,QAAwC,gBAAnBD,EAAQC,SACtC,CAAC7Y,EAAG,KAAK,CAACJ,EAAIc,GAAG,IAAId,EAAIe,GAAGf,EAAI0D,GAAI,qBAAwBsV,EAAc,SAAK,OAAO5Y,EAAG,KAAK,CAACJ,EAAIc,GAAGd,EAAIe,GAAGiY,EAAQza,SAAS6B,EAAG,KAAK,CAACA,EAAG,IAAI,CAACE,MAAM,CAAC,OAAS,SAAS,KAAON,EAAIoH,cAAc4R,EAAQ5Q,QAAQ,CAACpI,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,gCAAgCtD,EAAG,KAAK,CAACA,EAAG,IAAI,CAACE,MAAM,CAAC,OAAS,SAAS,KAAON,EAAIqH,kBAAkB2R,EAAQ5Q,QAAQ,CAACpI,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,qCAAoC,OAAOtD,EAAG,oBAAoB,CAACA,EAAG,aAAa,CAACE,MAAM,CAAC,SAAW,IAAIgD,SAAS,CAAC,MAAQ,SAASC,GAAQ,OAAOvD,EAAIsX,oBAAoBha,MAAM,KAAMmG,cAAc,CAACzD,EAAIc,GAAG,IAAId,EAAIe,GAAGf,EAAI0D,GAAG,4BAA4B,QAAQ,IAAI,IAAI,IAC3oB,GAAkB,GCRhBkD,I,4DAAQuS,EAAQ,SAChBC,GAAuBD,EAAQ,QACrC,GAA8BA,EAAQ,QAA9BE,GAAR,GAAQA,SAAUC,GAAlB,GAAkBA,QAEZpT,GAAgB,mDAChBqT,GAAwB,IAExBC,GAAgB,SAACC,EAAMC,GAG3B,IAAMhQ,EAAMzE,KAAKK,IAAImU,EAAKE,KAAOF,EAAKG,KAAMF,EAAKC,KAAOD,EAAKE,MACvDC,EACJ5U,KAAKK,IAAImU,EAAKE,KAAMD,EAAKC,MAAQ1U,KAAKI,IAAIoU,EAAKG,KAAMF,EAAKE,MAC5D,OAAOC,EAAcnQ,EAAM6P,IAgBvBO,GAAgB,SAAhBA,EAAiBC,EAAM7Q,EAAY8Q,GAEvC,GAA0B,IAAtB9Q,EAAWvM,OACb,OAAO,KAET,IAAMsd,EAAO/Q,EAAW,QACLgC,IAAf6O,EAAKE,KACPF,EAAKE,GAAQ,IAGW,IAAtB/Q,EAAWvM,OACbod,EAAKE,GAAM,YAAcD,EAEzBF,EAAcC,EAAKE,GAAO/Q,EAAWnJ,MAAM,GAAIia,IAI7CE,GAAmB,SAAnBA,EAAoB3X,GAKxB,IAAK3F,OAAO+G,KAAKyV,IAAsBe,SAAS5X,GAE9C,OAAO2X,EAAiB,MAE1B,IAAME,EAAkB,GAaxB,OAXAxd,OAAO+G,KAAKyV,GAAqB7W,IAAO6B,SAAQ,SAACiW,GAC/CjB,GAAqB7W,GAAM8X,GAAUjW,SAAQ,SAAC2V,GAC5C,IAAMO,EAAYP,EACfQ,UAAU,OACVjG,QAAQ,mBAAoB,IAC5BkG,cAEGC,EAAWH,EAAU3X,MAAM,KACjCmX,GAAcM,EAAiBK,EAAUJ,SAGtCD,GAGHM,GAAc,SAACC,EAAD,GAAqC,IAA7BC,EAA6B,EAA7BA,KAAMhB,EAAuB,EAAvBA,KAAMiB,EAAiB,EAAjBA,KAAMlB,EAAW,EAAXA,KAGxCmB,EAAY,EAMhB,GALAH,EAAI,gBAAgB,YAAYvW,SAAQ,YAAc,IAAX2W,EAAW,EAAXA,EAAGC,EAAQ,EAARA,OAClC9P,IAAN6P,QAAyB7P,IAAN8P,IACrBF,GAAa,MAGbA,EAAY,EAEd,OAAO,EAET,IAAIG,GAAiB,EAMrB,OALAN,EAAI,gBAAgB,YAAYvW,SAAQ,YAAc,IAAX2W,EAAW,EAAXA,EAAGC,EAAQ,EAARA,EACxCJ,GAAQG,GAAKF,GAAQE,GAAKnB,GAAQoB,GAAKrB,GAAQqB,IACjDC,GAAiB,MAGdA,GAGHC,GAAe,SAACP,GAGpB,IAAMQ,EAAgB,CACpBP,MAAO,EACPhB,MAAO,EACPiB,MAAO,EACPlB,MAAO,GAkBT,OAfAgB,EAAI,gBAAgB,YAAYvW,SAAQ,YAAc,IAAX2W,EAAW,EAAXA,EAAGC,EAAQ,EAARA,EACxCD,GAAKA,EAAII,EAAcN,OACzBM,EAAcN,KAAOE,GAEnBC,GAAKA,EAAIG,EAAcxB,OACzBwB,EAAcxB,KAAOqB,GAEnBD,IAAMA,EAAII,EAAcP,OAAgC,IAAxBO,EAAcP,QAChDO,EAAcP,KAAOG,GAEnBC,IAAMA,EAAIG,EAAcvB,OAAgC,IAAxBuB,EAAcvB,QAChDuB,EAAcvB,KAAOoB,MAIzB,iCAAYL,GAAQQ,IAGhBC,GAAgB,SAACjY,GAGrB,IAAMkY,EAAYlY,EACfoX,UAAU,OACVjG,QAAQ,mBAAoB,IAC5BkG,cACAlG,QAAQ,MAAO,KACfA,QAAQ,oBAAqB,IAE1BgH,EAAQ,gBACTD,EAAUE,SACX,yDAGD1M,KAAI,SAACkM,GAAD,OAAOA,EAAE,MACbnV,QAAO,SAACmV,GAAD,MAAa,MAANA,KACXS,EAAa,gBACdH,EAAUE,SACX,0DAGD1M,KAAI,SAACkM,GAAD,OAAOA,EAAE,MACbnV,QAAO,SAACmV,GAAD,MAAa,OAANA,KACXU,EAAM,gBACPJ,EAAUE,SACX,2DAGD1M,KAAI,SAACkM,GAAD,OAAOA,EAAE,MACbnV,QAAO,SAACmV,GAAD,MAAa,QAANA,KACXW,EAAW,gBACZL,EAAUE,SACX,yDAGD1M,KAAI,SAACkM,GAAD,OAAOA,EAAE,MACbnV,QAAO,SAACmV,GAAD,MAAa,MAANA,KACXY,EAAK,gBAAIN,EAAUE,SAAS,sCAC/B1M,KAAI,SAACkM,GAAD,OAAOA,EAAE,MACbnV,QAAO,SAACmV,GAAD,MAAa,OAANA,KACXa,EAAO,gBAAIP,EAAUE,SAAS,wCACjC1M,KAAI,SAACkM,GAAD,OAAOA,EAAE,MACbnV,QAAO,SAACmV,GAAD,MAAa,SAANA,KAQXc,EAAM,gBACPR,EAAUE,SACX,wDAGD1M,KAAI,SAACkM,GAAD,OAAOA,EAAE,MACbnV,QAAO,SAACmV,GAAD,OAAQ,CAAC,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAAKZ,SAASY,MACxE,MAAO,CACLO,QACAE,aACAC,MACAC,WACAC,KACAC,OACAC,QAKJ,SAASC,GAAkBC,EAAeC,EAAWzZ,GAOnD,IAAM6X,EAAkBF,GAAiB3X,GACnCoC,EAAM,GAENsX,EAAY,GAyDlB,OAvDArf,OAAO+G,KAAKqY,GAAW5X,SAAQ,SAAC8X,GAC9B,IAAMzf,EAAI0f,SAASD,GACnB,IAAKD,EAAU9B,SAAS1d,GAAI,CAC1B,IAAM2f,EAAkB,GAClBpE,EAAQ,CAACvb,GACX4f,EAAcjC,EAEdzc,EAAIlB,EACR,WAAuByO,IAAhBmR,GAAmC,OAAN1e,EAAY,CAC9C,IAAIwF,EAAO4Y,EAAcpe,GAAG2e,YAC5BnZ,EAAOA,EACJoX,UAAU,OACVjG,QAAQ,mBAAoB,IAC5BkG,cACAlG,QAAQ,aAAc,SAEDpJ,IAAtBmR,EAAYlZ,SACsB+H,IAAlCmR,EAAYlZ,GAAM,cAGlBiZ,EAAgB9c,IAAM+c,EAAYlZ,GAAM,YACxCiZ,EAAgBpE,MAAhB,UAA4BA,SAEJ9M,IAAtBmR,EAAYlZ,IACdkZ,EAAcA,EAAYlZ,GAC1BxF,EAAIqe,EAAUre,GACdqa,EAAM/a,KAAKU,IAEX0e,EAAcA,EAAYlZ,GAI9BwB,EAAI1H,KAAJ,iCACKmf,GADL,IAEEjZ,KAAMiZ,EAAgBpE,MAClBoE,EAAgBpE,MACbnJ,KAAI,SAAClR,GAAD,OACHoe,EAAcpe,GAAG2e,YACd/B,UAAU,OACVjG,QAAQ,mBAAoB,IAC5BkG,cACAlG,QAAQ,aAAc,OAE1B5G,KAAK,KACRqO,EAActf,GAAG6f,YACd/B,UAAU,OACVjG,QAAQ,mBAAoB,IAC5BkG,cACAlG,QAAQ,aAAc,OAE3B8H,EAAgBpE,OAClBoE,EAAgBpE,MAAM5T,SAAQ,SAACzG,GAAD,OAAOse,EAAUhf,KAAKU,UAInDgH,EAGT,SAAS4X,GAAUR,EAAeC,GAChC,IAAMQ,EAAS,GAETP,EAAY,GAkElB,OAjEArf,OAAO+G,KAAKqY,GAAW5X,SAAQ,SAAC8X,GAC9B,IAAMvP,EAAQwP,SAASD,GACjBvB,EAAMoB,EAAcpP,GAE1B,IAAKsP,EAAU9B,SAASxN,GAAQ,CAC9BsP,EAAUhf,KAAK0P,GACf,IAAIxJ,EAAOwX,EAAI2B,YACf,EAA0DlB,GACxDjY,GADImY,EAAN,EAAMA,MAAOE,EAAb,EAAaA,WAAYC,EAAzB,EAAyBA,IAAKC,EAA9B,EAA8BA,SAAUC,EAAxC,EAAwCA,GAAIC,EAA5C,EAA4CA,KAAMC,EAAlD,EAAkDA,IAI9Cpf,EAAIkQ,EACF8P,EAAQ,CAAChgB,GACXigB,GAAQ,EACZ,MAAOb,EAAIlf,OAAS,GAAsB,OAAjBqf,EAAUvf,IAAeigB,EAAO,CACvDA,GAAQ,EACR,MAQItB,GAAcjY,EAAO4Y,EAAcC,EAAUvf,IAAI6f,aAP5CK,EADT,EACErB,MACYsB,EAFd,EAEEpB,WACKqB,EAHP,EAGEpB,IACUqB,EAJZ,EAIEpB,SACIqB,EALN,EAKEpB,GACMqB,EANR,EAMEpB,KACKqB,EAPP,EAOEpB,KAGAP,EAAM3e,OAASggB,EAAShgB,QACxB6e,EAAW7e,OAASigB,EAAcjgB,QAClC8e,EAAI9e,OAASkgB,EAAOlgB,QACpB+e,EAAS/e,OAASmgB,EAAYngB,QAC9Bgf,EAAGhf,OAASogB,EAAMpgB,QAClBif,EAAKjf,OAASqgB,EAAQrgB,UAEtB+f,GAAQ,EACRT,EAAUhf,KAAK+e,EAAUvf,IACzBggB,EAAMxf,KAAK+e,EAAUvf,IACrBA,EAAIuf,EAAUvf,GACd0G,GAAc4Y,EAActf,GAAG6f,YAC/BhB,EAAQqB,EACRnB,EAAaoB,EACbnB,EAAMoB,EACNnB,EAAWoB,EACXnB,EAAKoB,EACLnB,EAAOoB,EACPnB,EAAMoB,GAINpB,EAAIlf,OAAS,GACf6f,EAAOvf,KAAK,CACVigB,aAAc,GAAF,OAAMT,GAClBtZ,KAAM,GAAF,uBACCmY,GADD,gBAECE,GAFD,gBAGCC,GAHD,gBAICC,GAJD,gBAKCC,GALD,gBAMCC,GAND,gBAOCC,UAONW,EAGT,SAASW,GACPC,EADF,GAGE,IADExC,EACF,EADEA,KAAMhB,EACR,EADQA,KAAMiB,EACd,EADcA,KAAMlB,EACpB,EADoBA,KAAM0D,EAC1B,EAD0BA,MAAOzT,EACjC,EADiCA,MAAOC,EACxC,EADwCA,OAIxC,MAAOwT,EAAQ,EACbA,GAAS,IAEX,IAAMtB,EAAgBqB,EAAQpF,MAC3BnJ,KAAI,SAAC8L,GAAD,sBAAC,kBACDA,GADA,IAEH2C,aAAc,iCACT3C,EAAI2C,cADG,IAEVC,SAAU5C,EAAI2C,aAAaC,SAAS1O,KAAI,YAAc,IAAXkM,EAAW,EAAXA,EAAGC,EAAQ,EAARA,EAC5C,OAAQqC,EAAQ,KACd,KAAK,GACH,MAAO,CAAEtC,EAAGlR,EAASmR,EAAGA,EAAGD,GAC7B,KAAK,IACH,MAAO,CAAEA,EAAGnR,EAAQmR,EAAGC,EAAGnR,EAASmR,GACrC,KAAK,IACH,MAAO,CAAED,EAAGC,EAAGA,EAAGpR,EAAQmR,GAC5B,QACE,MAAO,CAAEA,IAAGC,gBAKrBpV,QAAO,SAAC+U,GAAD,OAASD,GAAYC,EAAK,CAAEC,OAAMhB,OAAMiB,OAAMlB,YACrD9K,KAAI,SAAC8L,GAAD,OAASO,GAAaP,MAC1B6C,MAAK,SAACC,EAAGC,GAAJ,OAAUD,EAAE7D,KAAO8D,EAAE9D,QAEvB+D,EAAQ5B,EAAclN,KAAI,SAAC6O,GAAD,OAAOA,EAAE/D,KAAO+D,EAAE9D,QAAM4D,OACtDvY,KAAKC,MAAM6W,EAAcpf,OAAS,IAGhCihB,EAAmB,gBAAI7B,EAAclN,KAAI,SAACgP,EAAGphB,GAAJ,OAAUA,MACvDmhB,EAAiBJ,MACf,SAACC,EAAGC,GAAJ,OAAW3B,EAAc0B,GAAG7C,KAAOmB,EAAc2B,GAAG9C,QAGtD,IAAMoB,EAAY,GAmClB,OAlCA4B,EAAiBxZ,SAAQ,SAAC8X,GACxB,IAAMzf,EAAI0f,SAASD,GACnBF,EAAUvf,GAAK,KACf,IAAIkB,EAAIlB,EAAI,EACZ,MACmB,OAAjBuf,EAAUvf,IACVkB,GAAK,GACLoe,EAAcpe,GAAGgc,KAAOoC,EAActf,GAAGmd,KAGvCmC,EAActf,GAAGoe,KAAO8C,GAAS5B,EAAcpe,GAAGid,MAClDmB,EAActf,GAAGoe,KAAO8C,GAAS5B,EAAcpe,GAAGid,MAClDpB,GAAcuC,EAActf,GAAIsf,EAAcpe,MAE9Cqe,EAAUvf,GAAKkB,GAEjBA,GAAQ,EAEVA,EAAIlB,EAAI,EACR,MACmB,OAAjBuf,EAAUvf,IACVkB,EAAIoe,EAAcpf,QAClBof,EAAcpe,GAAGic,KAAOmC,EAActf,GAAGkd,KAGvCoC,EAActf,GAAGoe,KAAO8C,GAAS5B,EAAcpe,GAAGid,MAClDmB,EAActf,GAAGoe,KAAO8C,GAAS5B,EAAcpe,GAAGid,MAClDpB,GAAcuC,EAActf,GAAIsf,EAAcpe,MAE9Cqe,EAAUvf,GAAKkB,GAEjBA,GAAQ,KAGL,CAAEoe,gBAAeC,aAG1B,IAAM8B,GAAM,CACJC,WADI,SACO7Q,GAAU,wKAMftG,GAAMhI,IAAN,UAAasH,GAAb,YAA8BgH,EAASvK,MAAM,QAAQ,GAArD,UANe,2CAGvBxG,KACE6hB,UAJqB,GAIUC,EAJV,KAIPA,gBAJO,kBAQlB,CACL1b,KAAM0b,EAAgB,GAAG,UACzB9a,KAAM8a,EAAgB,GAAG,eACzBjG,MAAOiG,EAAgBle,MAAM,KAXN,8CAc3Bme,QAfU,SAgBRd,EAhBQ,GA4BR,IAVExC,EAUF,EAVEA,KACAhB,EASF,EATEA,KACAiB,EAQF,EAREA,KACAlB,EAOF,EAPEA,KAOF,IANE3V,MACE4F,EAKJ,EALIA,MACAC,EAIJ,EAJIA,OAIJ,IAHIsU,WAAcC,OAAQf,OAG1B,MAHkC,EAGlC,EAGA,EAAqCF,GAAYC,EAAS,CACxDxC,OACAhB,OACAiB,OACAlB,OACA0D,QACAzT,QACAC,WAPMkS,EAAR,EAAQA,cAAeC,EAAvB,EAAuBA,UASvBD,EAAc3X,SAAQ,SAAC2W,EAAGte,GACxBsf,EAActf,GAAd,gBAAqB2R,GAAI3R,GAAMse,MAEjC,IAAMyB,EAASD,GAAUR,EAAeC,GAClCqC,EAAavC,GACjBC,EACAC,EACAoB,EAAQ7a,MAEV,MAAO,CAAEwZ,gBAAeS,SAAQ6B,eAGlCvG,UApDU,YAoDoC,IAAlC1V,EAAkC,EAAlCA,OAAkC,IAA1BG,YAA0B,MAAnB,GAAmB,MAAf+b,cAAe,MAAN,GAAM,EAE5C,IAAKlc,EACH,MAAO,GAET,IAAIia,EAAcjD,GAAqB7W,GAElC8Z,IACHA,EAAc,IAEH,OAAT9Z,GACF3F,OAAO+G,KAAKyV,GAAqB,OAAOhV,SAAQ,SAAC9E,GAC1C+c,EAAY/c,GAGf8Z,GAAqB,MAAM9Z,GAAK8E,SAAQ,SAAC2V,GAClCsC,EAAY/c,GAAK6a,SAASJ,IAC7BsC,EAAY/c,GAAKrC,KAAK8c,MAJ1BsC,EAAY/c,GAAZ,gBAAuB8Z,GAAqB,MAAM9Z,IAQpD+c,EAAY/c,MAIhB,IAAMif,EAAmBnc,EACtBmY,UAAU,OACVjG,QAAQ,mBAAoB,IAC5BkG,cACH,OAAO5d,OAAO+G,KAAK0Y,GAChBzW,QACC,SAACoU,GAAD,OACGsE,EAAOnE,SAASH,MAEF,qBAAbA,GACAsE,EAAOnE,SAAS,2BAGrBtL,KAAI,SAACmL,GACJ,IAAM7W,EAAOmW,GACXiF,EACAlC,EAAYrC,GAAUnL,KAAI,SAACkM,GAAD,OACxBA,EACGR,UAAU,OACVjG,QAAQ,mBAAoB,IAC5BkG,kBAOP,MAAO,CACLlb,IAAK0a,EACL7W,OACA7E,EAAG+a,GAASkF,EAAkBpb,OAGjCqa,MAAK,SAACC,EAAGC,GAAJ,OAAUD,EAAEnf,EAAIof,EAAEpf,KACvByB,MAAM,EAAG,KAGD+d,MC9gBX,I,UAAS,WAAa,IAAI9d,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACI,YAAY,iBAAiB,CAACJ,EAAG,MAAM,CAACsJ,IAAI,OAAOlJ,YAAY,cAAckX,MAAO1X,EAAS,OAAG,CAACI,EAAG,MAAM,CAACsJ,IAAI,UAAUlJ,YAAY,UAAUkX,MAAO1X,EAAgB,cAAG,CAACI,EAAG,MAAM,CAAC8P,WAAW,CAAC,CAAC3R,KAAK,OAAO4R,QAAQ,SAASnR,MAAOgB,EAAIgE,OAAShE,EAAIgE,MAAMwa,IAAKtV,WAAW,uBAAuBQ,IAAI,QAAQlJ,YAAY,QAAQkX,MAAO1X,EAAc,WAAEM,MAAM,CAAC,IAAMN,EAAIgE,OAAShE,EAAIgE,MAAMwa,OAAOpe,EAAG,MAAM,CAACI,YAAY,QAAQkX,MAAO1X,EAAY,SAAEM,MAAM,CAAC,MAAQN,EAAIye,WAAW,OAASze,EAAI0e,cAAc,CAACte,EAAG,OAAO,CAACI,YAAY,iBAAiBF,MAAM,CAAC,GAAK,IAAI,GAAK,IAAI,MAAQN,EAAIye,WAAW,OAASze,EAAI0e,eAAe1e,EAAIS,GAAIT,EAAkB,gBAAE,SAAS7D,EAAKwB,GAAG,OAAOyC,EAAG,IAAI,CAACd,IAAI3B,GAAGqC,EAAIS,GAAItE,EAAU,OAAE,SAASwe,EAAIle,GAAG,OAAO2D,EAAG,OAAO,CAACd,IAAK3B,EAAI,IAAMlB,EAAGuS,MAAM,CACn1B2P,UAAW3e,EAAI4e,aAAajS,QAAUlQ,EACtCoiB,YAAa7e,EAAIiY,mBAAmBkC,SAASQ,EAAIvM,KACjD9N,MAAM,CAAC,EAAIN,EAAI8e,gBAAgBnE,IAAM3Z,GAAG,CAAC,MAAQ,SAASuC,GAAQ,OAAOvD,EAAI+e,WAAWphB,UAAS,MAAMqC,EAAI6X,qBAAuB7X,EAAI6X,oBAAoBG,MAAO5X,EAAG,IAAIJ,EAAIS,GAAIT,EAAI6X,oBAAyB,OAAE,SAAS8C,GAAK,OAAOva,EAAG,OAAO,CAACd,IAAIqb,EAAIC,KAAKpa,YAAY,iBAAiBF,MAAM,CAAC,EAAIN,EAAI8e,gBAAgBnE,SAAU,GAAG3a,EAAIY,KAAMZ,EAAkB,eAAEI,EAAG,IAAIJ,EAAIS,GAAIT,EAAkB,gBAAE,SAAS2a,GAAK,OAAOva,EAAG,OAAO,CAACd,IAAIqb,EAAIC,KAAKpa,YAAY,iBAAiBF,MAAM,CAAC,EAAIN,EAAI8e,gBAAgBnE,SAAU,GAAG3a,EAAIY,MAAM,OAAQZ,EAAI4e,mBAA4C1T,IAA5BlL,EAAI4e,aAAapC,OAAsBpc,EAAG,MAAM,CAAC8P,WAAW,CAAC,CAAC3R,KAAK,QAAQ4R,QAAQ,YAAY3P,YAAY,YAAYkX,MAAO1X,EAAIgf,wBAC1qBhf,EAAI4e,aAAa5G,MAAMhY,EAAI4e,aAAa5G,MAAMrb,OAAS,KACrD,CAACyD,EAAG,QAAQ,CAAC8P,WAAW,CAAC,CAAC3R,KAAK,QAAQ4R,QAAQ,UAAUnR,MAAOgB,EAAI4e,aAAmB,OAAE1V,WAAW,wBAAwBkH,SAAS,CAAC,MAASpQ,EAAI4e,aAAmB,QAAG5d,GAAG,CAAC,MAAQ,SAASuC,GAAWA,EAAO8M,OAAOC,WAAqBtQ,EAAIuQ,KAAKvQ,EAAI4e,aAAc,SAAUrb,EAAO8M,OAAOrR,WAAYgB,EAAmB,gBAAE,CAACI,EAAG,SAAS,CAACY,GAAG,CAAC,MAAQhB,EAAIif,qBAAqB,CAACjf,EAAIc,GAAG,OAAOV,EAAG,KAAK,CAACI,YAAY,gBAAgBR,EAAIS,GAAIT,EAAuB,qBAAE,SAASkf,GAAa,OAAO9e,EAAG,KAAK,CAACd,IAAI4f,EAAY5f,KAAK,CAACc,EAAG,SAAS,CAACY,GAAG,CAAC,MAAQ,SAASuC,GAAQ,OAAOvD,EAAImf,oBAAoBD,EAAY5f,QAAQ,CAACU,EAAIc,GAAG,IAAId,EAAIe,GAAGme,EAAY5f,KAAK,IAAIU,EAAIe,GAAGme,EAAY/b,MAAM,aAAY,IAAI,CAAC/C,EAAG,MAAMA,EAAG,SAAS,CAACY,GAAG,CAAC,MAAQhB,EAAIif,qBAAqB,CAACjf,EAAIc,GAAG,OAAOV,EAAG,SAAS,CAACY,GAAG,CAAC,MAAQhB,EAAIof,gBAAgB,CAACpf,EAAIc,GAAG,SAAS,GAAGd,EAAIY,KAAMZ,EAAI6X,qBAAuB7X,EAAI6X,oBAAoBG,MAAO5X,EAAG,MAAM,CAACI,YAAY,YAAYkX,MAAO1X,EAAIgf,wBACj7Bhf,EAAI6X,oBAAoBG,MAAMhY,EAAI6X,oBAAoBG,MAAMrb,OAAS,KACnE,CAACqD,EAAIc,GAAG,IAAId,EAAIe,GAAGf,EAAI6X,oBAAoB1U,MAAM,KAAK/C,EAAG,SAAS,CAACY,GAAG,CAAC,MAAQhB,EAAIqf,4BAA4B,CAACrf,EAAIc,GAAG,OAAOV,EAAG,SAAS,CAACY,GAAG,CAAC,MAAQhB,EAAIsf,8BAA8B,CAACtf,EAAIc,GAAG,SAASd,EAAIY,SACpN,GAAkB,GCRT2e,I,UAAc,SAACC,EAAQ3c,GAAT,MACzB,KACA2c,EAAO3Q,KAAI,SAAC4Q,GAAD,gBAAcA,EAAM1E,EAApB,YAAyB0E,EAAMzE,MAAKtN,KAAK,QACnD7K,EAAQ,KAAO,MAEL6c,GAAa,SAACF,GAAD,OACxB,gBAAIA,GACDhC,MAAK,SAACmC,EAAIC,GAAL,OAAaD,EAAG5E,GAAK6E,EAAG7E,EAAI4E,EAAG3E,EAAI4E,EAAG5E,EAAI2E,EAAG5E,EAAI6E,EAAG7E,KACzDlM,KAAI,SAAC4Q,GAAD,iBAAeA,EAAM1E,EAArB,YAA0B0E,EAAMzE,EAAhC,QACJtN,KAAK,KAEJmS,GAAiB,SAACF,EAAIC,EAAIE,GAAT,OACpBF,EAAG7E,EAAI4E,EAAG5E,IAAM+E,EAAG9E,EAAI2E,EAAG3E,IAAM4E,EAAG5E,EAAI2E,EAAG3E,IAAM8E,EAAG/E,EAAI4E,EAAG5E,GAAK,GAErDgF,GAAkB,SAACP,GAC9B,IAAMQ,EAAe,gBAAIR,GAAQhC,MAAK,SAACmC,EAAIC,GAAL,OAAYD,EAAG5E,EAAI6E,EAAG7E,KAEtDkF,EAAY,CAAC,GAEnB,MACEA,EAAUA,EAAUtjB,OAAS,KAAOsjB,EAAU,IACzB,IAArBA,EAAUtjB,OAGV,IADA,IAAM8gB,EAAIwC,EAAUA,EAAUtjB,OAAS,GAC9B+gB,EAAI,EAAGA,EAAIsC,EAAarjB,OAAQ+gB,IACvC,GAAID,IAAMC,EAAG,CACX,IAAIwC,GAAO,EACP7hB,EAAI,EACR,MAAOA,EAAI2hB,EAAarjB,QAAUujB,EAE9B7hB,IAAMof,GACNpf,IAAMqf,GACNmC,GAAeG,EAAavC,GAAIuC,EAAatC,GAAIsC,EAAa3hB,MAE9D6hB,GAAO,GAET7hB,IAEE6hB,GACFD,EAAUhjB,KAAKygB,GAKvB,OAAOuC,EACJlgB,MAAM,EAAGkgB,EAAUtjB,QACnBkS,KAAI,SAACsR,GAAD,OAAgBH,EAAaG,OAGzBC,GAAY,SAACZ,GACxB,IAAMa,EAAMb,EAAOc,QAAO,SAACX,EAAIC,GAAL,MAAa,CAAE7E,EAAG4E,EAAG5E,EAAI6E,EAAG7E,EAAGC,EAAG2E,EAAG3E,EAAI4E,EAAG5E,KAAM,CAC1ED,EAAG,EACHC,EAAG,IAEL,MAAO,CAAED,EAAGsF,EAAItF,EAAIyE,EAAO7iB,OAAQqe,EAAGqF,EAAIrF,EAAIwE,EAAO7iB,SAG1C4jB,GAAW,SAACtC,GACvB,IAAMtZ,EAAM,GAcZ,OAbAsZ,EAAgB7Z,SAAQ,SAACuW,EAAK6F,GACxBA,EAAW,IACb7b,EAAI+a,GAAW/E,EAAI2C,aAAaC,WAAa,CAC3CnP,GAAIsR,GAAW/E,EAAI2C,aAAaC,UAChCiD,SAAUA,EACVhB,OAAQ7E,EAAI2C,aAAaC,SACzBkD,KAAMlB,GAAY5E,EAAI2C,aAAaC,UAAU,GAC7Cpa,KAAMwX,EAAI2B,YACVpG,SAAS,EACTwK,UAAU,OAIT/b,GAGIgc,GAA2B,SAACC,GACvC,IAAMC,EAAiB,GAsBvB,OApBAjkB,OAAO+G,KAAKid,GAAOxc,SAAQ,SAAC9E,EAAKqN,GAC/BkU,EAAevhB,GAAOqN,KAExB/P,OAAO+G,KAAKid,GAAOxc,SAAQ,SAAC9E,GAC1B,IAAMwhB,EAAY,GAAH,uBAAOF,EAAMthB,IAAb,CAAmBA,IAE5BoG,EAAaob,EAAUjS,KAAI,SAACrP,GAAD,OAAOqhB,EAAerhB,MAEjDuhB,EAAiBrb,EAAW4a,QAChC,SAAC7C,EAAGC,GAAJ,OAAUzY,KAAKK,IAAImY,EAAGC,KACtB9gB,OAAO+G,KAAKid,GAAOjkB,QAGrBC,OAAO+G,KAAKid,GAAOxc,SAAQ,SAAC9E,GACtBoG,EAAWyU,SAAS0G,EAAevhB,MACrCuhB,EAAevhB,GAAOyhB,SAKrBF,GAGIG,GAAe,SAACJ,EAAO5I,GAClC,IAAM6I,EAAiBF,GAAyBC,GAClC,IAAV5I,IACFA,GAAS,GAKX,IAAMiJ,EAAkB,GACxBrkB,OAAO+G,KAAKkd,GAAgBzc,SAAQ,SAAC8c,GACnC,IAAMC,EAAcN,EAAeK,QACEhW,IAAjC+V,EAAgBE,GAClBF,EAAgBE,GAAe,CAACD,GAEhCD,EAAgBE,GAAalkB,KAAKikB,MAKtC,IAAMvc,EAAM,GAoBZ,OAnBA/H,OAAO+G,KAAKsd,GAAiB7c,SAAQ,SAAC9E,GACpC,IAAMkgB,EAASyB,EAAgB3hB,GAAKghB,QAClC,SAACc,EAAcC,GAAf,gCAA8BD,GAA9B,gBAA+CpJ,EAAMqJ,GAAQ7B,WAC7D,IAEI8B,EAAe,gBAAIL,EAAgB3hB,IACtCke,MAAK,SAAC+D,EAASC,GAAV,OAAuBD,EAAUC,EAAU,GAAK,KACrD9T,KAAK,KAER/I,EAAI2c,GAAgB,CAElBb,KAAMlB,GAAYQ,GAAgBP,IAAS,GAC3CA,OAAQA,EACRrc,KAAM,GACN+S,SAAS,EACT9H,GAAIkT,MAID3c,GAGI8c,GAAW,SAACC,EAAUC,GACjC,IAAMC,EAAQD,EAAWD,EAAWC,EAAWD,EACzCG,EAAMF,GAAYD,EAAWC,EAAWD,EAC9C,MAAO,CAACE,EAAOC,IAGJC,GAAgB,SAACja,EAAIC,EAAIia,EAAIC,EAAIxC,GAM5C,IALA,IAAMyC,EAAOhd,KAAKK,IAAIuC,EAAIka,GACpBG,EAAOjd,KAAKK,IAAIwC,EAAIka,GACpBG,EAAOld,KAAKI,IAAIwC,EAAIka,GACpBK,EAAOnd,KAAKI,IAAIyC,EAAIka,GAEjBvlB,EAAI,EAAGA,EAAI+iB,EAAO7iB,OAAQF,IACjC,GACE+iB,EAAO/iB,GAAGse,EAAIoH,GACd3C,EAAO/iB,GAAGse,EAAIkH,GACdzC,EAAO/iB,GAAGue,EAAIoH,GACd5C,EAAO/iB,GAAGue,EAAIkH,EAEd,OAAO,EAGX,OAAO,GClKT,SAASG,GAAWnT,EAAMmO,GACxB,IAAF,gBACE,MAAO,CACLzT,MACJ,8BACA,+BACIC,OACJ,8BACA,gCAGA,SAASyY,GAAmB,GAA5B,8CACA,KAIE,OAHAC,GAAa,WAAf,kBACEA,GAAa,WAAf,mCACEA,GAAa,WAAf,iCACSA,EAET,QACE1d,MAAO,CACL8S,YAAa,CACXrL,KAAM1P,QAER4lB,YAAa,CACXlW,KAAM1P,QAERoH,MAAO,CACLsI,KAAM1P,OACN0S,QAFN,WAGQ,MAAO,KAGXmT,WAAY,CACVnW,KAAMiD,QAER3F,MAAO,CACL0C,KAAM4G,QAERrJ,OAAQ,CACNyC,KAAM4G,QAERwP,gBAAiB,CAArB,cACI9K,eAAgB,CAApB,YACIC,oBAAqB,CAAzB,aACIC,UAAW,CAAf,eACI6K,eAAgB,CAApB,YACI1K,mBAAoB,CAAxB,aAEE9b,KA9BF,WA+BI,MAAO,CACLymB,oBAAqB,CACnBhZ,MAAO,EACPC,OAAQ,GAEVgZ,eAAgB,CACdjZ,MAAO,EACPC,OAAQ,GAEV+U,aAAc,KAGlB5Z,SAAU,CACR0S,MADJ,WAEM,GAAKzX,KAAK6iB,KAaR,MAAO,GAZP,IAAR,KAUQ,OATI7iB,KAAK2J,QACPpM,EAAOoM,MAAQ,GAAzB,8BAEY3J,KAAK4J,SACPrM,EAAOqM,OAAS,GAA1B,+BAEY5J,KAAKuiB,aAAeviB,KAAKuiB,YAAYO,UACvCvlB,EAAOwlB,WAAa,GAA9B,6EAEexlB,GAKXihB,WAlBJ,WAmBM,OAAOxe,KAAK+D,MAAM4F,OAEpB8U,YArBJ,WAsBM,OAAOze,KAAK+D,MAAM6F,QAEpBoZ,aAxBJ,WAyBM,IAAN,GACQrZ,MAAO,GAAf,6BACQC,OAAQ,GAAhB,8BACQL,KAAM,cAAd,gCACQC,IAAK,cAAb,kCAKM,OAHIxJ,KAAKuiB,aAAeviB,KAAKuiB,YAAYO,UACvCvlB,EAAOwlB,WAAa,GAA5B,6EAEaxlB,GAET0lB,WApCJ,WAqCM,GAAIjjB,KAAK0X,aAAe1X,KAAK+D,MAAO,CAClC,IAAR,yCACA,iCACUoa,OAAQ,EACR+E,KAAM,CACJC,YAAY,EACZC,UAAU,IAEtB,uBANA,IAOUC,OAAQ,EAAIC,EACZC,OAAQ,EAAID,IAEtB,uBACA,wBACA,KACA,CACU,MAAV,EACU,OAAV,GAEA,UAEA,GACU3Z,MAAO,GAAjB,eACUC,OAAQ,GAAlB,eACUL,KAAM,MACNC,IAAK,OAEf,GACU2U,OAAQ,CACN5U,MAAO,EAAnB,oBACYC,KAAM,EAAlB,sBAEUga,MAAO,CACLja,MAAO,EAAnB,cACYC,KAAM,EAAlB,gBAaQ,OAVAjM,EAAO+kB,UACf,+BACA,wBACA,cACA,aAHA,eAGA,uBACA,aACA,YALA,QAKA,MACYtiB,KAAKuiB,aAAeviB,KAAKuiB,YAAYO,UACvCvlB,EAAOwlB,WAAa,GAA9B,6EAEexlB,EAEP,MAAO,IAGXkmB,SAzFJ,WA4FM,GAAIzjB,KAAK0X,aAAe1X,KAAK+D,MAAO,CAClC,IAAR,yCACA,iCACUmf,KAAM,CACJC,YAAY,EACZC,UAAU,GAEZjF,OAAQ,GAClB,uBANA,IAOUkF,OAAQ,EAAIC,EACZC,OAAQ,EAAID,IAGtB,mDAEA,GACU3Z,MAAO,GAAjB,eACUC,OAAQ,GAAlB,eACUL,KAAM,MACNC,IAAK,MAEP,gBAAyB,OASzB,OARAjM,EAAO+kB,UACf,iCACA,+BADA,eACA,iBACA,aAFA,QAGA,2CAAU,OAAV,KACYtiB,KAAKuiB,aAAeviB,KAAKuiB,YAAYO,UACvCvlB,EAAOwlB,WAAa,GAA9B,6EAEexlB,EAEP,MAAO,IAGX0R,KA/HJ,WAgIM,MAAO,CACLtF,MAAO3J,KAAK2J,OAAS3J,KAAK4iB,eAAejZ,MACzCC,OAAQ5J,KAAK4J,QAAU5J,KAAK4iB,eAAehZ,SAG/C7G,UArIJ,WAsIM,MAAO,CACL4G,MAAO3J,KAAK+D,MAAM4F,OAAS3J,KAAK2iB,oBAAoBhZ,MACpDC,OAAQ5J,KAAK+D,MAAM6F,QAAU5J,KAAK2iB,oBAAoB/Y,SAG1D8Z,oBA3IJ,WA4IM,IAAK1jB,KAAK2e,eAAiB3e,KAAK2e,aAAapC,OAC3C,MAAO,GAET,IAAN,2DACM,OAAO7X,IAGXG,MAAO,CACL8S,eADJ,WAEM3X,KAAK2e,aAAe,IAEtB5a,MAJJ,SAIA,IACUhF,EAAM4K,OAAS5K,EAAM6K,SACvB5J,KAAK2jB,kBAIXhb,QAxMF,WAwMA,WACI3I,KAAK2jB,gBACL3jB,KAAK4jB,MAAM7f,MAAM0R,iBAAiB,QAAQ,WACxC,EAAN,kBAEI7V,OAAO6V,iBAAiB,SAAUzV,KAAK6jB,SACvCjkB,OAAO6V,iBAAiB,oBAAqBzV,KAAK6jB,UAEpDC,UAhNF,WAiNIlkB,OAAOmkB,oBAAoB,SAAU/jB,KAAK6jB,SAC1CjkB,OAAOmkB,oBAAoB,oBAAqB/jB,KAAK6jB,UAEvD3e,QAAS,CACP2Z,gBADJ,SACA,GACM,OAAOS,GAAY5E,EAAI2C,aAAaC,UAAU,IAEhDwB,WAJJ,SAIA,GACU9e,KAAK2e,cAAgB3e,KAAK2e,aAAajS,QAAU6T,EACnDvgB,KAAK2e,aAAe,GAEpB3e,KAAK2e,aAAe,OAA5B,OAA4B,CAA5B,CACUjS,MAAO6T,GACjB,gCAIIvB,mBAdJ,WAeMhf,KAAK2e,aAAe,IAEtBO,oBAjBJ,SAiBA,GACMlf,KAAKmF,MAAM,eAAgB,OAAjC,OAAiC,CAAjC,kDACMnF,KAAK2e,aAAe,IAEtBQ,cArBJ,WAsBMnf,KAAKmF,MAAM,eAAgB,OAAjC,OAAiC,CAAjC,uBACMnF,KAAK2e,aAAe,IAEtBU,4BAzBJ,WA0BMrf,KAAKmF,MAAM,0BAEbia,0BA5BJ,WA6BMpf,KAAKmF,MAAM,0BAEb4Z,wBA/BJ,YA+BA,sBACM,GAAI/e,KAAK0X,aAAe1X,KAAK+D,MAAO,CAClC,IAAR,GACUwF,KAAM,GAAhB,iDACA,uBADA,MAEUC,IAAK,GAAf,iDACA,wBADA,OAGQ,OAAOjM,EAEP,MAAO,IAGXymB,aA5CJ,WA6CM,IAAN,mBACMhkB,KAAK2iB,oBAAoB/Y,OAAS7F,EAAMkgB,cACxCjkB,KAAK2iB,oBAAoBhZ,MAAQ5F,EAAMmgB,cAEzCL,QAjDJ,WAkDM,IAAN,kBACW7jB,KAAK2J,QACR3J,KAAK4iB,eAAejZ,MAAQwa,EAAKC,aAE9BpkB,KAAK4J,SACR5J,KAAK4iB,eAAehZ,OAASua,EAAKE,eAGtCV,cA1DJ,WA2DM,IAAN,mBACU5f,GAASA,EAAMugB,UACjBtkB,KAAKgkB,eAEPhkB,KAAK6jB,aCxS+U,MCQtV,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,OAIa,M,QCnBX,GAAS,WAAa,IAAI9jB,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,YAAY,CAACE,MAAM,CAAC,OAAS,GAAG,WAAa,KAAK,CAACF,EAAG,mBAAmB,CAACA,EAAG,yBAAyBA,EAAG,wBAAwB,CAACJ,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,wBAAwB,GAAG1D,EAAIS,GAAIT,EAAc,YAAE,SAASwkB,EAAa7X,GAAO,OAAOvM,EAAG,gBAAgB,CAACd,IAAIklB,GAAc,CAACpkB,EAAG,iBAAiB,CAACE,MAAM,CAAC,WAAaN,EAAIykB,YAAc9X,IAAU3M,EAAI6Y,qBAAqB,QAAU7Y,EAAIykB,YAAc9X,IAAU3M,EAAI6Y,sBAAsB7X,GAAG,CAAC,MAAQ,SAASuC,GAAQ,OAAOvD,EAAI0kB,uBAAuB/X,MAAU,CAAC3M,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAI,wBAA0B8gB,OAAmBpkB,EAAG,iBAAiB,CAACkJ,YAAY,CAAC,QAAU,QAAQhJ,MAAM,CAAC,SAAWN,EAAImW,UAAUnW,EAAIhB,MAAMwlB,GAAc,WAAW,CAACpkB,EAAG,QAAQ,CAACkJ,YAAY,CAAC,YAAY,KAAK8G,SAAS,CAAC,MAAQpQ,EAAIhB,MAAMwlB,GAAc,SAASxjB,GAAG,CAAC,MAAQ,SAASuC,GAAQvD,EAAI2kB,YAAYH,EAAhBxkB,CAA8BuD,OAAavD,EAAIqW,kBAAkBmO,GAAc7nB,OAAS,EAAGyD,EAAG,SAAS,CAACI,YAAY,OAAO8I,YAAY,CAAC,YAAY,QAAQhJ,MAAM,CAAC,UAAY,GAAG,YAAcN,EAAI0D,GAAG,wBAAwB,QAAU1D,EAAIqW,kBAAkBmO,IAAepU,SAAS,CAAC,MAAQpQ,EAAIhB,MAAMwlB,GAAc,SAASxjB,GAAG,CAAC,OAAS,SAASuC,GAAQvD,EAAI4kB,WAAWJ,EAAfxkB,CAA6BuD,MAAWvD,EAAIS,GAAIT,EAAIqW,kBAAkBmO,IAAe,SAASxN,GAAM,OAAO5W,EAAG,SAAS,CAACd,IAAI0X,GAAM,CAAChX,EAAIc,GAAGd,EAAIe,GAAGiW,SAAW,GAAG5W,EAAG,OAAO,CAACI,YAAY,QAAQ,CAACR,EAAIc,GAAGd,EAAIe,GAAGf,EAAIqW,kBAAkBmO,GAAc,SAASpkB,EAAG,iBAAiB,CAACA,EAAG,SAAS,CAACY,GAAG,CAAC,MAAQ,SAASuC,GAAQ,OAAOvD,EAAI6kB,OAAOL,MAAiB,CAACxkB,EAAIc,GAAG,YAAY,OAAM,IACtmD,GAAkB,GCAtB,IACE+D,MAAO,CACL7F,MAAOpC,OACPic,qBAAsB3F,OACtBuR,WAAYrV,SAEdtG,MAAO,CACLgc,KAAM,QACNnP,MAAO,SAET3Q,SAAU,CACR+f,WAAY,WAAhB,WACM,OAAOnoB,OAAO+G,KAAK1D,KAAKsS,OAAOvT,OAAOwe,MAC5C,cAAQ,OAAR,6CAIErY,QAAS,CACPgR,UADJ,SACA,GACM,OAAQnX,EAAMqP,MAAM,kCAEtBgI,kBAJJ,SAIA,GAEM,OAAQS,GACN,IAAK,wBACH,MAAO,CAAC,QACV,IAAK,sBACH,MAAO,CAAC,MACV,IAAK,oBACH,MAAO,GACT,IAAK,eACH,MAAO,GACT,QACE,MAAO,CAAC,IAAK,KAAM,KAAM,QAK/B+N,OArBJ,SAqBA,GACM,IAAN,6CACaG,EAAKR,GACZvkB,KAAKmF,MAAM,QAAS4f,IAEtBJ,WA1BJ,SA0BA,cACM,OAAO,SAAb,GACQ,EAAR,+CACA,gBADA,sBAEA,EAFA,iCAGA,mBAHA,sBAIA,6BAKID,YArCJ,SAqCA,cACM,OAAO,SAAb,GACQ,EAAR,+CACA,gBADA,sBAEA,EAFA,iCAGA,mBAHA,sBAIA,6BAKID,uBAhDJ,SAgDA,GACUzkB,KAAKsS,OAAOkS,YACdxkB,KAAKmF,MAAM,gBAAiBuH,MCpEoT,MCQpV,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,OAIa,M,QCqPf,gBAEA,wEACA,GADA,0HAEA,EAFA,+BAEA,GACA,EAHA,+BAGA,GACA,EAJA,+BAIA,GACA,EALA,+BAKA,IAEA,EAPA,iCAUA,IACA,yBACA,OACA,UACA,WACA,UACA,UAhBA,uBASA,EATA,EASA,aATA,kBAmBA,KAnBA,yBAuBA,IACA,yBACA,OACA,UACA,WACA,aA5BA,4BAsBA,OAtBA,EAsBA,WAtBA,EAsBA,QAtBA,EAsBA,UAtBA,kBA+BA,oBA/BA,kGAmCA,IACEpO,KAAM,gBACNmH,WAAY,CACViP,QAAJ,QACIsQ,iBAAJ,GACIC,eAAJ,IAEE/oB,KAAM,WACJ,MAAO,CACL+N,SAAS,EACT8L,cAAe,GACfI,mBAAoB,GACpBkC,UAAW,CAAjB,iCACM6M,aAAc,EACdnX,iBAAkB,CAChB2J,YAAa,KACb3T,MAAO,MAETohB,UAAW,KACX7N,KAAM,EACN8N,yBAA0B,EAC1BxM,qBAAsB,EACtB5Q,QAAS,GACTkP,YAAa,GACbhP,SAAU,GACV0C,QAAS,GACTkO,eAAe,EACfuM,SAAU,IAGdtgB,SAAU,CACRugB,YAAa,WACX,OACN,+BACA,kCAEe,GAEFtlB,KAAK+V,cAAc,GAAG5N,MAE/BuF,YAAa,WACX,OACN,+BACA,0CAEe,GAEF1N,KAAK+V,cAAc,GAAGU,cAE/B9I,WAAY,WACV,OACN,+BACA,kCAEe,GAEF/E,EAAb,2CAEIgF,eAAgB,WACd,OACN,+BACA,kCAEe,GAEFhF,EAAb,+CAEI2c,YAAa,WACX,OACN,+BACA,kCAEe,GAEFvlB,KAAK+V,cAAc,GAAGzT,MAE/BiV,SAAU,WACR,GACN,+BACA,iDAEQ,MAAO,GAET,IAAN,mDACA,6BACA,MACM,MAAO,GAAb,OACA,qEADA,OAEA,EAFA,SAKIb,cAAe,WACb,OAAqC,IAA9B1W,KAAK+V,cAAcrZ,QAE5B8oB,mBAAoB,WAClB,MAAO,IAETzN,MAAO,WACL,OAAK/X,KAAKmlB,WAAcnlB,KAAKmlB,UAAUrJ,cAGhC9b,KAAKmlB,UAAUrJ,cAFb,IAIXnE,eAAgB,WAApB,WACM,OAAkB,IAAd3X,KAAKsX,KACAtX,KAAKmlB,UAAUrJ,cAAclN,KAAI,SAAhD,GACU,MAAO,CACLmJ,MAAO,CAAC,OAApB,OAAoB,CAApB,OACYwE,OAAQ7B,EAAI2B,gBAIA,IAAdrc,KAAKsX,KACAtX,KAAKmlB,UAAU5I,OAAO3N,KAAI,SAAzC,iCACU,MAAO,CACLmJ,MAAOkF,EAAarO,KAAI,SAApC,0CACY2N,OAAQrZ,EAAK,OAIZ,IAET0U,oBAAqB,WAAzB,WACM,OAAkB,IAAd5X,KAAKsX,KACA,GAEF,CACLpU,KAAMlD,KAAKmlB,UAAU/G,WAAWpe,KAAKolB,0BAA0B,QAC/D/lB,IAAKW,KAAKmlB,UAAU/G,WAAWpe,KAAKolB,0BAA0B,OAC9DrN,MAAO/X,KAAKmlB,UAAU/G,WAAWpe,KAAKolB,0BAC9C,SACA,0DAGIK,aAAc,WACZ,OACN,iBACA,uBACA,oBACA,+CAEe,GAEFzlB,KAAKmlB,UAAU5I,OAAOvc,KAAKklB,cAEpCQ,UAAW,WAAf,WACM,OAAO/oB,OAAO+G,KAAK1D,KAAKmW,oBAAoBoH,MAClD,cAAQ,OAAR,wDAGItF,mBAAoB,WAClB,OAAqB,IAAdjY,KAAKsX,MAEdQ,gBA3HJ,WA4HM,GAAkB,IAAd9X,KAAKsX,KACP,MAAO,GAET,IAAN,4CACM,OAAOtX,KAAKmW,mBAAmB9W,IAEjC2Y,mBAlIJ,WAkIA,WACM,MAAO,GAAb,uBACA,0DAAQ,OACR,+CAAU,OAAV,YAFA,gBAIA,0DAAQ,OACR,mCACA,oDAAU,OAAV,QACA,SAIIW,YA9IJ,WA+IM,OAAqB,IAAd3Y,KAAKsX,MAEdkB,UAjJJ,WAkJM,OAAkB,IAAdxY,KAAKsX,OAIf,eACA,mDAOEpS,QAAS,CACP2S,UADJ,YACA,0CACM,OAAkB,IAAd7X,KAAKsX,KACA,GAEFqO,GAAgB9N,UAAU,CAC/B1V,OAAR,EACQG,KAAR,EACQ+b,OAAQ1hB,OAAO+G,KAAK1D,KAAKmW,uBAG7BoC,SAXJ,WAYM,OAAkB,IAAdvY,KAAKsX,MAEPtX,KAAKgX,mBACE,MAEQ,GAAbhX,KAAKsX,MACPtX,KAAKsX,MAAQ,EACN,MAEQ,GAAbtX,KAAKsX,MACPtX,KAAKsX,MAAQ,EACN,MAEQ,GAAbtX,KAAKsX,MACPtX,KAAKsX,MAAQ,EACN,WAFT,GAKFmB,SA9BJ,WA+BMzY,KAAKsX,MAAQ,EACK,IAAdtX,KAAKsX,OACPtX,KAAKmlB,UAAY,OAAzB,OAAyB,CAAzB,GACA,WACA,8BACA,yBAIwB,IAAdnlB,KAAKsX,MACPtX,KAAK4lB,kBAGTA,eA5CJ,WA4CA,iEACA,gCACWC,IACHnZ,GAAS,GAEX,MACN,sCACA,uCAEA,IADA,2DAIQA,GAAS,EAEPA,GAAS1M,KAAKmlB,UAAU/G,WAAW1hB,OACrCsD,KAAKyY,WAELzY,KAAKolB,yBAA2B1Y,GAGpCwL,wBAhEJ,WAgEA,WACA,4BACA,+BADA,kBAGA,KACkB,qBAAR7Y,GACFymB,EAAU9oB,KAAK,uBACf8oB,EAAU9oB,KAAK,0BAEf8oB,EAAU9oB,KAAKqC,GAEjB,IAAN,aACMymB,EAAU3hB,SAAQ,SAAxB,GACQ,EAAR,oDACA,sBADA,sBAEA,GACU,GAAV,EACU,KAAV,GACU,KAAV,MACU,EAAV,uDAAY,OAAZ,eACU,EAAV,uDAAY,OAAZ,eACU,MAAV,mCAAY,OAAZ,SACU,WAAV,SAIMnE,KAAK4lB,gBAAe,IAEtBzN,wBA5FJ,WA6FMnY,KAAK4lB,gBAAe,IAEtBxN,wBA/FJ,SA+FA,cACM,GAAkB,IAAdpY,KAAKsX,KAAY,CACnB,IAAR,kBACA,KACoB,qBAARjY,GACFymB,EAAU9oB,KAAK,uBACf8oB,EAAU9oB,KAAK,0BAEf8oB,EAAU9oB,KAAKqC,GAEjBymB,EAAU3hB,SAAQ,SAA1B,GACU,EAAV,oDACA,sBADA,sBAEA,GACY,GAAZ,EACY,KAAZ,GACY,KAAZ,MACY,EAAZ,uDAAc,OAAd,YACY,EAAZ,uDAAc,OAAd,YACY,MAAZ,mCAAc,OAAd,yBACY,WAAZ,cAIA,kBACQ,IAAR,qBACA,IACA,cACA,sCACA,oBAAU,MAAV,aACA,IACA,cACA,iBACA,oBAAU,MAAV,aAaQ,GAZa,OAAT4S,IACFA,EAAO,MAET/W,KAAKmW,mBAAqB,OAAlC,OAAkC,CAAlC,kBACA,yBADA,sBAEA,wBAFA,iCAGA,kDAHA,IAIU,WAAV,mCAAY,OAAZ,yBACU,KAAV,EACU,KAAV,OAIA,IACA,uBACA,cAAU,OACV,qCACA,GAEA,CAEU,IAAV,GACA,mDACU,MACV,+BACA,gDAEY4P,GAAaA,EAAY,GAAK/lB,KAAK0lB,UAAUhpB,OAE/CsD,KAAK4Y,qBAAuBmN,KAIlClN,uBAlKJ,SAkKA,GACM7Y,KAAK4Y,qBAAuBlM,GAE9BgC,WArKJ,WAsKM1O,KAAK4jB,MAAMoC,QAAQ7H,QAAQ,KAE7BxP,YAxKJ,WAyKM3O,KAAK4jB,MAAMoC,QAAQ7H,OAAO,KAE5B/G,YA3KJ,SA2KA,GACUpX,KAAKkI,WAAa+d,EACpBjmB,KAAKkI,SAAW,GAEhBlI,KAAKkI,SAAW+d,GAGpB/P,UAlLJ,SAkLA,GACM,OAAQnX,EAAMqP,MAAM,kCAEtBjH,cArLJ,SAqLA,GACM,OAAOyB,EAAb,kBAEIxB,kBAxLJ,SAwLA,GACM,OAAOwB,EAAb,sBAEIyO,oBA3LJ,WA4LMrX,KAAK8Y,eAAiB9Y,KAAK8Y,eAE7BtB,qBA9LJ,YA8LA,8BACMxX,KAAK+N,iBAAmB,OAA9B,OAA8B,CAA9B,kBACA,uBADA,IAEQ2J,YAAR,EACQ3T,MAAR,EACQ4W,KAAMjD,EAAYnO,KAClBqR,KAAMlD,EAAYnO,KAAOmO,EAAY/N,MACrCgQ,KAAMjC,EAAYlO,IAClBkQ,KAAMhC,EAAYlO,IAAMkO,EAAY9N,UAGxCgN,YAAa,WAAjB,sKACA,wBADA,uBAEA,gBAFA,SAGA,GACA,EACA,EACA,EACA,EACA,yBARA,OAGA,EAHA,OAUA,sCACA,gBAXA,8BAaA,gBAbA,UAcA,GACA,cACA,EACA,EACA,GAlBA,wCAcA,EAdA,KAcA,EAdA,KAoBA,4CACA,6CAEA,6CACA,4DAEA,gBA1BA,2GAAiB,GA6BbsP,gBAAiB,WAArB,uKACA,gBADA,SAEA,GACA,EACA,EACA,EACA,GANA,uCAEA,EAFA,KAEA,EAFA,KAQA,4CACA,6CACA,8CACA,iDAEA,gBAbA,2GAAqB,GAejBxN,gBAAiB,WACf,EAAN,wEAEA,mCACA,8BADA,wBAEA,0CACA,sBACA,iBAIM1Y,KAAKsW,YAAY,gBAEnBA,YAlQJ,WAkQA,oEACMtW,KAAK4K,QAAQ5N,KAAK,CAChBmL,KAAMnI,KAAKslB,YACXhnB,KAAM0B,KAAK0N,YACXsL,OAAQA,IAEV,IAAN,aACA,gCACA,aACMxX,aAAaI,QACnB,GACA,+DAGM5B,KAAK+V,cAAc5Y,SAErBgpB,mBAlRJ,WAmRM,OAAInmB,KAAKqY,UAAUvB,WAAa9W,KAAKkW,UAAUlW,KAAKqY,UAAUvB,UACxD9W,KAAKqY,UAAU+N,cACV,2CAAjB,oCAEe,sBAAf,oCAEa,IAET7P,SA3RJ,WA2RA,WACMvW,KAAK4K,QAAQ5N,KAAK,CAChBmL,KAAMnI,KAAKslB,YACXhnB,KAAM0B,KAAK0N,YACXsL,OAAQ,cAEV,IAAN,aACA,gCACA,aACMxX,aAAaI,QACnB,GACA,+DAGM,IAAN,uCACA,QACA,YAAQ,OACR,yBACA,+BACA,2CACA,yCAEA,iBAAQ,MAAR,CACUtD,KAAMuY,EACN9X,MAAO,GAAjB,8CACA,gCACU+X,SAAU,EAApB,2BACUC,KAAM,EAAhB,+BAEA,uCACA,QACA,YAAQ,OACR,0BACA,gCAEA,iBAAQ,MAAR,CACUzY,KAAMuY,EACN9X,MAAO,GACP+X,SAAU,GACVC,KAAM,OAEhB,4BACM,EAAN,iBACA,EADA,yBAEA,8BACA,EACA,iBAAQ,MAAR,gDACA,UAHA,OAGA,EACA,iBAAQ,OAAR,2DACA,UALA,OAKA,mBAAQ,MAAR,iCALA,OAMA,sBANA,gBAOA,iCAGM,IAAN,KACMsP,EAASliB,SAAQ,SAAvB,GACQmiB,EAAcpqB,EAAKoC,MAAQ,GAAnC,0BAMM0B,KAAK+V,cAAc5Y,SAErB6Z,iBA3VJ,WA4VMhX,KAAKmW,mBAAqB,GAC1BnW,KAAKqY,UAAY,CACfvB,SAAU,MACVsP,eAAe,GAEjBpmB,KAAKmlB,UAAY,KACjBnlB,KAAKsX,KAAO,EACZtX,KAAKolB,yBAA2B,EAChCplB,KAAK4Y,qBAAuB,GAE9BzW,OAtWJ,WAuWMnC,KAAKkmB,gBAAgBlmB,KAAKgI,QAAShI,KAAKkX,YAAalX,KAAKkI,YAG9DrD,MAAO,CACLygB,YAAa,WAAjB,WAMM,GAJAtlB,KAAKgX,mBACDhX,KAAK+V,cAAcrZ,QAAU,IAAMsD,KAAKiK,SAC1CjK,KAAK4W,YAAY5W,KAAKgI,QAAShI,KAAKkX,YAAalX,KAAKkI,UAG9D,uBACA,2CACA,2BACA,CACQ,IAAR,mDACA,6BACA,MACA,YACA,0CACA,sBACA,sBAHA,OAIA,EAJA,QAKA,6BACQyd,GACR,cACA,kBACA,8BAEY,EAAZ,kDACA,oBADA,IAEc,QAAd,EACc,MAAd,CACgB,KAAhB,kBACA,yCAEgB,MAAhB,kBACA,kDAMA,kBAEA,6BACY,EAAZ,mBAKID,UAAW,WAEL1lB,KAAK4Y,sBAAwB5Y,KAAK0lB,UAAUhpB,SAC9CsD,KAAK4Y,qBACb,sDAIEjQ,QAAS,WACP3I,KAAK4W,gBC54ByV,MCQ9V,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,OAIa,M,QCnBX,GAAS,WAAa,IAAI7W,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACI,YAAY,OAAO,CAACJ,EAAG,MAAM,CAACI,YAAY,aAAa,CAACJ,EAAG,IAAI,CAACI,YAAY,gBAAgB,CAACR,EAAIc,GAAGd,EAAIe,GAAGd,KAAKumB,SAASvmB,KAAKwmB,kBAAkBrmB,EAAG,MAAM,CAACI,YAAY,iBAAiBQ,GAAG,CAAC,MAAQ,SAASuC,GAAQ,OAAOvD,EAAI0mB,MAAM,OAAO,CAACtmB,EAAG,MAAM,CAACE,MAAM,CAAC,IAAMN,EAAI2mB,UAAUvmB,EAAG,MAAM,CAAC4O,MAAM,CAAE4X,2BAA4B5mB,EAAI6mB,yBAA0BvmB,MAAM,CAAC,MAAQN,EAAIye,WAAW,OAASze,EAAI0e,aAAa1d,GAAG,CAAC,UAAYhB,EAAI8mB,OAAO,WAAa,SAASvjB,GAAiC,OAAzBA,EAAOwjB,kBAAyB/mB,EAAIgnB,aAAa1pB,MAAM,KAAMmG,YAAY,QAAU,SAASF,GAAiC,OAAzBA,EAAOwjB,kBAAyB/mB,EAAIgnB,aAAa1pB,MAAM,KAAMmG,cAAc,CAACzD,EAAIS,GAAIT,EAAgB,cAAE,SAAS2a,GAAK,OAAOva,EAAG,OAAO,CAACd,IAAI,OAASqb,EAAIvM,GAAG5N,YAAY,MAAMwO,MAAM,CACn0B0R,SAAU/F,EAAI+F,SACduG,WAAYjnB,EAAIymB,cAAgB,GAChCnmB,MAAM,CAAC,EAAIqa,EAAI8F,MAAMzf,GAAG,CAAC,MAAQ,SAASuC,GAAQA,EAAOwjB,kBAAkB/mB,EAAIymB,cAAgB,GAAKzmB,EAAI0mB,MAAM/L,EAAIvM,GAAI7K,IAAS,UAAY,SAASA,GAAQvD,EAAIymB,cAAgB,GAAKzmB,EAAIknB,UAAUvM,EAAIvM,WAAWpO,EAAgB,aAAEI,EAAG,OAAO,CAACI,YAAY,cAAcF,MAAM,CAAC,EAAIN,EAAImnB,gBAAgBnnB,EAAIY,KAAKZ,EAAIS,GAAIT,EAAI8M,YAAuB,aAAE,SAASxN,GAAK,OAAOc,EAAG,SAAS,CAACd,IAAI,kBAAoBA,EAAIkB,YAAY,qBAAqBF,MAAM,CAAC,GAAKN,EAAIogB,UAAUpgB,EAAIgY,MAAM1Y,GAAKkgB,QAAQzE,EAAE,GAAK/a,EAAIogB,UAAUpgB,EAAIgY,MAAM1Y,GAAKkgB,QAAQxE,EAAE,EAAI,UAAShb,EAAIS,GAAIT,EAAI8M,YAA0B,gBAAE,SAASsa,EAAWC,GAAS,OAAOjnB,EAAG,IAAI,CAACd,IAAI,cAAgB+nB,GAAS,CAACrnB,EAAIS,GAAG,GAAa,SAAS6mB,GAAc,OAAOlnB,EAAG,IAAI,CAACd,IAAI,aAAe+nB,EAAU,MAAQC,GAAc,CAAClnB,EAAG,OAAO,CAACI,YAAY,WAAWwO,MAAM,CACryBuY,eAAgBvnB,EAAIwnB,UACpBC,iBAAkBznB,EAAIwnB,WACtBlnB,MAAM,CAAC,GAAKN,EAAIogB,UAAUpgB,EAAIgY,MAAMqP,GAAS7H,QAAQzE,EAAE,GAAK/a,EAAIogB,UAAUpgB,EAAIgY,MAAMqP,GAAS7H,QAAQxE,EAAE,GAAKhb,EAAIogB,UAAUpgB,EAAIgY,MAAMsP,GAAc9H,QAAQzE,EAAE,GAAK/a,EAAIogB,UAAUpgB,EAAIgY,MAAMsP,GAAc9H,QAAQxE,GAAGha,GAAG,CAAC,MAAQ,SAASuC,GAAiC,OAAzBA,EAAOwjB,kBAAyB/mB,EAAI0nB,UAAUL,EAASC,OAAkBlnB,EAAG,OAAO,CAACI,YAAY,YAAYF,MAAM,CAAC,GAAKN,EAAIogB,UAAUpgB,EAAIgY,MAAMqP,GAAS7H,QAAQzE,EAAE,GAAK/a,EAAIogB,UAAUpgB,EAAIgY,MAAMqP,GAAS7H,QAAQxE,EAAE,GAAKhb,EAAIogB,UAAUpgB,EAAIgY,MAAMsP,GAAc9H,QAAQzE,EAAE,GAAK/a,EAAIogB,UAAUpgB,EAAIgY,MAAMsP,GAAc9H,QAAQxE,UAAS5a,EAAG,SAAS,CAAC4O,MAAM,CACxkB2Y,0BAA2B3nB,EAAIwnB,UAC/BD,eAAgBvnB,EAAIwnB,WACpBlnB,MAAM,CAAC,GAAKN,EAAIogB,UAAUpgB,EAAIgY,MAAMqP,GAAS7H,QAAQzE,EAAE,GAAK/a,EAAIogB,UAAUpgB,EAAIgY,MAAMqP,GAAS7H,QAAQxE,EAAE,EAAI,MAAMha,GAAG,CAAC,MAAQ,SAASuC,GAAiC,OAAzBA,EAAOwjB,kBAAyB/mB,EAAI4nB,UAAUP,OAAajnB,EAAG,SAAS,CAACI,YAAY,mBAAmBF,MAAM,CAAC,GAAKN,EAAIogB,UAAUpgB,EAAIgY,MAAMqP,GAAS7H,QAAQzE,EAAE,GAAK/a,EAAIogB,UAAUpgB,EAAIgY,MAAMqP,GAAS7H,QAAQxE,EAAE,EAAI,QAAQ,MAAMhb,EAAkB,eAAEI,EAAG,IAAI,CAAC4O,MAAM,CAAE6Y,OAAQ7nB,EAAI4Y,cAAe5Y,EAAIS,GAAIT,EAAc,YAAE,SAAS8nB,EAAKC,GAAQ,OAAO3nB,EAAG,IAAI,CAACd,IAAI,cAAgByoB,EAAOvnB,YAAY,gCAAgC,CAACJ,EAAG,OAAO,CAACE,MAAM,CAAC,EAAIwnB,EAAKrH,QAASzgB,EAAkB,eAAEI,EAAG,OAAO,CAACE,MAAM,CAAC,EAAIwnB,EAAKE,OAAOjN,EAAE,EAAI+M,EAAKE,OAAOhN,EAAE,oBAAoB,SAAS,cAAc,WAAW,CAAChb,EAAIc,GAAG,IAAId,EAAIe,GAAG,UAAYgnB,GAAQ,OAAO/nB,EAAIY,UAAS,GAAGZ,EAAIY,KAAMZ,EAAoB,iBAAEI,EAAG,IAAI,CAAC4O,MAAM,CAAE6Y,OAAQ7nB,EAAI4Y,cAAe5Y,EAAIS,GAAIT,EAAgB,cAAE,SAASioB,EAAOC,GAAU,OAAO9nB,EAAG,IAAI,CAACd,IAAI,gBAAkB4oB,EAAS1nB,YAAY,kCAAkC,CAACJ,EAAG,OAAO,CAACE,MAAM,CAAC,EAAI2nB,EAAOxH,QAASzgB,EAAkB,eAAEI,EAAG,OAAO,CAACE,MAAM,CAAC,EAAI2nB,EAAOD,OAAOjN,EAAE,EAAIkN,EAAOD,OAAOhN,EAAE,oBAAoB,SAAS,cAAc,WAAW,CAAChb,EAAIc,GAAG,IAAId,EAAIe,GAAG,YAAcmnB,GAAU,OAAOloB,EAAIY,UAAS,GAAGZ,EAAIY,KAAMZ,EAAI8M,YAAqB,UAAE1M,EAAG,OAAO,CAACI,YAAY,cAAcF,MAAM,CAAC,GAAM,GAAMN,EAAImoB,OAAQ,EAAG,GAAM,GAAMnoB,EAAImoB,OAAQ,EAAG,GAAM,GAAMnoB,EAAI8M,YAAYsb,YAAa,EAAG,GAAM,GAAMpoB,EAAI8M,YAAYsb,YAAa,KAAMpoB,EAAIY,KAAKZ,EAAIS,GAAIT,EAAe,aAAE,SAASyc,EAAM4L,GAAS,OAAOjoB,EAAG,OAAO,CAACd,IAAI,eAAiB+oB,EAAQ7nB,YAAY,aAAaF,MAAM,CAAC,EAAImc,EAAMgE,WAAWzgB,EAAyB,sBAAEI,EAAG,IAAI,CAACI,YAAY,qBAAqB,CAACJ,EAAG,OAAO,CAACE,MAAM,CAAC,EAAK,KAAQN,EAAIsoB,cAAc1G,MAAO,EAAI,IAAO5hB,EAAIsoB,cAAc1G,MAAO,EAAI,eAAkB5hB,EAAIsoB,cAAc1G,MAAO,EAAI,IAAO5hB,EAAIsoB,cAAczG,IAAK,EAAI,eAAkB7hB,EAAIsoB,cAAczG,IAAK,EAAI,IAAO7hB,EAAIsoB,cAAczG,IAAK,EAAI,MAAS7hB,EAAIsoB,cAAczG,IAAK,EAAI,aAAgB7hB,EAAIsoB,cAAc1G,MAAO,EAAI,QAASxhB,EAAG,SAAS,CAACE,MAAM,CAAC,GAAKN,EAAIsoB,cAAc1G,MAAM7G,EAAE,GAAK/a,EAAIsoB,cAAc1G,MAAM5G,EAAE,EAAI,MAAMha,GAAG,CAAC,UAAY,SAASuC,GAAiC,OAAzBA,EAAOwjB,kBAAyB/mB,EAAIuoB,mBAAmBjrB,MAAM,KAAMmG,eAAerD,EAAG,SAAS,CAACE,MAAM,CAAC,GAAKN,EAAIsoB,cAAczG,IAAI9G,EAAE,GAAK/a,EAAIsoB,cAAczG,IAAI7G,EAAE,EAAI,MAAMha,GAAG,CAAC,UAAY,SAASuC,GAAiC,OAAzBA,EAAOwjB,kBAAyB/mB,EAAIwoB,iBAAiBlrB,MAAM,KAAMmG,iBAAiBzD,EAAIY,MAAM,GAAGR,EAAG,MAAM,CAACI,YAAY,cAAc,CAACJ,EAAG,SAAS,CAACY,GAAG,CAAC,MAAQhB,EAAIyoB,eAAe,CAACzoB,EAAIc,GAAG,cAAcV,EAAG,SAAS,CAACY,GAAG,CAAC,MAAQhB,EAAI0Y,WAAW,CAAC1Y,EAAIc,GAAG,gBAAgBV,EAAG,MAAM,CAACI,YAAY,qBAAqB,CAACJ,EAAG,MAAM,CAACI,YAAY,eAAe,CAACJ,EAAG,QAAQ,CAAC8P,WAAW,CAAC,CAAC3R,KAAK,QAAQ4R,QAAQ,UAAUnR,MAAOgB,EAAe,YAAEkJ,WAAW,gBAAgB5I,MAAM,CAAC,KAAO,WAAW,KAAO,eAAe,GAAK,eAAe,MAAQ,gBAAgB8P,SAAS,CAAC,QAAUM,MAAMQ,QAAQlR,EAAI0oB,aAAa1oB,EAAIoR,GAAGpR,EAAI0oB,YAAY,iBAAiB,EAAG1oB,EAAe,aAAGgB,GAAG,CAAC,OAAS,SAASuC,GAAQ,IAAI8N,EAAIrR,EAAI0oB,YAAYpX,EAAK/N,EAAO8M,OAAOkB,IAAID,EAAKE,QAAuB,GAAGd,MAAMQ,QAAQG,GAAK,CAAC,IAAIrI,EAAI,eAAeyI,EAAIzR,EAAIoR,GAAGC,EAAIrI,GAAQsI,EAAKE,QAASC,EAAI,IAAIzR,EAAI0oB,YAAYrX,EAAIK,OAAO,CAAC1I,KAAYyI,GAAK,IAAIzR,EAAI0oB,YAAYrX,EAAItR,MAAM,EAAE0R,GAAKC,OAAOL,EAAItR,MAAM0R,EAAI,UAAWzR,EAAI0oB,YAAYnX,MAASnR,EAAG,QAAQ,CAACE,MAAM,CAAC,IAAM,iBAAiB,CAACN,EAAIc,GAAG,uCAAuCV,EAAG,MAAM,CAACI,YAAY,eAAe,CAACJ,EAAG,QAAQ,CAAC8P,WAAW,CAAC,CAAC3R,KAAK,QAAQ4R,QAAQ,UAAUnR,MAAOgB,EAAe,YAAEkJ,WAAW,gBAAgB5I,MAAM,CAAC,KAAO,WAAW,KAAO,WAAW,GAAK,WAAW,MAAQ,YAAY8P,SAAS,CAAC,QAAUM,MAAMQ,QAAQlR,EAAI0oB,aAAa1oB,EAAIoR,GAAGpR,EAAI0oB,YAAY,aAAa,EAAG1oB,EAAe,aAAGgB,GAAG,CAAC,OAAS,SAASuC,GAAQ,IAAI8N,EAAIrR,EAAI0oB,YAAYpX,EAAK/N,EAAO8M,OAAOkB,IAAID,EAAKE,QAAuB,GAAGd,MAAMQ,QAAQG,GAAK,CAAC,IAAIrI,EAAI,WAAWyI,EAAIzR,EAAIoR,GAAGC,EAAIrI,GAAQsI,EAAKE,QAASC,EAAI,IAAIzR,EAAI0oB,YAAYrX,EAAIK,OAAO,CAAC1I,KAAYyI,GAAK,IAAIzR,EAAI0oB,YAAYrX,EAAItR,MAAM,EAAE0R,GAAKC,OAAOL,EAAItR,MAAM0R,EAAI,UAAWzR,EAAI0oB,YAAYnX,MAASnR,EAAG,QAAQ,CAACE,MAAM,CAAC,IAAM,aAAa,CAACN,EAAIc,GAAG,gCAAgCV,EAAG,MAAM,CAACI,YAAY,WAAW,CAACJ,EAAG,SAAS,CAACY,GAAG,CAAC,MAAQhB,EAAI2oB,OAAO,CAAC3oB,EAAIc,GAAG,cAAcV,EAAG,SAAS,CAAC4O,MAAM,CAAE4J,YAAa5Y,EAAI4Y,YAAaL,UAAWvY,EAAI4Y,aAAc5X,GAAG,CAAC,MAAQhB,EAAIwW,WAAW,CAACxW,EAAIc,GAAG,6BACvzI,GAAkB,GCmNtB,I,oBAAA,CACE,KAAM,0DACN8nB,EAAG,sFACHC,EAAG,8GACHC,EAAG,mDACHC,EAAG,uDAGL,IACExqB,KAAM,sBACNmH,WAAY,GACZvJ,KAAM,WACJ,MAAO,CACLwqB,OAAQ,KACR+B,YAAa,GACblC,SAAUA,GACVtc,SAAS,EACTuc,cAAe,EACfzO,MAAO,GACP0G,YAAa,EACbD,WAAY,EACZtT,UAAW,KACX6d,gBAAiB,GACjBlc,YAAa,CACXmc,YAAY,EACZzB,WAAW,EACX0B,YAAa,GACbC,eAAgB,GAChBf,YAAa,CAArB,UAEME,cAAe,CACb1G,MAAO,CACL7G,EAAG,GACHC,EAAG,IAEL6G,IAAK,CAEH9G,EAAG,IACHC,EAAG,KAELoO,iBAAkB,MAEpBC,YAAa,GACblB,OAAQ,CAAd,SACMmB,aAAc,EACdC,WAAY,GACZC,eAAgB,EAChBC,aAAc,GACdC,gBAAiB,KAGrB1kB,SAAU,CACRmiB,aAAc,WAAlB,WACM,OAAIlnB,KAAK6M,YAAYoc,YAAYvsB,OAAS,EACjC,GAEF4iB,GACb,8CAAQ,OACR,0BAEA,IAGIiI,UAAW,WACT,OAAOvnB,KAAK6M,YAAY0a,WAE1BmC,aAAc,WAAlB,WACM,OAAO/sB,OAAO+G,KAAK1D,KAAK+X,OAC9B,oBAAQ,OAAR,sBACA,iBAAQ,OAAR,eAEI4R,eAAgB,WACd,OAA6B,IAAtB3pB,KAAKwmB,cAA4C,IAAtBxmB,KAAKwmB,cAEzCoD,iBAAkB,WAChB,OAA6B,IAAtB5pB,KAAKwmB,cAA4C,IAAtBxmB,KAAKwmB,cAEzC7N,YAAa,WACX,OAA6B,IAAtB3Y,KAAKwmB,cAEdqD,eAAgB,WACd,OAA6B,IAAtB7pB,KAAKwmB,cAEdsD,sBAAuB,WACrB,OAA8B,IAAvB9pB,KAAKwmB,cAEdI,wBAAyB,WACvB,QAAS5mB,KAAKqoB,cAAcc,mBAGhCjkB,QAAS,CACP6kB,QAAS,SAAb,KACM,IAAK,IAAX,gDACQ,GAAIC,EAAWC,GAAQvmB,KAAKwmB,WAAU,SAA9C,sBACU,OAAO,EAGX,OAAO,GAETC,MAAO,WACLnqB,KAAKyoB,YAAc,GACnBzoB,KAAKwmB,cAAgB,EACrBxmB,KAAK+X,MAAQ,GACb/X,KAAK6M,YAAc,CACjBmc,YAAY,EACZzB,WAAW,EACX0B,YAAa,GACbC,eAAgB,GAChBf,YAAa,CAArB,UAEMnoB,KAAKqoB,cAAgB,CACnB1G,MAAO,CACL7G,EAAG,GACHC,EAAG,IAEL6G,IAAK,CACH9G,EAAG,GACHC,EAAG,IAELoO,iBAAkB,MAEpBnpB,KAAKopB,YAAc,GACnBppB,KAAKkoB,OAAS,CAApB,SACMloB,KAAKqpB,aAAe,EACpBrpB,KAAKspB,WAAa,GAClBtpB,KAAKupB,eAAiB,EACtBvpB,KAAKwpB,aAAe,GACpBxpB,KAAKypB,gBAAkB,IAEzBlT,SAAU,WAAd,WACM,IAAKvW,KAAK2Y,YACR,OAAO,KAET,GAAgC,IAA5B3Y,KAAKyoB,YAAY/rB,OAEnB,OADA0tB,MAAM,uDACC,KAET,GAAIpqB,KAAKyoB,YAAY/rB,OAAS,EAI5B,OAHA0tB,MACR,0EAEe,KAGT,IAAN,KACA,KACA,KAEMztB,OAAO+G,KAAK1D,KAAKspB,YAAY1a,KAAI,SAAvC,GACQ,EAAR,wCACUyb,EAAO3nB,MAAM,KAAKyB,SAAQ,SAApC,QACiC8G,IAAjBqf,EAAMC,GACRD,EAAMC,GAAS,CAACzC,GAEhBwC,EAAMC,GAAS,GAA7B,uCAEwCtf,IAAxBuf,EAAaD,KACfC,EAAaD,GAASF,YAM9B1tB,OAAO+G,KAAK1D,KAAKwpB,cAAc5a,KAAI,SAAzC,GACQ,EAAR,0CACUyb,EAAO3nB,MAAM,KAAKyB,SAAQ,SAApC,QACmC8G,IAAnBwf,EAAQF,GACVE,EAAQF,GAAS,CAACtC,GAElBwC,EAAQF,GAAS,GAA/B,uCAEwCtf,IAAxBuf,EAAaD,KACfC,EAAaD,GAASF,YAM9B,IAAN,KAEMrqB,KAAKge,gBAAgB7Z,SAAQ,SAAnC,GACQ,IACR,EACA,EAFA,8BAIUumB,OADiBzf,IAAfqf,EAAMjrB,GACE,GAEAirB,EAAMjrB,GAGhBsrB,OADmB1f,IAAjBwf,EAAQprB,GACE,GAEAorB,EAAQprB,GAGtBqF,EAAIrF,GAAO,OAAnB,OAAmB,CAAnB,kBACA,GADA,IAEUurB,UAAWF,EACXG,aAAcF,EACdG,QAASN,EAAanrB,IAAQ,UAIlC,EAAN,qEAEA,yCACA,eADA,8BACA,gBACQ,gBAAR,EACQ,KAAR,mBACQ,YAAR,yBAKMW,KAAK0oB,QAEPvI,UAAW,SAAf,GACM,OAAO,GAAb,IAEIuI,KAAM,WAAV,4JACA,qDAEA,8DAHA,gBAIA,eAJA,yBAKA,gCALA,gCAMA,eANA,cAQA,OAEA,2CACA,iDAXA,UAeA,oDAfA,wBAcA,EAdA,EAcA,eAEA,0CAEA,YACA,oBACA,uBACA,sBAEA,kBAEA,aACA,oCA1BA,kBA4BA,MA5BA,sGAAU,GA8BNqC,QAAS,WAAb,4JACA,gBADA,SAIA,QACA,4FALA,gBAGA,EAHA,EAGA,cAKA,+CACA,sBADA,gBAEA,+CACA,OACA,oEACA,+EACA,WACA,YACA,UAHA,SAIA,kBAKA,gBAtBA,qGAAa,GAwBTtD,UAAW,SAAf,KACM,IAAKznB,KAAK6M,YAAY0a,UAAW,CAC/B,IAAR,+CAEQvnB,KAAK6M,YAAYqc,eAAiB,OAA1C,OAA0C,CAA1C,kBACA,iCADA,sBAEA,EAFA,gBAGA,uDAAU,OAAV,cAKIvB,UAAW,SAAf,cACW3nB,KAAK6M,YAAY0a,mBACbvnB,KAAK6M,YAAYqc,eAAe9H,GACvCphB,KAAK6M,YAAYqc,eAAiB,OAA1C,OAA0C,CAA1C,GACA,iCAGQvsB,OAAO+G,KAAK1D,KAAK6M,YAAYqc,gBAAgB/kB,SAAQ,SAA7D,GACU,IAAV,6CACA,YAAY,OAAZ,SAEcuI,GAAS,IACX,EAAZ,4DACA,8BADA,sBAEA,EAFA,0BAGA,4CAHA,gBAIA,qDAOI+Z,MAAO,SAAX,iBACWzmB,KAAK6M,YAAY0a,WAAayD,GAEjChrB,KAAK6M,YAAY0a,WAAY,EAC7BvnB,KAAK6M,YAAYoc,YAAc,CAAC+B,GAChChrB,KAAK6M,YAAYsb,YAAc,GAAvC,sBACQnoB,KAAKkoB,OAAOpN,EAAIpF,EAAMuV,QACtBjrB,KAAKkoB,OAAOnN,EAAIrF,EAAMwV,SAC9B,6BACQlrB,KAAK6M,YAAYmc,YAAa,EAG9BhpB,KAAK6M,YAAY0a,WAAY,EAK7BvnB,KAAK6M,YAAYoc,YAAY9kB,SAAQ,SAA7C,QACA,IAAc,EAAd,gCACY,EAAZ,qCAKQnE,KAAK6M,YAAYoc,YAAY9kB,SAAQ,SAA7C,KACU,GAAIuI,EAAQ,EAAG,CACb,IAAZ,iCACA,+CAGA,kDAAc,OAAd,UAEc,EAAd,0CAIQ1M,KAAK6M,YAAYoc,YAAc,KAGnCpC,OAAQ,SAAZ,GACU7mB,KAAK6M,YAAY0a,YACnBvnB,KAAKkoB,OAAOpN,EAAIpF,EAAMuV,QACtBjrB,KAAKkoB,OAAOnN,EAAIrF,EAAMwV,UAG9B,uBACA,8CAEQlrB,KAAKqoB,cAAczG,IAAI9G,EAAIpF,EAAMuV,QACjCjrB,KAAKqoB,cAAczG,IAAI7G,EAAIrF,EAAMwV,UAGzC,uBACA,gDAEQlrB,KAAKqoB,cAAc1G,MAAM7G,EAAIpF,EAAMuV,QACnCjrB,KAAKqoB,cAAc1G,MAAM5G,EAAIrF,EAAMwV,UAGvCnE,aAAc,WAAlB,WACM/mB,KAAKqoB,cAAcc,iBAAmB,KAEtCxsB,OAAO+G,KAAK1D,KAAK+X,OAAO5T,SAAQ,SAAtC,GACQ,EAAR,sBACA,wBACA,wBACA,sBACA,sBACA,uBAIImkB,mBAAoB,WAClBtoB,KAAKqoB,cAAcc,iBAAmB,SAExCZ,iBAAkB,WAChBvoB,KAAKqoB,cAAcc,iBAAmB,OAExClC,UAAW,SAAf,GACM,IAAKjnB,KAAK6M,YAAY0a,UACpB,OAAO,KAET,GACN,6BACA,yCACA,GAGQ,GAAIvnB,KAAK6M,YAAYoc,YAAYvsB,OAAS,EAAG,CAC3CsD,KAAK6M,YAAYoc,YAAYkC,MAC7B,IAAV,+BACA,uCAEUnrB,KAAK6M,YAAYsb,YAAc,GACzC,4BAGA,iEACQnoB,KAAK6M,YAAYoc,YAAYjsB,KAAKguB,GAClChrB,KAAK6M,YAAYsb,YAAc,GAAvC,wBAGI1P,SAAU,WAAd,WAQM,GAPAzY,KAAKymB,SACsB,IAAvBzmB,KAAKwmB,eACP7pB,OAAO+G,KAAK1D,KAAK+X,OAAO5T,SAAQ,SAAxC,GACU,EAAV,yCAEQnE,KAAKwmB,aAAe,GAG5B,uBACA,mDAMQxmB,KAAKopB,YAAc,GAC3B,gCACA,YAEqD,IAAzCzsB,OAAO+G,KAAK1D,KAAKopB,aAAa1sB,SAChCC,OAAO+G,KAAK1D,KAAK+X,OAAO5T,SAAQ,SAA1C,GACY,EAAZ,+BACA,8BACA,eAEUnE,KAAK6M,YAAY0a,WAAY,EAC7BvnB,KAAK6M,YAAYoc,YAAc,GAC/BjpB,KAAK6M,YAAYsb,YAAc,CAAzC,SACUnoB,KAAK6M,YAAYmc,YAAa,EAC9BhpB,KAAKwmB,aAAe,QAE9B,yBAGQxmB,KAAKypB,gBAAkB,OAA/B,OAA+B,CAA/B,oCAEQzpB,KAAK+X,MAAQ,OAArB,OAAqB,CAArB,qBACQ/X,KAAKopB,YAAc,GAEnBppB,KAAK6M,YAAYqc,eAAiB,GAClClpB,KAAKspB,WAAa,GAClBtpB,KAAKqpB,aAAe,EAEpBrpB,KAAKwmB,aAAe,OAE5B,yBACQ,GAA4D,IAAxD7pB,OAAO+G,KAAK1D,KAAK6M,YAAYqc,gBAAgBxsB,OAEzD,mCACA,YAAY,OAAZ,6BACA,GAEYsD,KAAKwmB,aAAe,EAEpBxmB,KAAKupB,eAAiB,EACtBvpB,KAAKwpB,aAAe,GAEpB7sB,OAAO+G,KAAK1D,KAAKspB,YAAYnlB,SAAQ,SAAjD,UACA,0CACgB,EAAhB,2BAIYimB,MACZ,+EAGA,CACU,IAAV,uDACA,cAAY,MAAZ,0BACA,GADA,gBAEA,sBAEA,IAGA,+CACUpqB,KAAKspB,WAAWtpB,KAAKqpB,cAAgB,CACnC3lB,KAAM,OAAlB,QAAkB,CAAlB,GACY8c,KAAMlB,GAAY,GAA9B,OACYyI,OAAQ,GAApB,IAGU/nB,KAAKqpB,cAAgB,EACrBrpB,KAAK6M,YAAYqc,eAAiB,QAE5C,yBACQ,GAA4D,IAAxDvsB,OAAO+G,KAAK1D,KAAK6M,YAAYqc,gBAAgBxsB,OAEzD,mCACA,YAAY,OAAZ,+BACA,EAEYsD,KAAKwmB,aAAe,EAEpB4D,MACZ,iFAGA,CACU,IAAV,uDACA,cAAY,MAAZ,0BACA,GADA,gBAEA,sBAEA,IAEUpqB,KAAKwpB,aAAaxpB,KAAKupB,gBAAkB,CACvC7lB,KAAM,OAAlB,QAAkB,CAAlB,8CACY8c,KAAMlB,GAAY,GAA9B,OACYyI,OAAQ,GAApB,IAGU/nB,KAAKupB,gBAAkB,EACvBvpB,KAAK6M,YAAYqc,eAAiB,KAIxCV,aAAc,WAAlB,WACMxoB,KAAKymB,QACqB,IAAtBzmB,KAAKwmB,cACP7pB,OAAO+G,KAAK1D,KAAK+X,OAAO5T,SAAQ,SAAxC,GACU,EAAV,uBAEQnE,KAAK+mB,eACL/mB,KAAK6M,YAAYqc,eAAiB,GAClClpB,KAAK6M,YAAY0a,WAAY,EAC7BvnB,KAAK6M,YAAYoc,YAAc,GAC/BjpB,KAAK6M,YAAYsb,YAAc,CAAvC,SACQnoB,KAAK6M,YAAYmc,YAAa,EAC9BhpB,KAAKwmB,cAAgB,GAC7B,uBACQxmB,KAAKwmB,aAAe,EAGpBxmB,KAAK6M,YAAYqc,eAAiB,GAClClpB,KAAK6M,YAAY0a,WAAY,EAC7BvnB,KAAK6M,YAAYoc,YAAc,GAC/BjpB,KAAK6M,YAAYsb,YAAc,CAAvC,SACQnoB,KAAK6M,YAAYmc,YAAa,EAG9BhpB,KAAKopB,YAAc,GACnBzsB,OAAO+G,KAAK1D,KAAK+X,OAAO5T,SAAQ,SAAxC,GACU,EAAV,yBAEA,sBACYxH,OAAO+G,KAAK1D,KAAK6M,YAAYqc,gBAAgBxsB,OAAS,EAExDsD,KAAK6M,YAAYqc,eAAiB,GAC5C,qBAEUlpB,KAAKqpB,cAAgB,SAEdrpB,KAAKspB,WAAWtpB,KAAKqpB,gBAI5BrpB,KAAKspB,WAAa,GAClBtpB,KAAKqpB,aAAe,EACpBrpB,KAAKwmB,aAAe,EAEpBxmB,KAAK6M,YAAYqc,eAAiB,OAA5C,OAA4C,CAA5C,yBAGUlpB,KAAK+X,MAAQuI,GAAStgB,KAAKge,iBAE3BrhB,OAAO+G,KAAK1D,KAAK+X,OAAO5T,SAAQ,SAA1C,GACY,EAAZ,oBACA,wBACA,wBACA,sBACA,sBACA,sBAKUxH,OAAO+G,KAAK1D,KAAK+X,OAAO5T,SAAQ,SAA1C,GACY,EAAZ,+BACA,8BACA,eAIUnE,KAAKopB,YAAc,GAC7B,gCACA,YAIUppB,KAAK6M,YAAY0a,WAAY,EAC7BvnB,KAAK6M,YAAYoc,YAAc,GAC/BjpB,KAAK6M,YAAYsb,YAAc,CAAzC,SACUnoB,KAAK6M,YAAYmc,YAAa,GAExC,sBACYrsB,OAAO+G,KAAK1D,KAAK6M,YAAYqc,gBAAgBxsB,OAAS,EAExDsD,KAAK6M,YAAYqc,eAAiB,GAC5C,uBAEUlpB,KAAKupB,gBAAkB,SAEhBvpB,KAAKwpB,aAAaxpB,KAAKupB,kBAI9BvpB,KAAKwpB,aAAe,GACpBxpB,KAAKupB,eAAiB,EACtBvpB,KAAKwmB,aAAe,EAEpBxmB,KAAK6M,YAAYqc,eAAiB,GAGlClpB,KAAK6M,YAAY0a,WAAY,EAC7BvnB,KAAK6M,YAAYoc,YAAc,GAC/BjpB,KAAK6M,YAAYsb,YAAc,CAAzC,SACUnoB,KAAK6M,YAAYmc,YAAa,GAExC,wBACQhpB,KAAKwmB,aAAe,KAI1B3hB,MAAO,CACLmZ,gBAAiB,SAArB,GACMhe,KAAK+X,MAAQuI,GAAS8K,KAG1BziB,QAAS,WAAX,gKACA,OADA,SAGA,eAHA,cAKA,2CACA,iDANA,SAUA,oDAVA,gBASA,EATA,EASA,eAEA,0CAEA,YACA,oBACA,uBACA,sBAEA,kBAEA,oCAEA,6CACA,4BACA,sBACA,0BACA,0BACA,kCA3BA,sGAAW,IC91B8U,MCQrV,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,OAIa,M,QCnBX,GAAS,WAAa,IAAI5I,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACI,YAAY,+BAA+B,CAACJ,EAAG,MAAM,CAACI,YAAY,oBAAoB,CAACJ,EAAG,KAAK,CAACJ,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,yBAAyBtD,EAAG,OAAO,CAACI,YAAY,UAAUQ,GAAG,CAAC,OAAS,SAASuC,GAAgC,OAAxBA,EAAO+nB,iBAAwBtrB,EAAIurB,SAASjuB,MAAM,KAAMmG,cAAc,CAACrD,EAAG,MAAM,CAACI,YAAY,SAAS,CAACJ,EAAG,MAAM,CAACI,YAAY,2BAA2B,CAACJ,EAAG,MAAM,CAACI,YAAY,YAAY,CAACR,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,yBAAyBtD,EAAG,SAAS,CAAC8P,WAAW,CAAC,CAAC3R,KAAK,QAAQ4R,QAAQ,UAAUnR,MAAOgB,EAAgB,aAAEkJ,WAAW,iBAAiB1I,YAAY,oBAAoBQ,GAAG,CAAC,OAAS,SAASuC,GAAQ,IAAIkN,EAAgBC,MAAM7T,UAAU+I,OAAO7I,KAAKwG,EAAO8M,OAAOM,SAAQ,SAASlS,GAAG,OAAOA,EAAEmS,YAAW/B,KAAI,SAASpQ,GAAG,IAAIoS,EAAM,WAAYpS,EAAIA,EAAEqS,OAASrS,EAAEO,MAAM,OAAO6R,KAAO7Q,EAAIwrB,aAAajoB,EAAO8M,OAAOU,SAAWN,EAAgBA,EAAc,MAAMzQ,EAAIS,GAAIT,EAAS,OAAE,SAASuC,EAAK9F,GAAG,OAAO2D,EAAG,SAAS,CAACd,IAAK,OAAS7C,EAAG2T,SAAS,CAAC,MAAQ7N,IAAO,CAACvC,EAAIc,GAAG,IAAId,EAAIe,GAAGwB,EAAKkpB,eAAe,UAAS,OAAOrrB,EAAG,SAAS,CAACI,YAAY,qBAAqB,CAACR,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,4BACrqC,GAAkB,G,wTCwBP,IACbgoB,MACAC,MACAC,MACAC,MACAC,MACAC,MACAC,MACAC,MACAC,MACAC,MACAC,MACAC,MACAC,MACAle,MACAme,MACAC,MACAC,MACAC,MACAC,MACAC,MACAC,MACAC,MACAC,MACAC,OCpBF,IACEzuB,KAAM,eACNsG,MAAO,GAEP1I,KAAM,WACJ,MAAO,CACLqvB,aAAcvrB,KAAKgtB,MAAMC,OACzBC,MAAOvwB,OAAO+G,KAAK,MAIvBwB,QAAS,CACPomB,SAAU,WACRtrB,KAAKgtB,MAAMC,OAASjtB,KAAKurB,aACzBnqB,EAAcU,OAAO,OAAQ9B,KAAKgtB,MAAMC,WC3CwS,MCOlV,GAAY,eACd,GACA,GACA,IACA,EACA,KACA,KACA,MAIa,M,QClBX,GAAS,WAAa,IAAIltB,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACI,YAAY,gBAAgB,CAACJ,EAAG,MAAM,CAACA,EAAG,KAAK,CAACJ,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,yBAAyBtD,EAAG,OAAO,CAACI,YAAY,qBAAqB,CAACJ,EAAG,MAAM,CAACI,YAAY,cAAc,CAACJ,EAAG,MAAM,CAACI,YAAY,SAAS,CAACJ,EAAG,QAAQ,CAACJ,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,wBAAwBtD,EAAG,QAAQ,CAAC8P,WAAW,CAAC,CAAC3R,KAAK,QAAQ4R,QAAQ,UAAUnR,MAAOgB,EAAiB,cAAEkJ,WAAW,kBAAkB5I,MAAM,CAAC,YAAcN,EAAI0D,GAAG,iCAAiC0M,SAAS,CAAC,MAASpQ,EAAiB,eAAGgB,GAAG,CAAC,MAAQ,SAASuC,GAAWA,EAAO8M,OAAOC,YAAqBtQ,EAAIotB,cAAc7pB,EAAO8M,OAAOrR,aAAYoB,EAAG,MAAM,CAACI,YAAY,SAAS,CAACJ,EAAG,QAAQ,CAACJ,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,0BAA0BtD,EAAG,QAAQ,CAAC8P,WAAW,CAAC,CAAC3R,KAAK,QAAQ4R,QAAQ,UAAUnR,MAAOgB,EAAkB,eAAEkJ,WAAW,mBAAmB5I,MAAM,CAAC,KAAO,OAAO,YAAcN,EAAI0D,GAAG,+BAA+B0M,SAAS,CAAC,MAASpQ,EAAkB,gBAAGgB,GAAG,CAAC,MAAQ,SAASuC,GAAWA,EAAO8M,OAAOC,YAAqBtQ,EAAIqtB,eAAe9pB,EAAO8M,OAAOrR,eAAcoB,EAAG,MAAM,CAACI,YAAY,cAAc,CAACJ,EAAG,MAAM,CAACI,YAAY,SAAS,CAACJ,EAAG,QAAQ,CAACJ,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,qBAAqBtD,EAAG,SAAS,CAAC8P,WAAW,CAAC,CAAC3R,KAAK,QAAQ4R,QAAQ,UAAUnR,MAAOgB,EAAqB,kBAAEkJ,WAAW,sBAAsB1I,YAAY,qBAAqBQ,GAAG,CAAC,OAAS,SAASuC,GAAQ,IAAIkN,EAAgBC,MAAM7T,UAAU+I,OAAO7I,KAAKwG,EAAO8M,OAAOM,SAAQ,SAASlS,GAAG,OAAOA,EAAEmS,YAAW/B,KAAI,SAASpQ,GAAG,IAAIoS,EAAM,WAAYpS,EAAIA,EAAEqS,OAASrS,EAAEO,MAAM,OAAO6R,KAAO7Q,EAAIstB,kBAAkB/pB,EAAO8M,OAAOU,SAAWN,EAAgBA,EAAc,MAAM,CAACrQ,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,KAAK,CAACN,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,oBAAoBtD,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,UAAU,CAACN,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,sBAAsBtD,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,mBAAmB,CAACN,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,+BAA+BtD,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,aAAa,CAACN,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,yBAAyBtD,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,oBAAoB,CAACN,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,gCAAgCtD,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,kBAAkB,CAACN,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,kCAAkCtD,EAAG,MAAM,CAACI,YAAY,SAAS,CAACJ,EAAG,QAAQ,CAACJ,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,0BAA0BtD,EAAG,SAAS,CAAC8P,WAAW,CAAC,CAAC3R,KAAK,QAAQ4R,QAAQ,UAAUnR,MAAOgB,EAAoB,iBAAEkJ,WAAW,qBAAqB1I,YAAY,qBAAqBQ,GAAG,CAAC,OAAS,SAASuC,GAAQ,IAAIkN,EAAgBC,MAAM7T,UAAU+I,OAAO7I,KAAKwG,EAAO8M,OAAOM,SAAQ,SAASlS,GAAG,OAAOA,EAAEmS,YAAW/B,KAAI,SAASpQ,GAAG,IAAIoS,EAAM,WAAYpS,EAAIA,EAAEqS,OAASrS,EAAEO,MAAM,OAAO6R,KAAO7Q,EAAIutB,iBAAiBhqB,EAAO8M,OAAOU,SAAWN,EAAgBA,EAAc,MAAM,CAACrQ,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,KAAK,CAACN,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,oBAAoBtD,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,OAAO,CAACN,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,wBAAwBtD,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,MAAM,CAACN,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,yBAAyBtD,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,MAAM,CAACN,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,yBAAyBtD,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,kBAAkB,CAACN,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,oCAAoCtD,EAAG,QAAQ,CAACI,YAAY,2BAA2BF,MAAM,CAAC,KAAO,UAAU8P,SAAS,CAAC,MAAQpQ,EAAI0D,GAAG,oBAAoB1C,GAAG,CAAC,MAAQ,SAASuC,GAAgC,OAAxBA,EAAO+nB,iBAAwBtrB,EAAIwtB,aAAalwB,MAAM,KAAMmG,iBAAiBrD,EAAG,MAAM,CAACI,YAAY,eAAiBR,EAAIkK,QAAmHlK,EAAIY,KAA9GR,EAAG,IAAI,CAACA,EAAG,SAAS,CAACJ,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,sBAAsB1D,EAAIc,GAAG,IAAId,EAAIe,GAAGf,EAAIytB,aAAa,SAAkBrtB,EAAG,iBAAiB,CAACE,MAAM,CAAC,KAAON,EAAIkK,WAAalK,EAAIkK,QAAm6FlK,EAAIY,KAA95FR,EAAG,QAAQ,CAACI,YAAY,mBAAmB,CAACJ,EAAG,QAAQ,CAACI,YAAY,iBAAiB,CAACJ,EAAG,KAAK,CAACA,EAAG,KAAK,CAACJ,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,wBAAwBtD,EAAG,KAAK,CAACJ,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,mBAAmBtD,EAAG,KAAK,CAACJ,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,qBAAqBtD,EAAG,KAAK,CAACJ,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,sBAAsBtD,EAAG,KAAK,CAACJ,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,2BAA2BtD,EAAG,KAAK,CAACJ,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,6BAA6BtD,EAAG,KAAK,CAACJ,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,2BAA2BtD,EAAG,KAAK,CAACJ,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,8BAA8BtD,EAAG,QAAQJ,EAAIS,GAAIT,EAAY,UAAE,SAAS0tB,GAAS,OAAOttB,EAAG,KAAK,CAACd,IAAIouB,EAAQtf,IAAI,CAAChO,EAAG,KAAK,CAACE,MAAM,CAAC,aAAa,YAAY,CAACF,EAAG,OAAO,CAACI,YAAY,2BAA2B,CAACR,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,qBAAqB,OAAOtD,EAAG,IAAI,CAACE,MAAM,CAAC,KAAO,KAAKU,GAAG,CAAC,MAAQ,SAASuC,GAAQ,OAAOvD,EAAI2tB,cAAcD,EAAQvmB,YAAY,CAACnH,EAAIc,GAAGd,EAAIe,GAAG2sB,EAAQvmB,YAAY/G,EAAG,IAAI,CAACE,MAAM,CAAC,OAAS,SAAS,KAAON,EAAIoH,cAAcsmB,EAAQvmB,WAAW,CAAC/G,EAAG,IAAI,CAACI,YAAY,+BAA+BJ,EAAG,IAAI,CAACE,MAAM,CAAC,OAAS,SAAS,KAAON,EAAIqH,kBAAkBqmB,EAAQvmB,WAAW,CAAC/G,EAAG,IAAI,CAACI,YAAY,kCAAkCJ,EAAG,KAAK,CAACE,MAAM,CAAC,aAAa,OAAO,CAACF,EAAG,OAAO,CAACI,YAAY,2BAA2B,CAACR,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,gBAAgB,OAAO1D,EAAIc,GAAGd,EAAIe,GAAG2sB,EAAQtf,IAAI,OAAOhO,EAAG,KAAK,CAACE,MAAM,CAAC,aAAa,SAAS,CAACF,EAAG,OAAO,CAACI,YAAY,2BAA2B,CAACR,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,kBAAkB,OAAO1D,EAAIc,GAAGd,EAAIe,GAAG2sB,EAAQphB,MAAM,OAAOlM,EAAG,KAAK,CAACE,MAAM,CAAC,aAAa,UAAU,CAACF,EAAG,OAAO,CAACI,YAAY,2BAA2B,CAACR,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,mBAAmB,OAAO1D,EAAIc,GAAGd,EAAIe,GAAG2sB,EAAQ1uB,OAAS0uB,EAAQxhB,WAAW,KAAMlM,EAAI4tB,eAAeF,EAAQphB,KAAMohB,EAAQxhB,WAAY9L,EAAG,IAAI,CAACE,MAAM,CAAC,OAAS,SAAS,KAAON,EAAI4tB,eAAeF,EAAQphB,KAAMohB,EAAQxhB,aAAa,CAAC9L,EAAG,IAAI,CAACI,YAAY,8CAA8CR,EAAIY,OAAOR,EAAG,KAAK,CAACE,MAAM,CAAC,aAAa,eAAe,CAACF,EAAG,OAAO,CAACI,YAAY,2BAA2B,CAACR,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,wBAAwB,OAAO1D,EAAIc,GAAGd,EAAIe,GAAGf,EAAI6tB,eAAeH,EAAQI,YAAY,OAAO1tB,EAAG,KAAK,CAACE,MAAM,CAAC,aAAa,iBAAiB,CAACF,EAAG,OAAO,CAACI,YAAY,2BAA2B,CAACR,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,0BAA0B,OAAO1D,EAAIc,GAAGd,EAAIe,GAAGf,EAAI6tB,eAAeH,EAAQK,eAAe,OAAO3tB,EAAG,KAAK,CAACE,MAAM,CAAC,aAAa,eAAe,CAACF,EAAG,OAAO,CAACI,YAAY,2BAA2B,CAACR,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,wBAAwB,OAA8B,GAAtBgqB,EAAQtiB,WAAiBhL,EAAG,IAAI,CAACI,YAAY,+BAAsD,GAAtBktB,EAAQtiB,WAAiBhL,EAAG,IAAI,CAACI,YAAY,0BAAiD,GAAvBktB,EAAQtiB,WAAkBhL,EAAG,IAAI,CAACI,YAAY,6BAA6BR,EAAIY,OAAOR,EAAG,KAAK,CAACE,MAAM,CAAC,aAAa,cAAc,CAACF,EAAG,OAAO,CAACI,YAAY,2BAA2B,CAACR,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,uBAAuB,OAAQgqB,EAA4B,qBAAEttB,EAAG,IAAI,CAACI,YAAY,+BAA+BR,EAAIY,YAAW,KAAeZ,EAAe,YAAEI,EAAG,MAAM,CAACA,EAAG,aAAa,CAACE,MAAM,CAAC,aAAaN,EAAIguB,WAAWhtB,GAAG,CAAC,OAAShB,EAAIiuB,aAAanlB,MAAM,CAAC9J,MAAOgB,EAAe,YAAE+I,SAAS,SAAUC,GAAMhJ,EAAIkuB,YAAYllB,GAAKE,WAAW,kBAAkB,GAAGlJ,EAAIY,MAAM,IAC1sN,GAAkB,GCDlB,GAAS,WAAa,IAAIZ,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,KAAK,CAACI,YAAY,cAAc,CAAER,EAAImuB,iBAAsB,MAAE/tB,EAAG,KAAK,CAACI,YAAY,iCAAiC,CAACJ,EAAG,SAAS,CAACI,YAAY,oBAAoBF,MAAM,CAAC,SAAWN,EAAIouB,UAAUhe,SAAS,CAAC,UAAYpQ,EAAIe,GAAGf,EAAImuB,iBAAiBE,QAAQrtB,GAAG,CAAC,MAAQhB,EAAIquB,WAAWruB,EAAIY,KAAMZ,EAAImuB,iBAAqB,KAAE/tB,EAAG,KAAK,CAACI,YAAY,iCAAiC,CAACJ,EAAG,SAAS,CAACI,YAAY,oBAAoBF,MAAM,CAAC,SAAWN,EAAIouB,UAAUhe,SAAS,CAAC,UAAYpQ,EAAIe,GAAGf,EAAImuB,iBAAiB3qB,OAAOxC,GAAG,CAAC,MAAQhB,EAAIwD,UAAUxD,EAAIY,KAAKZ,EAAIS,GAAIT,EAAS,OAAE,SAASgI,GAAM,OAAO5H,EAAG,KAAK,CAACd,IAAI0I,EAAKnH,MAAML,YAAY,mBAAmB,CAAEwH,EAAY,QAAE5H,EAAG,OAAO,CAACJ,EAAIc,GAAG,SAASV,EAAG,SAAS,CAACI,YAAY,oBAAoBwO,MAAahH,EAAKsmB,OAAS,UAAY,GAAKttB,GAAG,CAAC,MAAQ,SAASuC,GAAQ,OAAOvD,EAAIuuB,KAAKvmB,EAAKnH,UAAU,CAACb,EAAIc,GAAGd,EAAIe,GAAGiH,EAAKnH,eAAeb,EAAImuB,iBAAqB,KAAE/tB,EAAG,KAAK,CAACI,YAAY,iCAAiC,CAACJ,EAAG,SAAS,CAACI,YAAY,oBAAoBF,MAAM,CAAC,SAAWN,EAAIwuB,SAASpe,SAAS,CAAC,UAAYpQ,EAAIe,GAAGf,EAAImuB,iBAAiBvqB,OAAO5C,GAAG,CAAC,MAAQhB,EAAI4D,UAAU5D,EAAIY,KAAMZ,EAAImuB,iBAAqB,KAAE/tB,EAAG,KAAK,CAACI,YAAY,iCAAiC,CAACJ,EAAG,SAAS,CAACI,YAAY,oBAAoBF,MAAM,CAAC,SAAWN,EAAIwuB,SAASpe,SAAS,CAAC,UAAYpQ,EAAIe,GAAGf,EAAImuB,iBAAiBM,OAAOztB,GAAG,CAAC,MAAQhB,EAAIyuB,UAAUzuB,EAAIY,MAAM,IACp7C,GAAkB,GCkDtB,IACEiE,MAAO,CACL7F,MAAO,CAELsN,KAAM4G,OACN7D,UAAU,GAEZ2e,UAAW,CAET1hB,KAAM4G,OACN7D,UAAU,GAEZqf,OAAQ,CACNpiB,KAAM1P,OACNyS,UAAU,EACVC,QAAS,WAAf,YAIEnT,KAnBF,WAoBI,MAAO,CACLgyB,iBAAkB,CAChBE,MAAO,UACP7qB,KAAM,WACNI,KAAM,WACN6qB,KAAM,aAKZ7lB,QA9BF,WA+BQ3I,KAAKjB,MAAQiB,KAAK+tB,WACpB/tB,KAAKmF,MAAM,QAASnF,KAAK+tB,YAI7BhpB,SAAU,CACR2pB,MADJ,WAaM,IAXA,IAAN,8BACA,EACA,sDACA,eACA,EACA,2CACA,aACA,2CAEA,KAEA,2BAEA,CACA,EACA,eACA,WACA,EACA,EACA,EACA,EACA,EACA,GACA,aAEUta,EAAOpX,KAAK,CACV4D,MAAOpE,EACP6xB,OAAQruB,KAAKjB,QAAUvC,EACvBmyB,QAAS,CAACC,EAAYC,GAAW3U,SAAS1d,KAKhD,OAAO4X,GAGT+Z,SAtCJ,WAuCM,OAAsB,IAAfnuB,KAAKjB,OAGdwvB,QA1CJ,WA2CM,OAAOvuB,KAAKjB,QAAUiB,KAAK+tB,YAI/BlpB,MAAO,CACL9F,MAAO,WACLiB,KAAKmF,MAAM,YAIfD,QAAS,CACPkpB,MADJ,WAEWpuB,KAAKmuB,UACRnuB,KAAKmF,MAAM,QAAS,IAIxB5B,KAPJ,WAQWvD,KAAKmuB,UACRnuB,KAAKmF,MAAM,QAASnF,KAAKjB,MAAQ,IAIrCuvB,KAbJ,SAaA,GACMtuB,KAAKmF,MAAM,QAAS4C,IAGtBpE,KAjBJ,WAkBW3D,KAAKuuB,SACRvuB,KAAKmF,MAAM,QAASnF,KAAKjB,MAAQ,IAIrCyvB,KAvBJ,WAwBWxuB,KAAKuuB,SACRvuB,KAAKmF,MAAM,QAASnF,KAAK+tB,cCrKmT,MCQhV,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,OAIa,M,QCuJf,IACEzvB,KAAM,kBACNmH,WAAY,CAAd,iCACEvJ,KAAM,WACJ,MAAO,CACL+xB,YAAa,EACba,SAAU,GACVC,SAAU,GACVvB,YAAa,EACbL,cAAeriB,GAAY,QAC3BuiB,kBAAmB,GACnBC,iBAAkB,GAClBF,eAAgB,GAChBnjB,SAAS,IAGblF,SAAU,CACRgpB,UAAW,WACT,GAAwB,GAApB/tB,KAAKwtB,YACP,OAAO,EAGT,IAAN,6CAIM,OAHIxtB,KAAKwtB,YAAcxtB,KAAK+uB,WAAa,IACvCjjB,GAAS,GAEJA,IAGX5G,QAAS,CACPiC,cAAe,SAAnB,GACM,OAAKgB,EAGES,EAAb,iBAFe,IAIXxB,kBAAmB,SAAvB,GACM,OAAKe,EAGES,EAAb,qBAFe,IAIX+kB,eAAgB,SAApB,KACM,OACN,GACA,0DAIa,mDAAb,kCAFe,IAIXD,cAAe,SAAnB,GACM1tB,KAAKmtB,cAAgBhlB,EACrBnI,KAAKutB,gBAEPK,eAAgB,SAApB,GACM,OAAKoB,EAGEA,EAAStsB,MAAM,KAAK,GAFlB,MAIXsrB,YAAa,WACXhuB,KAAKutB,gBAEPA,aAAc,WAAlB,WACMvtB,KAAKiK,SAAU,EACfoJ,GACN,YACA,mBACA,uBACA,oBACA,sBACA,iBACA,eAEA,kBACQ,EAAR,yBACQ,EAAR,yBACQ,EAAR,cAEA,kBACQ,EAAR,gBAIE1K,QArFF,WAsFI3I,KAAKutB,iBChQgV,MCQrV,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,KACA,OAIa,M,QCnBX,GAAS,WAAa,IAAIxtB,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACI,YAAY,gBAAgB,CAACJ,EAAG,MAAM,CAACA,EAAG,KAAK,CAACJ,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,oBAAoBtD,EAAG,MAAM,CAACI,YAAY,sBAAsBJ,EAAG,OAAO,CAACI,YAAY,UAAUQ,GAAG,CAAC,OAAS,SAASuC,GAAgC,OAAxBA,EAAO+nB,iBAAwBtrB,EAAIoC,OAAO9E,MAAM,KAAMmG,cAAc,CAACrD,EAAG,MAAM,CAACI,YAAY,gBAAgB,CAACJ,EAAG,MAAM,CAACI,YAAY,SAAS,CAACJ,EAAG,QAAQ,CAAC8P,WAAW,CAAC,CAAC3R,KAAK,QAAQ4R,QAAQ,eAAenR,MAAOgB,EAAS,MAAEkJ,WAAW,QAAQgmB,UAAU,CAAC,MAAO,KAAQ5uB,MAAM,CAAC,KAAO,OAAO,KAAO,QAAQ,YAAcN,EAAI0D,GAAG,gBAAgB0M,SAAS,CAAC,MAASpQ,EAAS,OAAGgB,GAAG,CAAC,MAAQ,SAASuC,GAAWA,EAAO8M,OAAOC,YAAqBtQ,EAAIhB,MAAMuE,EAAO8M,OAAOrR,MAAMyH,SAAQ,KAAO,SAASlD,GAAQ,OAAOvD,EAAImvB,qBAAqB/uB,EAAG,MAAM,CAACI,YAAY,SAAS,CAACJ,EAAG,QAAQ,CAAC8P,WAAW,CAAC,CAAC3R,KAAK,QAAQ4R,QAAQ,eAAenR,MAAOgB,EAAW,QAAEkJ,WAAW,UAAUgmB,UAAU,CAAC,MAAO,KAAQ5uB,MAAM,CAAC,KAAO,OAAO,KAAO,UAAU,YAAcN,EAAI0D,GAAG,kBAAkB0M,SAAS,CAAC,MAASpQ,EAAW,SAAGgB,GAAG,CAAC,MAAQ,SAASuC,GAAWA,EAAO8M,OAAOC,YAAqBtQ,EAAImH,QAAQ5D,EAAO8M,OAAOrR,MAAMyH,SAAQ,KAAO,SAASlD,GAAQ,OAAOvD,EAAImvB,qBAAqB/uB,EAAG,MAAM,CAACI,YAAY,SAAS,CAACJ,EAAG,SAAS,CAAC8P,WAAW,CAAC,CAAC3R,KAAK,QAAQ4R,QAAQ,UAAUnR,MAAOgB,EAAQ,KAAEkJ,WAAW,SAAS1I,YAAY,oBAAoBQ,GAAG,CAAC,OAAS,SAASuC,GAAQ,IAAIkN,EAAgBC,MAAM7T,UAAU+I,OAAO7I,KAAKwG,EAAO8M,OAAOM,SAAQ,SAASlS,GAAG,OAAOA,EAAEmS,YAAW/B,KAAI,SAASpQ,GAAG,IAAIoS,EAAM,WAAYpS,EAAIA,EAAEqS,OAASrS,EAAEO,MAAM,OAAO6R,KAAO7Q,EAAIsM,KAAK/I,EAAO8M,OAAOU,SAAWN,EAAgBA,EAAc,MAAM,CAACrQ,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,KAAK,CAACN,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,kBAAkBtD,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,UAAU,CAACN,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,mBAAmBtD,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,UAAU,CAACN,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,mBAAmBtD,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,kBAAkB,CAACN,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,2BAA2BtD,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,cAAc,CAACN,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,uBAAuBtD,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,YAAY,CAACN,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,qBAAqBtD,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,aAAa,CAACN,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,sBAAsBtD,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,oBAAoB,CAACN,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,6BAA6BtD,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,UAAU,CAACN,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,uBAAuBtD,EAAG,MAAM,CAACI,YAAY,SAAS,CAACJ,EAAG,QAAQ,CAAC8P,WAAW,CAAC,CAAC3R,KAAK,QAAQ4R,QAAQ,eAAenR,MAAOgB,EAAS,MAAEkJ,WAAW,QAAQgmB,UAAU,CAAC,MAAO,KAAQ5uB,MAAM,CAAC,KAAO,SAAS,KAAO,SAAS8P,SAAS,CAAC,MAASpQ,EAAS,OAAGgB,GAAG,CAAC,MAAQ,SAASuC,GAAWA,EAAO8M,OAAOC,YAAqBtQ,EAAI+L,MAAMxI,EAAO8M,OAAOrR,MAAMyH,SAAQ,KAAO,SAASlD,GAAQ,OAAOvD,EAAImvB,qBAAqB/uB,EAAG,MAAM,CAACI,YAAY,SAAS,CAACJ,EAAG,SAAS,CAACI,YAAY,oBAAoBF,MAAM,CAAC,KAAO,WAAW,CAACN,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,0BAA0BtD,EAAG,MAAM,CAACI,YAAY,sBAAsBJ,EAAG,iBAAiB,CAACE,MAAM,CAAC,KAAON,EAAIkK,YAAalK,EAAIkK,SAAWlK,EAAIkE,MAAMvH,OAAS,EAAGyD,EAAG,MAAM,CAACA,EAAG,IAAI,CAACJ,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,4BAA4B,IAAI1D,EAAIe,GAAGf,EAAIytB,gBAAgBrtB,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQN,EAAIkE,MAAM,YAAa,MAAU,GAAGlE,EAAIY,KAAOZ,EAAIkK,SAA+B,GAApBlK,EAAIkE,MAAMvH,OAA2FqD,EAAIY,KAAlFR,EAAG,MAAM,CAACA,EAAG,IAAI,CAACA,EAAG,SAAS,CAACJ,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,2BAAoC,MAC12G,GAAkB,GCDlB,GAAS,WAAa,IAAI1D,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,MAAM,CAACI,YAAY,WAAWR,EAAIS,GAAIT,EAAS,OAAE,SAASovB,GAAM,OAAOhvB,EAAG,MAAM,CAACd,IAAI8vB,EAAKhhB,GAAG5N,YAAY,4FAA4F,CAACJ,EAAG,MAAM,CAACI,YAAY,yBAAyBwO,MAAM,CAAC4B,SAAUwe,EAAKxe,SAAUnE,UAAW2iB,EAAKC,iBAAkBruB,GAAG,CAAC,MAAQ,SAASuC,GAAQ,OAAOvD,EAAIsvB,iBAAiBF,MAAS,CAAChvB,EAAG,MAAM,CAACI,YAAY,mBAAmB,CAACJ,EAAG,MAAM,CAACI,YAAY,qBAAqB,CAACJ,EAAG,cAAc,CAACE,MAAM,CAAC,GAAKN,EAAIuvB,YAAYH,GAAM,OAAS,WAAW,CAAChvB,EAAG,IAAI,CAACI,YAAY,iBAAiB,GAAGJ,EAAG,MAAM,CAACI,YAAY,sBAAsB,CAACJ,EAAG,cAAc,CAACE,MAAM,CAAC,GAAKN,EAAIwvB,gBAAgBJ,GAAM,OAAS,WAAW,CAAChvB,EAAG,IAAI,CAACI,YAAY,oCAAoC,KAAKJ,EAAG,MAAM,CAACI,YAAY,sBAAsB,CAACJ,EAAG,MAAM,CAACE,MAAM,CAAC,QAAU,OAAO,IAAM8uB,EAAKprB,MAAM4I,SAASxM,EAAG,MAAM,CAACI,YAAY,oBAAoB,CAAE4uB,EAAa,SAAEhvB,EAAG,IAAI,CAACJ,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,mBAAmB,IAAI1D,EAAIe,GAAGquB,EAAK/V,SAASoW,QAAQ,OAAOzvB,EAAIY,KAAMwuB,EAAqB,iBAAEhvB,EAAG,IAAI,CAACJ,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,qBAAqB1D,EAAIe,GAAGquB,EAAKM,kBAAkB,KAAK1vB,EAAIe,GAAGquB,EAAKC,iBAAiB,OAAQD,EAAoB,gBAAEhvB,EAAG,IAAI,CAACJ,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,qBAAqB,IAAI1D,EAAIe,GAAGquB,EAAKC,iBAAiB,OAAOrvB,EAAIY,cAAa,MACz3C,GAAkB,GC2CtB,IACErC,KAAM,eACNsG,MAAO,CACLX,MAAO,CACLoI,KAAMoE,MACNrB,UAAU,GAEZ4X,WAAY,CACV3a,KAAM8C,QACNE,SAAS,IAGbnT,KAAM,WACJ,MAAO,IAETgJ,QAAS,CACPqqB,gBAAiB,SAArB,GACM,MAAO,kBAAb,cAEID,YAAa,SAAjB,GACM,MAAO,UAAb,cAEID,iBAAkB,SAAtB,GACWrvB,KAAKgnB,aAAcmI,EAAKM,kBAC7BzvB,KAAKmF,MAAM,qBAAsBgqB,KAGrCpqB,SAAU,GACV4D,QA5BF,cC5CsV,MCQlV,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,OAIa,M,QCqCf,eAKE,OAJAwmB,EAAKprB,MAAM4I,IAAM0G,GAAnB,mBACA,oCACA,gBAES8b,GAGT,IACE7wB,KAAM,kBACNmH,WAAY,CAAd,mCACEvJ,KAAM,WACJ,MAAO,CACL+H,MAAO,GACPlF,MAAO,GACPmI,QAAS,GACTmF,KAAM,GACNmhB,YAAa,EACb1hB,MAAO,GACP7B,SAAS,IAGblF,SAAU,GACVG,QAAS,CACP/C,OAAQ,WAAZ,WACMnC,KAAKiK,SAAU,EACfoJ,GACN,0DACA,kBAAQ,IAAR,SACQ,EAAR,sBACQ,EAAR,oBACQ,EAAR,cAEA,kBACQ,EAAR,gBAIE1K,QA9BF,WA+BI3I,KAAKmC,WC/F+U,MCQpV,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,OAIa,M,QCnBX,GAAS,WAAa,IAAIpC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACI,YAAY,gBAAgB,CAACJ,EAAG,KAAK,CAACJ,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,yBAAyBtD,EAAG,iBAAiB,CAACE,MAAM,CAAC,KAA0B,GAAnBN,EAAIkE,MAAMvH,QAAcqD,EAAIkK,WAAYlK,EAAIkE,MAAMvH,OAAS,EAAGyD,EAAG,MAAM,CAACA,EAAG,OAAO,CAACI,YAAY,UAAUQ,GAAG,CAAC,OAAS,SAASuC,GAAgC,OAAxBA,EAAO+nB,iBAAwBtrB,EAAI2vB,gBAAgBryB,MAAM,KAAMmG,cAAc,CAACrD,EAAG,MAAM,CAACI,YAAY,gBAAgB,CAACJ,EAAG,MAAM,CAACI,YAAY,SAAS,CAACJ,EAAG,QAAQ,CAAC8P,WAAW,CAAC,CAAC3R,KAAK,QAAQ4R,QAAQ,eAAenR,MAAOgB,EAAc,WAAEkJ,WAAW,aAAagmB,UAAU,CAAC,MAAO,KAAQ5uB,MAAM,CAAC,KAAO,OAAO,KAAO,QAAQ,YAAcN,EAAI0D,GAAG,gBAAgB0M,SAAS,CAAC,MAASpQ,EAAc,YAAGgB,GAAG,CAAC,MAAQ,SAASuC,GAAWA,EAAO8M,OAAOC,YAAqBtQ,EAAI4vB,WAAWrsB,EAAO8M,OAAOrR,MAAMyH,SAAQ,KAAO,SAASlD,GAAQ,OAAOvD,EAAImvB,qBAAqB/uB,EAAG,MAAM,CAACI,YAAY,SAAS,CAACJ,EAAG,SAAS,CAAC8P,WAAW,CAAC,CAAC3R,KAAK,QAAQ4R,QAAQ,UAAUnR,MAAOgB,EAAa,UAAEkJ,WAAW,cAAc1I,YAAY,oBAAoBQ,GAAG,CAAC,OAAS,SAASuC,GAAQ,IAAIkN,EAAgBC,MAAM7T,UAAU+I,OAAO7I,KAAKwG,EAAO8M,OAAOM,SAAQ,SAASlS,GAAG,OAAOA,EAAEmS,YAAW/B,KAAI,SAASpQ,GAAG,IAAIoS,EAAM,WAAYpS,EAAIA,EAAEqS,OAASrS,EAAEO,MAAM,OAAO6R,KAAO7Q,EAAI6vB,UAAUtsB,EAAO8M,OAAOU,SAAWN,EAAgBA,EAAc,MAAM,CAACrQ,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,KAAK,CAACN,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,kBAAkBtD,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,UAAU,CAACN,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,mBAAmBtD,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,UAAU,CAACN,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,mBAAmBtD,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,kBAAkB,CAACN,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,2BAA2BtD,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,cAAc,CAACN,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,uBAAuBtD,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,YAAY,CAACN,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,qBAAqBtD,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,aAAa,CAACN,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,sBAAsBtD,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,oBAAoB,CAACN,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,6BAA6BtD,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,UAAU,CAACN,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,uBAAuBtD,EAAG,MAAM,CAACI,YAAY,SAAS,CAACJ,EAAG,iBAAiB,CAACE,MAAM,CAAC,KAAO,SAAS,UAAW,EAAM,KAAON,EAAIkE,MAAMvH,OAAS,GAAKqD,EAAIkK,WAAalK,EAAIkK,QAAmLlK,EAAIY,KAA9KR,EAAG,SAAS,CAACI,YAAY,oBAAoBwO,MAAM,CAAEuJ,UAAWvY,EAAI8vB,mBAAoBxvB,MAAM,CAAC,KAAO,SAAS,SAAW,MAAM,CAACN,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,qBAA8B,OAAOtD,EAAG,MAAM,CAACI,YAAY,sBAAuBR,EAAIkE,MAAMvH,OAAS,EAAGyD,EAAG,MAAM,CAACA,EAAG,MAAM,CAACA,EAAG,IAAI,CAACA,EAAG,OAAO,CAACI,YAAY,oBAAoBQ,GAAG,CAAC,MAAQ,SAASuC,GAAQ,OAAOvD,EAAI+vB,aAAY,MAAS,CAAC/vB,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,wBAAwB1D,EAAIc,GAAG,OAAOV,EAAG,OAAO,CAACI,YAAY,oBAAoBQ,GAAG,CAAC,MAAQ,SAASuC,GAAQ,OAAOvD,EAAI+vB,aAAY,MAAU,CAAC/vB,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,8BAA8BtD,EAAG,MAAM,CAACI,YAAY,sBAAuBR,EAAIgwB,cAAcrzB,OAAS,EAAGyD,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQN,EAAIgwB,eAAehvB,GAAG,CAAC,qBAAqBhB,EAAIsvB,oBAAoBtvB,EAAIY,KAAMZ,EAAIiwB,gBAAgBtzB,OAAS,EAAGyD,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQN,EAAIiwB,iBAAiBjvB,GAAG,CAAC,qBAAqBhB,EAAIsvB,oBAAoBtvB,EAAIY,MAAM,GAAGZ,EAAIY,OAAOZ,EAAIY,MAAM,IAC1qG,GAAkB,GCkEtB,eAKE,OAJAwuB,EAAKprB,MAAM4I,IAAM0G,GAAnB,mBACA,oDAEE8b,EAAKxe,UAAW,EACTwe,GAGT,eACE,IAAF,cACE,OAAoB,GAAhBrjB,EAAMpP,OAAoBuzB,EACvB/T,SAASpQ,EAAO,KAAOmkB,GAGhC,IACE3xB,KAAM,kBACNmH,WAAY,CAAd,mCACEvJ,KAAM,WACJ,MAAO,CACL+H,MAAO,GACPisB,iBAAiB,EACjBP,WAAY,GACZC,UAAW,GACXO,aAAcrlB,GAAY,WAC1BslB,SAAU,GAAhB,KACMnmB,SAAS,IAGblF,SAAU,CACR8qB,kBAAmB,WACjB,OAA0B,IAAtB7vB,KAAKiE,MAAMvH,SACe,IAA1BsD,KAAK4vB,UAAUlzB,SACe,IAA9BsD,KAAK+vB,cAAcrzB,SAE7B,6BACA,kEAKIqzB,cAAe,WACb,OAAO/vB,KAAKiE,MAAM0B,QAAO,SAA/B,6BAEIqqB,gBAAiB,WACf,OAAOhwB,KAAKiE,MAAM0B,QAAO,SAA/B,8BAGET,QAAS,CACPmrB,UAAW,WAAf,WACMrwB,KAAKiK,SAAU,EACfoJ,GACN,gEACA,kBAAQ,IAAR,SACA,YACQ,GACR,kCAAU,OAAV,cACA,kBACU,EAAV,WACU,IAAV,eACU,EAAV,QACA,iBAAY,OAAZ,gBACc,SAAd,YACA,sBAAc,OAAd,0BAEA,WAEA,kBACU,EAAV,iBAGA,kBACQ,EAAR,eAGIgc,iBAAkB,SAAtB,GACM,IAAN,OACA,uDACMnxB,EAAEyS,UAAYzS,EAAEyS,UAElB+e,gBAAiB,WAArB,WACA,gCAE6B,kBAAnB1vB,KAAK4vB,WAAoD,YAAnB5vB,KAAK4vB,YAC7C7wB,EAAQ,IAEV,IAAN,6CACA,aACA,QACA,qBAEMiB,KAAKiK,SAAU,EACfoJ,GACN,iBACA,iBACQ,EAAR,WACQ,EAAR,gBACQ,EAAR,eAEA,kBACQ,EAAR,cAEMrT,KAAK2vB,WAAa,GAClB3vB,KAAK4vB,UAAY,IAEnBE,YAAa,SAAjB,GACM9vB,KAAKiE,MAAME,SAAQ,SAAzB,GACYgrB,EAAKM,mBACTN,EAAKxe,SAAW2f,QAItB3nB,QAjGF,WAkGI3I,KAAKqwB,cCnLmV,MCQxV,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,OAIa,M,QCnBX,GAAS,WAAa,IAAItwB,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACI,YAAY,gBAAgB,CAACJ,EAAG,MAAM,CAACA,EAAG,KAAK,CAACJ,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,oBAAoBtD,EAAG,IAAI,CAACJ,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,aAAa,IAAI1D,EAAIe,GAAGf,EAAIoM,WAAWhM,EAAG,IAAI,CAACJ,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,kBAAkB,IAAI1D,EAAIe,GAAGf,EAAImH,YAAY/G,EAAG,IAAI,CAACA,EAAG,IAAI,CAACE,MAAM,CAAC,KAAON,EAAIwX,WAAW,CAACxX,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,0BAA0BtD,EAAG,MAAM,CAACE,MAAM,CAAC,MAAQ,QAAQ,IAAMN,EAAIwwB,WAAWpwB,EAAG,MAAM,CAACI,YAAY,eAAeJ,EAAG,OAAO,CAACI,YAAY,UAAUQ,GAAG,CAAC,OAAS,SAASuC,GAAgC,OAAxBA,EAAO+nB,iBAAwBtrB,EAAIqM,WAAW/O,MAAM,KAAMmG,cAAc,CAACrD,EAAG,MAAM,CAACI,YAAY,gBAAgB,CAACJ,EAAG,MAAM,CAACI,YAAY,SAAS,CAACJ,EAAG,QAAQ,CAAC8P,WAAW,CAAC,CAAC3R,KAAK,QAAQ4R,QAAQ,eAAenR,MAAOgB,EAAmB,gBAAEkJ,WAAW,kBAAkBgmB,UAAU,CAAC,MAAO,KAAQ5uB,MAAM,CAAC,KAAO,OAAO,KAAO,QAAQ,YAAcN,EAAI0D,GAAG,gBAAgB0M,SAAS,CAAC,MAASpQ,EAAmB,iBAAGgB,GAAG,CAAC,MAAQ,SAASuC,GAAWA,EAAO8M,OAAOC,YAAqBtQ,EAAIywB,gBAAgBltB,EAAO8M,OAAOrR,MAAMyH,SAAQ,KAAO,SAASlD,GAAQ,OAAOvD,EAAImvB,qBAAqB/uB,EAAG,MAAM,CAACI,YAAY,SAAS,CAACJ,EAAG,SAAS,CAAC8P,WAAW,CAAC,CAAC3R,KAAK,QAAQ4R,QAAQ,UAAUnR,MAAOgB,EAAkB,eAAEkJ,WAAW,mBAAmB1I,YAAY,oBAAoBQ,GAAG,CAAC,OAAS,SAASuC,GAAQ,IAAIkN,EAAgBC,MAAM7T,UAAU+I,OAAO7I,KAAKwG,EAAO8M,OAAOM,SAAQ,SAASlS,GAAG,OAAOA,EAAEmS,YAAW/B,KAAI,SAASpQ,GAAG,IAAIoS,EAAM,WAAYpS,EAAIA,EAAEqS,OAASrS,EAAEO,MAAM,OAAO6R,KAAO7Q,EAAI0wB,eAAentB,EAAO8M,OAAOU,SAAWN,EAAgBA,EAAc,MAAM,CAACrQ,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,KAAK,CAACN,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,kBAAkBtD,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,UAAU,CAACN,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,mBAAmBtD,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,UAAU,CAACN,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,mBAAmBtD,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,kBAAkB,CAACN,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,2BAA2BtD,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,cAAc,CAACN,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,uBAAuBtD,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,YAAY,CAACN,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,qBAAqBtD,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,aAAa,CAACN,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,sBAAsBtD,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,oBAAoB,CAACN,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,6BAA6BtD,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,UAAU,CAACN,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,uBAAuBtD,EAAG,MAAM,CAACI,YAAY,SAAS,CAACJ,EAAG,iBAAiB,CAACE,MAAM,CAAC,KAAO,SAAS,UAAW,EAAM,KAAON,EAAIkK,WAAalK,EAAIkK,QAAwIlK,EAAIY,KAAnIR,EAAG,SAAS,CAACI,YAAY,oBAAoBF,MAAM,CAAC,KAAO,SAAS,SAAW,MAAM,CAACN,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,qBAA8B,YACzlF,GAAkB,GC2CtB,2DAEA,eACE,OAAO4P,GAAT,mBACA,uBAIA,IACE/U,KAAM,kBACNmH,WAAY,CAAd,mBACEvJ,KAAM,WACJ,MAAO,CACLs0B,gBAAiB,GACjBC,eAAgB,GAChBlZ,SAAU,GACVgZ,QAAS,GACTrpB,QAAS,GACT+C,SAAS,IAGblF,SAAU,CACRoH,OAAQ,WACN,OAAOnM,KAAK8E,OAAOiH,OAAOoC,KAG9BjJ,QAAS,CACPgH,SAAU,WAAd,WACMlM,KAAKiK,SAAU,EACfoJ,GACN,sBACA,kBAAQ,IAAR,SACQ,EAAR,eACQ,EAAR,cACQ,EAAR,mCACQ,EAAR,iCACQ,EAAR,wBACQ,EAAR,cAEA,kBACQ,EAAR,eAGIjH,WAAY,WAAhB,WACM,GAAkC,GAA9BpM,KAAKywB,eAAe/zB,OAAxB,CACA,IAAN,qCAEA,uCACA,kCAEQqC,EAAQ,IAEViB,KAAKiK,SAAU,EACfoJ,GACN,8CACA,iBACQ,EAAR,WACQ,OAAR,2BAEA,kBACQ,EAAR,iBAIE1K,QAxDF,WAyDI3I,KAAKkM,aC7G+U,MCOpV,GAAY,eACd,GACA,GACA,IACA,EACA,KACA,KACA,MAIa,M,QClBX,GAAS,WAAa,IAAInM,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACI,YAAY,aAAaR,EAAIS,GAAIT,EAAI0uB,OAAS,IAAE,SAASiC,GAAM,OAAOvwB,EAAG,MAAM,CAACd,IAAIqxB,EAAKzkB,UAAU1L,YAAY,WAAW,CAACJ,EAAG,cAAc,CAACE,MAAM,CAAC,GAAKqwB,EAAK/jB,IAAI,OAAS,WAAW,CAACxM,EAAG,MAAM,CAACI,YAAY,SAAS,CAACJ,EAAG,MAAM,CAACE,MAAM,CAAC,IAAMqwB,EAAKvB,UAAUhvB,EAAG,MAAM,CAACI,YAAY,WAAW,CAACJ,EAAG,OAAO,CAACI,YAAY,UAAU,CAACR,EAAIc,GAAGd,EAAIe,GAAG4vB,EAAKzkB,cAAc9L,EAAG,MAAM,CAACI,YAAY,oBAAoBwO,MAAkC,MAA5B2hB,EAAKC,mBAA6B,QAAU,OAAO,CAAC5wB,EAAIc,GAAG,IAAId,EAAIe,GAAG4vB,EAAKC,oBAAsB,OAAO,YAAY,MAAK,IACjnB,GAAkB,GCuBtB,IACA,CACE,IAAF,4CACE,UAAF,aACE,KACF,0EAEA,CACE,IAAF,+CACE,UAAF,gBACE,KACF,+EAEA,CACE,IAAF,8DACE,UAAF,+BACE,KACF,6FAEA,CACE,IAAF,sDACE,UAAF,uBACE,KACF,yFAEA,CACE,IAAF,kEACE,UAAF,mCACE,KACF,oGAEA,CACE,IAAF,gDACE,UAAF,iBACE,KACF,kFAEA,CACE,IAAF,qDACE,UAAF,sBACE,KACF,uFAEA,CACE,IAAF,uEACE,UAAF,wCACE,KACF,yGAEA,CACE,IACF,0EACE,UAAF,yBACE,KACF,0FAEA,CACE,IAAF,8CACE,UAAF,eACE,KACF,8FAEA,CACE,IAAF,iDACE,UAAF,kBACE,KACF,8FAEA,CACE,IAAF,4DACE,UAAF,6BACE,KACF,+FAEA,CACE,IAAF,gEACE,UAAF,iCACE,KACF,oGAIA,IACEryB,KAAM,mBACNpC,KAAM,WACJ,MAAO,CACL00B,SAAU,kBACVnC,OAAQ,CACN9C,GAAIkF,MAIV9rB,SAAU,GACVG,QAAS,CACP4rB,sBAAuB,SAA3B,4BACA,KACMzd,GACN,0CACA,kBACQ,EAAR,wCACA,UADA,IAEU,GAAV,6BACY,OAAZ,gBACA,EAEA,iCACA,GADA,IAEc,mBACd,8CAOE1K,QAjCF,WAkCI,IAAJ,OACI3I,KAAKyuB,OAAO9C,GAAGxnB,SAAQ,SAA3B,GACMyR,EAAGkb,sBAAsBC,QC9IuT,MCQlV,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,OAIa,M,QCnBX,GAAS,WAAa,IAAIhxB,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACI,YAAY,MAAM,CAACJ,EAAG,MAAMJ,EAAIS,GAAIT,EAAU,QAAE,SAASixB,GAAK,OAAO7wB,EAAG,SAAS,CAACd,IAAI2xB,EAAIzwB,YAAY,gBAAgBwO,MAAM,CAAEe,QAASkhB,IAAQjxB,EAAIa,OAAQG,GAAG,CAAC,MAAQ,SAASuC,GAAQ,OAAOvD,EAAIkxB,SAASD,MAAQ,CAACjxB,EAAIc,GAAG,IAAId,EAAIe,GAAGkwB,GAAK,UAAS,GAAIjxB,EAAW,QAAEI,EAAG,MAAM,CAACA,EAAG,iBAAiB,CAACE,MAAM,CAAC,KAAO,OAAO,GAAIN,EAAuB,oBAAEI,EAAG,MAAM,CAACJ,EAAIc,GAAG,uBAAuBV,EAAG,MAAM,CAACA,EAAG,KAAK,CAACJ,EAAIc,GAAG,IAAId,EAAIe,GAAGf,EAAIyL,UAAU,GAAGrC,UAAU,KAAKhJ,EAAG,OAAO,CAACI,YAAY,gBAAgB,CAACR,EAAIc,GAAGd,EAAIe,GAAGf,EAAIyL,UAAU,GAAGzM,UAAUoB,EAAG,MAAMA,EAAG,MAAM,CAACI,YAAY,OAAOF,MAAM,CAAC,IAAMN,EAAImxB,UAAUnxB,EAAIa,YAAYT,EAAG,MAAM,CAACI,YAAY,qBAAqBR,EAAIS,GAAIT,EAAa,WAAE,SAASoJ,GAAU,OAAOhJ,EAAG,MAAM,CAACd,IAAI8J,EAAS4J,WAAWxS,YAAY,KAAKwO,MAAM,CAAE4B,SAAUxH,EAASwH,UAAW5P,GAAG,CAAC,MAAQ,SAASuC,GAAQ,OAAOvD,EAAIoxB,OAAOhoB,EAAS4J,eAAe,CAAC5S,EAAG,MAAM,CAACE,MAAM,CAAC,IAAM8I,EAASsC,oBAAqBtC,EAAiB,SAAEhJ,EAAG,MAAM,CAACI,YAAY,WAAWR,EAAIY,UAAS,GAAGR,EAAG,SAAS,CAACI,YAAY,wCAAwCQ,GAAG,CAAC,MAAQ,SAASuC,GAAQ,OAAOvD,EAAIwW,cAAc,CAACpW,EAAG,IAAI,CAACI,YAAY,eAAeR,EAAIc,GAAG,IAAId,EAAIe,GAAGf,EAAIqxB,YAAY,YAC/vC,GAAkB,GC6CtB,sBACA,aAEA,kDAEA,IACE9yB,KAAM,eACNmH,WAAY,CAAd,mBACEvJ,KAAM,WACJ,MAAO,CACL8c,OAAQqY,GACR5C,OAAQA,GACR7tB,MAAO,gBACPswB,UAAW,CACT,gBACR,8EACQ,6BACR,+FAEM1lB,UAAW,KAGftG,QAAS,CACPqR,SADJ,WAEM,IAAN,iBACA,oBAAQ,IAAR,aAAQ,OAAR,SACA,iBAAQ,IAAR,eAAQ,OAAR,KAEM+a,EAAkBntB,SAAQ,SAAhC,KACQotB,YAAW,WACTle,GAAV,gBACA,UAEMrT,KAAKwL,UAAY,GACjBxL,KAAKwxB,qBAEPL,OAdJ,SAcA,GACMnxB,KAAKwL,UAAYxL,KAAKwL,UAAUoD,KAAI,SAA1C,UACA,sFAGIqiB,SAnBJ,SAmBA,GACUjxB,KAAKY,QAAUA,IACjBZ,KAAKY,MAAQA,EACbZ,KAAKwL,UAAY,GACjBxL,KAAKwxB,sBAGTA,kBA1BJ,WA0BA,WACMxxB,KAAKgZ,OAASqY,GACd,IAAN,KACMhe,GACN,mDACA,kBACQ,GAAR,2BAAQ,CAIA,IAAR,EACA,qBACA,wBACA,6BACA,EACA,qBACA,qBACA,0BACA,mBACA,YAAU,IAAV,eAAU,OAAV,KAGQ,EAAR,oCACA,aADA,gBAEA,yBACA,YAAU,IAAV,eAAc,EAAd,WAAc,EAAd,QAAU,OACV,eACA,OACA,WAGQ,EAAR,mBAxBU,EAAV,eA4BEtO,SAAU,CACRkF,QAAS,WACP,OAAOjK,KAAKgZ,SAAWqY,IAAqC,IAA1BrxB,KAAKwL,UAAU9O,QAEnD6Y,oBAAqB,WACnB,OAAOvV,KAAKgZ,SAAW,IAEzBoY,WAAY,WACV,OAAOpxB,KAAKwL,UAAU7F,QAAO,SAAnC,qCAGEgD,QAzFF,WA0FI3I,KAAKwxB,sBC7I2U,MCQhV,I,WAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,OAIa,M,QCnBX,GAAS,WAAa,IAAIzxB,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACI,YAAY,qBAAqB,CAACJ,EAAG,MAAM,CAACI,YAAY,6BAA6B,CAACJ,EAAG,MAAM,CAACI,YAAY,kBAAkB,CAACJ,EAAG,iBAAiB,CAAC0I,MAAM,CAAC9J,MAAOgB,EAAW,QAAE+I,SAAS,SAAUC,GAAMhJ,EAAIiJ,QAAQD,GAAKE,WAAW,aAAa9I,EAAG,MAAM,CAACI,YAAY,eAAeJ,EAAG,MAAM,CAACI,YAAY,sBAAuBR,EAAmB,gBAAEI,EAAG,MAAM,CAACA,EAAG,KAAK,CAACJ,EAAIc,GAAGd,EAAIe,GAAGf,EAAImJ,gBAAgBC,aAAahJ,EAAG,MAAM,CAACA,EAAG,MAAM,CAACI,YAAY,gBAAgB,CAACR,EAAIc,GAAGd,EAAIe,GAAGf,EAAImJ,gBAAgBnK,YAAYoB,EAAG,MAAM,CAACI,YAAY,sBAAsBJ,EAAG,UAAU,CAACkJ,YAAY,CAAC,OAAS,QAAQ,OAAS,QAAQhJ,MAAM,CAAC,IAAMN,EAAIuJ,wBAAwB,aAAc,EAAM,QAAS,EAAM,kBAAmB,EAAM,cAAe,EAAM,mBAAmB,CAC70BC,KAAM,EACNC,IAAK,GACL,YAAc,SAAUC,GACtB,IAAIC,EAAaD,EAAIC,WAErB,MAAO,CACLC,MAAOD,EAAWC,MAClBC,OAAQF,EAAWE,SAErB,qBAAqB,MAAM,gBAAgB,CAC7CC,SAAU,GACVC,SAAS,EACTC,WAAW,MACR5J,EAAG,MAAM,CAACI,YAAY,sBAAsBJ,EAAG,MAAM,CAACA,EAAG,SAAS,CAACI,YAAY,kCAAkCF,MAAM,CAAC,gBAAgB,GAAG,eAAe,eAAeU,GAAG,CAAC,MAAQ,SAASuC,GAAQ,OAAOvD,EAAIiK,SAAS,MAAM,CAAC7J,EAAG,IAAI,CAACI,YAAY,eAAeR,EAAIc,GAAG,IAAId,EAAIe,GAAGf,EAAI0D,GAAG,iBAAiB,OAAOtD,EAAG,SAAS,CAACI,YAAY,yBAAyBF,MAAM,CAAC,gBAAgB,GAAG,eAAe,eAAeU,GAAG,CAAC,MAAQ,SAASuC,GAAQ,OAAOvD,EAAIiK,UAAU,MAAM,CAAC7J,EAAG,IAAI,CAACI,YAAY,kBAAkBR,EAAIc,GAAG,IAAId,EAAIe,GAAGf,EAAI0D,GAAG,mBAAmB,OAAOtD,EAAG,SAAS,CAACI,YAAY,kCAAkCF,MAAM,CAAC,gBAAgB,GAAG,eAAe,eAAeU,GAAG,CAAC,MAAQ,SAASuC,GAAQ,OAAOvD,EAAIiK,SAAS,MAAM,CAAC7J,EAAG,IAAI,CAACI,YAAY,eAAeR,EAAIc,GAAG,IAAId,EAAIe,GAAGf,EAAI0D,GAAG,kBAAkB,UAAU,GAAGtD,EAAG,MAAM,CAACI,YAAY,cAAc8I,YAAY,CAAC,aAAa,UAAU,CAAClJ,EAAG,iBAAiB,CAACE,MAAM,CAAC,KAAON,EAAIkK,WAAYlK,EAAuB,oBAAEI,EAAG,MAAM,CAACA,EAAG,KAAK,CAACJ,EAAIc,GAAGd,EAAIe,GAAGf,EAAI0D,GAAG,0CAA0C1D,EAAIY,MAAM,IAAI,KAAKR,EAAG,MAAM,CAACI,YAAY,4BAA4B,CAACJ,EAAG,UAAU,CAACE,MAAM,CAAC,QAAUN,EAAImK,2BAA2B,GAAG/J,EAAG,MAAM,CAACI,YAAY,uCAAuC,CAACJ,EAAG,oBAAoB,CAACE,MAAM,CAAC,eAAiBN,EAAI0xB,WAAW/0B,OAAO,gBAAkBqD,EAAIqK,gBAAgB,sBAAwBrK,EAAIsK,0BAA0B,MACh5C,GAAkB,GCfP,I,UAAA,CACb,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,kBC5CF,IACE/L,KAAM,eACNmH,WAAY,CACV8O,QAAJ,GACIC,kBAAJ,GACIC,eAAJ,GACIC,QAAJ,SAEExY,KAAM,WACJ,MAAO,CACL0Y,gBAAiB,KACjBC,eAAgB,GAChB3L,gBAAiB,KACjBiB,uBAAwB,GAA9B,OACMC,gBAAiB,GACjBC,sBAAuB,EACvByK,eAAgB,IAAIC,IACpB0c,WAAN,KAGE5sB,MAAO,CACLmE,QAAS,CACPgM,QAAS,SAAf,KAEA,UACA,uCAGUhV,KAAKiV,eAAc,IAGvBC,MAAM,GAERL,eAAgB,SAApB,GAGA,8BACA,2BAEQ7U,KAAKkJ,gBAAkBlJ,KAAK6U,eAAe,GAE3C7U,KAAKkJ,gBAAkB,MAM/B,2BACA,eAEQlJ,KAAKiV,eAAc,KAIzB/P,QAAS,CACP+P,cAAe,WAAnB,0MACA,IACA,wBAEA,6BAJA,gJAMA,gDANA,EAOA,yBAPA,uBAOA,EAPA,cASA,6BATA,OASA,EATA,OAUA,eACA,sCAEA,KACA,sCACA,qCACA,UACA,uCAGA,gEApBA,uDAKA,iDALA,gFAuBA,6DACA,yBAxBA,qGAAmB,GA4BfG,sBA7BJ,SA6BA,KACMpV,KAAKoK,gBAAgBpN,KAAK,CACxBmM,SAAR,EACQgC,WAAR,IAGUnL,KAAKoK,gBAAgB1N,OAAS,IAChCsD,KAAKoK,gBAAgBjN,SAGzB6M,SAAU,SAAd,IAC0B,IAAhBmB,IACFkI,GAAR,4CACQrT,KAAKoV,sBAAsBpV,KAAKkJ,gBAAiBiC,GACjDnL,KAAKmK,wBAA0B,EAC/BnK,KAAKqK,uBAAyB,GAEhCrK,KAAKkJ,gBAAkB,KACvBlJ,KAAK6U,eAAiB,OAA5B,QAA4B,CAA5B,+BAEIQ,6BAA8B,SAAlC,GACMrV,KAAKmK,uBAAyBmL,IAGlCvQ,SAAU,CACRuE,wBAAyB,WACvB,OAAItJ,KAAKkJ,gBAAgBuC,iBAChBzL,KAAKkJ,gBAAgBuC,iBAEvB,iEAETxB,QAAS,WACP,OAAQjK,KAAKuV,qBAA+C,MAAxBvV,KAAKkJ,iBAE3CqM,oBAAqB,WACnB,OACN,gCACA,4BAGIrL,uBAAwB,WACtB,OAAIlK,KAAKkJ,iBAAmBlJ,KAAKkJ,kBAAoB/C,EAC5CnG,KAAKkJ,gBAAgBhC,QAErB,OAIbyB,QAnIF,WAoII,IAAJ,OACI3I,KAAKiV,gBACLrV,OAAO6V,iBAAiB,SAAS,SAArC,GACmC,QAAzBC,EAAMtF,OAAOuF,WACG,MAAdD,EAAMrW,KAAauW,EAAG5L,UAAU,GAClB,MAAd0L,EAAMrW,KAAauW,EAAG5L,SAAS,GACjB,MAAd0L,EAAMrW,KAAauW,EAAG5L,SAAS,GACjB,MAAd0L,EAAMrW,KAAauW,EAAGC,oBChP0T,MCQxV,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,OAIa,M,4CCKf6b,aAAIC,IAAIC,MACRF,aAAIC,IAAIE,QACRH,aAAIC,IAAIG,KACRJ,aAAIC,IAAII,QACRL,aAAIM,OAAOC,eAAgB,EAE3BP,aAAIQ,UAAU,QAAS,CACrBC,iBAAkB,SAASnrB,GACzBA,EAAGorB,kBAAkBC,SAEvBC,SAAU,SAAStrB,GACjBA,EAAGorB,kBAAkBC,WAIzB,IAAME,GAAS,CACb,CAAE/R,KAAM,IAAKgS,SAAU,cACvB,CAAEhS,KAAM,YAAalb,UAAWmtB,IAChC,CAAEjS,KAAM,aAAclb,UAAWotB,IACjC,CAAElS,KAAM,aAAclb,UAAWqtB,IACjC,CAAEnS,KAAM,eAAgBlb,UAAWstB,IACnC,CAAEpS,KAAM,cAAelb,UAAWutB,IAClC,CAAErS,KAAM,wBAAyBlb,UAAWwtB,IAC5C,CAAEtS,KAAM,8BAA+Blb,UAAWwtB,IAClD,CAAEtS,KAAM,SAAUlb,UAAWytB,IAC7B,CAAEvS,KAAM,YAAalb,UAAW0tB,IAChC,CAAExS,KAAM,SAAUlb,UAAW2tB,IAC7B,CAAEzS,KAAM,gBAAiBlb,UAAW4tB,IACpC,CAAE1S,KAAM,aAAclb,UAAW6tB,IACjC,CAAE3S,KAAM,kBAAmBlb,UAAW8tB,KAGlCC,GAAS,IAAIxB,OAAU,CAC3B5yB,KAAM,UACNszB,YAGIe,GAAO,IAAIvB,OAAQ,CACvB9E,OAAQlrB,IACRwkB,YACAgN,eAAgB,OAGlB7B,aAAIC,IAAI6B,IAAW,CAEjBC,KAAM,uCACNC,OAAQ,EACRL,OAAQA,KAGV,IAAI3B,aAAI,CACN2B,UACAC,QACAK,OAAQ,SAACC,GAAD,OAAOA,EAAEC,OAChBC,OAAO,S,qBC9EV71B,EAAOD,QAAU,IAA0B,wC,0tsBCA3C,W,8nKCAAC,EAAOD,QAAU,IAA0B,kC,8+KCA3C,W,o5KCAA,W,qBCAA,IAAI4Q,EAAM,CACT,aAAc,OACd,oBAAqB,OACrB,sBAAuB,OACvB,gBAAiB,OACjB,4BAA6B,QAI9B,SAASmlB,EAAeC,GACvB,IAAI7lB,EAAK8lB,EAAsBD,GAC/B,OAAOn2B,EAAoBsQ,GAE5B,SAAS8lB,EAAsBD,GAC9B,IAAIn2B,EAAoBW,EAAEoQ,EAAKolB,GAAM,CACpC,IAAIE,EAAI,IAAIC,MAAM,uBAAyBH,EAAM,KAEjD,MADAE,EAAE/rB,KAAO,mBACH+rB,EAEP,OAAOtlB,EAAIolB,GAEZD,EAAerwB,KAAO,WACrB,OAAO/G,OAAO+G,KAAKkL,IAEpBmlB,EAAeK,QAAUH,EACzBh2B,EAAOD,QAAU+1B,EACjBA,EAAe5lB,GAAK,Q,8CC1BpBlQ,EAAOD,QAAU,IAA0B,gC,oCCA3C,W,oCCAA,W,oCCAA,W,uBCAAC,EAAOD,QAAU,IAA0B,4B,oCCA3C,W,goWCAA,W,yDCAA,W,mkrDCAA,W,kCCAA,W,omLCAAC,EAAOD,QAAU,IAA0B,yB,28BCA3C,IAAI4Q,EAAM,CACT,gBAAiB,QAIlB,SAASmlB,EAAeC,GACvB,IAAI7lB,EAAK8lB,EAAsBD,GAC/B,OAAOn2B,EAAoBsQ,GAE5B,SAAS8lB,EAAsBD,GAC9B,IAAIn2B,EAAoBW,EAAEoQ,EAAKolB,GAAM,CACpC,IAAIE,EAAI,IAAIC,MAAM,uBAAyBH,EAAM,KAEjD,MADAE,EAAE/rB,KAAO,mBACH+rB,EAEP,OAAOtlB,EAAIolB,GAEZD,EAAerwB,KAAO,WACrB,OAAO/G,OAAO+G,KAAKkL,IAEpBmlB,EAAeK,QAAUH,EACzBh2B,EAAOD,QAAU+1B,EACjBA,EAAe5lB,GAAK,Q,kxLCtBpB,W,k0KCAA,W,kCCAA,W,kCCAA,W,kCCAA,W","file":"js/app.c7044b1f.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Helper.vue?vue&type=style&index=0&id=37b42367&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Menu.vue?vue&type=style&index=0&id=f3b219c4&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NutritionView.vue?vue&type=style&index=0&id=5dbd3b68&scoped=true&lang=css&\"","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&id=0e38e3b2&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LogoAnnotationView.vue?vue&type=style&index=0&id=2b92e4f2&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AnnotationCounter.vue?vue&type=style&index=0&id=11ffedee&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Menu'),_c('Login'),_c('sui-segment',{attrs:{\"attached\":\"bottom\"}},[_c('router-view')],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('sui-menu',{attrs:{\"attached\":\"top\"}},[_c('sui-dropdown',{staticClass:\"mobile only\",attrs:{\"item\":\"\",\"icon\":\"bars\",\"simple\":\"\"}},[_c('sui-dropdown-menu',[_vm._l((_vm.menu),function(item){return [(!item.to)?_c('sui-dropdown-header',{key:item.label},[_vm._v(\" \"+_vm._s(item.label)+\" \")]):_vm._e(),(!item.label)?_c('sui-dropdown-divider',{key:item.label}):_vm._e(),(item.to)?_c('router-link',{key:item.label,staticClass:\"item\",attrs:{\"active-class\":\"active\",\"to\":item.to}},[_vm._v(\" \"+_vm._s(item.label)+\" \")]):_vm._e()]})],2)],1),_c('sui-menu-item',{staticClass:\"item mobile hidden\"},[_c('img',{attrs:{\"src\":require(\"../assets/logo.png\")}})]),_vm._l((_vm.menuItems),function(item){return _c('router-link',{key:item.to,staticClass:\"item mobile hidden\",attrs:{\"active-class\":\"active\",\"to\":item.to}},[_vm._v(\" \"+_vm._s(item.label)+\" \")])}),_c('sui-menu-menu',{attrs:{\"position\":\"right\"}},[_c('sui-menu-item',{staticClass:\"helpButton\",on:{\"click\":_vm.openHelper}},[_c('sui-icon',{attrs:{\"name\":\"help\"}})],1)],1),_c('Helper',{attrs:{\"open\":_vm.helperIsOpen},on:{\"close-helper\":_vm.closeHelper}})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","const STORAGE_KEY = 'hunger-game-settings';\n\nexport const localSettings = {\n    fetch: function () {\n        return JSON.parse(localStorage.getItem(STORAGE_KEY) || '{}')\n    },\n    save: function (settings) {\n        localStorage.setItem(STORAGE_KEY, JSON.stringify(settings))\n    },\n    update: function (key, value) {\n        const settings = this.fetch();\n        settings[key] = value\n        this.save(settings);\n    }\n}\n\nexport const getLang = () => {\n    const settings = localSettings.fetch();\n\n    const urlParams = new URLSearchParams(window.location.search)\n    const urlLanguage = urlParams.has(\"language\") && urlParams.get(\"language\")\n\n    return (\n        urlLanguage ||\n        settings.lang ||\n        (navigator.language || navigator.userLanguage).split('-')[0]\n    )\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('sui-modal',{attrs:{\"open\":_vm.open},on:{\"changed\":_vm.close}},[_c('sui-modal-content',{attrs:{\"scrolling\":\"\",\"image\":\"\"}},[_c('sui-image',{attrs:{\"wrapped\":\"\",\"size\":_vm.helpInformations[_vm.pageKey].imageSize || 'medium',\"src\":_vm.helpInformations[_vm.pageKey].imgUrl}}),_c('sui-modal-description',[_c('sui-header',[_vm._v(_vm._s(_vm.helpInformations[_vm.pageKey].title))]),_vm._l((_vm.helpInformations[_vm.pageKey].texts),function(text,key){return _c('p',{key:key,staticClass:\"explanationText\"},[_vm._v(\" \"+_vm._s(text)+\" \")])})],2)],1),_c('sui-segment',{attrs:{\"aligned\":\"right\"}},[_c('sui-progress',{attrs:{\"attached\":\"\",\"top\":\"\",\"percent\":_vm.pageRatio,\"color\":\"green\"}}),(_vm.pageIndex > 0)?_c('sui-button',{nativeOn:{\"click\":function($event){return _vm.prev.apply(null, arguments)}}},[_vm._v(\" \"+_vm._s(_vm.$t(\"helper.previous\"))+\" \")]):_vm._e(),(Object.keys(_vm.helpInformations).length > _vm.pageIndex + 1)?_c('sui-button',{attrs:{\"primary\":\"\"},nativeOn:{\"click\":function($event){return _vm.next.apply(null, arguments)}}},[_vm._v(\" \"+_vm._s(_vm.$t(\"helper.next\"))+\" \")]):_c('sui-button',{attrs:{\"positive\":\"\"},nativeOn:{\"click\":function($event){return _vm.close.apply(null, arguments)}}},[_vm._v(\" \"+_vm._s(_vm.$t(\"helper.close\"))+\" \")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <sui-modal :open=\"open\" v-on:changed=\"close\">\n      <sui-modal-content scrolling image>\n        <sui-image\n          wrapped\n          :size=\"helpInformations[pageKey].imageSize || 'medium'\"\n          :src=\"helpInformations[pageKey].imgUrl\"\n        />\n\n        <sui-modal-description>\n          <sui-header>{{ helpInformations[pageKey].title }}</sui-header>\n          <p\n            v-for=\"(text, key) in helpInformations[pageKey].texts\"\n            :key=\"key\"\n            class=\"explanationText\"\n          >\n            {{ text }}\n          </p>\n        </sui-modal-description>\n      </sui-modal-content>\n\n      <sui-segment aligned=\"right\">\n        <sui-progress attached top :percent=\"pageRatio\" color=\"green\" />\n        <sui-button v-if=\"pageIndex > 0\" @click.native=\"prev\">\n          {{ $t(\"helper.previous\") }}\n        </sui-button>\n\n        <sui-button\n          v-if=\"Object.keys(helpInformations).length > pageIndex + 1\"\n          primary\n          @click.native=\"next\"\n        >\n          {{ $t(\"helper.next\") }}\n        </sui-button>\n\n        <sui-button v-else positive @click.native=\"close\">\n          {{ $t(\"helper.close\") }}\n        </sui-button>\n      </sui-segment>\n    </sui-modal>\n  </div>\n</template>\n\n<script>\n// potential image size (default is medium) :\n// \"mini\" | \"tiny\" | \"small\" | \"medium\" | \"large\" | \"big\" | \"huge\" | \"massive\"\nconst explanations = {\n  welcome: {\n    page1: {},\n    page2: {\n      image: \"questionsScreenshot.png\",\n      imageSize: \"huge\",\n    },\n    page3: {\n      image: \"logoGeneral.png\",\n      imageSize: \"huge\",\n    },\n  },\n  logos: {\n    page1: {\n      image: \"logoGeneral.png\",\n    },\n    page2: {\n      image: \"memLogo.png\",\n    },\n    page3: {\n      image: \"logoNameLabel.png\",\n      imageSize: \"large\",\n    },\n  },\n};\n\nconst images = require.context(\"../assets/\", false, /\\.png$/);\nconst getImageUrl = (imageName) => images(\"./\" + (imageName || \"logo.png\"));\n\n// set imageUrl in explanations\nObject.keys(explanations).forEach((urlKey) => {\n  Object.keys(explanations[urlKey]).forEach((pageKey) => {\n    explanations[urlKey][pageKey].imgUrl = getImageUrl(\n      explanations[urlKey][pageKey].image || null\n    );\n  });\n});\n\nconst getHelpInformations = (currentPath, translatedExplanations) => {\n  let currentPathKey = currentPath.slice(1);\n  console.debug(translatedExplanations);\n\n  if (!(currentPathKey in translatedExplanations)) {\n    currentPathKey = \"welcome\";\n  }\n\n  const translations = translatedExplanations[currentPathKey];\n  const rep = {};\n\n  Object.keys(translations).forEach((pageKey) => {\n    const { title, ...texts } = translations[pageKey];\n    rep[pageKey] = {\n      title,\n      texts: { ...texts },\n      ...(explanations[currentPathKey] && explanations[currentPathKey][pageKey]\n        ? explanations[currentPathKey][pageKey]\n        : {}),\n    };\n  });\n  console.debug(rep);\n  return rep;\n};\n\n// const translateHelpInformation = (explanations, rootKey, t) => {\n\n// }\n\nexport default {\n  name: \"IntroductionView\",\n  props: { open: Boolean },\n  data: function() {\n    return {\n      pageIndex: 0,\n      helpInformations: getHelpInformations(\n        this.$router.history.current.path,\n        this.$t(\"helper\")\n      ),\n    };\n  },\n  watch: {\n    $route() {\n      this.helpInformations = getHelpInformations(\n        this.$router.history.current.path,\n        this.$t(\"helper\")\n      );\n      this.pageIndex = 0;\n    },\n  },\n  computed: {\n    pageRatio: function() {\n      if (Object.keys(this.helpInformations).length === 1) {\n        return 100;\n      }\n      return Math.floor(\n        100 * (this.pageIndex / (Object.keys(this.helpInformations).length - 1))\n      );\n    },\n    pageKey: function() {\n      return `page${this.pageIndex + 1}`;\n    },\n  },\n  methods: {\n    close: function() {\n      this.$emit(\"close-helper\");\n    },\n    prev: function() {\n      this.pageIndex = Math.max(0, this.pageIndex - 1);\n    },\n    next: function() {\n      this.pageIndex = Math.min(\n        Object.keys(this.helpInformations).length - 1,\n        this.pageIndex + 1\n      );\n    },\n  },\n};\n</script>\n<style scoped>\n.explanationText {\n  font-size: 1.3rem;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Helper.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Helper.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Helper.vue?vue&type=template&id=37b42367&scoped=true&\"\nimport script from \"./Helper.vue?vue&type=script&lang=js&\"\nexport * from \"./Helper.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Helper.vue?vue&type=style&index=0&id=37b42367&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"37b42367\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <sui-menu attached=\"top\">\n    <sui-dropdown item icon=\"bars\" simple class=\"mobile only\">\n      <sui-dropdown-menu>\n        <template v-for=\"item in menu\">\n          <sui-dropdown-header v-if=\"!item.to\" :key=\"item.label\">\n            {{ item.label }}\n          </sui-dropdown-header>\n          <sui-dropdown-divider v-if=\"!item.label\" :key=\"item.label\" />\n          <router-link\n            active-class=\"active\"\n            class=\"item\"\n            :to=\"item.to\"\n            :key=\"item.label\"\n            v-if=\"item.to\"\n          >\n            {{ item.label }}\n          </router-link>\n        </template>\n      </sui-dropdown-menu>\n    </sui-dropdown>\n\n    <sui-menu-item class=\"item mobile hidden\">\n      <img src=\"~/../assets/logo.png\" />\n    </sui-menu-item>\n\n    <router-link\n      v-for=\"item in menuItems\"\n      active-class=\"active\"\n      class=\"item mobile hidden\"\n      :to=\"item.to\"\n      :key=\"item.to\"\n    >\n      {{ item.label }}\n    </router-link>\n\n    <sui-menu-menu position=\"right\">\n      <sui-menu-item v-on:click=\"openHelper\" class=\"helpButton\">\n        <sui-icon name=\"help\" />\n      </sui-menu-item>\n    </sui-menu-menu>\n    <Helper :open=\"helperIsOpen\" v-on:close-helper=\"closeHelper\" />\n  </sui-menu>\n</template>\n\n<script>\nimport { localSettings } from \"../settings\";\nimport Helper from \"./Helper\";\n\nconst intialSettings = localSettings.fetch();\nlocalSettings.update(\"tuto-done\", true);\n\nexport default {\n  data: function () {\n    return {\n      menu: [\n        { label: this.$t(\"menu.games\") },\n        { label: this.$t(\"menu.questions\"), to: \"/questions\" },\n        { label: this.$t(\"menu.logos\"), to: \"/logos\" },\n        { label: this.$t(\"menu.eco-score\"), to: \"/eco-score\" },\n        // {label: this.$t('menu.nutritions'), to:'/nutritions'},\n        {},\n        { label: this.$t(\"menu.manage\"), type: \"header\" },\n        { label: this.$t(\"menu.insights\"), to: \"/insights\" },\n        { label: this.$t(\"menu.settings\"), to: \"/settings\" },\n      ],\n      helperIsOpen: !intialSettings[\"tuto-done\"],\n    };\n  },\n  components: { Helper },\n  computed: {\n    menuItems: function () {\n      return this.menu.filter((item) => {\n        return item.to;\n      });\n    },\n  },\n  methods: {\n    closeHelper: function () {\n      this.helperIsOpen = false;\n    },\n    openHelper: function () {\n      this.helperIsOpen = true;\n    },\n  },\n};\n</script>\n\n<style scoped>\n.menu-container {\n  margin-bottom: 1rem;\n}\n.helpButton:hover {\n  cursor: pointer;\n  background-color: rgba(0, 0, 0, 0.05);\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Menu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Menu.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Menu.vue?vue&type=template&id=f3b219c4&scoped=true&\"\nimport script from \"./Menu.vue?vue&type=script&lang=js&\"\nexport * from \"./Menu.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Menu.vue?vue&type=style&index=0&id=f3b219c4&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f3b219c4\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('sui-modal',{attrs:{\"open\":_vm.modalIsOpen}},[_c('sui-modal-content',[_c('sui-modal-description',[_c('sui-header',[_vm._v(\"Login\")]),_c('p',[_vm._v(\" Your not logged in OFF, your contribution will not be attributed \")])],1)],1),_c('sui-segment',{attrs:{\"aligned\":\"right\"}},[_c('sui-button',{nativeOn:{\"click\":function($event){return _vm.closeModal.apply(null, arguments)}}},[_vm._v(\" \"+_vm._s(_vm.$t(\"helper.close\"))+\" \")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export const ROBOTOFF_API_URL = \"https://robotoff.openfoodfacts.org/api/v1\";\nexport const OFF_URL = \"https://world.openfoodfacts.org\";\nexport const OFF_API_URL = `${OFF_URL}/api/v0`;\nexport const OFF_IMAGE_URL = \"https://static.openfoodfacts.org/images/products\";\nexport const OFF_SEARCH = \"https://world.openfoodfacts.org/cgi/search.pl\";\n\nexport const NO_QUESTION_LEFT = \"NO_QUESTION_LEFT\";\n","import { getLang } from \"./settings\";\nimport { OFF_API_URL, OFF_IMAGE_URL, OFF_SEARCH } from \"./const\";\nimport axios from \"axios\";\nimport combineURLs from \"axios/lib/helpers/combineURLs\";\n\nexport default {\n  getCookie(name) {\n    const cookies = document.cookie\n      .split(\";\")\n      .filter((item) => item.trim().startsWith(`${name}=`));\n    if (cookies.length) {\n      const cookie = cookies[0];\n      return cookie.split(\"=\", 2)[1];\n    }\n    return \"\";\n  },\n\n  getAuthStatus() {\n    return axios.get(\"https://world.openfoodfacts.org/cgi/auth.pl\");\n  },\n\n  getUsername() {\n    const sessionCookie = this.getCookie(\"session\");\n\n    if (!sessionCookie.length) {\n      return \"\";\n    }\n\n    let isNext = false;\n    let username = \"\";\n    sessionCookie.split(\"&\").forEach((el) => {\n      if (el === \"user_id\") {\n        isNext = true;\n      } else if (isNext) {\n        username = el;\n        isNext = false;\n      }\n    });\n    return username;\n  },\n\n  getProduct(barcode) {\n    return axios.get(\n      `${OFF_API_URL}/product/${barcode}.json?fields=product_name,brands,ingredients_text,countries_tags,images`\n    );\n  },\n\n  getProductUrl(barcode) {\n    const lang = getLang();\n    return `https://world${\n      lang === \"en\" ? \"\" : \"-\" + lang\n    }.openfoodfacts.org/product/${barcode}`;\n  },\n\n  getProductEditUrl(barcode) {\n    const lang = getLang();\n    return `https://world${\n      lang === \"en\" ? \"\" : \"-\" + lang\n    }.openfoodfacts.org/cgi/product.pl?type=edit&code=${barcode}`;\n  },\n\n  getImageUrl(imagePath) {\n    return combineURLs(OFF_IMAGE_URL, imagePath);\n  },\n\n  getTableExtractionAI({ img, x0, y0, x1, y1 }) {\n    return `https://off-nutri-test.azurewebsites.net/api/get-nutri-table?name=${img}%7C(${x0},${y0},${x1},${y1})`;\n  },\n\n  getNutritionToFillUrl({ page, country, creator, category, code = false }) {\n    if (code) {\n      return `https://world.openfoodfacts.org/api/v0/product/${code}.json?fields=code,states,lang,image_nutrition_url,product_name,nutriments,images,creator,countries`;\n    }\n    let creatorTagNumber = 2;\n    let categoryTagNumber = 2;\n    if (country) {\n      creatorTagNumber += 1;\n      categoryTagNumber += 1;\n    }\n    if (creator) {\n      categoryTagNumber += 1;\n    }\n\n    return `${OFF_SEARCH}?json=true&${\n      page ? `page=${page}&` : \"\"\n    }fields=code,states,lang,image_nutrition_url,product_name,nutriments,images,creator,countries&action=process&sort_by=last_modified_t&tagtype_0=states&tag_contains_0=contains&tag_0=photos-validated&tagtype_1=states&tag_contains_1=contains&tag_1=nutrition-facts-to-be-completed${\n      country\n        ? `&tagtype_2=countries&tag_contains_2=contains&tag_2=${country}`\n        : \"\"\n    }${\n      creator\n        ? `&tagtype_${creatorTagNumber}=creator&tag_contains_${creatorTagNumber}=contains&tag_${creatorTagNumber}=${creator}`\n        : \"\"\n    }\n      ${\n        category\n          ? `&tagtype_${categoryTagNumber}=categories&tag_contains_${categoryTagNumber}=contains&tag_${categoryTagNumber}=${category}`\n          : \"\"\n      }`;\n  },\n};\n","<template>\n  <sui-modal :open=\"modalIsOpen\">\n    <sui-modal-content>\n      <sui-modal-description>\n        <sui-header>Login</sui-header>\n        <p>\n          Your not logged in OFF, your contribution will not be attributed\n        </p>\n      </sui-modal-description>\n    </sui-modal-content>\n\n    <sui-segment aligned=\"right\">\n      <sui-button @click.native=\"closeModal\">\n        {{ $t(\"helper.close\") }}\n      </sui-button>\n    </sui-segment>\n  </sui-modal>\n</template>\n\n<script>\nimport off from \"../off\";\n\nexport default {\n  data: function() {\n    return {\n      isAuthenticated: null,\n      modalIsOpen: false,\n    };\n  },\n\n  methods: {\n    closeModal: function() {\n      this.modalIsOpen = false;\n    },\n    openModal: function() {\n      this.modalIsOpen = true;\n    },\n  },\n  watch: {\n    isAuthenticated: function(newIsAuthenticated, oldIsAuthenticated) {\n      console.log({\n        newIsAuthenticated,\n        oldIsAuthenticated,\n      });\n      if (oldIsAuthenticated === newIsAuthenticated) {\n        return;\n      }\n\n      switch (newIsAuthenticated) {\n        case true:\n          this.closeModal();\n          break;\n        case false:\n          this.openModal();\n      }\n    },\n  },\n  mounted() {\n    off\n      .getAuthStatus()\n      .then(() => {\n        this.isAuthenticated = true;\n      })\n      .catch(() => {\n        this.isAuthenticated = false;\n      });\n  },\n};\n</script>\n\n<style scoped>\n.menu-container {\n  margin-bottom: 1rem;\n}\n.helpButton:hover {\n  cursor: pointer;\n  background-color: rgba(0, 0, 0, 0.05);\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=cc9a30dc&scoped=true&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Login.vue?vue&type=style&index=0&id=cc9a30dc&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"cc9a30dc\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div>\n    <Menu />\n    <Login />\n    <sui-segment attached=\"bottom\">\n      <router-view />\n    </sui-segment>\n  </div>\n</template>\n\n<script>\nimport Menu from \"./components/Menu\";\nimport Login from \"./components/Login\";\n\nexport default {\n  name: \"app\",\n  components: { Menu, Login },\n  data: function() {\n    return {};\n  },\n};\n</script>\n\n<style scoped>\n.menu-container {\n  margin-bottom: 1rem;\n}\n\n.segment {\n  border: none !important;\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=0e38e3b2&scoped=true&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&id=0e38e3b2&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0e38e3b2\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ui grid stackable\"},[_c('div',{staticClass:\"five wide column centered\"},[_c('div',{staticClass:\"insight-column\"},[_c('QuestionFilter',{model:{value:(_vm.filters),callback:function ($$v) {_vm.filters=$$v},expression:\"filters\"}}),_c('div',{staticClass:\"ui divider\"}),_c('div',{staticClass:\"ui hidden divider\"}),(_vm.currentQuestion)?_c('div',[_c('h3',[_vm._v(_vm._s(_vm.currentQuestion.question))]),(_vm.valueTagQuestionsURL.length)?_c('div',[_c('router-link',{attrs:{\"to\":_vm.valueTagQuestionsURL,\"target\":\"_blank\"}},[_c('div',{staticClass:\"ui big label\"},[_vm._v(\" \"+_vm._s(_vm.currentQuestion.value)+\" \"),_c('i',{staticClass:\"external alternate icon small blue\",staticStyle:{\"margin-left\":\"0.5rem\"}})])])],1):_c('div',[_c('div',{staticClass:\"ui big label\"},[_vm._v(_vm._s(_vm.currentQuestion.value))])]),_c('div',{staticClass:\"ui divider hidden\"}),_c('cropper',{staticStyle:{\"height\":\"300px\",\"margin\":\"auto\"},attrs:{\"src\":_vm.currentQuestionImageUrl,\"transitions\":false,\"canvas\":false,\"checkOrientation\":false,\"crossOrigine\":false,\"default-position\":{\n            left: 0,\n            top: 0,\n          },\"stencilSize\":function (ref) {\n              var boundaries = ref.boundaries;\n\n              return {\n                width: boundaries.width,\n                height: boundaries.height,\n              };\n            },\"default-boundaries\":\"fit\",\"stencil-props\":{\n            handlers: {},\n            movable: false,\n            resizable: false,\n          }}}),_c('div',{staticClass:\"ui divider hidden\"}),_c('div',[_c('button',{staticClass:\"ui big negative button annotate\",attrs:{\"data-inverted\":\"\",\"data-tooltip\":\"Shortcut: N\"},on:{\"click\":function($event){return _vm.annotate(0)}}},[_c('i',{staticClass:\"trash icon\"}),_vm._v(\" \"+_vm._s(_vm.$t(\"questions.no\"))+\" \")]),_c('button',{staticClass:\"ui big button annotate\",attrs:{\"data-inverted\":\"\",\"data-tooltip\":\"Shortcut: K\"},on:{\"click\":function($event){return _vm.annotate(-1)}}},[_c('i',{staticClass:\"question icon\"}),_vm._v(\" \"+_vm._s(_vm.$t(\"questions.skip\"))+\" \")]),_c('button',{staticClass:\"ui big positive button annotate\",attrs:{\"data-inverted\":\"\",\"data-tooltip\":\"Shortcut: O\"},on:{\"click\":function($event){return _vm.annotate(1)}}},[_c('i',{staticClass:\"check icon\"}),_vm._v(\" \"+_vm._s(_vm.$t(\"questions.yes\"))+\" \")])])],1):_c('div',{staticClass:\"flex-center\",staticStyle:{\"margin-top\":\"100px\"}},[_c('LoadingSpinner',{attrs:{\"show\":_vm.loading}}),(_vm.noRemainingQuestion)?_c('div',[_c('h2',[_vm._v(_vm._s(_vm.$t(\"questions.no_questions_remaining\")))])]):_vm._e()],1)],1)]),_c('div',{staticClass:\"six wide column centered\"},[_c('Product',{attrs:{\"barcode\":_vm.currentQuestionBarcode}})],1),_c('div',{staticClass:\"three wide column annotation-column\"},[_c('AnnotationCounter',{attrs:{\"remainingCount\":_vm.remainingQuestionCount,\"lastAnnotations\":_vm.lastAnnotations,\"sessionAnnotatedCount\":_vm.sessionAnnotatedCount}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export const updateURLParam = (key, value) => {\n  const urlParams = new URLSearchParams(window.location.search);\n  urlParams.set(key, value);\n  const newRelativePathQuery =\n    window.location.pathname + \"?\" + urlParams.toString();\n  history.pushState(null, \"\", newRelativePathQuery);\n};\n\nexport const setURLParams = (parameters) => {\n  const urlParams = new URLSearchParams();\n  Object.keys(parameters).forEach((key) => {\n    if (parameters[key]) {\n      urlParams.set(key, parameters[key]);\n    }\n  });\n\n  const newRelativePathQuery =\n    window.location.pathname + \"?\" + urlParams.toString();\n  history.pushState(null, \"\", newRelativePathQuery);\n};\n\nexport const deleteURLParam = (key) => {\n  const urlParams = new URLSearchParams(window.location.search);\n\n  if (!urlParams.has(key)) {\n    return;\n  }\n\n  urlParams.delete(key);\n\n  const newRelativePathQuery =\n    window.location.pathname +\n    (urlParams.toString().length ? `?${urlParams.toString()}` : \"\");\n\n  history.pushState(null, \"\", newRelativePathQuery);\n};\n\nexport const getURLParam = (key) => {\n  const urlParams = new URLSearchParams(window.location.search);\n\n  if (!urlParams.has(key)) {\n    return \"\";\n  }\n\n  return urlParams.get(key);\n};\n\nexport const removeEmptyKeys = (obj) => {\n  Object.keys(obj).forEach(\n    (key) => (obj[key] === undefined || obj[key] === \"\") && delete obj[key]\n  );\n  return obj;\n};\n","import axios from 'axios';\nimport { ROBOTOFF_API_URL } from \"./const\"\nimport { getLang } from \"./settings\";\nimport { removeEmptyKeys } from './utils'\n\nexport default {\n\n  annotate(insightId, annotation) {\n    return axios.post(\n      `${ROBOTOFF_API_URL}/insights/annotate`,\n      new URLSearchParams(\n        `insight_id=${insightId}&annotation=${annotation}&update=1`,\n      ),\n      { withCredentials: true },\n    )\n  },\n\n  questionsByProductCode(code) {\n    return axios.get(\n      `${ROBOTOFF_API_URL}/questions/${code}`    \n    ).then(result => {\n      let questions = result.data.questions;\n      result.data.questions = questions.filter(question => question.source_image_url);\n      return result;\n    })\n  },\n\n  questions(sortBy, insightTypes, valueTag, brands, country, count = 10) {\n    const lang = getLang();\n    return axios.get(\n      `${ROBOTOFF_API_URL}/questions/${sortBy}`, {\n      params: removeEmptyKeys({\n        count, lang, insight_types: insightTypes, value_tag: valueTag, brands, country\n      })\n    }\n    ).then(result => {\n      let questions = result.data.questions;\n      result.data.questions = questions.filter(question => question.source_image_url);\n      return result;\n    })\n  },\n\n  loadLogo(logoId) {\n    return axios.get(\n      `${ROBOTOFF_API_URL}/images/logos/${logoId}`\n    )\n  },\n\n  updateLogo(logoId, value, type) {\n    return axios.put(\n      `${ROBOTOFF_API_URL}/images/logos/${logoId}`, removeEmptyKeys({\n        withCredentials: true, value, type\n      })\n    )\n  },\n\n  searchLogos(barcode, value, type, count = 25) {\n    return axios.get(\n      `${ROBOTOFF_API_URL}/images/logos`, {\n      params: removeEmptyKeys({\n        annotated: 1, barcode, value, type, count\n      })\n    }\n    )\n  },\n\n  getLogoAnnotations(logoId, index, count) {\n    const url = logoId.length > 0\n      ? `${ROBOTOFF_API_URL}/ann/${logoId}`\n      : `${ROBOTOFF_API_URL}/ann`;\n    return axios.get(\n      url, {\n      params: removeEmptyKeys({\n        index, count\n      })\n    }\n    )\n  },\n\n  annotateLogos(annotations) {\n    return axios.post(\n      `${ROBOTOFF_API_URL}/images/logos/annotate`, removeEmptyKeys(\n        {\n          withCredentials: true, annotations,\n        }\n      )\n    )\n  },\n\n  getInsights(barcode, insightTypes, valueTag, annotation, page, count = 25) {\n    let annotated\n    if (annotation.length && annotation == \"not_annotated\") {\n      annotated = \"0\";\n    }\n    return axios.get(\n      `${ROBOTOFF_API_URL}/insights`, {\n      params: removeEmptyKeys({\n        barcode, insight_types: insightTypes,\n        value_tag: valueTag, annotation, page,\n        annotated, count\n      })\n    }\n    )\n  },\n\n  getUserStatistics(username) {\n    return axios.get(`${ROBOTOFF_API_URL}/users/statistics/${username}`)\n  },\n\n  getCroppedImageUrl(imageUrl, boundingBox) {\n    const [y_min, x_min, y_max, x_max] = boundingBox;\n    return `${ROBOTOFF_API_URL}/images/crop?image_url=${imageUrl}&y_min=${y_min}&x_min=${x_min}&y_max=${y_max}&x_max=${x_max}`;\n  },\n\n  getLogosImages(logoIds) {\n    return axios.get(\n      `${ROBOTOFF_API_URL}/images/logos?logo_ids=${logoIds.join(\",\")}`\n    )\n  }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.loaded)?_c('div',{staticClass:\"product-card\"},[_c('h3',[_vm._v(_vm._s(_vm.productName))]),_c('a',{staticClass:\"ui button primary\",attrs:{\"target\":\"_blank\",\"href\":_vm.productUrl}},[_vm._v(_vm._s(_vm.$t(\"questions.view\")))]),_c('a',{staticClass:\"ui button\",attrs:{\"target\":\"_blank\",\"href\":_vm.productEditUrl}},[_vm._v(_vm._s(_vm.$t(\"questions.edit\")))]),_c('div',{staticClass:\"ui divider\"}),(_vm.imagesPreview.length > 0)?_c('div',[_c('div',{staticClass:\"ui basic segment\"},[_c('sui-checkbox',{model:{value:(_vm.hideImage),callback:function ($$v) {_vm.hideImage=$$v},expression:\"hideImage\"}},[_vm._v(\" \"+_vm._s(_vm.$t(\"questions.hide_images\"))+\" \")])],1),(!_vm.hideImage)?_c('viewer',{attrs:{\"images\":_vm.imagesPreview,\"options\":_vm.imageZoomOptions}},_vm._l((_vm.imagesPreview),function(url){return _c('img',{key:url,staticStyle:{\"max-height\":\"200px\",\"max-width\":\"200px\",\"margin-right\":\"3px\"},attrs:{\"src\":url,\"loading\":\"lazy\"}})}),0):_vm._e(),_c('div',{staticClass:\"ui divider\"})],1):_vm._e(),(_vm.brands)?_c('p',[_c('strong',[_vm._v(_vm._s(_vm.$t(\"questions.brands\"))+\" :\")]),_vm._v(\" \"+_vm._s(_vm.brands)+\" \")]):_vm._e(),(_vm.ingredientsText)?_c('p',[_c('strong',[_vm._v(_vm._s(_vm.$t(\"questions.ingredients\"))+\":\")]),_vm._v(\" \"+_vm._s(_vm.ingredientsText)+\" \")]):_vm._e(),(_vm.countries)?_c('p',[_c('strong',[_vm._v(_vm._s(_vm.$t(\"questions.countries\"))+\":\")]),_vm._v(\" \"+_vm._s(_vm.countries)+\" \")]):_vm._e()]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import countries from \"./data/countries\";\n\n\nexport const countryMap = function () {\n    const countryMap = {};\n    countries.forEach(c => {\n        countryMap[c.id] = c.label;\n    })\n    return countryMap;\n}();","<template>\n  <div v-if=\"loaded\" class=\"product-card\">\n    <h3>{{ productName }}</h3>\n\n    <a target=\"_blank\" :href=\"productUrl\" class=\"ui button primary\">{{\n      $t(\"questions.view\")\n    }}</a>\n\n    <a target=\"_blank\" :href=\"productEditUrl\" class=\"ui button\">{{\n      $t(\"questions.edit\")\n    }}</a>\n\n    <div class=\"ui divider\"></div>\n\n    <div v-if=\"imagesPreview.length > 0\">\n      <div class=\"ui basic segment\">\n        <sui-checkbox v-model=\"hideImage\">\n          {{ $t(\"questions.hide_images\") }}\n        </sui-checkbox>\n      </div>\n\n      <viewer\n        :images=\"imagesPreview\"\n        :options=\"imageZoomOptions\"\n        v-if=\"!hideImage\"\n      >\n        <img\n          :src=\"url\"\n          v-for=\"url in imagesPreview\"\n          :key=\"url\"\n          loading=\"lazy\"\n          style=\"max-height: 200px; max-width: 200px; margin-right: 3px\"\n        />\n      </viewer>\n      <div class=\"ui divider\"></div>\n    </div>\n    <p v-if=\"brands\">\n      <strong>{{ $t(\"questions.brands\") }} :</strong>\n      {{ brands }}\n    </p>\n    <p v-if=\"ingredientsText\">\n      <strong>{{ $t(\"questions.ingredients\") }}:</strong>\n      {{ ingredientsText }}\n    </p>\n    <p v-if=\"countries\">\n      <strong>{{ $t(\"questions.countries\") }}:</strong>\n      {{ countries }}\n    </p>\n  </div>\n</template>\n\n<script>\nimport { localSettings } from \"../settings\";\nimport { countryMap } from \"../countries\";\nimport offService from \"../off\";\n\nconst BARCODE_REGEX = /(...)(...)(...)(.*)$/;\nconst splitBarcode = (barcode) => {\n  const match = BARCODE_REGEX.exec(barcode);\n\n  if (match !== null) {\n    match.shift();\n    return match;\n  }\n\n  return [barcode];\n};\n\nconst getImageRootURL = (barcode) => {\n  const splittedBarcode = splitBarcode(barcode);\n\n  if (splittedBarcode === null) {\n    return null;\n  }\n  return offService.getImageUrl(splittedBarcode.join(\"/\"));\n};\n\nexport default {\n  name: \"Product\",\n  props: [\"barcode\"],\n\n  data: function () {\n    return {\n      hideImage: localSettings.fetch()[\"hideImage\"] || false,\n\n      productName: \"\",\n      brands: \"\",\n      ingredientsText: \"\",\n      countriesTags: [],\n      images: {},\n      loaded: false,\n      imageZoomOptions: {\n        toolbar: {\n          rotateLeft: 1,\n          rotateRight: 1,\n        },\n      },\n    };\n  },\n\n  watch: {\n    barcode: function (value) {\n      if (value) {\n        this.update();\n      } else {\n        this.productName = \"\";\n        this.brands = \"\";\n        this.ingredientsText = \"\";\n        this.countriesTags = [];\n        this.images = {};\n        this.loaded = false;\n      }\n    },\n\n    hideImage: function (value) {\n      localSettings.update(\"hideImage\", value);\n    },\n  },\n  methods: {\n    update: function () {\n      offService.getProduct(this.barcode).then((result) => {\n        const product = result.data.product;\n        this.productName = product.product_name || \"\";\n        this.brands = product.brands || \"\";\n        this.ingredientsText = product.ingredients_text || \"\";\n        this.countriesTags = product.countries_tags || [];\n        this.images = product.images || {};\n        this.loaded = true;\n      });\n    },\n  },\n  computed: {\n    productUrl: function () {\n      if (this.barcode === null) {\n        return \"\";\n      }\n      return offService.getProductUrl(this.barcode);\n    },\n    productEditUrl: function () {\n      if (this.barcode === null) {\n        return \"\";\n      }\n      return offService.getProductEditUrl(this.barcode);\n    },\n    countries: function () {\n      return this.countriesTags.map((c) => countryMap[c]).join(\", \");\n    },\n    imagesPreview: function () {\n      const imagesDisplayUrl = [];\n      for (const key of Object.keys(this.images)) {\n        if (!isNaN(key)) {\n          const imageUrl = `${getImageRootURL(this.barcode)}/${key}.jpg`;\n          imagesDisplayUrl.push(imageUrl);\n        }\n      }\n      return imagesDisplayUrl;\n    },\n  },\n  mounted() {\n    if (this.barcode) {\n      this.update();\n    }\n  },\n};\n</script>\n\n<style scoped>\n@media only screen and (max-width: 767px) {\n  .product-card {\n    text-align: center;\n  }\n}\n\n.product-image {\n  max-width: 250px;\n  max-height: 250px;\n  margin: 0 3px;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Product.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Product.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Product.vue?vue&type=template&id=592dbe0e&scoped=true&\"\nimport script from \"./Product.vue?vue&type=script&lang=js&\"\nexport * from \"./Product.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Product.vue?vue&type=style&index=0&id=592dbe0e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"592dbe0e\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{centered: _vm.centered}},[(_vm.show)?_c('div',{staticClass:\"ui active inline loader\",class:[_vm.size]}):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div :class=\"{centered: centered}\">\n    <div class=\"ui active inline loader\" v-if=\"show\" :class=\"[size]\"></div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"LoadingSpinner\",\n  props: {\n    show: {\n      type: Boolean,\n      required: true\n    },\n    centered: {\n      type: Boolean,\n      required: false,\n      default: true\n    },\n    size: {\n      type: String,\n      required: false,\n      default: 'huge'\n    }\n  }\n};\n</script>\n\n<style scoped>\n.centered {\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LoadingSpinner.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LoadingSpinner.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LoadingSpinner.vue?vue&type=template&id=66aae622&scoped=true&\"\nimport script from \"./LoadingSpinner.vue?vue&type=script&lang=js&\"\nexport * from \"./LoadingSpinner.vue?vue&type=script&lang=js&\"\nimport style0 from \"./LoadingSpinner.vue?vue&type=style&index=0&id=66aae622&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"66aae622\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"root\"},[_c('div',[_c('sui-dropdown',{staticClass:\"ui label blue large\",attrs:{\"text\":_vm.$t('questions.' + _vm.value.selectedInsightType)}},[_c('sui-dropdown-menu',_vm._l((_vm.availableInsightTypes),function(insightType){return _c('sui-dropdown-item',{key:insightType,on:{\"click\":function($event){return _vm.selectDirectlyInsightType(insightType)}}},[_vm._v(_vm._s(_vm.$t(\"questions.\" + insightType)))])}),1)],1),(_vm.value.valueTag)?_c('div',{staticClass:\"ui label large\"},[_vm._v(\" \"+_vm._s(_vm.$t(\"questions.filters.short_label.value\"))+\": \"+_vm._s(_vm.value.valueTag)),_c('i',{staticClass:\"icon close\",on:{\"click\":function($event){return _vm.removeFilter('valueTag')}}})]):_vm._e(),(_vm.value.countryFilter)?_c('div',{staticClass:\"ui label large\"},[_vm._v(\" \"+_vm._s(_vm.$t(\"questions.filters.short_label.country\"))+\": \"+_vm._s(_vm.value.countryFilter)),_c('i',{staticClass:\"icon close\",on:{\"click\":function($event){return _vm.removeFilter('countryFilter')}}})]):_vm._e(),(_vm.value.brandFilter)?_c('div',{staticClass:\"ui label large\"},[_vm._v(\" \"+_vm._s(_vm.$t(\"questions.filters.short_label.brand\"))+\": \"+_vm._s(_vm.value.brandFilter)),_c('i',{staticClass:\"icon close\",on:{\"click\":function($event){return _vm.removeFilter('brandFilter')}}})]):_vm._e(),(_vm.value.sortByPopularity)?_c('div',{staticClass:\"ui label large\"},[_vm._v(\" \"+_vm._s(_vm.$t(\"questions.filters.short_label.popularity\"))),_c('i',{staticClass:\"icon close\",on:{\"click\":function($event){return _vm.removeFilter('sortByPopularity')}}})]):_vm._e()],1),(_vm.formIsClose)?_c('div',{staticClass:\"openForm\"},[_c('button',{staticClass:\"ui button\",on:{\"click\":_vm.openForm}},[_c('i',{staticClass:\"icon edit\"}),_vm._v(_vm._s(_vm.$t(\"questions.filters.actions.edit\"))+\" \")])]):_c('div',[_c('div',{staticClass:\"ui divider\"}),_c('div',{staticClass:\"ui form styled\"},[_c('div',{staticClass:\"field\"},[_c('label',[_vm._v(_vm._s(_vm.$t(\"questions.filters.long_label.type\")))]),_vm._l((_vm.availableInsightTypes),function(insightType){return _c('button',{key:insightType,staticClass:\"ui button\",class:{\n            primary: insightType === _vm.formValues.selectedInsightType,\n          },on:{\"click\":function($event){return _vm.selectInsightType(insightType)}}},[_vm._v(\" \"+_vm._s(_vm.$t(\"questions.\" + insightType))+\" \")])})],2),_c('div',{staticClass:\"ui field\"},[_c('label',[_vm._v(_vm._s(_vm.$t(\"questions.filters.long_label.value\")))]),_c('div',{staticClass:\"ui icon input \"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.formValues.valueTag),expression:\"formValues.valueTag\"}],attrs:{\"placeholder\":_vm.$t('questions.filters.placeholders.value')},domProps:{\"value\":(_vm.formValues.valueTag)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.formValues, \"valueTag\", $event.target.value)}}}),(_vm.formValues.valueTag)?_c('i',{staticClass:\"times link icon\",on:{\"click\":function($event){return _vm.clearFormField('valueTag')}}}):_vm._e()])]),_c('div',{staticClass:\"ui field\"},[_c('label',[_vm._v(_vm._s(_vm.$t(\"questions.filters.long_label.country\")))]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.formValues.countryFilter),expression:\"formValues.countryFilter\"}],staticClass:\"ui fluid dropdown\",on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.formValues, \"countryFilter\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},[_c('option',{attrs:{\"value\":\"\"}},[_vm._v(\"World\")]),_vm._l((_vm.countryNames),function(country){return _c('option',{key:country,domProps:{\"value\":country}},[_vm._v(_vm._s(country.slice(3)))])})],2)]),_c('div',{staticClass:\"field\"},[_c('label',[_vm._v(_vm._s(_vm.$t(\"questions.filters.long_label.brand\")))]),_c('sui-dropdown',{attrs:{\"options\":_vm.populateBrandFilter ? _vm.brands : [],\"text\":_vm.$t('questions.filters.placeholders.brand'),\"search\":\"\",\"fluid\":\"\",\"selection\":\"\"},on:{\"filtered\":_vm.setPopulateBrandFilter},model:{value:(_vm.formValues.brandFilter),callback:function ($$v) {_vm.$set(_vm.formValues, \"brandFilter\", $$v)},expression:\"formValues.brandFilter\"}})],1),_c('div',{staticClass:\"ui segment\"},[_c('div',{staticClass:\"field\"},[_c('div',{staticClass:\"ui toggle checkbox\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.formValues.sortByPopularity),expression:\"formValues.sortByPopularity\"}],attrs:{\"type\":\"checkbox\",\"name\":\"sortBy\"},domProps:{\"checked\":Array.isArray(_vm.formValues.sortByPopularity)?_vm._i(_vm.formValues.sortByPopularity,null)>-1:(_vm.formValues.sortByPopularity)},on:{\"change\":function($event){var $$a=_vm.formValues.sortByPopularity,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(_vm.formValues, \"sortByPopularity\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(_vm.formValues, \"sortByPopularity\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(_vm.formValues, \"sortByPopularity\", $$c)}}}}),_c('label',[_vm._v(_vm._s(_vm.$t(\"questions.popularity_sort\")))])])])]),_c('div',{staticClass:\"ui actions\"},[_c('button',{staticClass:\"ui button\",on:{\"click\":_vm.resetForm}},[_vm._v(\" \"+_vm._s(_vm.$t(\"questions.filters.actions.cancel\"))+\" \")]),_c('button',{staticClass:\"ui primary button\",on:{\"click\":_vm.validateForm}},[_vm._v(\" \"+_vm._s(_vm.$t(\"questions.filters.actions.apply\"))+\" \")])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export const countryNames = [\n  \"en:belgium\",\n  \"en:denmark\",\n  \"en:france\",\n  \"en:germany\",\n  \"en:italy\",\n  \"en:netherlands\",\n  \"en:portugal\",\n  \"en:spain\",\n  \"en:sweden\",\n  \"en:switzerland\",\n  \"en:united-states\",\n  \"en:canada\",\n  \"en:australia\",\n  \"en:united-kingdom\",\n];\n\nexport const insightTypesNames = {\n  label: \"label\",\n  category: \"category\",\n  brand: \"brand\",\n  product_weight: \"product_weight\",\n};\n\nexport const key2urlParam = {\n  valueTag: \"value_tag\",\n  brandFilter: \"brand\",\n  countryFilter: \"country\",\n  selectedInsightType: \"type\",\n  sortByPopularity: \"sorted\",\n};\n","<template>\n  <div class=\"root\">\n    <div>\n      <sui-dropdown\n        class=\"ui label blue large\"\n        :text=\"$t('questions.' + value.selectedInsightType)\"\n      >\n        <sui-dropdown-menu>\n          <sui-dropdown-item\n            v-for=\"insightType of availableInsightTypes\"\n            :key=\"insightType\"\n            @click=\"selectDirectlyInsightType(insightType)\"\n            >{{ $t(\"questions.\" + insightType) }}</sui-dropdown-item\n          >\n        </sui-dropdown-menu>\n      </sui-dropdown>\n\n      <div v-if=\"value.valueTag\" class=\"ui label large\">\n        {{ $t(\"questions.filters.short_label.value\") }}: {{ value.valueTag\n        }}<i class=\"icon close\" @click=\"removeFilter('valueTag')\"></i>\n      </div>\n      <div v-if=\"value.countryFilter\" class=\"ui label large\">\n        {{ $t(\"questions.filters.short_label.country\") }}:\n        {{ value.countryFilter\n        }}<i class=\"icon close\" @click=\"removeFilter('countryFilter')\"></i>\n      </div>\n      <div v-if=\"value.brandFilter\" class=\"ui label large\">\n        {{ $t(\"questions.filters.short_label.brand\") }}: {{ value.brandFilter\n        }}<i class=\"icon close\" @click=\"removeFilter('brandFilter')\"></i>\n      </div>\n      <div v-if=\"value.sortByPopularity\" class=\"ui label large\">\n        {{ $t(\"questions.filters.short_label.popularity\")\n        }}<i class=\"icon close\" @click=\"removeFilter('sortByPopularity')\"></i>\n      </div>\n    </div>\n    <div v-if=\"formIsClose\" class=\"openForm\">\n      <button class=\"ui button\" @click=\"openForm\">\n        <i class=\"icon edit\" />{{ $t(\"questions.filters.actions.edit\") }}\n      </button>\n    </div>\n    <div v-else>\n      <div class=\"ui divider\" />\n      <div class=\"ui form styled\">\n        <div class=\"field\">\n          <label>{{ $t(\"questions.filters.long_label.type\") }}</label>\n          <button\n            class=\"ui button\"\n            :class=\"{\n              primary: insightType === formValues.selectedInsightType,\n            }\"\n            v-for=\"insightType of availableInsightTypes\"\n            :key=\"insightType\"\n            @click=\"selectInsightType(insightType)\"\n          >\n            {{ $t(\"questions.\" + insightType) }}\n          </button>\n        </div>\n\n        <div class=\"ui field\">\n          <label>{{ $t(\"questions.filters.long_label.value\") }}</label>\n          <div class=\"ui icon input \">\n            <input\n              :placeholder=\"$t('questions.filters.placeholders.value')\"\n              v-model=\"formValues.valueTag\"\n            />\n            <i\n              @click=\"clearFormField('valueTag')\"\n              v-if=\"formValues.valueTag\"\n              class=\"times link icon\"\n            ></i>\n          </div>\n        </div>\n\n        <div class=\"ui field\">\n          <label>{{ $t(\"questions.filters.long_label.country\") }}</label>\n          <select class=\"ui fluid dropdown\" v-model=\"formValues.countryFilter\">\n            <option value=\"\">World</option>\n            <option\n              :value=\"country\"\n              v-for=\"country in countryNames\"\n              :key=\"country\"\n              >{{ country.slice(3) }}</option\n            >\n          </select>\n        </div>\n\n        <div class=\"field\">\n          <label>{{ $t(\"questions.filters.long_label.brand\") }}</label>\n          <sui-dropdown\n            :options=\"populateBrandFilter ? brands : []\"\n            v-model=\"formValues.brandFilter\"\n            :text=\"$t('questions.filters.placeholders.brand')\"\n            search\n            fluid\n            selection\n            v-on:filtered=\"setPopulateBrandFilter\"\n          />\n        </div>\n\n        <div class=\"ui segment\">\n          <div class=\"field\">\n            <div class=\"ui toggle checkbox\">\n              <input\n                v-model=\"formValues.sortByPopularity\"\n                type=\"checkbox\"\n                name=\"sortBy\"\n              />\n              <label>{{ $t(\"questions.popularity_sort\") }}</label>\n            </div>\n          </div>\n        </div>\n        <div class=\"ui actions\">\n          <button class=\"ui button\" @click=\"resetForm\">\n            {{ $t(\"questions.filters.actions.cancel\") }}\n          </button>\n          <button class=\"ui primary button\" @click=\"validateForm\">\n            {{ $t(\"questions.filters.actions.apply\") }}\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { setURLParams } from \"../../utils\";\nimport { countryNames, insightTypesNames, key2urlParam } from \"./const\";\n\nexport default {\n  props: [\"value\"],\n  data() {\n    return {\n      availableInsightTypes: insightTypesNames,\n      countryNames,\n      formIsClose: true,\n      formValues: {},\n      brands: undefined,\n      populateBrandFilter: false,\n    };\n  },\n  mounted() {\n    this.formValues = { ...this.$props.value };\n    this.updateURLParams(this.formValues);\n  },\n  methods: {\n    openForm: function() {\n      this.formIsClose = false;\n      this.loadBrands();\n    },\n    closeForm: function() {\n      this.formIsClose = true;\n      this.populateBrandFilter = false;\n    },\n    selectInsightType: function(insightType) {\n      this.formValues.selectedInsightType = insightType;\n    },\n    selectDirectlyInsightType: function(insightType) {\n      if (this.$props.value.selectedInsightType !== insightType) {\n        this.formValues.selectedInsightType = insightType;\n        this.formValues.valueTag = \"\";\n        this.validateForm();\n      }\n    },\n    clearFormField: function(key) {\n      this.formValues[key] = \"\";\n    },\n\n    updateURLParams: function(params) {\n      const urlParams = {};\n      Object.keys(params).forEach((key) => {\n        const value =\n          key === \"sortByPopularity\"\n            ? params.sortByPopularity || \"\"\n            : params[key];\n        urlParams[key2urlParam[key]] = value;\n      });\n\n      setURLParams(urlParams);\n    },\n    validateForm: function() {\n      this.$emit(\"input\", { ...this.formValues });\n      this.updateURLParams(this.formValues);\n\n      this.closeForm();\n    },\n    resetForm: function() {\n      this.formValues = { ...this.$props.value };\n\n      this.closeForm();\n    },\n    removeFilter: function(filterKey) {\n      this.formValues = {\n        ...this.formValues,\n        [filterKey]: filterKey === \"sortByPopularity\" ? false : \"\",\n      };\n      this.$emit(\"input\", {\n        ...this.$props.value,\n        [filterKey]: filterKey === \"sortByPopularity\" ? false : \"\",\n      });\n    },\n    loadBrands: async function() {\n      // Load list of brand when fields is acivated\n      if (this.brands === undefined) {\n        this.brands = []; // set empty list to avoid multiple trigge of the json loading\n        const images = require.context(\"../../assets/\", false, /\\.json$/);\n        this.brands = images(\"./brands.json\").map((x) => ({\n          text: x,\n          value: x,\n          key: x,\n        }));\n      }\n    },\n    setPopulateBrandFilter: function() {\n      this.populateBrandFilter = true;\n    },\n  },\n};\n</script>\n\n<style scoped>\n.root {\n  text-align: start;\n}\n.openForm {\n  width: 100%;\n  text-align: center;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=27d0d616&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=27d0d616&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"27d0d616\",\n  null\n  \n)\n\nexport default component.exports","import { getURLParam } from \"../../utils\";\n\nconst randomInsightTypeChoices = [\"label\", \"category\", \"brand\"];\n\nconst getRandomInsightType = () =>\n  randomInsightTypeChoices[\n    Math.floor(randomInsightTypeChoices.length * Math.random())\n  ];\n\nconst getInitialInsightType = () => {\n  const urlParamValue = getURLParam(\"type\");\n\n  if (urlParamValue.length) {\n    return urlParamValue;\n  }\n\n  return getRandomInsightType();\n};\n\nexport const getInitialFilterValues = () => {\n  return {\n    valueTag: getURLParam(\"value_tag\"),\n    brandFilter: getURLParam(\"brand\"),\n    countryFilter: getURLParam(\"country\"),\n    selectedInsightType: getInitialInsightType(),\n    sortByPopularity: !!getURLParam(\"sorted\"),\n  };\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"main-column\"},[_c('h3',[_vm._v(_vm._s(_vm.$t('questions.annotations')))]),_c('p',[_vm._v(\" \"+_vm._s(_vm.$t('questions.remaining_annotations'))+\" \"),_c('strong',[_vm._v(_vm._s(_vm.remainingCount))])]),_c('p',[_vm._v(\" \"+_vm._s(_vm.$t('questions.annotated_annotations'))+\": \"),_c('strong',[_vm._v(_vm._s(_vm.annotatedCount))])]),_c('div',{staticClass:\"ui divider\"}),_c('h3',[_vm._v(_vm._s(_vm.$t('questions.last_annotations')))]),_vm._l((_vm.sortedLastAnnotations),function(annotation){return _c('div',{key:annotation.question.insight_id},[_c('a',{attrs:{\"target\":\"_blank\",\"href\":_vm.getProductUrl(annotation.question.barcode)}},[_vm._v(_vm._s(annotation.question.insight_type)+\": \"+_vm._s(annotation.question.value))]),(annotation.annotation == 1)?_c('i',{staticClass:\"check green icon\"}):(annotation.annotation == -1)?_c('i',{staticClass:\"question icon\"}):(annotation.annotation == 0)?_c('i',{staticClass:\"times red icon\"}):_vm._e()])})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"main-column\">\n    <h3>{{$t('questions.annotations')}}</h3>\n    <p>\n      {{$t('questions.remaining_annotations')}}\n      <strong>{{ remainingCount }}</strong>\n    </p>\n    <p>\n      {{$t('questions.annotated_annotations')}}:\n      <strong>{{ annotatedCount }}</strong>\n    </p>\n    <div class=\"ui divider\" />\n    <h3>{{$t('questions.last_annotations')}}</h3>\n    <div v-for=\"annotation in sortedLastAnnotations\" :key=\"annotation.question.insight_id\">\n      <a\n        target=\"_blank\"\n        :href=\"getProductUrl(annotation.question.barcode)\"\n      >{{ annotation.question.insight_type }}: {{ annotation.question.value }}</a>\n      <i v-if=\"annotation.annotation == 1\" class=\"check green icon\"></i>\n      <i v-else-if=\"annotation.annotation == -1\" class=\"question icon\"></i>\n      <i v-else-if=\"annotation.annotation == 0\" class=\"times red icon\"></i>\n    </div>\n  </div>\n</template>\n\n<script>\nimport robotoffService from \"../robotoff\";\nimport offService from \"../off\";\n\nexport default {\n  name: \"AnnotationCounter\",\n  props: {\n    remainingCount: {\n      type: Number,\n      required: true\n    },\n    lastAnnotations: {\n      type: Array,\n      required: true\n    },\n    sessionAnnotatedCount: {\n      type: Number,\n      required: true\n    }\n  },\n  data: function() {\n    return {\n      username: offService.getUsername(),\n      historyAnnotatedCount: 0\n    };\n  },\n  methods: {\n    getProductUrl: function(barcode) {\n      return offService.getProductUrl(barcode);\n    }\n  },\n  computed: {\n    sortedLastAnnotations: function() {\n      const lastAnnotations = this.lastAnnotations.slice();\n      return lastAnnotations.reverse();\n    },\n    annotatedCount: function() {\n      return this.historyAnnotatedCount + this.sessionAnnotatedCount;\n    }\n  },\n  mounted() {\n    if (this.username.length) {\n      robotoffService\n        .getUserStatistics(this.username)\n        .then(result => {\n          this.historyAnnotatedCount = result.data.count.annotations;\n        })\n        .catch(error => window.console.log(error));\n    }\n  }\n};\n</script>\n\n<style scoped>\n.main-column {\n  padding: 1.5rem 1.5rem;\n  background-color: #686868;\n  color: #ffffff;\n}\n\na {\n  color: #ffffff;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AnnotationCounter.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AnnotationCounter.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AnnotationCounter.vue?vue&type=template&id=11ffedee&scoped=true&\"\nimport script from \"./AnnotationCounter.vue?vue&type=script&lang=js&\"\nexport * from \"./AnnotationCounter.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AnnotationCounter.vue?vue&type=style&index=0&id=11ffedee&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"11ffedee\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"ui grid stackable\">\n    <div class=\"five wide column centered\">\n      <div class=\"insight-column\">\n        <QuestionFilter v-model=\"filters\" />\n        <div class=\"ui divider\" />\n        <div class=\"ui hidden divider\"></div>\n        <div v-if=\"currentQuestion\">\n          <h3>{{ currentQuestion.question }}</h3>\n          <div v-if=\"valueTagQuestionsURL.length\">\n            <router-link :to=\"valueTagQuestionsURL\" target=\"_blank\">\n              <div class=\"ui big label\">\n                {{ currentQuestion.value }}\n                <i\n                  style=\"margin-left: 0.5rem\"\n                  class=\"external alternate icon small blue\"\n                ></i>\n              </div>\n            </router-link>\n          </div>\n          <div v-else>\n            <div class=\"ui big label\">{{ currentQuestion.value }}</div>\n          </div>\n          <div class=\"ui divider hidden\"></div>\n          <cropper\n            style=\"height: 300px; margin:auto\"\n            :src=\"currentQuestionImageUrl\"\n            :transitions=\"false\"\n            :canvas=\"false\"\n            :checkOrientation=\"false\"\n            :crossOrigine=\"false\"\n            :default-position=\"{\n              left: 0,\n              top: 0,\n            }\"\n            :stencilSize=\"\n              ({ boundaries }) => {\n                return {\n                  width: boundaries.width,\n                  height: boundaries.height,\n                };\n              }\n            \"\n            default-boundaries=\"fit\"\n            :stencil-props=\"{\n              handlers: {},\n              movable: false,\n              resizable: false,\n            }\"\n          />\n          <div class=\"ui divider hidden\"></div>\n\n          <div>\n            <button\n              data-inverted\n              data-tooltip=\"Shortcut: N\"\n              class=\"ui big negative button annotate\"\n              @click=\"annotate(0)\"\n            >\n              <i class=\"trash icon\"></i>\n              {{ $t(\"questions.no\") }}\n            </button>\n            <button\n              data-inverted\n              data-tooltip=\"Shortcut: K\"\n              class=\"ui big button annotate\"\n              @click=\"annotate(-1)\"\n            >\n              <i class=\"question icon\"></i>\n              {{ $t(\"questions.skip\") }}\n            </button>\n            <button\n              data-inverted\n              data-tooltip=\"Shortcut: O\"\n              class=\"ui big positive button annotate\"\n              @click=\"annotate(1)\"\n            >\n              <i class=\"check icon\"></i>\n              {{ $t(\"questions.yes\") }}\n            </button>\n          </div>\n        </div>\n        <div class=\"flex-center\" v-else style=\"margin-top: 100px\">\n          <LoadingSpinner :show=\"loading\" />\n          <div v-if=\"noRemainingQuestion\">\n            <h2>{{ $t(\"questions.no_questions_remaining\") }}</h2>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"six wide column centered\">\n      <Product :barcode=\"currentQuestionBarcode\" />\n    </div>\n    <div class=\"three wide column annotation-column\">\n      <AnnotationCounter\n        :remainingCount=\"remainingQuestionCount\"\n        :lastAnnotations=\"lastAnnotations\"\n        :sessionAnnotatedCount=\"sessionAnnotatedCount\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nimport { Cropper } from \"vue-advanced-cropper\";\nimport robotoffService from \"../robotoff\";\nimport { NO_QUESTION_LEFT } from \"../const\";\nimport Product from \"../components/Product\";\nimport LoadingSpinner from \"../components/LoadingSpinner\";\nimport QuestionFilter from \"../components/QuestionFilter/index\";\nimport { getInitialFilterValues } from \"../components/QuestionFilter/filterHelpers\";\n\nimport AnnotationCounter from \"../components/AnnotationCounter\";\n\nconst reformatTagMapping = {\n  \" \": \"-\",\n  \"'\": \"-\",\n  \"&\": \"\",\n  à: \"a\",\n  â: \"a\",\n  ä: \"a\",\n  é: \"e\",\n  è: \"e\",\n  ê: \"e\",\n  ë: \"e\",\n  î: \"i\",\n  ï: \"i\",\n  ô: \"o\",\n  ö: \"o\",\n  û: \"u\",\n  ù: \"u\",\n  ü: \"u\",\n};\n\nconst reformatValueTag = (value) => {\n  let output = value.trim().toLowerCase();\n  for (const [search, replace] of Object.entries(reformatTagMapping)) {\n    output = output.replace(new RegExp(search, \"g\"), replace);\n  }\n  output = output.replace(/-{2,}/g, \"-\");\n  return output;\n};\n\nexport default {\n  name: \"QuestionView\",\n  components: {\n    Product,\n    AnnotationCounter,\n    LoadingSpinner,\n    Cropper,\n    QuestionFilter,\n  },\n  data: function() {\n    return {\n      valueTagTimeout: null,\n      questionBuffer: [],\n      currentQuestion: null,\n      remainingQuestionCount: 0,\n      lastAnnotations: [],\n      sessionAnnotatedCount: 0,\n      seenInsightIds: new Set(),\n      filters: { ...getInitialFilterValues() },\n    };\n  },\n  watch: {\n    filters: {\n      handler: function(newFilters, oldFilters) {\n        if (\n          oldFilters === null ||\n          JSON.stringify(newFilters) !== JSON.stringify(oldFilters)\n        ) {\n          // when filters change reload questions\n          this.loadQuestions(true);\n        }\n      },\n      deep: true,\n    },\n    questionBuffer: function(newBuffer) {\n      // update the current question\n      if (\n        this.questionBuffer.length > 0 &&\n        this.questionBuffer[0] !== NO_QUESTION_LEFT\n      ) {\n        this.currentQuestion = this.questionBuffer[0];\n      } else {\n        this.currentQuestion = null;\n      }\n\n      // Fetch new questions to keep more than 9 questions in the buffer.\n      // Also send request for buffer sizes 0, 1, 2, 3 In cas a network problem occured\n      if (\n        (newBuffer.length == 9 || newBuffer.length < 4) &&\n        !newBuffer.includes(NO_QUESTION_LEFT)\n      ) {\n        this.loadQuestions(false);\n      }\n    },\n  },\n  methods: {\n    loadQuestions: function(clean = false) {\n      if (clean) {\n        this.questionBuffer = [];\n      }\n      const sortBy = this.filters.sortByPopularity ? \"popular\" : \"random\";\n      const count = 10;\n      robotoffService\n        .questions(\n          sortBy,\n          this.filters.selectedInsightType,\n          this.filters.valueTag,\n          reformatValueTag(this.filters.brandFilter),\n          this.filters.countryFilter !== \"en:world\"\n            ? this.filters.countryFilter\n            : null,\n          count\n        )\n        .then((result) => {\n          this.remainingQuestionCount = result.data.count;\n          if (result.data.questions.length == 0) {\n            if (!this.questionBuffer.includes(NO_QUESTION_LEFT)) {\n              if (clean) {\n                this.questionBuffer = [NO_QUESTION_LEFT];\n              } else {\n                this.questionBuffer = [\n                  ...this.questionBuffer,\n                  NO_QUESTION_LEFT,\n                ];\n              }\n            }\n            return;\n          }\n\n          const dataToAdd = [];\n          result.data.questions.forEach((q) => {\n            if (!this.seenInsightIds.has(q.insight_id)) {\n              dataToAdd.push(q);\n              this.seenInsightIds.add(q.insight_id);\n            }\n          });\n          if (\n            result.data.questions.length < count &&\n            (clean || !this.questionBuffer.includes(NO_QUESTION_LEFT))\n          ) {\n            dataToAdd.push(NO_QUESTION_LEFT);\n          }\n          if (clean) {\n            this.questionBuffer = [...dataToAdd];\n          } else {\n            this.questionBuffer = [...this.questionBuffer, ...dataToAdd];\n          }\n        });\n    },\n\n    updateLastAnnotations(question, annotation) {\n      this.lastAnnotations.push({\n        question,\n        annotation,\n      });\n\n      if (this.lastAnnotations.length > 10) {\n        this.lastAnnotations.shift();\n      }\n    },\n    annotate: function(annotation) {\n      if (annotation !== -1) {\n        robotoffService.annotate(this.currentQuestion.insight_id, annotation);\n        this.updateLastAnnotations(this.currentQuestion, annotation);\n        this.remainingQuestionCount -= 1;\n        this.sessionAnnotatedCount += 1;\n      }\n      this.currentQuestion = null;\n      this.questionBuffer = [...this.questionBuffer.slice(1)];\n    },\n    updateRemainingQuestionCount: function(newCount) {\n      this.remainingQuestionCount = newCount;\n    },\n  },\n  computed: {\n    currentQuestionImageUrl: function() {\n      if (this.currentQuestion.source_image_url) {\n        return this.currentQuestion.source_image_url;\n      }\n      return \"https://static.openfoodfacts.org/images/image-placeholder.png\";\n    },\n    loading: function() {\n      return !this.noRemainingQuestion && this.currentQuestion == null;\n    },\n    noRemainingQuestion: function() {\n      return (\n        this.questionBuffer.length === 1 &&\n        this.questionBuffer[0] === NO_QUESTION_LEFT\n      );\n    },\n    currentQuestionBarcode: function() {\n      if (this.currentQuestion && this.currentQuestion !== NO_QUESTION_LEFT) {\n        return this.currentQuestion.barcode;\n      } else {\n        return null;\n      }\n    },\n    valueTagQuestionsURL: function() {\n      if (\n        this.currentQuestion !== null &&\n        this.currentQuestion !== NO_QUESTION_LEFT &&\n        this.currentQuestion.value_tag\n      ) {\n        const urlParams = new URLSearchParams();\n        urlParams.append(\"type\", this.filters.selectedInsightType);\n        urlParams.append(\n          \"value_tag\",\n          reformatValueTag(this.currentQuestion.value_tag)\n        );\n        return `/questions?${urlParams.toString()}`;\n      }\n      return \"\";\n    },\n  },\n  mounted() {\n    const vm = this;\n    this.loadQuestions();\n    window.addEventListener(\"keyup\", function(event) {\n      if (event.target.nodeName == \"BODY\") {\n        if (event.key === \"k\") vm.annotate(-1);\n        if (event.key === \"n\") vm.annotate(0);\n        if (event.key === \"o\") vm.annotate(1);\n        if (event.key === \"p\") vm.rotateImage();\n      }\n    });\n  },\n};\n</script>\n\n<style scoped>\nbutton.annotate {\n  padding: 2rem 2.5rem;\n}\n\n.flex-center {\n  display: flex;\n  justify-content: center;\n}\n\n.insight-column {\n  text-align: center;\n}\n\n.annotation-column {\n  background-color: #686868;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./QuestionView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./QuestionView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./QuestionView.vue?vue&type=template&id=1e9968b6&scoped=true&\"\nimport script from \"./QuestionView.vue?vue&type=script&lang=js&\"\nexport * from \"./QuestionView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./QuestionView.vue?vue&type=style&index=0&id=1e9968b6&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1e9968b6\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ui grid stackable\"},[_c('div',{staticClass:\"four wide column centered\"},[(_vm.bufferIsEmpty)?_c('div',[(_vm.loading)?_c('p',[_vm._v(\"Loading ...\")]):_c('p',[_vm._v(\"No remaining images\")])]):_c('div',{staticClass:\"insight-column\"},[_c('h3',[_vm._v(_vm._s(_vm.productName))]),_c('a',{staticClass:\"ui button primary\",attrs:{\"target\":\"_blank\",\"href\":_vm.productUrl}},[_vm._v(_vm._s(_vm.$t(\"questions.view\")))]),_c('a',{staticClass:\"ui button\",attrs:{\"target\":\"_blank\",\"href\":_vm.productEditUrl}},[_vm._v(_vm._s(_vm.$t(\"questions.edit\")))]),_c('div',{staticClass:\"ui divider\"}),_c('viewer',{staticStyle:{\"height\":\"300px\"},attrs:{\"options\":_vm.imageZoomOptions}},[_c('img',{class:[_vm.imageRotationClass],staticStyle:{\"max-height\":\"300px\",\"max-width\":\"300px\"},attrs:{\"src\":_vm.productBuffer[0]['image_nutrition_url']}})])],1)]),_c('div',{staticClass:\"ten wide column centered\"},[_c('sui-table',{attrs:{\"celled\":\"\",\"definition\":\"\"}},[_c('sui-table-header',[_c('sui-table-header-cell'),_c('sui-table-header-cell',[_vm._v(_vm._s(_vm.$t(\"nutrition.table.value\")))]),_c('sui-table-header-cell',[_vm._v(_vm._s(_vm.$t(\"nutrition.table.ispresent\")))])],1),_vm._l((_vm.currentProductData),function(nutritiveValue){return _c('sui-table-row',{key:nutritiveValue.id},[_c('sui-table-cell',[_vm._v(_vm._s(_vm.$t((\"nutrition.nutriments.\" + (nutritiveValue.id)))))]),_c('sui-table-cell',{staticStyle:{\"display\":\"flex\"}},[_c('sui-input',{staticStyle:{\"flex-grow\":\"1\"},attrs:{\"disabled\":!nutritiveValue.visible,\"error\":_vm.isInvalid(_vm.currentProductData[nutritiveValue.id]['data'])},model:{value:(_vm.currentProductData[nutritiveValue.id]['data']),callback:function ($$v) {_vm.$set(_vm.currentProductData[nutritiveValue.id], 'data', $$v)},expression:\"currentProductData[nutritiveValue.id]['data']\"}}),(_vm.getNutrimentUnits(nutritiveValue.id).length > 1)?_c('sui-dropdown',{staticClass:\"unit\",staticStyle:{\"min-width\":\"3rem\"},attrs:{\"disabled\":!nutritiveValue.visible,\"selection\":\"\",\"placeholder\":_vm.$t('nutrition.table.unit'),\"options\":_vm.getNutrimentUnits(nutritiveValue.id)},model:{value:(_vm.currentProductData[nutritiveValue.id]['unit']),callback:function ($$v) {_vm.$set(_vm.currentProductData[nutritiveValue.id], 'unit', $$v)},expression:\"currentProductData[nutritiveValue.id]['unit']\"}}):_c('span',{staticClass:\"unit\"},[_vm._v(_vm._s(_vm.getNutrimentUnits(nutritiveValue.id)[0]))])],1),_c('sui-table-cell',[_c('sui-checkbox',{attrs:{\"name\":\"public\",\"label\":nutritiveValue.visible\n                ? _vm.$t('nutrition.present')\n                : _vm.$t('nutrition.absent')},model:{value:(_vm.currentProductData[nutritiveValue.id]['visible']),callback:function ($$v) {_vm.$set(_vm.currentProductData[nutritiveValue.id], 'visible', $$v)},expression:\"currentProductData[nutritiveValue.id]['visible']\"}})],1)],1)})],2),_c('div',[_c('button',{staticClass:\"ui button red annotate\",attrs:{\"data-tooltip\":\"Shortcut: d\"},on:{\"click\":function($event){return _vm.deleteProduct()}}},[_vm._v(\" \"+_vm._s(_vm.$t(\"nutrition.delete\"))+\" \")]),_c('button',{staticClass:\"ui button annotate\",attrs:{\"data-tooltip\":\"Shortcut: k\"},on:{\"click\":function($event){return _vm.skipProduct()}}},[_vm._v(\" \"+_vm._s(_vm.$t(\"nutrition.skip\"))+\" \")]),_c('button',{staticClass:\"ui button green annotate\",attrs:{\"data-tooltip\":\"Shortcut: v\"},on:{\"click\":function($event){return _vm.validate()}}},[_vm._v(\" \"+_vm._s(_vm.$t(\"nutrition.validate\"))+\" \")])])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"ui grid stackable\">\n    <div class=\"four wide column centered\">\n      <div v-if=\"bufferIsEmpty\">\n        <p v-if=\"loading\">Loading ...</p>\n        <p v-else>No remaining images</p>\n      </div>\n      <div v-else class=\"insight-column\">\n        <h3>{{ productName }}</h3>\n        <a target=\"_blank\" :href=\"productUrl\" class=\"ui button primary\">{{\n          $t(\"questions.view\")\n        }}</a>\n        <a target=\"_blank\" :href=\"productEditUrl\" class=\"ui button\">{{\n          $t(\"questions.edit\")\n        }}</a>\n        <div class=\"ui divider\"></div>\n        <viewer :options=\"imageZoomOptions\" style=\"height: 300px\">\n          <img\n            :class=\"[imageRotationClass]\"\n            :src=\"productBuffer[0]['image_nutrition_url']\"\n            style=\"max-height: 300px;\n          max-width: 300px;\"\n          />\n        </viewer>\n      </div>\n    </div>\n    <div class=\"ten wide column centered\">\n      <sui-table celled definition>\n        <sui-table-header>\n          <sui-table-header-cell />\n          <sui-table-header-cell>{{\n            $t(\"nutrition.table.value\")\n          }}</sui-table-header-cell>\n          <sui-table-header-cell>{{\n            $t(\"nutrition.table.ispresent\")\n          }}</sui-table-header-cell>\n        </sui-table-header>\n        <sui-table-row\n          v-for=\"nutritiveValue in currentProductData\"\n          :key=\"nutritiveValue.id\"\n        >\n          <sui-table-cell>{{\n            $t(`nutrition.nutriments.${nutritiveValue.id}`)\n          }}</sui-table-cell>\n          <sui-table-cell style=\"display: flex\">\n            <sui-input\n              :disabled=\"!nutritiveValue.visible\"\n              style=\"flex-grow:1\"\n              :error=\"isInvalid(currentProductData[nutritiveValue.id]['data'])\"\n              v-model=\"currentProductData[nutritiveValue.id]['data']\"\n            />\n\n            <sui-dropdown\n              :disabled=\"!nutritiveValue.visible\"\n              style=\"min-width: 3rem\"\n              selection\n              :placeholder=\"$t('nutrition.table.unit')\"\n              v-if=\"getNutrimentUnits(nutritiveValue.id).length > 1\"\n              v-model=\"currentProductData[nutritiveValue.id]['unit']\"\n              :options=\"getNutrimentUnits(nutritiveValue.id)\"\n              class=\"unit\"\n            />\n\n            <span class=\"unit\" v-else>{{\n              getNutrimentUnits(nutritiveValue.id)[0]\n            }}</span>\n          </sui-table-cell>\n          <sui-table-cell>\n            <sui-checkbox\n              name=\"public\"\n              :label=\"\n                nutritiveValue.visible\n                  ? $t('nutrition.present')\n                  : $t('nutrition.absent')\n              \"\n              v-model=\"currentProductData[nutritiveValue.id]['visible']\"\n            />\n          </sui-table-cell>\n        </sui-table-row>\n      </sui-table>\n      <div>\n        <button\n          data-tooltip=\"Shortcut: d\"\n          class=\"ui button red annotate\"\n          @click=\"deleteProduct()\"\n        >\n          {{ $t(\"nutrition.delete\") }}\n        </button>\n        <button\n          data-tooltip=\"Shortcut: k\"\n          class=\"ui button annotate\"\n          @click=\"skipProduct()\"\n        >\n          {{ $t(\"nutrition.skip\") }}\n        </button>\n        <button\n          data-tooltip=\"Shortcut: v\"\n          class=\"ui button green annotate\"\n          @click=\"validate()\"\n        >\n          {{ $t(\"nutrition.validate\") }}\n        </button>\n      </div>\n    </div>\n\n    <!-- <div class=\"six wide column centered\">\n      <Product :barcode=\"currentQuestionBarcode\" />\n    </div>\n    <div class=\"three wide column annotation-column\">\n      <AnnotationCounter\n        :remainingCount=\"remainingQuestionCount\"\n        :lastAnnotations=\"lastAnnotations\"\n        :sessionAnnotatedCount=\"sessionAnnotatedCount\"\n      />\n    </div>-->\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n// import { localSettings } from \"../settings\";\nimport nutrimentsDefaultUnit from \"../data/nutritions\";\nimport { OFF_URL } from \"../const\";\nimport offService from \"../off\";\n// import { annotate as robotoffAnnotate } from \"../robotoff\";\n// import Product from \"../components/Product\";\n// import AnnotationCounter from \"../components/AnnotationCounter\";\n\nconst getProducts = async (nbOfPages) => {\n  const randomPage = Math.floor(Math.random() * nbOfPages);\n  const {\n    data: { products },\n  } = await axios(\n    `${OFF_URL}/state/photos-validated/state/nutrition-facts-to-be-completed/${randomPage}.json?fields=code,lang,image_nutrition_url,product_name`\n  );\n  return products;\n};\n\nexport default {\n  name: \"NutritionView\",\n  components: {},\n  data: function() {\n    return {\n      valueTagInput: \"\",\n      imageZoomOptions: {\n        toolbar: {\n          rotateLeft: 1,\n          rotateRight: 1,\n        },\n      },\n      loading: false,\n      productBuffer: [],\n      currentProductData: {},\n    };\n  },\n  computed: {\n    productName: function() {\n      if (\n        this.productBuffer.length === 0 ||\n        this.productBuffer[0].product_name === null\n      ) {\n        return \"\";\n      }\n      return this.productBuffer[0].product_name;\n    },\n    productUrl: function() {\n      if (\n        this.productBuffer.length === 0 ||\n        this.productBuffer[0].code === null\n      ) {\n        return \"\";\n      }\n      return offService.getProductUrl(this.productBuffer[0].code);\n    },\n    productEditUrl: function() {\n      if (\n        this.productBuffer.length === 0 ||\n        this.productBuffer[0].code === null\n      ) {\n        return \"\";\n      }\n      return offService.getProductEditUrl(this.productBuffer[0].code);\n    },\n    bufferIsEmpty: function() {\n      return this.productBuffer.length === 0;\n    },\n  },\n  methods: {\n    isInvalid(value) {\n      return !value.match(\"^((<|>|<=|>=|~|.)*[0-9]+| *)$\");\n    },\n    clearValueTagInput() {\n      this.valueTagInput = \"\";\n    },\n    addProducts: async function() {\n      this.loading = true;\n      const newProducts = await getProducts(20);\n      this.productBuffer = this.productBuffer.concat(newProducts);\n      this.loading = false;\n    },\n    skipProduct() {\n      this.productBuffer.shift();\n    },\n    deleteProduct() {\n      const imageUrl = this.productBuffer[0][\"image_nutrition_url\"];\n      const imageId = imageUrl\n        .split(\"/\")\n        .pop()\n        .split(\".\")[0]; //get the first part of the image off/.../nutrition_fr.400.jpg => nutrition_fr\n\n      axios.post(\n        `${OFF_URL}/cgi/product_image_unselect.pl?`,\n        new URLSearchParams(`code=${this.productBuffer[0].code}&id=${imageId}`)\n      );\n\n      // this.productBuffer.shift();\n    },\n    validate() {\n      const toDelete = Object.keys(this.currentProductData).filter(\n        (nutrimentId) => !this.currentProductData[nutrimentId].visible\n      );\n      const toFill = Object.keys(this.currentProductData)\n        .filter(\n          (nutrimentId) =>\n            this.currentProductData[nutrimentId] &&\n            this.currentProductData[nutrimentId].visible &&\n            this.currentProductData[nutrimentId].data &&\n            this.isInvalid(this.currentProductData[nutrimentId].data) &&\n            this.currentProductData[nutrimentId].data.length > 0\n        )\n        .map((nutrimentId) => ({\n          name: nutrimentId,\n          value: `${this.currentProductData[nutrimentId].data}${this\n            .currentProductData[nutrimentId].unit || \"\"}`,\n          quantity: this.currentProductData[nutrimentId].data,\n          unit: this.currentProductData[nutrimentId].unit,\n        }));\n\n      axios.post(\n        `${OFF_URL}/cgi/product_jqm2.pl?`,\n        new URLSearchParams(\n          `${toFill\n            .map((data) => `${data.name}=${data.quantity}&`)\n            .join(\"\")}${toFill\n            .map((data) => (data.unit ? `${data.name}_unit=${data.unit}&` : \"\"))\n            .join(\"\")}${toDelete.map((name) => `${name}=\"\"&`).join(\"\")}code=${\n            this.productBuffer[0][\"code\"]\n          }`\n        )\n      ); // The status of the response is not displayed so no need to wait the response\n    },\n    resetProductData() {\n      const data = {};\n\n      for (const nutrimentId of Object.keys(nutrimentsDefaultUnit)) {\n        data[nutrimentId] = {\n          id: nutrimentId,\n          data: \"\",\n          unit: nutrimentsDefaultUnit[nutrimentId],\n          visible: true,\n        };\n      }\n      this.currentProductData = data;\n    },\n    getNutrimentUnits(nutrimentId) {\n      switch (nutrimentId) {\n        case \"nutriment_energy-kcal\":\n          return [\"kcal\"];\n        case \"nutriment_energy-kj\":\n          return [\"kJ\"];\n        default:\n          return [\n            { text: \"g\", value: \"g\" },\n            { text: \"mg\", value: \"mg\" },\n          ];\n      }\n    },\n  },\n  watch: {\n    productBuffer: function(newProductBuffer, oldProductBuffer) {\n      if (newProductBuffer.length <= 5 && !this.loading) {\n        this.addProducts();\n      }\n      if (\n        newProductBuffer[0] &&\n        (!oldProductBuffer[0] ||\n          newProductBuffer[0].code !== oldProductBuffer[0].code)\n      ) {\n        //if we have a product to display, and this product just changed\n        this.resetProductData();\n      }\n    },\n  },\n  mounted: function() {\n    this.addProducts();\n\n    const vm = this;\n    window.addEventListener(\"keyup\", function(event) {\n      if (event.target.nodeName == \"BODY\") {\n        if (event.key === \"k\") vm.skipProduct();\n        if (event.key === \"v\") vm.validate();\n      }\n    });\n  },\n};\n</script>\n\n<style scoped>\n.shadow {\n  opacity: 0.2;\n}\n.unit {\n  margin-left: 1rem;\n}\nbutton.annotate {\n  padding: 2rem 2.5rem;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NutritionView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NutritionView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NutritionView.vue?vue&type=template&id=5dbd3b68&scoped=true&\"\nimport script from \"./NutritionView.vue?vue&type=script&lang=js&\"\nexport * from \"./NutritionView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./NutritionView.vue?vue&type=style&index=0&id=5dbd3b68&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5dbd3b68\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ui grid stackable\"},[_c('div',{staticClass:\"eight wide column centered\"},[_c('div',{staticClass:\"filters\"},[_c('div',{staticClass:\"column\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.country),expression:\"country\"}],on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.country=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"value\":\"\"}},[_vm._v(\"country\")]),_c('option',[_vm._v(\"Australia\")]),_c('option',[_vm._v(\"Austria\")]),_c('option',[_vm._v(\"Belgium\")]),_c('option',[_vm._v(\"Denmark\")]),_c('option',[_vm._v(\"France\")]),_c('option',[_vm._v(\"Germany\")]),_c('option',[_vm._v(\"Greece\")]),_c('option',[_vm._v(\"Italy\")]),_c('option',[_vm._v(\"Sweden\")]),_c('option',[_vm._v(\"Switzerland\")]),_c('option',[_vm._v(\"United Kingdom\")]),_c('option',[_vm._v(\"United States\")])]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.contributor),expression:\"contributor\"}],attrs:{\"placeholder\":\"contributor\"},domProps:{\"value\":(_vm.contributor)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.contributor=$event.target.value}}})]),_c('div',[_c('button',{staticClass:\"ui button\",class:{ positive: _vm.category === 'baby-milks' },on:{\"click\":function($event){return _vm.setCategory('baby-milks')}}},[_vm._v(\" baby-milks \")]),_c('button',{staticClass:\"ui button\",class:{ positive: _vm.category === 'waters' },on:{\"click\":function($event){return _vm.setCategory('waters')}}},[_vm._v(\" waters \")])]),_c('button',{on:{\"click\":_vm.search}},[_vm._v(\" \"+_vm._s(_vm.$t(\"nutrition.search\"))+\" \")]),_c('button',{on:{\"click\":_vm.toggleHistoryIsOpen}},[_vm._v(\" \"+_vm._s(_vm.$t(\"nutrition.history.open\"))+\" \")])]),(_vm.bufferIsEmpty)?_c('div',[(_vm.loading)?_c('p',[_vm._v(\"Loading ...\")]):_c('p',[_vm._v(\"No remaining images\")])]):[_c('h3',[_vm._v(_vm._s(_vm.productName))]),_c('div',[_c('a',{staticClass:\"ui button primary\",attrs:{\"target\":\"_blank\",\"href\":_vm.productUrl}},[_vm._v(_vm._s(_vm.$t(\"questions.view\")))]),_c('a',{staticClass:\"ui button\",attrs:{\"target\":\"_blank\",\"href\":_vm.productEditUrl}},[_vm._v(_vm._s(_vm.$t(\"questions.edit\")))])]),_c('div',{staticClass:\"ui divider\"}),(_vm.step == 0)?[_c('cropper',{ref:\"cropper\",staticClass:\"imageDisplay\",attrs:{\"src\":_vm.imageURL,\"canvas\":false,\"checkOrientation\":false,\"crossOrigine\":false},on:{\"change\":_vm.changeCropCoordinate}}),_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('button',{staticClass:\"ui icon button\",on:{\"click\":_vm.rotateLeft}},[_c('i',{staticClass:\"undo icon\"})]),_c('button',{staticClass:\"ui icon button\",on:{\"click\":_vm.rotateRight}},[_c('i',{staticClass:\"redo icon\"})])])]:[_c('div',{style:((\"width: min(50vw, 800px); height: calc(min(50vw, 800px) * \" + (_vm.imageZoomOptions.coordinates\n                ? _vm.imageZoomOptions.coordinates.height /\n                  _vm.imageZoomOptions.coordinates.width\n                : 1) + \")\"))},[_c('interactiveImage',{attrs:{\"v-if\":_vm.imageZoomOptions.image,\"image\":_vm.imageZoomOptions.image,\"coordinates\":_vm.imageZoomOptions.coordinates,\"clickableBoxes\":_vm.clickableBoxes,\"anotationToValidate\":_vm.anotationToValidate,\"bestMatch\":_vm.bestMatch,\"boxesHighlight\":_vm.nutrimentToFill.boxes,\"attributedBoxesIds\":_vm.attributedBoxesIds,\"onlyPredictions\":_vm.useOnlyPredictions},on:{\"nutriPredictionAccept\":_vm.nutriPredictionAccepted,\"nutriPredictionCancel\":_vm.nutriPredictionCanceled,\"validatedBox\":_vm.validateHumanAnnotation}})],1)]],_c('div',{staticClass:\"questionContainer annotateLine\"},[_c('sui-step-group',{attrs:{\"step-number\":\"four\"}},[_c('sui-step',{attrs:{\"active\":_vm.step == 0,\"title\":_vm.$t('nutrition.steps.1')}}),_c('sui-step',{attrs:{\"active\":_vm.step == 1,\"title\":_vm.$t('nutrition.steps.2')}}),_c('sui-step',{attrs:{\"active\":_vm.step == 2 || _vm.step == 3,\"title\":_vm.$t('nutrition.steps.3')}}),_c('sui-step',{attrs:{\"active\":_vm.step == 4,\"title\":_vm.$t('nutrition.steps.4')}})],1),(_vm.step == 1)?[_c('div',{staticClass:\"line2\"},[_c('span',[_vm._v(_vm._s(_vm.$t(\"nutrition.basis\")))]),_c('sui-input',{directives:[{name:\"focus\",rawName:\"v-focus\"}],staticStyle:{\"width\":\"5rem\"},attrs:{\"error\":_vm.isInvalid(_vm.basisData['quantity']),\"inputmode\":\"decimal\"},model:{value:(_vm.basisData['quantity']),callback:function ($$v) {_vm.$set(_vm.basisData, 'quantity', $$v)},expression:\"basisData['quantity']\"}}),_c('span',{staticStyle:{\"font-size\":\"1.5rem\",\"margin-right\":\"0.5rem\"}},[_vm._v(\"g/ml\")]),_c('sui-checkbox',{attrs:{\"label\":_vm.$t(\"nutrition.servingSize\")},model:{value:(_vm.basisData['isServingSize']),callback:function ($$v) {_vm.$set(_vm.basisData, 'isServingSize', $$v)},expression:\"basisData['isServingSize']\"}})],1)]:_vm._e(),[_c('div',{staticClass:\"line2\"},[(_vm.step == 0)?_c('p',[_vm._v(\" \"+_vm._s(_vm.$t(\"nutrition.instructions.cropTheTable\"))+\" \")]):_vm._e(),(_vm.step == 2)?_c('p',[_vm._v(\" \"+_vm._s(_vm.$t(\"nutrition.instructions.verifyNutrimentDetected\"))+\" \")]):_vm._e(),(_vm.step == 3)?_c('p',[_vm._v(\" \"+_vm._s(_vm.$t(\"nutrition.instructions.selectMissingNutriments\"))+\" \")]):_vm._e(),(_vm.step == 4)?_c('p',[_vm._v(\" \"+_vm._s(_vm.$t(\"nutrition.instructions.selectValue\"))+\" \"),_c('span',{staticClass:\"nutrimentName\"},[_vm._v(_vm._s(_vm.$t((\"nutrition.nutriments.\" + (_vm.nutrimentToFill.id)))))])]):_vm._e()])],_c('div',{staticClass:\"line4\"},[_c('button',{staticClass:\"ui button annotate\",class:{ disabled: _vm.step === 0 },on:{\"click\":function($event){return _vm.prevStep()}}},[_vm._v(\" \"+_vm._s(_vm.$t(\"nutrition.prev\"))+\" \")]),_c('button',{staticClass:\"ui button annotate\",class:{ disabled: !_vm.canGoNext },on:{\"click\":function($event){return _vm.nextStep()}}},[_vm._v(\" \"+_vm._s(_vm.$t(\"nutrition.next\"))+\" \")])]),_c('div',{staticClass:\"line4\"},[_c('button',{staticClass:\"ui button negative annotate\",on:{\"click\":function($event){return _vm.unselectPicture()}}},[_vm._v(\" \"+_vm._s(_vm.$t(\"nutrition.unselect_picture\"))+\" \")]),_c('button',{staticClass:\"ui button annotate\",on:{\"click\":function($event){return _vm.skipProduct()}}},[_vm._v(\" \"+_vm._s(_vm.$t(\"nutrition.skip\"))+\" \")]),_c('button',{staticClass:\"ui button positive annotate\",class:{ disabled: !_vm.canValidate },on:{\"click\":function($event){return _vm.validate()}}},[_vm._v(\" \"+_vm._s(_vm.$t(\"nutrition.validate\"))+\" \")])])],2)],2),_c('div',{staticClass:\"eight wide column centered\"},[_c('div',{staticClass:\"table\"},[_c('NutritionTable',{attrs:{\"nutrimentToFillIndex\":_vm.nutrimentToFillIndex,\"selectLine\":_vm.step === 4},on:{\"setNurtiIndex\":_vm.setNutrimentValueIndex},model:{value:(_vm.currentProductData),callback:function ($$v) {_vm.currentProductData=$$v},expression:\"currentProductData\"}})],1)]),_c('sui-modal',{model:{value:(_vm.historyIsOpen),callback:function ($$v) {_vm.historyIsOpen=$$v},expression:\"historyIsOpen\"}},[_c('sui-modal-header',[_vm._v(_vm._s(_vm.$t(\"nutrition.history.title\")))]),_c('sui-modal-content',{attrs:{\"scrolling\":\"\"}},[_c('table',{staticClass:\"ui celled table\"},[_c('thead',[_c('tr',[_c('th',[_vm._v(_vm._s(_vm.$t(\"nutrition.history.status\")))]),_c('th',[_vm._v(_vm._s(_vm.$t(\"nutrition.history.product name\")))]),_c('th'),_c('th')])]),_c('tbody',_vm._l((_vm.history),function(product){return _c('tr',{key:product.code,class:{\n              positive: product.status === 'VALIDATED',\n              negative:\n                product.status === 'SKIP' || product.status === 'WRONG_IMAGE',\n            }},[_c('td',[_vm._v(\" \"+_vm._s(_vm.$t((\"nutrition.history.\" + (product.status))))+\" \")]),_c('td',[_vm._v(_vm._s(product.name))]),_c('td',[_c('a',{attrs:{\"target\":\"_blank\",\"href\":_vm.getProductUrl(product.code)}},[_vm._v(_vm._s(_vm.$t(\"nutrition.history.view\")))])]),_c('td',[_c('a',{attrs:{\"target\":\"_blank\",\"href\":_vm.getProductEditUrl(product.code)}},[_vm._v(_vm._s(_vm.$t(\"nutrition.history.edit\")))])])])}),0)])]),_c('sui-modal-actions',[_c('sui-button',{attrs:{\"positive\":\"\"},nativeOn:{\"click\":function($event){return _vm.toggleHistoryIsOpen.apply(null, arguments)}}},[_vm._v(\" \"+_vm._s(_vm.$t(\"nutrition.history.close\"))+\" \")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","const axios = require(\"axios\");\nconst nutrimentTranslation = require(\"../data/nutriments_translation_remapped.json\");\nconst { distance, closest } = require(\"fastest-levenshtein\");\n\nconst OFF_IMAGE_URL = \"https://static.openfoodfacts.org/images/products\";\nconst OVERLAPPING_THRESHOLD = 0.75;\n\nconst isOverlapping = (boxA, boxB) => {\n  // indicate if two boxes are on the same line\n  // to decide this, we check if boxes Y coordinates overlap on a distance of more than OVERLAPPING_THRESHOLD * min_Y_dist\n  const ref = Math.min(boxA.maxY - boxA.minY, boxB.maxY - boxB.minY);\n  const overlapDist =\n    Math.min(boxA.maxY, boxB.maxY) - Math.max(boxA.minY, boxB.minY);\n  return overlapDist / ref > OVERLAPPING_THRESHOLD;\n};\n\n// the traduction is a tree. For example, \"acide gras\" and \"acide gras saturé\" are represented as follow:\n// {\n//   acide: {\n//     gras: {\n//       nutriKey: \"nutriment_fat\",\n//       saturé: {\n//         nutriKey: \"nutriment_fat_saturated\",\n//       },\n//     },\n//   },\n// }\n//  leafs are represented by \"nutriKey\" which provides the normalized nutriment\n\nconst addExpression = (trad, expression, nutriKey) => {\n  // associate the expression to the nutriKey in the trad\n  if (expression.length === 0) {\n    return null;\n  }\n  const word = expression[0];\n  if (trad[word] === undefined) {\n    trad[word] = {};\n  }\n\n  if (expression.length === 1) {\n    trad[word][\"nutriKey\"] = nutriKey;\n  } else {\n    addExpression(trad[word], expression.slice(1), nutriKey);\n  }\n};\n\nconst remapTranslation = (lang) => {\n  // return \"en\" trad if the language is not available\n  // the translation is the tree define previously\n  // expressions are normalized (lower case without accent)\n\n  if (!Object.keys(nutrimentTranslation).includes(lang)) {\n    //TODO : log in the server that the detected language is not available\n    return remapTranslation(\"en\");\n  }\n  const translationTree = {};\n\n  Object.keys(nutrimentTranslation[lang]).forEach((nutryKey) => {\n    nutrimentTranslation[lang][nutryKey].forEach((trad) => {\n      const cleanTrad = trad\n        .normalize(\"NFD\")\n        .replace(/[\\u0300-\\u036f]/g, \"\")\n        .toLowerCase();\n\n      const splitted = cleanTrad.split(\" \");\n      addExpression(translationTree, splitted, nutryKey);\n    });\n  });\n  return translationTree;\n};\n\nconst boxIsInside = (box, { minX, minY, maxX, maxY }) => {\n  // check if a box has at least a point inside the rectangle\n\n  let nbComplet = 0;\n  box[\"boundingPoly\"][\"vertices\"].forEach(({ x, y }) => {\n    if (x !== undefined && y !== undefined) {\n      nbComplet += 1;\n    }\n  });\n  if (nbComplet < 4) {\n    // remove bounding bx with incomplet number of points\n    return false;\n  }\n  let hasPointInside = false;\n  box[\"boundingPoly\"][\"vertices\"].forEach(({ x, y }) => {\n    if (minX <= x && maxX >= x && minY <= y && maxY >= y) {\n      hasPointInside = true;\n    }\n  });\n  return hasPointInside;\n};\n\nconst addGlobalBox = (box) => {\n  // add the smallest rectangle containing the box\n\n  const extremaValues = {\n    minX: -1,\n    minY: -1,\n    maxX: -1,\n    maxY: -1,\n  };\n\n  box[\"boundingPoly\"][\"vertices\"].forEach(({ x, y }) => {\n    if (x && x > extremaValues.maxX) {\n      extremaValues.maxX = x;\n    }\n    if (y && y > extremaValues.maxY) {\n      extremaValues.maxY = y;\n    }\n    if (x && (x < extremaValues.minX || extremaValues.minX === -1)) {\n      extremaValues.minX = x;\n    }\n    if (y && (y < extremaValues.minY || extremaValues.minY === -1)) {\n      extremaValues.minY = y;\n    }\n  });\n\n  return { ...box, ...extremaValues };\n};\n\nconst extractValues = (text) => {\n  // regexp to detect figures\n\n  const cleanText = text\n    .normalize(\"NFD\")\n    .replace(/[\\u0300-\\u036f]/g, \"\")\n    .toLowerCase()\n    .replace(/,/gi, \".\")\n    .replace(/[^0-9a-z.><=~%]/gi, \"\");\n\n  const grams = [\n    ...cleanText.matchAll(\n      /[<|>|<|=|>|=|~]{0,1}[0-9]*[<|>|<|=|>|=|~|.]*[0-9]*g/g\n    ),\n  ]\n    .map((x) => x[0])\n    .filter((x) => x !== \"g\");\n  const milligrams = [\n    ...cleanText.matchAll(\n      /[<|>|<|=|>|=|~]{0,1}[0-9]*[<|>|<|=|>|=|~|.]*[0-9]*mg/g\n    ),\n  ]\n    .map((x) => x[0])\n    .filter((x) => x !== \"mg\");\n  const mcg = [\n    ...cleanText.matchAll(\n      /[<|>|<|=|>|=|~]{0,1}[0-9]*[<|>|<|=|>|=|~|.]*[0-9]*mcg/g\n    ),\n  ]\n    .map((x) => x[0])\n    .filter((x) => x !== \"mcg\");\n  const percents = [\n    ...cleanText.matchAll(\n      /[<|>|<|=|>|=|~]{0,1}[0-9]*[<|>|<|=|>|=|~|.]*[0-9]*%/g\n    ),\n  ]\n    .map((x) => x[0])\n    .filter((x) => x !== \"%\");\n  const kJ = [...cleanText.matchAll(/[0-9]*[<|>|<|=|>|=|~|.]*[0-9]*kj/g)]\n    .map((x) => x[0])\n    .filter((x) => x !== \"kj\");\n  const kcal = [...cleanText.matchAll(/[0-9]*[<|>|<|=|>|=|~|.]*[0-9]*kcal/g)]\n    .map((x) => x[0])\n    .filter((x) => x !== \"kcal\");\n  //   je n'arrive pas a extraire les chiffres qui ne sont dans aucune liste précédente. Au pire, je chercherai tous les nombre puis filtrer.\n  //   const alone = [\n  //     ...cleanText.matchAll(\n  //       /^(?:[0-9]*[<|>|<|=|>|=|~|.]*[0-9]*){1,}[^(?:kcal)(?:kj)g(?:mg)%]$/g\n  //     ),\n  //   ].map((x) => x[0]);\n\n  const all = [\n    ...cleanText.matchAll(\n      /[<|>|<|=|>|=|~]{0,1}[0-9]*[<|>|<|=|>|=|~|.]*[0-9]*/g\n    ),\n  ]\n    .map((x) => x[0])\n    .filter((x) => ![\"\", \"<\", \">\", \"<\", \"=\", \">\", \"=\", \"~\", \".\"].includes(x));\n  return {\n    grams,\n    milligrams,\n    mcg,\n    percents,\n    kJ,\n    kcal,\n    all,\n    // alone,\n  };\n};\n\nfunction getNutrimentBoxes(filteredBoxes, linkBoxes, lang) {\n  // try to recover all the nutriments\n\n  // TODO\n  // possible improvement : for the first step, instead of searching a box matching the text\n  // we could search for a box containing the text, because some time, boxes contains multiples words\n\n  const translationTree = remapTranslation(lang);\n  const rep = [];\n\n  const seenBoxes = [];\n\n  Object.keys(linkBoxes).forEach((k) => {\n    const i = parseInt(k);\n    if (!seenBoxes.includes(i)) {\n      const currentSolution = {};\n      const boxes = [i];\n      let translation = translationTree;\n\n      let j = i;\n      while (translation !== undefined && j !== null) {\n        let text = filteredBoxes[j].description;\n        text = text\n          .normalize(\"NFD\")\n          .replace(/[\\u0300-\\u036f]/g, \"\")\n          .toLowerCase()\n          .replace(/[^a-z0-9]/g, \"\");\n        if (\n          translation[text] !== undefined &&\n          translation[text][\"nutriKey\"] !== undefined\n        ) {\n          // This is a potential solution\n          currentSolution.key = translation[text][\"nutriKey\"];\n          currentSolution.boxes = [...boxes];\n        }\n        if (translation[text] !== undefined) {\n          translation = translation[text];\n          j = linkBoxes[j];\n          boxes.push(j);\n        } else {\n          translation = translation[text];\n        }\n      }\n\n      rep.push({\n        ...currentSolution,\n        text: currentSolution.boxes\n          ? currentSolution.boxes\n              .map((j) =>\n                filteredBoxes[j].description\n                  .normalize(\"NFD\")\n                  .replace(/[\\u0300-\\u036f]/g, \"\")\n                  .toLowerCase()\n                  .replace(/[^a-z0-9]/g, \"\")\n              )\n              .join(\" \")\n          : filteredBoxes[i].description\n              .normalize(\"NFD\")\n              .replace(/[\\u0300-\\u036f]/g, \"\")\n              .toLowerCase()\n              .replace(/[^a-z0-9]/g, \"\"),\n      });\n      if (currentSolution.boxes) {\n        currentSolution.boxes.forEach((j) => seenBoxes.push(j));\n      }\n    }\n  });\n  return rep;\n}\n\nfunction getValues(filteredBoxes, linkBoxes) {\n  const values = [];\n\n  const seenBoxes = [];\n  Object.keys(linkBoxes).forEach((k) => {\n    const index = parseInt(k);\n    const box = filteredBoxes[index];\n\n    if (!seenBoxes.includes(index)) {\n      seenBoxes.push(index);\n      let text = box.description;\n      let { grams, milligrams, mcg, percents, kJ, kcal, all } = extractValues(\n        text\n      );\n\n      let i = index;\n      const group = [i];\n      let again = true;\n      while (all.length > 0 && linkBoxes[i] !== null && again) {\n        again = false;\n        let {\n          grams: newGrams,\n          milligrams: newMilligrams,\n          mcg: newMcg,\n          percents: newPercents,\n          kJ: newKJ,\n          kcal: newKcal,\n          all: newAll,\n        } = extractValues(text + filteredBoxes[linkBoxes[i]].description);\n        if (\n          grams.length < newGrams.length ||\n          milligrams.length < newMilligrams.length ||\n          mcg.length < newMcg.length ||\n          percents.length < newPercents.length ||\n          kJ.length < newKJ.length ||\n          kcal.length < newKcal.length\n        ) {\n          again = true;\n          seenBoxes.push(linkBoxes[i]);\n          group.push(linkBoxes[i]);\n          i = linkBoxes[i];\n          text = text + filteredBoxes[i].description;\n          grams = newGrams;\n          milligrams = newMilligrams;\n          mcg = newMcg;\n          percents = newPercents;\n          kJ = newKJ;\n          kcal = newKcal;\n          all = newAll;\n        }\n      }\n\n      if (all.length > 0) {\n        values.push({\n          boxesIndexes: [...group],\n          text: [\n            ...grams,\n            ...milligrams,\n            ...mcg,\n            ...percents,\n            ...kJ,\n            ...kcal,\n            ...all,\n          ],\n        });\n      }\n    }\n  });\n\n  return values;\n}\n\nfunction filterBoxes(\n  ocrData,\n  { minX, minY, maxX, maxY, angle, width, height }\n) {\n  // return the list of the boxes inside the rectangle\n  // and provide a tree of which box is one the right of which box and close enough the be part of an expression.\n  while (angle < 0) {\n    angle += 360;\n  }\n  const filteredBoxes = ocrData.boxes\n    .map((box) => ({\n      ...box,\n      boundingPoly: {\n        ...box.boundingPoly,\n        vertices: box.boundingPoly.vertices.map(({ x, y }) => {\n          switch (angle % 360) {\n            case 90:\n              return { x: height - y, y: x };\n            case 180:\n              return { x: width - x, y: height - y };\n            case 270:\n              return { x: y, y: width - x };\n            default:\n              return { x, y };\n          }\n        }),\n      },\n    }))\n    .filter((box) => boxIsInside(box, { minX, minY, maxX, maxY }))\n    .map((box) => addGlobalBox(box))\n    .sort((a, b) => a.minY - b.minY);\n\n  const diffX = filteredBoxes.map((b) => b.maxY - b.minY).sort()[\n    Math.floor(filteredBoxes.length / 2)\n  ];\n\n  let X_sorted_indexes = [...filteredBoxes.map((_, i) => i)];\n  X_sorted_indexes.sort(\n    (a, b) => -filteredBoxes[a].minX + filteredBoxes[b].minX\n  );\n\n  const linkBoxes = {};\n  X_sorted_indexes.forEach((k) => {\n    const i = parseInt(k);\n    linkBoxes[i] = null;\n    let j = i - 1;\n    while (\n      linkBoxes[i] === null &&\n      j >= 0 &&\n      filteredBoxes[j].maxY > filteredBoxes[i].minY\n    ) {\n      if (\n        filteredBoxes[i].maxX - diffX <= filteredBoxes[j].minX &&\n        filteredBoxes[i].maxX + diffX >= filteredBoxes[j].minX &&\n        isOverlapping(filteredBoxes[i], filteredBoxes[j])\n      ) {\n        linkBoxes[i] = j;\n      }\n      j = j - 1;\n    }\n    j = i + 1;\n    while (\n      linkBoxes[i] === null &&\n      j < filteredBoxes.length &&\n      filteredBoxes[j].minY < filteredBoxes[i].maxY\n    ) {\n      if (\n        filteredBoxes[i].maxX - diffX <= filteredBoxes[j].minX &&\n        filteredBoxes[i].maxX + diffX >= filteredBoxes[j].minX &&\n        isOverlapping(filteredBoxes[i], filteredBoxes[j])\n      ) {\n        linkBoxes[i] = j;\n      }\n      j = j + 1;\n    }\n  });\n  return { filteredBoxes, linkBoxes };\n}\n\nconst ocr = {\n  async getOCRdata(imageUrl) {\n    // fetch the OCR\n    const {\n      data: {\n        responses: [{ textAnnotations: textAnnotations }],\n      },\n    } = await axios.get(`${OFF_IMAGE_URL}/${imageUrl.split(\".jpg\")[0]}.json`);\n\n    return {\n      lang: textAnnotations[0][\"locale\"],\n      text: textAnnotations[0][\"description\"],\n      boxes: textAnnotations.slice(1),\n    };\n  },\n  getData(\n    ocrData,\n    {\n      minX,\n      minY,\n      maxX,\n      maxY,\n      image: {\n        width,\n        height,\n        transforms: { rotate: angle = 0 },\n      },\n    }\n  ) {\n    // recover all the information from OCR and the cropping\n\n    const { filteredBoxes, linkBoxes } = filterBoxes(ocrData, {\n      minX,\n      minY,\n      maxX,\n      maxY,\n      angle,\n      width,\n      height,\n    });\n    filteredBoxes.forEach((x, i) => {\n      filteredBoxes[i] = { id: i, ...x };\n    });\n    const values = getValues(filteredBoxes, linkBoxes);\n    const nutriments = getNutrimentBoxes(\n      filteredBoxes,\n      linkBoxes,\n      ocrData.lang\n    );\n    return { filteredBoxes, values, nutriments };\n  },\n\n  bestMatch({ search, lang = \"\", except = [] }) {\n    // for search (a string) return the 5 closest nutriments\n    if (!search) {\n      return [];\n    }\n    let translation = nutrimentTranslation[lang];\n\n    if (!translation) {\n      translation = {};\n    }\n    if (lang !== \"en\") {\n      Object.keys(nutrimentTranslation[\"en\"]).forEach((key) => {\n        if (!translation[key]) {\n          translation[key] = [...nutrimentTranslation[\"en\"][key]];\n        } else {\n          nutrimentTranslation[\"en\"][key].forEach((trad) => {\n            if (!translation[key].includes(trad)) {\n              translation[key].push(trad);\n            }\n          });\n        }\n        translation[key];\n      });\n    }\n\n    const normalizedSearch = search\n      .normalize(\"NFD\")\n      .replace(/[\\u0300-\\u036f]/g, \"\")\n      .toLowerCase();\n    return Object.keys(translation)\n      .filter(\n        (nutriKey) =>\n          !except.includes(nutriKey) &&\n          !(\n            nutriKey === \"nutriment_energy\" &&\n            except.includes(\"nutriment_energy-kj\")\n          )\n      )\n      .map((nutriKey) => {\n        const text = closest(\n          normalizedSearch,\n          translation[nutriKey].map((x) =>\n            x\n              .normalize(\"NFD\")\n              .replace(/[\\u0300-\\u036f]/g, \"\")\n              .toLowerCase()\n          )\n        );\n        // const text = translation[nutriKey][0]\n        //   .normalize(\"NFD\")\n        //   .replace(/[\\u0300-\\u036f]/g, \"\")\n        //   .toLowerCase();\n        return {\n          key: nutriKey,\n          text,\n          d: distance(normalizedSearch, text),\n        };\n      })\n      .sort((a, b) => a.d - b.d)\n      .slice(0, 5);\n  },\n};\nexport default ocr;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"rootContainer\"},[_c('div',{ref:\"root\",staticClass:\"vue-preview\",style:(_vm.style)},[_c('div',{ref:\"wrapper\",staticClass:\"wrapper\",style:(_vm.wrapperStyle)},[_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.image && _vm.image.src),expression:\"image && image.src\"}],ref:\"image\",staticClass:\"image\",style:(_vm.imageStyle),attrs:{\"src\":_vm.image && _vm.image.src}}),_c('svg',{staticClass:\"image\",style:(_vm.svgStyle),attrs:{\"width\":_vm.imageWidth,\"height\":_vm.imageHeight}},[_c('rect',{staticClass:\"nutriHighlight\",attrs:{\"x0\":\"0\",\"y0\":\"0\",\"width\":_vm.imageWidth,\"height\":_vm.imageHeight}}),_vm._l((_vm.clickableBoxes),function(data,j){return _c('g',{key:j},_vm._l((data.boxes),function(box,i){return _c('path',{key:(j + \"-\" + i),class:{\n              highlight: _vm.displayedBox.index === i,\n              alreadyUsed: _vm.attributedBoxesIds.includes(box.id),\n            },attrs:{\"d\":_vm.boxBoundingPath(box)},on:{\"click\":function($event){return _vm.displayBox(j)}}})}),0)}),(_vm.anotationToValidate && _vm.anotationToValidate.boxes)?_c('g',_vm._l((_vm.anotationToValidate.boxes),function(box){return _c('path',{key:box.minX,staticClass:\"nutriHighlight\",attrs:{\"d\":_vm.boxBoundingPath(box)}})}),0):_vm._e(),(_vm.boxesHighlight)?_c('g',_vm._l((_vm.boxesHighlight),function(box){return _c('path',{key:box.minX,staticClass:\"boxHighlighted\",attrs:{\"d\":_vm.boxBoundingPath(box)}})}),0):_vm._e()],2)])]),(_vm.displayedBox && _vm.displayedBox.values !== undefined)?_c('div',{directives:[{name:\"focus\",rawName:\"v-focus\"}],staticClass:\"anotation\",style:(_vm.interactiveElementStyle(\n        _vm.displayedBox.boxes[_vm.displayedBox.boxes.length - 1]\n      ))},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.displayedBox.values),expression:\"displayedBox.values\"}],domProps:{\"value\":(_vm.displayedBox.values)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.displayedBox, \"values\", $event.target.value)}}}),(_vm.onlyPredictions)?[_c('button',{on:{\"click\":_vm.removeDisplayedBox}},[_vm._v(\"X\")]),_c('ol',{staticClass:\"propositions\"},_vm._l((_vm.potentialNutriments),function(proposition){return _c('li',{key:proposition.key},[_c('button',{on:{\"click\":function($event){return _vm.validateProposition(proposition.key)}}},[_vm._v(\" \"+_vm._s(proposition.key)+\"(\"+_vm._s(proposition.text)+\") \")])])}),0)]:[_c('br'),_c('button',{on:{\"click\":_vm.removeDisplayedBox}},[_vm._v(\"X\")]),_c('button',{on:{\"click\":_vm.validateValue}},[_vm._v(\"V\")])]],2):_vm._e(),(_vm.anotationToValidate && _vm.anotationToValidate.boxes)?_c('div',{staticClass:\"anotation\",style:(_vm.interactiveElementStyle(\n        _vm.anotationToValidate.boxes[_vm.anotationToValidate.boxes.length - 1]\n      ))},[_vm._v(\" \"+_vm._s(_vm.anotationToValidate.text)+\" \"),_c('button',{on:{\"click\":_vm.cancelNutrimentPrediction}},[_vm._v(\"X\")]),_c('button',{on:{\"click\":_vm.validateNutrimentPrediction}},[_vm._v(\"V\")])]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export const points2Path = (points, close) =>\n  \"M \" +\n  points.map((point) => `${point.x} ${point.y}`).join(\" L \") +\n  (close ? \" Z\" : \"\");\n\nexport const points2Key = (points) =>\n  [...points]\n    .sort((pA, pB) => (pA.x == pB.x ? pA.y - pB.y : pA.x - pB.x))\n    .map((point) => `(${point.x},${point.y})`)\n    .join(\"\");\n\nconst compare3points = (pA, pB, pC) =>\n  (pB.x - pA.x) * (pC.y - pA.y) - (pB.y - pA.y) * (pC.x - pA.x) > 0;\n\nexport const getConvexPoints = (points) => {\n  const sortedPoints = [...points].sort((pA, pB) => pA.x - pB.x);\n\n  const enveloppe = [0];\n\n  while (\n    enveloppe[enveloppe.length - 1] !== enveloppe[0] ||\n    enveloppe.length === 1\n  ) {\n    const a = enveloppe[enveloppe.length - 1];\n    for (let b = 0; b < sortedPoints.length; b++) {\n      if (a !== b) {\n        let bord = true;\n        let c = 0;\n        while (c < sortedPoints.length && bord) {\n          if (\n            c !== a &&\n            c !== b &&\n            compare3points(sortedPoints[a], sortedPoints[b], sortedPoints[c])\n          ) {\n            bord = false;\n          }\n          c++;\n        }\n        if (bord) {\n          enveloppe.push(b);\n        }\n      }\n    }\n  }\n  return enveloppe\n    .slice(0, enveloppe.length)\n    .map((pointIndex) => sortedPoints[pointIndex]);\n};\n\nexport const getCenter = (points) => {\n  const sum = points.reduce((pA, pB) => ({ x: pA.x + pB.x, y: pA.y + pB.y }), {\n    x: 0,\n    y: 0,\n  });\n  return { x: sum.x / points.length, y: sum.y / points.length };\n};\n\nexport const getBoxes = (textAnnotations) => {\n  const rep = {};\n  textAnnotations.forEach((box, boxIndex) => {\n    if (boxIndex > 0) {\n      rep[points2Key(box.boundingPoly.vertices)] = {\n        id: points2Key(box.boundingPoly.vertices),\n        boxIndex: boxIndex,\n        points: box.boundingPoly.vertices,\n        path: points2Path(box.boundingPoly.vertices, true),\n        text: box.description,\n        visible: true,\n        toDelete: false,\n      };\n    }\n  });\n  return rep;\n};\n\nexport const getGraphConnexComponents = (graph) => {\n  const node2component = {};\n\n  Object.keys(graph).forEach((key, index) => {\n    node2component[key] = index;\n  });\n  Object.keys(graph).forEach((key) => {\n    const neighbors = [...graph[key], key];\n\n    const components = neighbors.map((n) => node2component[n]); //get all components to fusion\n\n    const minComponentId = components.reduce(\n      (a, b) => Math.min(a, b),\n      Object.keys(graph).length\n    );\n\n    Object.keys(graph).forEach((key) => {\n      if (components.includes(node2component[key])) {\n        node2component[key] = minComponentId;\n      }\n    });\n  });\n\n  return node2component;\n};\n\nexport const getHullPaths = (graph, boxes) => {\n  const node2component = getGraphConnexComponents(graph); //associate each noteId to a component number\n  if (boxes === 0) {\n    boxes += 1;\n  }\n\n  // we reverse the key/value\n  // for each component index we get the list of nodeId\n  const component2nodes = {};\n  Object.keys(node2component).forEach((node) => {\n    const componentId = node2component[node];\n    if (component2nodes[componentId] === undefined) {\n      component2nodes[componentId] = [node];\n    } else {\n      component2nodes[componentId].push(node);\n    }\n  });\n\n  //now we will return a dict associated key to convex cell\n  const rep = {};\n  Object.keys(component2nodes).forEach((key) => {\n    const points = component2nodes[key].reduce(\n      (accumulateur, nodeId) => [...accumulateur, ...boxes[nodeId].points],\n      []\n    );\n    const componentKey = [...component2nodes[key]]\n      .sort((nodeId1, nodeId2) => (nodeId1 < nodeId2 ? 1 : -1))\n      .join(\"-\");\n\n    rep[componentKey] = {\n      // rep[points.join(\"//\")] = {\n      path: points2Path(getConvexPoints(points), true),\n      points: points,\n      text: \"\",\n      visible: true,\n      id: componentKey,\n    };\n  });\n\n  return rep;\n};\n\nexport const sortKeys = (node1Key, node2Key) => {\n  const start = node2Key > node1Key ? node2Key : node1Key;\n  const end = node2Key <= node1Key ? node2Key : node1Key;\n  return [start, end];\n};\n\nexport const isInRectangle = (x1, y1, x2, y2, points) => {\n  const Xmin = Math.min(x1, x2);\n  const Ymin = Math.min(y1, y2);\n  const Xmax = Math.max(x1, x2);\n  const Ymax = Math.max(y1, y2);\n\n  for (let i = 0; i < points.length; i++) {\n    if (\n      points[i].x > Xmax ||\n      points[i].x < Xmin ||\n      points[i].y > Ymax ||\n      points[i].y < Ymin\n    ) {\n      return false;\n    }\n  }\n  return true;\n};\n","<script>\nimport { points2Path } from \"../utils/tableAnotation\";\n\nfunction rotateSize(size, angle) {\n  const radians = (angle * Math.PI) / 180;\n  return {\n    width:\n      Math.abs(size.width * Math.cos(radians)) +\n      Math.abs(size.height * Math.sin(radians)),\n    height:\n      Math.abs(size.width * Math.sin(radians)) +\n      Math.abs(size.height * Math.cos(radians)),\n  };\n}\nfunction getStyleTransforms({ rotate, flip, scaleX, scaleY }) {\n  let transform = \"\";\n  transform += ` rotate(${rotate}deg) `;\n  transform += ` scaleX(${scaleX * (flip.horizontal ? -1 : 1)}) `;\n  transform += ` scaleY(${scaleY * (flip.vertical ? -1 : 1)}) `;\n  return transform;\n}\nexport default {\n  props: {\n    coordinates: {\n      type: Object,\n    },\n    transitions: {\n      type: Object,\n    },\n    image: {\n      type: Object,\n      default() {\n        return {};\n      },\n    },\n    imageClass: {\n      type: String,\n    },\n    width: {\n      type: Number,\n    },\n    height: {\n      type: Number,\n    },\n    onlyPredictions: { type: Boolean },\n    clickableBoxes: { type: Array },\n    anotationToValidate: { type: Object },\n    bestMatch: { type: Function },\n    boxesHighlight: { type: Array },\n    attributedBoxesIds: { type: Array }, // list of box_id that as been used (fo nutriment or quantity selection)\n  },\n  data() {\n    return {\n      calculatedImageSize: {\n        width: 0,\n        height: 0,\n      },\n      calculatedSize: {\n        width: 0,\n        height: 0,\n      },\n      displayedBox: {},\n    };\n  },\n  computed: {\n    style() {\n      if (!this.fill) {\n        const result = {};\n        if (this.width) {\n          result.width = `${this.size.width}px`;\n        }\n        if (this.height) {\n          result.height = `${this.size.height}px`;\n        }\n        if (this.transitions && this.transitions.enabled) {\n          result.transition = `${this.transitions.time}ms ${this.transitions.timingFunction}`;\n        }\n        return result;\n      } else {\n        return {};\n      }\n    },\n    imageWidth() {\n      return this.image.width;\n    },\n    imageHeight() {\n      return this.image.height;\n    },\n    wrapperStyle() {\n      const result = {\n        width: `${this.size.width}px`,\n        height: `${this.size.height}px`,\n        left: `calc(50% - ${this.size.width / 2}px)`,\n        top: `calc(50% - ${this.size.height / 2}px)`,\n      };\n      if (this.transitions && this.transitions.enabled) {\n        result.transition = `${this.transitions.time}ms ${this.transitions.timingFunction}`;\n      }\n      return result;\n    },\n    imageStyle() {\n      if (this.coordinates && this.image) {\n        const coefficient = this.coordinates.width / this.size.width;\n        const transforms = {\n          rotate: 0,\n          flip: {\n            horizontal: false,\n            vertical: false,\n          },\n          ...this.image.transforms,\n          scaleX: 1 / coefficient,\n          scaleY: 1 / coefficient,\n        };\n        const width = this.imageSize.width;\n        const height = this.imageSize.height;\n        const virtualSize = rotateSize(\n          {\n            width,\n            height,\n          },\n          transforms.rotate\n        );\n        const result = {\n          width: `${width}px`,\n          height: `${height}px`,\n          left: \"0px\",\n          top: \"0px\",\n        };\n        const compensations = {\n          rotate: {\n            left: ((width - virtualSize.width) * transforms.scaleX) / 2,\n            top: ((height - virtualSize.height) * transforms.scaleY) / 2,\n          },\n          scale: {\n            left: ((1 - transforms.scaleX) * width) / 2,\n            top: ((1 - transforms.scaleY) * height) / 2,\n          },\n        };\n        result.transform =\n          `translate(\n\t\t\t\t${-this.coordinates.left / coefficient -\n          compensations.rotate.left -\n          compensations.scale.left}px,${-this.coordinates.top / coefficient -\n            compensations.rotate.top -\n            compensations.scale.top}px) ` + getStyleTransforms(transforms);\n        if (this.transitions && this.transitions.enabled) {\n          result.transition = `${this.transitions.time}ms ${this.transitions.timingFunction}`;\n        }\n        return result;\n      } else {\n        return {};\n      }\n    },\n    svgStyle() {\n      // the difference with the image style is the rotation\n      // box coordinates are already rotated, so the svg does not need to be rotated\n      if (this.coordinates && this.image) {\n        const coefficient = this.coordinates.width / this.size.width;\n        const transforms = {\n          flip: {\n            horizontal: false,\n            vertical: false,\n          },\n          rotate: 0,\n          ...this.image.transforms,\n          scaleX: 1 / coefficient,\n          scaleY: 1 / coefficient,\n        };\n\n        const { width, height } = rotateSize(this.imageSize, transforms.rotate);\n\n        const result = {\n          width: `${width}px`,\n          height: `${height}px`,\n          left: \"0px\",\n          top: \"0px\",\n        };\n        result.transformOrigin = \"0 0\";\n        result.transform =\n          `translate(\n          ${-this.coordinates.left * transforms.scaleX}px,${-this.coordinates\n            .top * transforms.scaleY}px) ` +\n          getStyleTransforms({ ...transforms, rotate: 0 });\n        if (this.transitions && this.transitions.enabled) {\n          result.transition = `${this.transitions.time}ms ${this.transitions.timingFunction}`;\n        }\n        return result;\n      } else {\n        return {};\n      }\n    },\n    size() {\n      return {\n        width: this.width || this.calculatedSize.width,\n        height: this.height || this.calculatedSize.height,\n      };\n    },\n    imageSize() {\n      return {\n        width: this.image.width || this.calculatedImageSize.width,\n        height: this.image.height || this.calculatedImageSize.height,\n      };\n    },\n    potentialNutriments() {\n      if (!this.displayedBox || !this.displayedBox.values) {\n        return [];\n      }\n      const rep = this.$props.bestMatch({ search: this.displayedBox.values });\n      return rep;\n    },\n  },\n  watch: {\n    clickableBoxes() {\n      this.displayedBox = {};\n    },\n    image(value) {\n      if (value.width || value.height) {\n        this.onChangeImage();\n      }\n    },\n  },\n  mounted() {\n    this.onChangeImage();\n    this.$refs.image.addEventListener(\"load\", () => {\n      this.refreshImage();\n    });\n    window.addEventListener(\"resize\", this.refresh);\n    window.addEventListener(\"orientationchange\", this.refresh);\n  },\n  destroyed() {\n    window.removeEventListener(\"resize\", this.refresh);\n    window.removeEventListener(\"orientationchange\", this.refresh);\n  },\n  methods: {\n    boxBoundingPath(box) {\n      return points2Path(box.boundingPoly.vertices, true);\n    },\n    displayBox(boxIndex) {\n      if (this.displayedBox && this.displayedBox.index === boxIndex) {\n        this.displayedBox = {};\n      } else {\n        this.displayedBox = {\n          index: boxIndex,\n          ...this.$props.clickableBoxes[boxIndex],\n        };\n      }\n    },\n    removeDisplayedBox() {\n      this.displayedBox = {};\n    },\n    validateProposition(nutriKey) {\n      this.$emit(\"validatedBox\", { ...this.displayedBox, key: nutriKey });\n      this.displayedBox = {};\n    },\n    validateValue() {\n      this.$emit(\"validatedBox\", { ...this.displayedBox });\n      this.displayedBox = {};\n    },\n    validateNutrimentPrediction() {\n      this.$emit(\"nutriPredictionAccept\");\n    },\n    cancelNutrimentPrediction() {\n      this.$emit(\"nutriPredictionCancel\");\n    },\n    interactiveElementStyle({ maxX: x, minY: y }) {\n      if (this.coordinates && this.image) {\n        const result = {\n          left: `${((x - this.coordinates.left) * this.size.width) /\n            this.coordinates.width}px`,\n          top: `${((y - this.coordinates.top) * this.size.height) /\n            this.coordinates.height}px`,\n        };\n        return result;\n      } else {\n        return {};\n      }\n    },\n    refreshImage() {\n      const image = this.$refs.image;\n      this.calculatedImageSize.height = image.naturalHeight;\n      this.calculatedImageSize.width = image.naturalWidth;\n    },\n    refresh() {\n      const root = this.$refs.root;\n      if (!this.width) {\n        this.calculatedSize.width = root.clientWidth;\n      }\n      if (!this.height) {\n        this.calculatedSize.height = root.clientHeight;\n      }\n    },\n    onChangeImage() {\n      const image = this.$refs.image;\n      if (image && image.complete) {\n        this.refreshImage();\n      }\n      this.refresh();\n    },\n  },\n};\n</script>\n\n<template>\n  <div class=\"rootContainer\">\n    <div ref=\"root\" class=\"vue-preview\" :style=\"style\">\n      <div ref=\"wrapper\" class=\"wrapper\" :style=\"wrapperStyle\">\n        <img\n          v-show=\"image && image.src\"\n          ref=\"image\"\n          :src=\"image && image.src\"\n          class=\"image\"\n          :style=\"imageStyle\"\n        />\n        <svg\n          class=\"image\"\n          :style=\"svgStyle\"\n          :width=\"imageWidth\"\n          :height=\"imageHeight\"\n        >\n          <rect\n            x0=\"0\"\n            y0=\"0\"\n            :width=\"imageWidth\"\n            :height=\"imageHeight\"\n            class=\"nutriHighlight\"\n          />\n          <g v-for=\"(data, j) in clickableBoxes\" :key=\"j\">\n            <path\n              v-for=\"(box, i) in data.boxes\"\n              :key=\"`${j}-${i}`\"\n              :d=\"boxBoundingPath(box)\"\n              :class=\"{\n                highlight: displayedBox.index === i,\n                alreadyUsed: attributedBoxesIds.includes(box.id),\n              }\"\n              @click=\"displayBox(j)\"\n            />\n          </g>\n          <g v-if=\"anotationToValidate && anotationToValidate.boxes\">\n            <path\n              v-for=\"box in anotationToValidate.boxes\"\n              :key=\"box.minX\"\n              :d=\"boxBoundingPath(box)\"\n              class=\"nutriHighlight\"\n            />\n          </g>\n          <g v-if=\"boxesHighlight\">\n            <path\n              v-for=\"box in boxesHighlight\"\n              :key=\"box.minX\"\n              :d=\"boxBoundingPath(box)\"\n              class=\"boxHighlighted\"\n            />\n          </g>\n        </svg>\n      </div>\n    </div>\n\n    <!-- the clicked box Nutritive Information -->\n    <div\n      v-if=\"displayedBox && displayedBox.values !== undefined\"\n      class=\"anotation\"\n      :style=\"\n        interactiveElementStyle(\n          displayedBox.boxes[displayedBox.boxes.length - 1]\n        )\n      \"\n      v-focus\n    >\n      <input v-model=\"displayedBox.values\" />\n      <template v-if=\"onlyPredictions\">\n        <button @click=\"removeDisplayedBox\">X</button>\n        <ol class=\"propositions\">\n          <li v-for=\"proposition in potentialNutriments\" :key=\"proposition.key\">\n            <button @click=\"validateProposition(proposition.key)\">\n              {{ proposition.key }}({{ proposition.text }})\n            </button>\n          </li>\n        </ol>\n      </template>\n      <template v-else>\n        <br />\n        <button @click=\"removeDisplayedBox\">X</button>\n        <button @click=\"validateValue\">V</button>\n      </template>\n    </div>\n\n    <!-- The nutrition to verify -->\n    <div\n      class=\"anotation\"\n      v-if=\"anotationToValidate && anotationToValidate.boxes\"\n      :style=\"\n        interactiveElementStyle(\n          anotationToValidate.boxes[anotationToValidate.boxes.length - 1]\n        )\n      \"\n    >\n      {{ anotationToValidate.text }}\n      <button @click=\"cancelNutrimentPrediction\">X</button>\n      <button @click=\"validateNutrimentPrediction\">V</button>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.rootContainer {\n  position: relative;\n  width: 100%;\n  height: 100%;\n}\n.vue-preview {\n  overflow: hidden;\n  box-sizing: border-box;\n\n  width: 100%;\n  height: 100%;\n}\n.fill {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n}\n.wrapper {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n}\n.image {\n  pointer-events: none;\n  position: absolute;\n  user-select: none;\n  transform-origin: center;\n  max-width: none !important;\n}\npath {\n  stroke: red;\n  stroke-width: 2;\n  fill: red;\n  fill-opacity: 0.3;\n  pointer-events: all;\n  cursor: pointer;\n}\nrect {\n  fill-opacity: 0.1;\n  fill: white;\n  pointer-events: all;\n}\ng:hover path {\n  stroke: red;\n  stroke-width: 5;\n\n  cursor: pointer;\n}\n.highlight {\n  stroke: red;\n  stroke-width: 5;\n}\n\n.boxHighlighted {\n  stroke: blue;\n  stroke-width: 5;\n  fill: blue;\n}\n\n.alreadyUsed {\n  fill: green;\n}\n\n.anotation {\n  background-color: white;\n  position: absolute;\n  z-index: 1000;\n  text-align: left;\n}\n.anotation button {\n  margin: 0.5rem 0.5rem 0 0;\n}\n\n.propositions li {\n  padding-bottom: 2px;\n  font-size: 1.2rem;\n}\n.propositions {\n  list-style: none;\n  position: relative;\n  background: white;\n  padding: 0 1rem;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InteractiveImage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InteractiveImage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./InteractiveImage.vue?vue&type=template&id=195fffac&scoped=true&\"\nimport script from \"./InteractiveImage.vue?vue&type=script&lang=js&\"\nexport * from \"./InteractiveImage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./InteractiveImage.vue?vue&type=style&index=0&id=195fffac&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"195fffac\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('sui-table',{attrs:{\"celled\":\"\",\"definition\":\"\"}},[_c('sui-table-header',[_c('sui-table-header-cell'),_c('sui-table-header-cell',[_vm._v(_vm._s(_vm.$t(\"nutrition.value\")))])],1),_vm._l((_vm.sortedKeys),function(nutritiveKey,index){return _c('sui-table-row',{key:nutritiveKey},[_c('sui-table-cell',{attrs:{\"selectable\":_vm.selectLine && index !== _vm.nutrimentToFillIndex,\"warning\":_vm.selectLine && index === _vm.nutrimentToFillIndex},on:{\"click\":function($event){return _vm.updateNutriIndexToFill(index)}}},[_vm._v(_vm._s(_vm.$t((\"nutrition.nutriments.\" + nutritiveKey))))]),_c('sui-table-cell',{staticStyle:{\"display\":\"flex\"},attrs:{\"negative\":_vm.isInvalid(_vm.value[nutritiveKey]['data'])}},[_c('input',{staticStyle:{\"flex-grow\":\"1\"},domProps:{\"value\":_vm.value[nutritiveKey]['data']},on:{\"input\":function($event){_vm.updateValue(nutritiveKey)($event)}}}),(_vm.getNutrimentUnits(nutritiveKey).length > 1)?_c('select',{staticClass:\"unit\",staticStyle:{\"min-width\":\"3rem\"},attrs:{\"selection\":\"\",\"placeholder\":_vm.$t('nutrition.table.unit'),\"options\":_vm.getNutrimentUnits(nutritiveKey)},domProps:{\"value\":_vm.value[nutritiveKey]['unit']},on:{\"change\":function($event){_vm.updateUnit(nutritiveKey)($event)}}},_vm._l((_vm.getNutrimentUnits(nutritiveKey)),function(unit){return _c('option',{key:unit},[_vm._v(_vm._s(unit))])}),0):_c('span',{staticClass:\"unit\"},[_vm._v(_vm._s(_vm.getNutrimentUnits(nutritiveKey)[0]))])]),_c('sui-table-cell',[_c('button',{on:{\"click\":function($event){return _vm.remove(nutritiveKey)}}},[_vm._v(\" X \")])])],1)})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nexport default {\n  props: {\n    value: Object,\n    nutrimentToFillIndex: Number,\n    selectLine: Boolean,\n  },\n  model: {\n    prop: \"value\",\n    event: \"input\",\n  },\n  computed: {\n    sortedKeys: function() {\n      return Object.keys(this.$props.value).sort(\n        (a, b) => this.$props.value[a].y - this.$props.value[b].y\n      );\n    },\n  },\n  methods: {\n    isInvalid(value) {\n      return !value.match(\"^((<|>|<=|>=|~|.)*[0-9]+| *)$\");\n    },\n    getNutrimentUnits(nutrimentId) {\n      // TODO : allows more units such as micrograms, %, ...\n      switch (nutrimentId) {\n        case \"nutriment_energy-kcal\":\n          return [\"kcal\"];\n        case \"nutriment_energy-kj\":\n          return [\"kJ\"];\n        case \"nutriment_alcohol\":\n          return [];\n        case \"nutriment_ph\":\n          return [];\n        default:\n          return [\"g\", \"mg\", \"µg\", \"IU\"];\n        // { text: \"g\", value: \"g\" },\n        // { text: \"mg\", value: \"mg\" },\n      }\n    },\n    remove(nutritiveKey) {\n      const { ...kept } = this.$props.value;\n      delete kept[nutritiveKey];\n      this.$emit(\"input\", kept);\n    },\n    updateUnit(nutritiveKey) {\n      return (event) => {\n        this.$emit(\"input\", {\n          ...this.$props.value,\n          [nutritiveKey]: {\n            ...this.$props.value[nutritiveKey],\n            [\"unit\"]: event.target.value,\n          },\n        });\n      };\n    },\n    updateValue(nutritiveKey) {\n      return (event) => {\n        this.$emit(\"input\", {\n          ...this.$props.value,\n          [nutritiveKey]: {\n            ...this.$props.value[nutritiveKey],\n            [\"data\"]: event.target.value,\n          },\n        });\n      };\n    },\n    updateNutriIndexToFill(index) {\n      if (this.$props.selectLine) {\n        this.$emit(\"setNurtiIndex\", index);\n      }\n    },\n  },\n};\n</script>\n\n<template>\n  <sui-table celled definition>\n    <sui-table-header>\n      <sui-table-header-cell />\n      <sui-table-header-cell>{{ $t(\"nutrition.value\") }}</sui-table-header-cell>\n    </sui-table-header>\n    <sui-table-row\n      v-for=\"(nutritiveKey, index) in sortedKeys\"\n      :key=\"nutritiveKey\"\n    >\n      <sui-table-cell\n        @click=\"updateNutriIndexToFill(index)\"\n        :selectable=\"selectLine && index !== nutrimentToFillIndex\"\n        :warning=\"selectLine && index === nutrimentToFillIndex\"\n        >{{ $t(`nutrition.nutriments.${nutritiveKey}`) }}</sui-table-cell\n      >\n      <sui-table-cell\n        style=\"display: flex\"\n        :negative=\"isInvalid(value[nutritiveKey]['data'])\"\n      >\n        <input\n          style=\"flex-grow:1\"\n          :value=\"value[nutritiveKey]['data']\"\n          @input=\"updateValue(nutritiveKey)($event)\"\n        />\n        <select\n          style=\"min-width: 3rem\"\n          selection\n          :placeholder=\"$t('nutrition.table.unit')\"\n          v-if=\"getNutrimentUnits(nutritiveKey).length > 1\"\n          :value=\"value[nutritiveKey]['unit']\"\n          @change=\"updateUnit(nutritiveKey)($event)\"\n          :options=\"getNutrimentUnits(nutritiveKey)\"\n          class=\"unit\"\n        >\n          <option v-for=\"unit in getNutrimentUnits(nutritiveKey)\" :key=\"unit\">{{\n            unit\n          }}</option>\n        </select>\n        <span class=\"unit\" v-else>{{\n          getNutrimentUnits(nutritiveKey)[0]\n        }}</span>\n      </sui-table-cell>\n      <sui-table-cell>\n        <button @click=\"remove(nutritiveKey)\">\n          X\n        </button>\n      </sui-table-cell>\n    </sui-table-row>\n  </sui-table>\n</template>\n\n<style scoped>\n.error {\n  border-color: red;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NutritionTable.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NutritionTable.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NutritionTable.vue?vue&type=template&id=19f70efe&scoped=true&\"\nimport script from \"./NutritionTable.vue?vue&type=script&lang=js&\"\nexport * from \"./NutritionTable.vue?vue&type=script&lang=js&\"\nimport style0 from \"./NutritionTable.vue?vue&type=style&index=0&id=19f70efe&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"19f70efe\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"ui grid stackable\">\n    <div class=\"eight wide column centered\">\n      <!--four wide column centered-->\n      <div class=\"filters\">\n        <div class=\"column\">\n          <select v-model=\"country\">\n            <option value=\"\">country</option>\n            <option>Australia</option>\n            <option>Austria</option>\n            <option>Belgium</option>\n            <option>Denmark</option>\n            <option>France</option>\n            <option>Germany</option>\n            <option>Greece</option>\n            <option>Italy</option>\n            <option>Sweden</option>\n            <option>Switzerland</option>\n            <option>United Kingdom</option>\n            <option>United States</option>\n          </select>\n          <input v-model=\"contributor\" placeholder=\"contributor\" />\n        </div>\n        <div>\n          <button\n            class=\"ui button\"\n            :class=\"{ positive: category === 'baby-milks' }\"\n            @click=\"setCategory('baby-milks')\"\n          >\n            baby-milks\n          </button>\n          <button\n            class=\"ui button\"\n            :class=\"{ positive: category === 'waters' }\"\n            @click=\"setCategory('waters')\"\n          >\n            waters\n          </button>\n        </div>\n        <button @click=\"search\">\n          {{ $t(\"nutrition.search\") }}\n        </button>\n        <button @click=\"toggleHistoryIsOpen\">\n          {{ $t(\"nutrition.history.open\") }}\n        </button>\n      </div>\n      <div v-if=\"bufferIsEmpty\">\n        <p v-if=\"loading\">Loading ...</p>\n        <p v-else>No remaining images</p>\n      </div>\n      <template v-else>\n        <h3>{{ productName }}</h3>\n        <div>\n          <a target=\"_blank\" :href=\"productUrl\" class=\"ui button primary\">{{\n            $t(\"questions.view\")\n          }}</a>\n          <a target=\"_blank\" :href=\"productEditUrl\" class=\"ui button\">{{\n            $t(\"questions.edit\")\n          }}</a>\n        </div>\n        <div class=\"ui divider\"></div>\n        <!-- ask what type is the image -->\n\n        <template v-if=\"step == 0\">\n          <cropper\n            class=\"imageDisplay\"\n            ref=\"cropper\"\n            :src=\"imageURL\"\n            :canvas=\"false\"\n            :checkOrientation=\"false\"\n            :crossOrigine=\"false\"\n            @change=\"changeCropCoordinate\"\n          />\n          <div style=\"text-align: center\">\n            <button @click=\"rotateLeft\" class=\"ui icon button\">\n              <i class=\"undo icon\"></i>\n            </button>\n            <button @click=\"rotateRight\" class=\"ui icon button\">\n              <i class=\"redo icon\"></i>\n            </button>\n          </div>\n        </template>\n        <template v-else>\n          <div\n            :style=\"\n              `width: min(50vw, 800px); height: calc(min(50vw, 800px) * ${\n                imageZoomOptions.coordinates\n                  ? imageZoomOptions.coordinates.height /\n                    imageZoomOptions.coordinates.width\n                  : 1\n              })`\n            \"\n          >\n            <interactiveImage\n              :v-if=\"imageZoomOptions.image\"\n              :image=\"imageZoomOptions.image\"\n              :coordinates=\"imageZoomOptions.coordinates\"\n              :clickableBoxes=\"clickableBoxes\"\n              :anotationToValidate=\"anotationToValidate\"\n              :bestMatch=\"bestMatch\"\n              :boxesHighlight=\"nutrimentToFill.boxes\"\n              :attributedBoxesIds=\"attributedBoxesIds\"\n              :onlyPredictions=\"useOnlyPredictions\"\n              v-on:nutriPredictionAccept=\"nutriPredictionAccepted\"\n              v-on:nutriPredictionCancel=\"nutriPredictionCanceled\"\n              v-on:validatedBox=\"validateHumanAnnotation\"\n            />\n          </div>\n        </template>\n      </template>\n\n      <div class=\"questionContainer annotateLine\">\n        <sui-step-group step-number=\"four\">\n          <sui-step :active=\"step == 0\" :title=\"$t('nutrition.steps.1')\" />\n          <sui-step :active=\"step == 1\" :title=\"$t('nutrition.steps.2')\" />\n          <sui-step\n            :active=\"step == 2 || step == 3\"\n            :title=\"$t('nutrition.steps.3')\"\n          />\n          <sui-step :active=\"step == 4\" :title=\"$t('nutrition.steps.4')\" />\n        </sui-step-group>\n        <template v-if=\"step == 1\">\n          <div class=\"line2\">\n            <span>{{ $t(`nutrition.basis`) }}</span>\n            <sui-input\n              :error=\"isInvalid(basisData['quantity'])\"\n              v-model=\"basisData['quantity']\"\n              style=\"width:5rem\"\n              v-focus\n              inputmode=\"decimal\"\n            /><span style=\"font-size:1.5rem; margin-right: 0.5rem;\">g/ml</span>\n            <sui-checkbox\n              :label=\"$t(`nutrition.servingSize`)\"\n              v-model=\"basisData['isServingSize']\"\n            />\n          </div>\n        </template>\n        <template :v-else-if=\"step >= 0 && step <= 4\">\n          <div class=\"line2\">\n            <p v-if=\"step == 0\">\n              {{ $t(\"nutrition.instructions.cropTheTable\") }}\n            </p>\n            <p v-if=\"step == 2\">\n              {{ $t(\"nutrition.instructions.verifyNutrimentDetected\") }}\n            </p>\n            <p v-if=\"step == 3\">\n              {{ $t(\"nutrition.instructions.selectMissingNutriments\") }}\n            </p>\n            <p v-if=\"step == 4\">\n              {{ $t(\"nutrition.instructions.selectValue\") }}\n              <span class=\"nutrimentName\">{{\n                $t(`nutrition.nutriments.${nutrimentToFill.id}`)\n              }}</span>\n            </p>\n          </div>\n        </template>\n\n        <div class=\"line4\">\n          <button\n            class=\"ui button annotate\"\n            :class=\"{ disabled: step === 0 }\"\n            @click=\"prevStep()\"\n          >\n            {{ $t(\"nutrition.prev\") }}\n          </button>\n          <button\n            class=\"ui button annotate\"\n            :class=\"{ disabled: !canGoNext }\"\n            @click=\"nextStep()\"\n          >\n            {{ $t(\"nutrition.next\") }}\n          </button>\n        </div>\n        <div class=\"line4\">\n          <button\n            class=\"ui button negative annotate\"\n            @click=\"unselectPicture()\"\n          >\n            {{ $t(\"nutrition.unselect_picture\") }}\n          </button>\n          <button class=\"ui button annotate\" @click=\"skipProduct()\">\n            {{ $t(\"nutrition.skip\") }}\n          </button>\n          <button\n            class=\"ui button positive annotate\"\n            :class=\"{ disabled: !canValidate }\"\n            @click=\"validate()\"\n          >\n            {{ $t(\"nutrition.validate\") }}\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"eight wide column centered\">\n      <div class=\"table\">\n        <NutritionTable\n          v-model=\"currentProductData\"\n          v-on:setNurtiIndex=\"setNutrimentValueIndex\"\n          :nutrimentToFillIndex=\"nutrimentToFillIndex\"\n          :selectLine=\"step === 4\"\n        />\n      </div>\n    </div>\n    <sui-modal v-model=\"historyIsOpen\">\n      <sui-modal-header>{{ $t(\"nutrition.history.title\") }}</sui-modal-header>\n      <sui-modal-content scrolling>\n        <table class=\"ui celled table\">\n          <thead>\n            <tr>\n              <th>{{ $t(\"nutrition.history.status\") }}</th>\n              <th>{{ $t(\"nutrition.history.product name\") }}</th>\n              <th></th>\n              <th></th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              v-for=\"product in history\"\n              :key=\"product.code\"\n              :class=\"{\n                positive: product.status === 'VALIDATED',\n                negative:\n                  product.status === 'SKIP' || product.status === 'WRONG_IMAGE',\n              }\"\n            >\n              <td>\n                {{ $t(`nutrition.history.${product.status}`) }}\n              </td>\n              <td>{{ product.name }}</td>\n\n              <td>\n                <a target=\"_blank\" :href=\"getProductUrl(product.code)\">{{\n                  $t(\"nutrition.history.view\")\n                }}</a>\n              </td>\n              <td>\n                <a target=\"_blank\" :href=\"getProductEditUrl(product.code)\">{{\n                  $t(\"nutrition.history.edit\")\n                }}</a>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </sui-modal-content>\n      <sui-modal-actions>\n        <sui-button positive @click.native=\"toggleHistoryIsOpen\">\n          {{ $t(\"nutrition.history.close\") }}\n        </sui-button>\n      </sui-modal-actions>\n    </sui-modal>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport nutrimentsDefaultUnit from \"../data/nutritions\";\nimport tableExtraction from \"../utils/tableExtraction\";\nimport { OFF_URL } from \"../const\"; //OFF_IMAGE_URL\nimport offService from \"../off\";\nimport { Cropper } from \"vue-advanced-cropper\";\nimport \"vue-advanced-cropper/dist/style.css\";\nimport InteractiveImage from \"../components/InteractiveImage\";\nimport NutritionTable from \"../components/NutritionTable\";\nconst SEEN_CODES = \"SEEN_CODES\";\n\nconst getProducts = async (\n  page,\n  country = \"\",\n  contributor = \"\",\n  category = \"\",\n  code = \"\"\n) => {\n  if (code) {\n    const {\n      data: { product },\n    } = await axios(\n      offService.getNutritionToFillUrl({\n        page,\n        country,\n        category,\n        creator: contributor,\n        code,\n      })\n    );\n    return [product];\n  } else {\n    const {\n      data: { products, count, page_size },\n    } = await axios(\n      offService.getNutritionToFillUrl({\n        page,\n        country,\n        category,\n        creator: contributor,\n      })\n    );\n    return [products, Math.ceil(count / page_size)];\n  }\n};\n\nexport default {\n  name: \"NutritionView\",\n  components: {\n    Cropper,\n    InteractiveImage,\n    NutritionTable,\n  },\n  data: function() {\n    return {\n      loading: false,\n      productBuffer: [],\n      currentProductData: {},\n      basisData: { quantity: \"100\", isServingSize: false },\n      nutritiveId: -2,\n      imageZoomOptions: {\n        coordinates: null,\n        image: null,\n      },\n      extracted: null,\n      step: 0,\n      nutritionPredictionIndex: 0,\n      nutrimentToFillIndex: 0,\n      country: \"\",\n      contributor: \"\",\n      category: \"\",\n      history: [],\n      historyIsOpen: false,\n      nextPage: 1,\n    };\n  },\n  computed: {\n    productCode: function() {\n      if (\n        this.productBuffer.length === 0 ||\n        this.productBuffer[0].code === null\n      ) {\n        return \"\";\n      }\n      return this.productBuffer[0].code;\n    },\n    productName: function() {\n      if (\n        this.productBuffer.length === 0 ||\n        this.productBuffer[0].product_name === null\n      ) {\n        return \"\";\n      }\n      return this.productBuffer[0].product_name;\n    },\n    productUrl: function() {\n      if (\n        this.productBuffer.length === 0 ||\n        this.productBuffer[0].code === null\n      ) {\n        return \"\";\n      }\n      return offService.getProductUrl(this.productBuffer[0].code);\n    },\n    productEditUrl: function() {\n      if (\n        this.productBuffer.length === 0 ||\n        this.productBuffer[0].code === null\n      ) {\n        return \"\";\n      }\n      return offService.getProductEditUrl(this.productBuffer[0].code);\n    },\n    productLang: function() {\n      if (\n        this.productBuffer.length === 0 ||\n        this.productBuffer[0].lang === null\n      ) {\n        return \"\";\n      }\n      return this.productBuffer[0].lang;\n    },\n    imageURL: function() {\n      if (\n        this.productBuffer.length === 0 ||\n        this.productBuffer[0].image_nutrition_url === null\n      ) {\n        return \"\";\n      }\n      const imgId = this.productBuffer[0].images[\n        `nutrition_${this.productBuffer[0].lang}`\n      ].imgid;\n      return `${\n        this.productBuffer[0][\"image_nutrition_url\"].split(\"nutrition_\")[0]\n      }${imgId}.jpg`;\n      // return `${OFF_IMAGE_URL}${this.productBuffer[0].image_url}`;\n    },\n    bufferIsEmpty: function() {\n      return this.productBuffer.length === 0;\n    },\n    proposedNutriments: function() {\n      return \"\";\n    },\n    boxes: function() {\n      if (!this.extracted || !this.extracted.filteredBoxes) {\n        return [];\n      }\n      return this.extracted.filteredBoxes;\n    },\n    clickableBoxes: function() {\n      if (this.step === 3) {\n        return this.extracted.filteredBoxes.map((box) => {\n          return {\n            boxes: [{ ...box }],\n            values: box.description,\n          };\n        });\n      }\n      if (this.step === 4) {\n        return this.extracted.values.map(({ boxesIndexes, text }) => {\n          return {\n            boxes: boxesIndexes.map((i) => this.extracted.filteredBoxes[i]),\n            values: text[0],\n          };\n        });\n      }\n      return [];\n    },\n    anotationToValidate: function() {\n      if (this.step !== 2) {\n        return {};\n      }\n      return {\n        text: this.extracted.nutriments[this.nutritionPredictionIndex][\"text\"],\n        key: this.extracted.nutriments[this.nutritionPredictionIndex][\"key\"],\n        boxes: this.extracted.nutriments[this.nutritionPredictionIndex][\n          \"boxes\"\n        ].map((i) => this.extracted.filteredBoxes[i]),\n      };\n    },\n    currentValue: function() {\n      if (\n        !this.extracted ||\n        !this.extracted.values ||\n        this.nutritiveId < 0 ||\n        this.nutritiveId >= this.extracted.values.length\n      ) {\n        return {};\n      }\n      return this.extracted.values[this.nutritiveId];\n    },\n    nutriKeys: function() {\n      return Object.keys(this.currentProductData).sort(\n        (a, b) => this.currentProductData[a].y - this.currentProductData[b].y\n      );\n    },\n    useOnlyPredictions: function() {\n      return this.step === 3;\n    },\n    nutrimentToFill() {\n      if (this.step !== 4) {\n        return {};\n      }\n      const key = this.nutriKeys[this.nutrimentToFillIndex];\n      return this.currentProductData[key];\n    },\n    attributedBoxesIds() {\n      return [\n        ...Object.keys(this.currentProductData).flatMap((key) =>\n          this.currentProductData[key].boxes.map((x) => x.id)\n        ),\n        ...Object.keys(this.currentProductData).flatMap((key) =>\n          this.currentProductData[key].valueBoxes\n            ? this.currentProductData[key].valueBoxes.map((x) => x.id)\n            : []\n        ),\n      ];\n    },\n    canValidate() {\n      return this.step === 4;\n    },\n    canGoNext() {\n      if (this.step === 4) {\n        return false;\n      }\n      if (\n        this.step === 3 &&\n        Object.keys(this.currentProductData).length === 0\n      ) {\n        return false;\n      }\n      return true;\n    },\n  },\n  methods: {\n    bestMatch({ search, lang = \"\" }) {\n      if (this.step !== 3) {\n        return [];\n      }\n      return tableExtraction.bestMatch({\n        search,\n        lang,\n        except: Object.keys(this.currentProductData),\n      });\n    },\n    prevStep() {\n      if (this.step === 1) {\n        // return to cropp step. But before that must erase all the computed data because boxes will not be the same\n        this.resetProductData();\n        return null;\n      }\n      if (this.step == 2) {\n        this.step -= 1;\n        return null;\n      }\n      if (this.step == 3) {\n        this.step -= 2;\n        return null;\n      }\n      if (this.step == 4) {\n        this.step -= 1;\n        return null;\n      }\n    },\n    nextStep() {\n      this.step += 1;\n      if (this.step === 1) {\n        this.extracted = {\n          ...tableExtraction.getData(\n            this.productBuffer[0].ocrData,\n            this.imageZoomOptions\n          ),\n        };\n      }\n      if (this.step === 2) {\n        this.nextPrediction();\n      }\n    },\n    nextPrediction(initial = true) {\n      let index = this.nutritionPredictionIndex;\n      if (!initial) {\n        index += 1;\n      }\n      while (\n        index < this.extracted.nutriments.length &&\n        (!this.extracted.nutriments[index].key ||\n          this.currentProductData[this.extracted.nutriments[index].key] !==\n            undefined)\n      ) {\n        // We stop on a box only if there is a prediction not already attributed\n        index += 1;\n      }\n      if (index == this.extracted.nutriments.length) {\n        this.nextStep();\n      } else {\n        this.nutritionPredictionIndex = index;\n      }\n    },\n    nutriPredictionAccepted() {\n      const { key, boxes: nutriBoxes } = this.extracted.nutriments[\n        this.nutritionPredictionIndex\n      ];\n      const keysToAdd = [];\n      if (key === \"nutriment_energy\") {\n        keysToAdd.push(\"nutriment_energy-kj\");\n        keysToAdd.push(\"nutriment_energy-kcal\");\n      } else {\n        keysToAdd.push(key);\n      }\n      const boxes = this.boxes;\n      keysToAdd.forEach((k) => {\n        this.currentProductData = {\n          ...this.currentProductData,\n          [k]: {\n            id: k,\n            data: \"\",\n            unit: nutrimentsDefaultUnit[k],\n            x: Math.min(...nutriBoxes.map((i) => boxes[i].minX)),\n            y: Math.min(...nutriBoxes.map((i) => boxes[i].minY)),\n            boxes: [...nutriBoxes.map((i) => boxes[i])],\n            valueBoxes: [],\n          },\n        };\n      });\n      this.nextPrediction(false);\n    },\n    nutriPredictionCanceled() {\n      this.nextPrediction(false);\n    },\n    validateHumanAnnotation(descrition) {\n      if (this.step === 3) {\n        const { key, boxes } = descrition;\n        const keysToAdd = [];\n        if (key === \"nutriment_energy\") {\n          keysToAdd.push(\"nutriment_energy-kj\");\n          keysToAdd.push(\"nutriment_energy-kcal\");\n        } else {\n          keysToAdd.push(key);\n        }\n        keysToAdd.forEach((k) => {\n          this.currentProductData = {\n            ...this.currentProductData,\n            [k]: {\n              id: k,\n              data: \"\",\n              unit: nutrimentsDefaultUnit[k],\n              x: Math.min(...boxes.map((box) => box.minX)),\n              y: Math.min(...boxes.map((box) => box.minY)),\n              boxes: [...boxes.map((x) => ({ ...x }))],\n              valueBoxes: [],\n            },\n          };\n        });\n      } else if (this.step === 4) {\n        const { values, boxes } = descrition;\n        const val = values\n          .toLowerCase()\n          .match(\"^((<|>|<=|>=|~|.)*[0-9]+| *)\")\n          .filter((x) => x !== \"\")[0];\n        let unit = values\n          .toLowerCase()\n          .match(/[a-z]*/g)\n          .filter((x) => x !== \"\")[0];\n        if (unit === \"kj\") {\n          unit = \"kJ\";\n        }\n        this.currentProductData = {\n          ...this.currentProductData,\n          [this.nutrimentToFill.id]: {\n            ...this.currentProductData[this.nutrimentToFill.id],\n            valueBoxes: [...boxes.map((x) => ({ ...x }))],\n            data: val,\n            unit: unit,\n          },\n        };\n        if (\n          false ===\n          this.nutriKeys.reduce(\n            (accumulator, currentValue) =>\n              accumulator && !!this.currentProductData[currentValue].data,\n            true\n          )\n        ) {\n          // if there is a nutriment not filled\n          let nextIndex =\n            (this.nutrimentToFillIndex + 1) % this.nutriKeys.length;\n          while (\n            nextIndex !== this.nutrimentToFillIndex &&\n            this.currentProductData[this.nutriKeys[nextIndex]].data\n          ) {\n            nextIndex = (nextIndex + 1) % this.nutriKeys.length;\n          }\n          this.nutrimentToFillIndex = nextIndex;\n        }\n      }\n    },\n    setNutrimentValueIndex(index) {\n      this.nutrimentToFillIndex = index;\n    },\n    rotateLeft() {\n      this.$refs.cropper.rotate(-90);\n    },\n    rotateRight() {\n      this.$refs.cropper.rotate(90);\n    },\n    setCategory(cat) {\n      if (this.category === cat) {\n        this.category = \"\";\n      } else {\n        this.category = cat;\n      }\n    },\n    isInvalid(value) {\n      return !value.match(\"^((<|>|<=|>=|~|.)*[0-9]+| *)$\");\n    },\n    getProductUrl(code) {\n      return offService.getProductUrl(code);\n    },\n    getProductEditUrl(code) {\n      return offService.getProductEditUrl(code);\n    },\n    toggleHistoryIsOpen() {\n      this.historyIsOpen = !this.historyIsOpen;\n    },\n    changeCropCoordinate({ coordinates, image }) {\n      this.imageZoomOptions = {\n        ...this.imageZoomOptions,\n        coordinates,\n        image,\n        minX: coordinates.left,\n        maxX: coordinates.left + coordinates.width,\n        minY: coordinates.top,\n        maxY: coordinates.top + coordinates.height,\n      };\n    },\n    addProducts: async function(country, contributor, category) {\n      if (this.$route.params.code) {\n        this.loading = true;\n        const newProducts = await getProducts(\n          1,\n          country,\n          contributor,\n          category,\n          this.$route.params.code\n        );\n        this.productBuffer = [...newProducts];\n        this.loading = false;\n      } else {\n        this.loading = true;\n        const [newProducts, nbPages] = await getProducts(\n          this.nextPage,\n          country,\n          contributor,\n          category\n        );\n        this.nextPage = 1 + Math.floor(nbPages * Math.random());\n        const seenCodes = JSON.parse(localStorage.getItem(SEEN_CODES) || \"[]\");\n\n        this.productBuffer = this.productBuffer.concat(\n          newProducts.filter(({ code }) => !seenCodes.includes(code))\n        );\n        this.loading = false;\n      }\n    },\n    replaceProducts: async function(country, contributor, category) {\n      this.loading = true;\n      const [newProducts, nbPages] = await getProducts(\n        1,\n        country,\n        contributor,\n        category\n      );\n      this.nextPage = 1 + Math.floor(nbPages * Math.random());\n      const seenCodes = JSON.parse(localStorage.getItem(SEEN_CODES) || \"[]\");\n      this.productBuffer = [...newProducts].filter(\n        ({ code }) => !seenCodes.includes(code)\n      );\n      this.loading = false;\n    },\n    unselectPicture: function() {\n      axios.post(\n        `https://world.openfoodfacts.org/cgi/product_image_unselect.pl?`,\n        new URLSearchParams(\n          `code=${this.productBuffer[0][\"code\"]}&id=nutrition${\n            this.productBuffer[0].image_nutrition_url\n              .split(\"nutrition\")[1]\n              .split(\".\")[0]\n          }`\n        )\n      );\n      this.skipProduct(\"WRONG_IMAGE\");\n    },\n    skipProduct(status = \"SKIP\") {\n      this.history.push({\n        code: this.productCode,\n        name: this.productName,\n        status: status,\n      });\n      const oldCodes = JSON.parse(\n        localStorage.getItem(SEEN_CODES) || \"[]\"\n      ).slice(0, 1000);\n      localStorage.setItem(\n        SEEN_CODES,\n        JSON.stringify([this.productCode, ...oldCodes])\n      );\n\n      this.productBuffer.shift();\n    },\n    getBasisTextForAPI() {\n      if (this.basisData.quantity && !this.isInvalid(this.basisData.quantity)) {\n        if (this.basisData.isServingSize) {\n          return `nutrition_data_per=serving&serving_size=${this.basisData.quantity}g`;\n        }\n        return `nutrition_data_per=${this.basisData.quantity}g`;\n      }\n      return \"\";\n    },\n    validate() {\n      this.history.push({\n        code: this.productCode,\n        name: this.productName,\n        status: \"VALIDATED\",\n      });\n      const oldCodes = JSON.parse(\n        localStorage.getItem(SEEN_CODES) || \"[]\"\n      ).slice(0, 1000);\n      localStorage.setItem(\n        SEEN_CODES,\n        JSON.stringify([this.productCode, ...oldCodes])\n      );\n\n      const withData = Object.keys(this.currentProductData)\n        .filter(\n          (nutrimentId) =>\n            this.currentProductData[nutrimentId] &&\n            this.currentProductData[nutrimentId].data &&\n            !this.isInvalid(this.currentProductData[nutrimentId].data) &&\n            this.currentProductData[nutrimentId].data.length > 0\n        )\n        .map((nutrimentId) => ({\n          name: nutrimentId,\n          value: `${this.currentProductData[nutrimentId].data}${this\n            .currentProductData[nutrimentId].unit || \"\"}`,\n          quantity: this.currentProductData[nutrimentId].data,\n          unit: this.currentProductData[nutrimentId].unit,\n        }));\n      const withoutData = Object.keys(this.currentProductData)\n        .filter(\n          (nutrimentId) =>\n            this.currentProductData[nutrimentId] &&\n            !this.currentProductData[nutrimentId].data\n        )\n        .map((nutrimentId) => ({\n          name: nutrimentId,\n          value: \"\",\n          quantity: \"\",\n          unit: \"\",\n        }));\n      const basisText = this.getBasisTextForAPI();\n      axios.post(\n        `${OFF_URL}/cgi/product_jqm2.pl?`,\n        new URLSearchParams(\n          `${withData\n            .map((data) => `${data.name}=${data.quantity}&`)\n            .join(\"\")}${withData\n            .map((data) => (data.unit ? `${data.name}_unit=${data.unit}&` : \"\"))\n            .join(\"\")}${withoutData.map((name) => `${name}=\"\"&`).join(\"\")}${\n            basisText ? `${basisText}&` : \"\"\n          }code=${this.productBuffer[0][\"code\"]}`\n        )\n      ); // The status of the response is not displayed so no need to wait the response\n      const correctedData = {};\n      withData.forEach((data) => {\n        correctedData[data.name] = `${data.quantity}&`;\n      });\n      // axios.post(\"https://amathjourney.com/api/off/correct/\", {\n      //   code: this.productCode,\n      //   true_value: correctedData,\n      // });\n      this.productBuffer.shift();\n    },\n    resetProductData() {\n      this.currentProductData = {};\n      this.basisData = {\n        quantity: \"100\",\n        isServingSize: false,\n      };\n      this.extracted = null;\n      this.step = 0;\n      this.nutritionPredictionIndex = 0;\n      this.nutrimentToFillIndex = 0;\n    },\n    search() {\n      this.replaceProducts(this.country, this.contributor, this.category);\n    },\n  },\n  watch: {\n    productCode: function() {\n      // watch when a new question is asked\n      this.resetProductData();\n      if (this.productBuffer.length <= 5 && !this.loading) {\n        this.addProducts(this.country, this.contributor, this.category);\n      }\n      if (\n        this.productBuffer[0] &&\n        this.productBuffer[0].image_nutrition_url &&\n        this.productBuffer[0].lang\n      ) {\n        const imgId = this.productBuffer[0].images[\n          `nutrition_${this.productBuffer[0].lang}`\n        ].imgid;\n        const imageUrl = `${\n          this.productBuffer[0].image_nutrition_url\n            .split(\"nutrition\")[0]\n            .split(\"products\")[1]\n        }${imgId}.jpg`;\n        const code = this.productBuffer[0].code;\n        tableExtraction\n          .getOCRdata(imageUrl)\n          .then((response) => {\n            if (this.productBuffer[0].code === code) {\n              // const nutritionKey = `nutrition_${this.productBuffer[0].lang}`;\n              this.productBuffer[0] = {\n                ...this.productBuffer[0],\n                ocrData: response,\n                sizes: {\n                  full: {\n                    ...this.productBuffer[0].images[imgId].sizes.full,\n                  },\n                  small: {\n                    ...this.productBuffer[0].images[imgId].sizes[\"400\"],\n                  },\n                },\n              };\n            }\n          })\n          .catch(() => {\n            // TODO : should notify the server that the OCR does not exist\n            if (this.productBuffer[0].code === code) {\n              this.skipProduct();\n            }\n          });\n      }\n    },\n    nutriKeys: function() {\n      // prevent overflow\n      if (this.nutrimentToFillIndex >= this.nutriKeys.length) {\n        this.nutrimentToFillIndex =\n          this.nutrimentToFillIndex % this.nutriKeys.length || 0;\n      }\n    },\n  },\n  mounted: function() {\n    this.addProducts();\n  },\n};\n</script>\n\n<style scoped>\n.shadow {\n  opacity: 0.2;\n}\n.unit {\n  margin-left: 1rem;\n}\nbutton.annotate {\n  padding: 1rem 1.5rem;\n}\n.center {\n  text-align: center;\n  margin: 0 0;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  flex-grow: 0;\n  flex-shrink: 1;\n}\n.selectPictures {\n  display: flex;\n  flex-wrap: nowrap;\n  flex-direction: row;\n  overflow: auto;\n}\n.selectPictures > img {\n  margin: 2rem;\n}\n.selectPictures > .selected {\n  border: 5px solid blue;\n}\n.imageDisplay {\n  background: #ddd !important;\n  max-height: 100vw;\n  width: 90vw;\n}\n.questionGrid {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n}\n.questionGrid button {\n  margin: 0.5rem 1rem;\n}\n.questionContainer {\n  position: sticky;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(255, 255, 255, 0.7);\n  padding: 0.5rem 0.5rem;\n}\n.line1,\n.line2,\n.line3,\n.line4 {\n  display: flex;\n  flex-direction: row;\n  width: 100%;\n  margin-bottom: 4px;\n}\n.line2 {\n  justify-content: center;\n  align-items: center;\n}\n.line3 {\n  justify-content: space-between;\n}\n.line1 {\n  justify-content: space-around;\n}\n.line4 {\n  justify-content: stretch;\n}\n.line4 button {\n  flex-grow: 1;\n}\n.line1 button {\n  padding: 0.5rem 1rem;\n  border-radius: 2rem;\n  margin-bottom: 0.5rem;\n}\n.nutrimentName {\n  color: blue;\n  font-size: 1.5rem;\n}\n\n.filters {\n  display: flex;\n  justify-content: space-between;\n}\n.filters > .column {\n  display: flex;\n  flex-direction: column;\n}\n.filters input {\n  margin-top: 0.5rem;\n}\n.table {\n  position: sticky;\n  top: 60px;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NutritionInteractiveView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NutritionInteractiveView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NutritionInteractiveView.vue?vue&type=template&id=db4d336a&scoped=true&\"\nimport script from \"./NutritionInteractiveView.vue?vue&type=script&lang=js&\"\nexport * from \"./NutritionInteractiveView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./NutritionInteractiveView.vue?vue&type=style&index=0&id=db4d336a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"db4d336a\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app\"},[_c('div',{staticClass:\"scollable\"},[_c('p',{staticClass:\"explanations\"},[_vm._v(_vm._s(this.messages[this.currentState]))]),_c('div',{staticClass:\"imageContainer\",on:{\"click\":function($event){return _vm.click('')}}},[_c('img',{attrs:{\"src\":_vm.urlImg}}),_c('svg',{class:{ desactivateListenersInside: _vm.isDraggingCropRectangle },attrs:{\"width\":_vm.imageWidth,\"height\":_vm.imageHeight},on:{\"mousemove\":_vm.moveAt,\"mouseleave\":function($event){$event.stopPropagation();return _vm.stopDragging.apply(null, arguments)},\"mouseup\":function($event){$event.stopPropagation();return _vm.stopDragging.apply(null, arguments)}}},[_vm._l((_vm.visibleBoxes),function(box){return _c('path',{key:'box-' + box.id,staticClass:\"box\",class:{\n            toDelete: box.toDelete,\n            selectable: _vm.currentState >= 0,\n          },attrs:{\"d\":box.path},on:{\"click\":function($event){$event.stopPropagation();_vm.currentState >= 0 && _vm.click(box.id, $event)},\"mouseover\":function($event){_vm.currentState >= 0 && _vm.mouseover(box.id)}}})}),(_vm.currentLinks)?_c('path',{staticClass:\"currentLink\",attrs:{\"d\":_vm.currentLinks}}):_vm._e(),_vm._l((_vm.annotations.currentPath),function(key){return _c('circle',{key:'creationCenter-' + key,staticClass:\"currentBoxesCenter\",attrs:{\"cx\":_vm.getCenter(_vm.boxes[key].points).x,\"cy\":_vm.getCenter(_vm.boxes[key].points).y,\"r\":\"5\"}})}),_vm._l((_vm.annotations.memorizedGraph),function(neighbours,nodeKey){return _c('g',{key:'node-group-' + nodeKey},[_vm._l((neighbours),function(neighbourKey){return _c('g',{key:'savedLink-' + nodeKey + ' - ' + neighbourKey},[_c('line',{staticClass:\"helpLink\",class:{\n                noPointerEvent: _vm.keyIsDown,\n                youWantToDelete: !_vm.keyIsDown,\n              },attrs:{\"x1\":_vm.getCenter(_vm.boxes[nodeKey].points).x,\"y1\":_vm.getCenter(_vm.boxes[nodeKey].points).y,\"x2\":_vm.getCenter(_vm.boxes[neighbourKey].points).x,\"y2\":_vm.getCenter(_vm.boxes[neighbourKey].points).y},on:{\"click\":function($event){$event.stopPropagation();return _vm.clickLink(nodeKey, neighbourKey)}}}),_c('line',{staticClass:\"savedLink\",attrs:{\"x1\":_vm.getCenter(_vm.boxes[nodeKey].points).x,\"y1\":_vm.getCenter(_vm.boxes[nodeKey].points).y,\"x2\":_vm.getCenter(_vm.boxes[neighbourKey].points).x,\"y2\":_vm.getCenter(_vm.boxes[neighbourKey].points).y}})])}),_c('circle',{class:{\n              youWantToDeleteBoxCenter: !_vm.keyIsDown,\n              noPointerEvent: _vm.keyIsDown,\n            },attrs:{\"cx\":_vm.getCenter(_vm.boxes[nodeKey].points).x,\"cy\":_vm.getCenter(_vm.boxes[nodeKey].points).y,\"r\":\"15\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.clickNode(nodeKey)}}}),_c('circle',{staticClass:\"savedBoxesCenter\",attrs:{\"cx\":_vm.getCenter(_vm.boxes[nodeKey].points).x,\"cy\":_vm.getCenter(_vm.boxes[nodeKey].points).y,\"r\":\"5\"}})],2)}),(_vm.showSavedLines)?_c('g',{class:{ unfill: _vm.canValidate }},_vm._l((_vm.savedLines),function(line,lineId){return _c('g',{key:'saved-line-' + lineId,staticClass:\"validatedGroup validatedLine\"},[_c('path',{attrs:{\"d\":line.path}}),(_vm.canNotValidate)?_c('text',{attrs:{\"x\":line.center.x,\"y\":line.center.y,\"dominant-baseline\":\"middle\",\"text-anchor\":\"middle\"}},[_vm._v(\" \"+_vm._s(\"line : \" + lineId)+\" \")]):_vm._e()])}),0):_vm._e(),(_vm.showSavedColumns)?_c('g',{class:{ unfill: _vm.canValidate }},_vm._l((_vm.savedColumns),function(column,columnId){return _c('g',{key:'saved-column-' + columnId,staticClass:\"validatedGroup validatedColumn\"},[_c('path',{attrs:{\"d\":column.path}}),(_vm.canNotValidate)?_c('text',{attrs:{\"x\":column.center.x,\"y\":column.center.y,\"dominant-baseline\":\"middle\",\"text-anchor\":\"middle\"}},[_vm._v(\" \"+_vm._s(\"column : \" + columnId)+\" \")]):_vm._e()])}),0):_vm._e(),(_vm.annotations.keyIsDown)?_c('line',{staticClass:\"currentLink\",attrs:{\"x1\":(\"\" + (_vm.cursor.x)),\"y1\":(\"\" + (_vm.cursor.y)),\"x2\":(\"\" + (_vm.annotations.lastElement.x)),\"y2\":(\"\" + (_vm.annotations.lastElement.y))}}):_vm._e(),_vm._l((_vm.convexHalls),function(group,groupId){return _c('path',{key:'convexHalls-' + groupId,staticClass:\"convexhall\",attrs:{\"d\":group.path}})}),(_vm.showCorppingRectangle)?_c('g',{staticClass:\"croppingRectangle\"},[_c('path',{attrs:{\"d\":(\"M \" + (_vm.cropRectangle.start.x) + \" \" + (_vm.cropRectangle.start.y) + \" L\\n        \" + (_vm.cropRectangle.start.x) + \" \" + (_vm.cropRectangle.end.y) + \" L\\n        \" + (_vm.cropRectangle.end.x) + \" \" + (_vm.cropRectangle.end.y) + \" L \" + (_vm.cropRectangle.end.x) + \"\\n        \" + (_vm.cropRectangle.start.y) + \" Z\")}}),_c('circle',{attrs:{\"cx\":_vm.cropRectangle.start.x,\"cy\":_vm.cropRectangle.start.y,\"r\":\"10\"},on:{\"mousedown\":function($event){$event.stopPropagation();return _vm.startDraggingStart.apply(null, arguments)}}}),_c('circle',{attrs:{\"cx\":_vm.cropRectangle.end.x,\"cy\":_vm.cropRectangle.end.y,\"r\":\"10\"},on:{\"mousedown\":function($event){$event.stopPropagation();return _vm.startDraggingEnd.apply(null, arguments)}}})]):_vm._e()],2),_c('div',{staticClass:\"subActions\"},[_c('button',{on:{\"click\":_vm.previousStep}},[_vm._v(\"Prev (p)\")]),_c('button',{on:{\"click\":_vm.nextStep}},[_vm._v(\"Next (n)\")])]),_c('div',{staticClass:\"checkboxContainer\"},[_c('div',{staticClass:\"ui checkbox\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.dataQuality),expression:\"dataQuality\"}],attrs:{\"type\":\"checkbox\",\"name\":\"perfect-data\",\"id\":\"perfect-data\",\"value\":\"perfect-data\"},domProps:{\"checked\":Array.isArray(_vm.dataQuality)?_vm._i(_vm.dataQuality,\"perfect-data\")>-1:(_vm.dataQuality)},on:{\"change\":function($event){var $$a=_vm.dataQuality,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=\"perfect-data\",$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.dataQuality=$$a.concat([$$v]))}else{$$i>-1&&(_vm.dataQuality=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.dataQuality=$$c}}}}),_c('label',{attrs:{\"for\":\"perfect-data\"}},[_vm._v(\"The text recognition is perfect\")])]),_c('div',{staticClass:\"ui checkbox\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.dataQuality),expression:\"dataQuality\"}],attrs:{\"type\":\"checkbox\",\"name\":\"bad-data\",\"id\":\"bad-data\",\"value\":\"bad-data\"},domProps:{\"checked\":Array.isArray(_vm.dataQuality)?_vm._i(_vm.dataQuality,\"bad-data\")>-1:(_vm.dataQuality)},on:{\"change\":function($event){var $$a=_vm.dataQuality,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=\"bad-data\",$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.dataQuality=$$a.concat([$$v]))}else{$$i>-1&&(_vm.dataQuality=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.dataQuality=$$c}}}}),_c('label',{attrs:{\"for\":\"bad-data\"}},[_vm._v(\"Some words are missing\")])])]),_c('div',{staticClass:\"actions\"},[_c('button',{on:{\"click\":_vm.skip}},[_vm._v(\"skip (k)\")]),_c('button',{class:{ canValidate: _vm.canValidate, disabled: !_vm.canValidate },on:{\"click\":_vm.validate}},[_vm._v(\" validate (v) \")])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"app\">\n    <div class=\"scollable\">\n      <p class=\"explanations\">{{ this.messages[this.currentState] }}</p>\n      <div class=\"imageContainer\" @click=\"click('')\">\n        <img :src=\"urlImg\" />\n        <svg\n          :width=\"imageWidth\"\n          :height=\"imageHeight\"\n          @mousemove=\"moveAt\"\n          @mouseleave.stop=\"stopDragging\"\n          @mouseup.stop=\"stopDragging\"\n          :class=\"{ desactivateListenersInside: isDraggingCropRectangle }\"\n        >\n          <path\n            v-for=\"box in visibleBoxes\"\n            :d=\"box.path\"\n            :key=\"'box-' + box.id\"\n            @click.stop=\"currentState >= 0 && click(box.id, $event)\"\n            v-on:mouseover=\"currentState >= 0 && mouseover(box.id)\"\n            v-bind:class=\"{\n              toDelete: box.toDelete,\n              selectable: currentState >= 0,\n            }\"\n            class=\"box\"\n          />\n\n          <!-- Links in creation -->\n          <path v-if=\"currentLinks\" :d=\"currentLinks\" class=\"currentLink\" />\n          <circle\n            v-for=\"key in annotations.currentPath\"\n            :key=\"'creationCenter-' + key\"\n            :cx=\"getCenter(boxes[key].points).x\"\n            :cy=\"getCenter(boxes[key].points).y\"\n            r=\"5\"\n            class=\"currentBoxesCenter\"\n          />\n\n          <!-- saved links -->\n          <g\n            v-for=\"(neighbours, nodeKey) in annotations.memorizedGraph\"\n            :key=\"'node-group-' + nodeKey\"\n          >\n            <g\n              v-for=\"neighbourKey in neighbours\"\n              :key=\"'savedLink-' + nodeKey + ' - ' + neighbourKey\"\n            >\n              <line\n                :x1=\"getCenter(boxes[nodeKey].points).x\"\n                :y1=\"getCenter(boxes[nodeKey].points).y\"\n                :x2=\"getCenter(boxes[neighbourKey].points).x\"\n                :y2=\"getCenter(boxes[neighbourKey].points).y\"\n                @click.stop=\"clickLink(nodeKey, neighbourKey)\"\n                v-bind:class=\"{\n                  noPointerEvent: keyIsDown,\n                  youWantToDelete: !keyIsDown,\n                }\"\n                class=\"helpLink\"\n              />\n              <!-- the first link is biger in order to be easier to select (for deleting link interface) -->\n              <line\n                :x1=\"getCenter(boxes[nodeKey].points).x\"\n                :y1=\"getCenter(boxes[nodeKey].points).y\"\n                :x2=\"getCenter(boxes[neighbourKey].points).x\"\n                :y2=\"getCenter(boxes[neighbourKey].points).y\"\n                class=\"savedLink\"\n              />\n            </g>\n            <circle\n              :cx=\"getCenter(boxes[nodeKey].points).x\"\n              :cy=\"getCenter(boxes[nodeKey].points).y\"\n              r=\"15\"\n              @click.stop=\"clickNode(nodeKey)\"\n              :class=\"{\n                youWantToDeleteBoxCenter: !keyIsDown,\n                noPointerEvent: keyIsDown,\n              }\"\n            />\n            <circle\n              :cx=\"getCenter(boxes[nodeKey].points).x\"\n              :cy=\"getCenter(boxes[nodeKey].points).y\"\n              r=\"5\"\n              class=\"savedBoxesCenter\"\n            />\n          </g>\n\n          <!-- saved lines-->\n          <g v-if=\"showSavedLines\" v-bind:class=\"{ unfill: canValidate }\">\n            <g\n              v-for=\"(line, lineId) in savedLines\"\n              :key=\"'saved-line-' + lineId\"\n              class=\"validatedGroup validatedLine\"\n            >\n              <path :d=\"line.path\" />\n              <text\n                v-if=\"canNotValidate\"\n                :x=\"line.center.x\"\n                :y=\"line.center.y\"\n                dominant-baseline=\"middle\"\n                text-anchor=\"middle\"\n              >\n                {{ \"line : \" + lineId }}\n              </text>\n            </g>\n          </g>\n          <!-- saved columns-->\n          <g v-if=\"showSavedColumns\" v-bind:class=\"{ unfill: canValidate }\">\n            <g\n              v-for=\"(column, columnId) in savedColumns\"\n              :key=\"'saved-column-' + columnId\"\n              class=\"validatedGroup validatedColumn\"\n            >\n              <path :d=\"column.path\" />\n              <text\n                v-if=\"canNotValidate\"\n                :x=\"column.center.x\"\n                :y=\"column.center.y\"\n                dominant-baseline=\"middle\"\n                text-anchor=\"middle\"\n              >\n                {{ \"column : \" + columnId }}\n              </text>\n            </g>\n          </g>\n\n          <line\n            v-if=\"annotations.keyIsDown\"\n            :x1=\"`${cursor.x}`\"\n            :y1=\"`${cursor.y}`\"\n            :x2=\"`${annotations.lastElement.x}`\"\n            :y2=\"`${annotations.lastElement.y}`\"\n            class=\"currentLink\"\n          />\n          <!-- groups -->\n          <path\n            v-for=\"(group, groupId) in convexHalls\"\n            :d=\"group.path\"\n            :key=\"'convexHalls-' + groupId\"\n            class=\"convexhall\"\n          />\n\n          <!-- cropping rectangle -->\n\n          <g v-if=\"showCorppingRectangle\" class=\"croppingRectangle\">\n            <path\n              :d=\"\n                `M ${cropRectangle.start.x} ${cropRectangle.start.y} L\n          ${cropRectangle.start.x} ${cropRectangle.end.y} L\n          ${cropRectangle.end.x} ${cropRectangle.end.y} L ${cropRectangle.end.x}\n          ${cropRectangle.start.y} Z`\n              \"\n            />\n            <circle\n              :cx=\"cropRectangle.start.x\"\n              :cy=\"cropRectangle.start.y\"\n              r=\"10\"\n              @mousedown.stop=\"startDraggingStart\"\n            />\n            <circle\n              :cx=\"cropRectangle.end.x\"\n              :cy=\"cropRectangle.end.y\"\n              r=\"10\"\n              @mousedown.stop=\"startDraggingEnd\"\n            />\n          </g>\n        </svg>\n        <div class=\"subActions\">\n          <button v-on:click=\"previousStep\">Prev (p)</button>\n          <button v-on:click=\"nextStep\">Next (n)</button>\n        </div>\n\n        <div class=\"checkboxContainer\">\n          <div class=\"ui checkbox\">\n            <input\n              type=\"checkbox\"\n              name=\"perfect-data\"\n              id=\"perfect-data\"\n              value=\"perfect-data\"\n              v-model=\"dataQuality\"\n            />\n            <label for=\"perfect-data\">The text recognition is perfect</label>\n          </div>\n          <div class=\"ui checkbox\">\n            <input\n              type=\"checkbox\"\n              name=\"bad-data\"\n              id=\"bad-data\"\n              value=\"bad-data\"\n              v-model=\"dataQuality\"\n            />\n            <label for=\"bad-data\">Some words are missing</label>\n          </div>\n        </div>\n\n        <div class=\"actions\">\n          <button v-on:click=\"skip\">skip (k)</button>\n          <button\n            v-on:click=\"validate\"\n            :class=\"{ canValidate: canValidate, disabled: !canValidate }\"\n          >\n            validate (v)\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport {\n  points2Key,\n  getBoxes,\n  getCenter,\n  points2Path,\n  getHullPaths,\n  sortKeys,\n  getConvexPoints,\n  isInRectangle,\n} from \"../utils/tableAnotation.js\";\n\nconst messages = {\n  \"-1\": \"Déplacer le rectangle pour le faire contenir le tableau\",\n  0: \"Merci de regrouper entre elles les boîtes faisant partie d'une même case du tableau\",\n  1: \"Si des boites rouges font partie du tableau, merci de les ajouter (vous pouvez sélectionner une case seule)\",\n  2: \"Reliez entre elles les cellules d'une même ligne\",\n  3: \"Reliez entre elles les cellules d'une même colonne\",\n};\n\nexport default {\n  name: \"TableAnnotationView\",\n  components: {},\n  data: function() {\n    return {\n      urlImg: null,\n      dataQuality: [],\n      messages: messages,\n      loading: false,\n      currentState: -1,\n      boxes: [],\n      imageHeight: 0,\n      imageWidth: 0,\n      insightId: null,\n      batchOfInsights: [],\n      annotations: {\n        annnotated: false,\n        keyIsDown: false,\n        currentPath: [],\n        memorizedGraph: {},\n        lastElement: { x: 0, y: 0 },\n      },\n      cropRectangle: {\n        start: {\n          x: 10,\n          y: 10,\n        },\n        end: {\n          //TODO replace by image size\n          x: 100,\n          y: 100,\n        },\n        currentlyDragged: null,\n      },\n      convexHalls: {},\n      cursor: { x: 0, y: 0 },\n      lineIterator: 0,\n      savedLines: {},\n      columnIterator: 0,\n      savedColumns: {},\n      savedCellsGraph: {},\n    };\n  },\n  computed: {\n    currentLinks: function() {\n      if (this.annotations.currentPath.length < 1) {\n        return \"\";\n      }\n      return points2Path(\n        this.annotations.currentPath.map((boxKey) =>\n          getCenter(this.boxes[boxKey].points)\n        ),\n        false\n      );\n    },\n    keyIsDown: function() {\n      return this.annotations.keyIsDown;\n    },\n    visibleBoxes: function() {\n      return Object.keys(this.boxes)\n        .filter((key) => this.boxes[key].visible)\n        .map((key) => this.boxes[key]);\n    },\n    showSavedLines: function() {\n      return this.currentState === 2 || this.currentState === 4;\n    },\n    showSavedColumns: function() {\n      return this.currentState === 3 || this.currentState === 4;\n    },\n    canValidate: function() {\n      return this.currentState === 4;\n    },\n    canNotValidate: function() {\n      return this.currentState !== 4;\n    },\n    showCorppingRectangle: function() {\n      return this.currentState === -1;\n    },\n    isDraggingCropRectangle: function() {\n      return !!this.cropRectangle.currentlyDragged;\n    },\n  },\n  methods: {\n    isSaved: function(key, savingDict) {\n      for (let dicKey of Object.keys(savingDict)) {\n        if (savingDict[dicKey].keys.findIndex((x) => x === key) >= 0) {\n          return true;\n        }\n      }\n      return false;\n    },\n    reset: function() {\n      this.dataQuality = [];\n      this.currentState = -1;\n      this.boxes = [];\n      this.annotations = {\n        annnotated: false,\n        keyIsDown: false,\n        currentPath: [],\n        memorizedGraph: {},\n        lastElement: { x: 0, y: 0 },\n      };\n      this.cropRectangle = {\n        start: {\n          x: 10,\n          y: 10,\n        },\n        end: {\n          x: 50,\n          y: 50,\n        },\n        currentlyDragged: null,\n      };\n      this.convexHalls = {};\n      this.cursor = { x: 0, y: 0 };\n      this.lineIterator = 0;\n      this.savedLines = {};\n      this.columnIterator = 0;\n      this.savedColumns = {};\n      this.savedCellsGraph = {};\n    },\n    validate: function() {\n      if (!this.canValidate) {\n        return null;\n      }\n      if (this.dataQuality.length === 0) {\n        alert(\"Please give us your opinion on the text recognition\");\n        return null;\n      }\n      if (this.dataQuality.length > 1) {\n        alert(\n          \"Please select only one box for giving your opinion on text recognition\"\n        );\n        return null;\n      }\n      //get ids of boxes concerned by lines and colmuns\n      const lines = {};\n      const columns = {};\n      const boxId2cellId = {};\n\n      Object.keys(this.savedLines).map((lineId) => {\n        this.savedLines[lineId].keys.forEach((cellId) => {\n          cellId.split(\"-\").forEach((boxId) => {\n            if (lines[boxId] === undefined) {\n              lines[boxId] = [lineId];\n            } else {\n              lines[boxId] = [...lines[boxId], lineId];\n            }\n            if (boxId2cellId[boxId] === undefined) {\n              boxId2cellId[boxId] = cellId;\n            }\n          });\n        });\n      });\n\n      Object.keys(this.savedColumns).map((columnId) => {\n        this.savedColumns[columnId].keys.forEach((cellId) => {\n          cellId.split(\"-\").forEach((boxId) => {\n            if (columns[boxId] === undefined) {\n              columns[boxId] = [columnId];\n            } else {\n              columns[boxId] = [...columns[boxId], columnId];\n            }\n            if (boxId2cellId[boxId] === undefined) {\n              boxId2cellId[boxId] = cellId;\n            }\n          });\n        });\n      });\n\n      const rep = {};\n\n      this.textAnnotations.forEach((annotation) => {\n        const key = points2Key(annotation.boundingPoly.vertices);\n        let lineIds;\n        let columnIds;\n        if (lines[key] === undefined) {\n          lineIds = [];\n        } else {\n          lineIds = lines[key];\n        }\n        if (columns[key] === undefined) {\n          columnIds = [];\n        } else {\n          columnIds = columns[key];\n        }\n\n        rep[key] = {\n          ...annotation,\n          row_index: lineIds,\n          column_index: columnIds,\n          cell_id: boxId2cellId[key] || null,\n        };\n      });\n\n      axios.post(\n        `https://robotoff.openfoodfacts.org/api/v1/insights/annotate`,\n        new URLSearchParams(\n          `insight_id=${this.insightId}&annotation=1&data=${JSON.stringify({\n            textAnnotations: rep,\n            crop: this.cropRectangle,\n            dataQuality: this.dataQuality[0],\n          })}`\n        )\n      );\n\n      this.skip();\n    },\n    getCenter: function(points) {\n      return getCenter(points);\n    },\n    skip: async function() {\n      this.batchOfInsights = this.batchOfInsights.slice(1);\n\n      if (this.batchOfInsights.length > 0 && this.batchOfInsights.length < 5) {\n        this.loadOCR();\n      } else if (this.batchOfInsights.length === 0) {\n        await this.loadOCR();\n      }\n      const vm = this;\n\n      this.urlImg = this.batchOfInsights[0].urlImg;\n      this.insightId = this.batchOfInsights[0].insightId;\n\n      const {\n        data: { responses: responses },\n      } = await axios.get(this.batchOfInsights[0].textAnnotationsUrl);\n      this.textAnnotations = responses[0].textAnnotations;\n\n      var img = new Image();\n      img.onload = function() {\n        vm.imageHeight = img.height;\n        vm.imageWidth = img.width;\n      };\n      img.src = this.urlImg;\n\n      this.reset();\n      this.boxes = getBoxes(this.textAnnotations);\n\n      return null;\n    },\n    loadOCR: async function() {\n      this.loading = true;\n      const {\n        data: { insights: listOfInsights },\n      } = await axios.get(\n        \"https://robotoff.openfoodfacts.org/api/v1/insights/random?type=nutrition_table_structure\"\n      );\n\n      this.batchOfInsights = [\n        ...this.batchOfInsights,\n        ...listOfInsights.map(({ source_image, id }) => {\n          return {\n            urlImg: `https://static.openfoodfacts.org/images/products${source_image}`,\n            textAnnotationsUrl: `https://static.openfoodfacts.org/images/products${source_image\n              .split(\".\")\n              .slice(0, -1)\n              .join(\".\")}.json`,\n            insightId: id,\n          };\n        }),\n      ];\n\n      this.loading = false;\n    },\n    clickLink: function(node1, node2) {\n      if (!this.annotations.keyIsDown) {\n        const [start, end] = sortKeys(node1, node2);\n\n        this.annotations.memorizedGraph = {\n          ...this.annotations.memorizedGraph,\n          [start]: [\n            ...this.annotations.memorizedGraph[start].filter((x) => x !== end),\n          ],\n        };\n      }\n    },\n    clickNode: function(nodeId) {\n      if (!this.annotations.keyIsDown) {\n        delete this.annotations.memorizedGraph[nodeId];\n        this.annotations.memorizedGraph = {\n          ...this.annotations.memorizedGraph,\n        };\n\n        Object.keys(this.annotations.memorizedGraph).forEach((key) => {\n          const index = this.annotations.memorizedGraph[key].findIndex(\n            (x) => x === nodeId\n          );\n          if (index >= 0) {\n            this.annotations.memorizedGraph = {\n              ...this.annotations.memorizedGraph,\n              [key]: [\n                ...this.annotations.memorizedGraph[key].slice(0, index),\n                ...this.annotations.memorizedGraph[key].slice(index + 1),\n              ],\n            };\n          }\n        });\n      }\n    },\n    click: function(boxKey, event) {\n      if (!this.annotations.keyIsDown && boxKey) {\n        //We are now making links\n        this.annotations.keyIsDown = true;\n        this.annotations.currentPath = [boxKey];\n        this.annotations.lastElement = getCenter(this.boxes[boxKey].points);\n        this.cursor.x = event.offsetX;\n        this.cursor.y = event.offsetY;\n      } else if (this.annotations.keyIsDown) {\n        this.annotations.annnotated = true;\n\n        //we should stop making links\n        this.annotations.keyIsDown = false;\n\n        //save graph\n\n        // be sure that each node is a key in dictionary\n        this.annotations.currentPath.forEach((boxKey) => {\n          if (this.annotations.memorizedGraph[boxKey] === undefined) {\n            this.annotations.memorizedGraph[boxKey] = [];\n          }\n        });\n\n        // fill dictionaly with lexicographic order\n        this.annotations.currentPath.forEach((boxKey, index) => {\n          if (index > 0) {\n            const previousBoxKey = this.annotations.currentPath[index - 1];\n            const [start, end] = sortKeys(boxKey, previousBoxKey);\n\n            if (\n              !this.annotations.memorizedGraph[start].find((x) => x === end)\n            ) {\n              this.annotations.memorizedGraph[start].push(end);\n            }\n          }\n        });\n        this.annotations.currentPath = [];\n      }\n    },\n    moveAt: function(event) {\n      if (this.annotations.keyIsDown) {\n        this.cursor.x = event.offsetX;\n        this.cursor.y = event.offsetY;\n      }\n      if (\n        this.currentState === -1 &&\n        this.cropRectangle.currentlyDragged === \"end\"\n      ) {\n        this.cropRectangle.end.x = event.offsetX;\n        this.cropRectangle.end.y = event.offsetY;\n      }\n      if (\n        this.currentState === -1 &&\n        this.cropRectangle.currentlyDragged === \"start\"\n      ) {\n        this.cropRectangle.start.x = event.offsetX;\n        this.cropRectangle.start.y = event.offsetY;\n      }\n    },\n    stopDragging: function() {\n      this.cropRectangle.currentlyDragged = null;\n\n      Object.keys(this.boxes).forEach((key) => {\n        this.boxes[key].toDelete = !isInRectangle(\n          this.cropRectangle.start.x,\n          this.cropRectangle.start.y,\n          this.cropRectangle.end.x,\n          this.cropRectangle.end.y,\n          this.boxes[key].points\n        );\n      });\n    },\n    startDraggingStart: function() {\n      this.cropRectangle.currentlyDragged = \"start\";\n    },\n    startDraggingEnd: function() {\n      this.cropRectangle.currentlyDragged = \"end\";\n    },\n    mouseover: function(boxKey) {\n      if (!this.annotations.keyIsDown) {\n        return null;\n      }\n      if (\n        this.annotations.currentPath[\n          this.annotations.currentPath.length - 1\n        ] === boxKey\n      ) {\n        // The current box is the last one added -> so we remove it\n        if (this.annotations.currentPath.length > 1) {\n          this.annotations.currentPath.pop();\n          const lastBoxKey = this.annotations.currentPath[\n            this.annotations.currentPath.length - 1\n          ];\n          this.annotations.lastElement = getCenter(\n            this.boxes[lastBoxKey].points\n          );\n        }\n      } else if (!this.annotations.currentPath.find((x) => x === boxKey)) {\n        this.annotations.currentPath.push(boxKey);\n        this.annotations.lastElement = getCenter(this.boxes[boxKey].points);\n      }\n    },\n    nextStep: function() {\n      this.click();\n      if (this.currentState === -1) {\n        Object.keys(this.boxes).forEach((key) => {\n          this.boxes[key].visible = !this.boxes[key].toDelete;\n        });\n        this.currentState = 0;\n      }\n      if (\n        this.currentState === 0 ||\n        (this.annotations.annnotated && this.currentState === 1)\n      ) {\n        //Show cells created by goupin boxes\n        // can append if we click on next for the first time\n        // or if we were in the verification step and made modifications\n\n        this.convexHalls = getHullPaths(\n          this.annotations.memorizedGraph,\n          this.boxes\n        );\n        if (Object.keys(this.convexHalls).length !== 0) {\n          Object.keys(this.boxes).forEach((key) => {\n            this.boxes[key].toDelete = !Object.keys(\n              this.annotations.memorizedGraph\n            ).includes(key);\n          });\n          this.annotations.keyIsDown = false;\n          this.annotations.currentPath = [];\n          this.annotations.lastElement = { x: 0, y: 0 };\n          this.annotations.annnotated = false;\n          this.currentState = 1;\n        }\n      } else if (this.currentState === 1) {\n        // the association boxes -> cells is done by the key in convex hull\n        // since the key of a set is the concatenation of the boxes id contained in the cell\n        this.savedCellsGraph = { ...this.annotations.memorizedGraph };\n\n        this.boxes = { ...this.convexHalls };\n        this.convexHalls = {};\n\n        this.annotations.memorizedGraph = {};\n        this.savedLines = {};\n        this.lineIterator = 0;\n\n        this.currentState = 2;\n        //Now we are ready to select lines\n      } else if (this.currentState === 2) {\n        if (Object.keys(this.annotations.memorizedGraph).length === 0) {\n          if (\n            Object.keys(this.boxes).findIndex(\n              (key) => !this.isSaved(key, this.savedLines)\n            ) < 0\n          ) {\n            this.currentState = 3;\n\n            this.columnIterator = 0;\n            this.savedColumns = {};\n\n            Object.keys(this.savedLines).forEach((lineKey) =>\n              this.savedLines[lineKey].keys.forEach((nodeId) => {\n                this.boxes[nodeId].visible = true;\n              })\n            );\n          } else {\n            alert(\n              \"Tu n'as rien sélectionné, je ne peux donc pas ajouter de nouvelle ligne\"\n            );\n          }\n        } else {\n          const points = Object.keys(this.annotations.memorizedGraph).reduce(\n            (accumulateur, nodeId) => [\n              ...accumulateur,\n              ...this.boxes[nodeId].points,\n            ],\n            []\n          );\n\n          const keys = Object.keys(this.annotations.memorizedGraph);\n          this.savedLines[this.lineIterator] = {\n            keys: [...keys],\n            path: points2Path(getConvexPoints(points), true),\n            center: getCenter(points),\n          };\n\n          this.lineIterator += 1;\n          this.annotations.memorizedGraph = {};\n        }\n      } else if (this.currentState === 3) {\n        if (Object.keys(this.annotations.memorizedGraph).length === 0) {\n          if (\n            Object.keys(this.boxes).findIndex(\n              (key) => !this.isSaved(key, this.savedColumns)\n            ) < 0\n          ) {\n            this.currentState = 4;\n          } else {\n            alert(\n              \"Tu n'as rien sélectionné, je ne peux donc pas ajouter de nouvelle colonne\"\n            );\n          }\n        } else {\n          const points = Object.keys(this.annotations.memorizedGraph).reduce(\n            (accumulateur, nodeId) => [\n              ...accumulateur,\n              ...this.boxes[nodeId].points,\n            ],\n            []\n          );\n          this.savedColumns[this.columnIterator] = {\n            keys: [...Object.keys(this.annotations.memorizedGraph)],\n            path: points2Path(getConvexPoints(points), true),\n            center: getCenter(points),\n          };\n\n          this.columnIterator += 1;\n          this.annotations.memorizedGraph = {};\n        }\n      }\n    },\n    previousStep: function() {\n      this.click();\n      if (this.currentState === 0) {\n        Object.keys(this.boxes).forEach((key) => {\n          this.boxes[key].visible = true;\n        });\n        this.stopDragging();\n        this.annotations.memorizedGraph = {};\n        this.annotations.keyIsDown = false;\n        this.annotations.currentPath = [];\n        this.annotations.lastElement = { x: 0, y: 0 };\n        this.annotations.annnotated = false;\n        this.currentState = -1;\n      } else if (this.currentState === 1) {\n        this.currentState = 0;\n        //reset current anotations\n\n        this.annotations.memorizedGraph = {};\n        this.annotations.keyIsDown = false;\n        this.annotations.currentPath = [];\n        this.annotations.lastElement = { x: 0, y: 0 };\n        this.annotations.annnotated = false;\n\n        //remove saved annotations\n        this.convexHalls = {};\n        Object.keys(this.boxes).forEach((key) => {\n          this.boxes[key].toDelete = false;\n        });\n      } else if (this.currentState === 2) {\n        if (Object.keys(this.annotations.memorizedGraph).length > 0) {\n          //remove currently made graph\n          this.annotations.memorizedGraph = {};\n        } else if (this.lineIterator > 0) {\n          // remove last saved line\n          this.lineIterator -= 1;\n\n          delete this.savedLines[this.lineIterator];\n        } else {\n          // go back to cell selection\n\n          this.savedLines = {};\n          this.lineIterator = 0;\n          this.currentState = 1;\n\n          this.annotations.memorizedGraph = { ...this.savedCellsGraph };\n\n          // refind the OCR boxes\n          this.boxes = getBoxes(this.textAnnotations);\n          //remove what is outside of the cropped version\n          Object.keys(this.boxes).forEach((key) => {\n            this.boxes[key].visible = isInRectangle(\n              this.cropRectangle.start.x,\n              this.cropRectangle.start.y,\n              this.cropRectangle.end.x,\n              this.cropRectangle.end.y,\n              this.boxes[key].points\n            );\n          });\n\n          // put linked boxes as to be deleted\n          Object.keys(this.boxes).forEach((key) => {\n            this.boxes[key].toDelete = !Object.keys(\n              this.annotations.memorizedGraph\n            ).includes(key);\n          });\n\n          //get cells\n          this.convexHalls = getHullPaths(\n            this.annotations.memorizedGraph,\n            this.boxes\n          );\n\n          //reset annotations\n          this.annotations.keyIsDown = false;\n          this.annotations.currentPath = [];\n          this.annotations.lastElement = { x: 0, y: 0 };\n          this.annotations.annnotated = false;\n        }\n      } else if (this.currentState === 3) {\n        if (Object.keys(this.annotations.memorizedGraph).length > 0) {\n          //remove currently made graph\n          this.annotations.memorizedGraph = {};\n        } else if (this.columnIterator > 0) {\n          // remove las saved line\n          this.columnIterator -= 1;\n\n          delete this.savedColumns[this.columnIterator];\n        } else {\n          // go back to cell selection\n\n          this.savedColumns = {};\n          this.columnIterator = 0;\n          this.currentState = 2;\n\n          this.annotations.memorizedGraph = {};\n\n          //reset annotations\n          this.annotations.keyIsDown = false;\n          this.annotations.currentPath = [];\n          this.annotations.lastElement = { x: 0, y: 0 };\n          this.annotations.annnotated = false;\n        }\n      } else if (this.currentState === 4) {\n        this.currentState = 3;\n      }\n    },\n  },\n  watch: {\n    textAnnotations: function(newTextAnnotations) {\n      this.boxes = getBoxes(newTextAnnotations);\n    },\n  },\n  mounted: async function() {\n    const vm = this;\n\n    await this.loadOCR();\n\n    this.urlImg = this.batchOfInsights[0].urlImg;\n    this.insightId = this.batchOfInsights[0].insightId;\n\n    const {\n      data: { responses: responses },\n    } = await axios.get(this.batchOfInsights[0].textAnnotationsUrl);\n    this.textAnnotations = responses[0].textAnnotations;\n\n    var img = new Image();\n    img.onload = function() {\n      vm.imageHeight = img.height;\n      vm.imageWidth = img.width;\n    };\n    img.src = this.urlImg;\n\n    this.boxes = getBoxes(this.textAnnotations);\n\n    window.addEventListener(\"keyup\", function(event) {\n      if (event.target.nodeName == \"BODY\") {\n        if (event.key === \"k\") vm.skip();\n        if (event.key === \"n\") vm.nextStep();\n        if (event.key === \"v\") vm.validate();\n        if (event.key === \"p\") vm.previousStep();\n      }\n    });\n  },\n};\n</script>\n\n<style scoped>\n.app {\n  text-align: center;\n}\n\n.imageContainer {\n  position: relative;\n  display: inline-block;\n  text-align: left;\n}\n\n.imageContainer svg {\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n.box {\n  fill: blue;\n  fill-opacity: 0.1;\n  stroke: blue;\n  stroke-width: 1;\n}\n\n.selectable:hover {\n  stroke: blue;\n  fill: blue;\n  stroke-width: 4;\n  fill-opacity: 0.5;\n  cursor: pointer;\n}\n\n.toDelete {\n  fill: red;\n  fill-opacity: 0.3;\n}\n\n.currentLink,\n.currentBoxesCenter {\n  pointer-events: none;\n  stroke: blue;\n  stroke-width: 5;\n  fill: none;\n}\n\n.savedLink,\n.savedBoxesCenter {\n  pointer-events: none;\n  stroke: black;\n  stroke-width: 5;\n  fill: none;\n}\n\n.youWantToDeleteBoxCenter:hover {\n  stroke: red;\n  stroke-width: 5;\n  stroke-dasharray: 5, 5;\n  fill: transparent;\n}\n.youWantToDeleteBoxCenter:hover {\n  cursor: pointer;\n}\n.youWantToDeleteBoxCenter:hover + circle {\n  stroke: transparent;\n}\n.youWantToDelete {\n  stroke: transparent;\n  stroke-width: 15;\n}\n.youWantToDelete:hover {\n  cursor: pointer;\n}\n.youWantToDelete:hover + line {\n  stroke: red;\n  stroke-dasharray: 5, 5;\n}\n\n.noPointerEvent {\n  pointer-events: none;\n}\n\n.convexhall {\n  pointer-events: none;\n  stroke: blue;\n  stroke-width: 5;\n  fill: none;\n}\n\n.validatedGroup {\n  pointer-events: none;\n  stroke-width: 5;\n  fill-opacity: 0.2;\n}\n\n.validatedLine {\n  stroke: #aa00ff;\n  fill: #aa00ff;\n}\n\n.validatedColumn {\n  stroke: #4527a0;\n  fill: #4527a0;\n}\n.unfill .validatedGroup {\n  fill: none;\n}\n\n.validatedGroup text {\n  font-size: 1.5rem;\n  font-weight: bolder;\n  fill: white;\n  fill-opacity: 1;\n  stroke: none;\n}\n.states {\n  display: flex;\n  justify-content: space-evenly;\n  margin-bottom: 0.5rem;\n}\n.states div {\n  flex-grow: 1;\n  height: 2rem;\n  text-align: center;\n  vertical-align: middle;\n  line-height: 2rem;\n  text-align: center;\n  transition: color 0.2s, background-color 0.2s;\n  background-color: lightgrey;\n  color: black;\n}\n\n.states .currentState {\n  background-color: #1769aa;\n  color: white;\n}\n.states .doneState {\n  background-color: #2196f3;\n  color: white;\n}\n\n.explanations {\n  font-size: 1.3rem;\n}\n.actions,\n.subActions {\n  display: flex;\n  justify-content: stretch;\n}\n\n.actions button,\n.subActions button,\n.checkboxContainer .checkbox {\n  padding: 1rem;\n  font-size: 1.7rem;\n  border: 0;\n}\n.checkboxContainer {\n  text-align: left;\n}\n\n.checkboxContainer label {\n  margin-bottom: 1.5rem;\n}\n.actions button {\n  color: white;\n  flex-grow: 1;\n}\n\n.subActions button:hover {\n  background-color: lightgrey;\n  cursor: pointer;\n}\n\n.subActions {\n  margin-bottom: 1rem;\n  justify-content: space-between;\n}\n\n.actions button:first-child {\n  background-color: red;\n}\n.actions .canValidate {\n  background-color: green;\n  cursor: pointer;\n}\n.actions .disabled {\n  background-color: #a5d6a7;\n}\n\n.croppingRectangle path {\n  stroke: black;\n  stroke-width: 5;\n  fill: green;\n  fill-opacity: 0.5;\n}\n\n.croppingRectangle circle {\n  stroke: black;\n  stroke-width: 5;\n  fill: green;\n  cursor: pointer;\n}\n\n.desactivateListenersInside * {\n  pointer-events: none;\n}\n\n.scollable {\n  overflow: auto;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TableAnnotation.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TableAnnotation.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TableAnnotation.vue?vue&type=template&id=6d01ef04&scoped=true&\"\nimport script from \"./TableAnnotation.vue?vue&type=script&lang=js&\"\nexport * from \"./TableAnnotation.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TableAnnotation.vue?vue&type=style&index=0&id=6d01ef04&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6d01ef04\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ui stackable grid container\"},[_c('div',{staticClass:\"five wide column\"},[_c('h2',[_vm._v(_vm._s(_vm.$t(\"settings.settings\")))]),_c('form',{staticClass:\"ui form\",on:{\"submit\":function($event){$event.preventDefault();return _vm.saveLang.apply(null, arguments)}}},[_c('div',{staticClass:\"field\"},[_c('div',{staticClass:\"ui action input labeled\"},[_c('div',{staticClass:\"ui label\"},[_vm._v(_vm._s(_vm.$t(\"settings.language\")))]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selectedLang),expression:\"selectedLang\"}],staticClass:\"ui fluid dropdown\",on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.selectedLang=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},_vm._l((_vm.langs),function(lang,i){return _c('option',{key:(\"Lang\" + i),domProps:{\"value\":lang}},[_vm._v(\" \"+_vm._s(lang.toUpperCase())+\" \")])}),0)])]),_c('button',{staticClass:\"ui button primary\"},[_vm._v(_vm._s(_vm.$t(\"settings.save\")))])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import it from './it'\nimport en from './en'\nimport fr from './fr'\nimport de from './de'\nimport es from './es'\nimport ro from './ro'\nimport nl from './nl'\nimport ar from './ar'\nimport ca from './ca'\nimport zh from './zh'\nimport da from './da'\nimport he from './he'\nimport hu from './hu'\nimport id from './id'\nimport pt from './pt'\nimport ru from './ru'\nimport sv from './sv'\nimport uk from './uk'\nimport vi from './vi'\nimport bg from './bg'\nimport pl from './pl'\nimport hr from './hr'\nimport ko from './ko'\nimport et from './et'\n\nexport default {\n  en,\n  it,\n  fr,\n  de,\n  es,\n  ro,\n  nl,\n  ar,\n  ca,\n  zh,\n  da,\n  he,\n  hu,\n  id,\n  pt,\n  ru,\n  sv,\n  uk,\n  vi,\n  bg,\n  pl,\n  hr,\n  ko,\n  et,\n}\n","<template>\n  <div class=\"ui stackable grid container\">\n    <div class=\"five wide column\">\n      <h2>{{ $t(\"settings.settings\") }}</h2>\n      <form class=\"ui form\" v-on:submit.prevent=\"saveLang\">\n        <div class=\"field\">\n          <div class=\"ui action input labeled\">\n            <div class=\"ui label\">{{ $t(\"settings.language\") }}</div>\n            <select v-model=\"selectedLang\" class=\"ui fluid dropdown\">\n              <option\n                v-for=\"(lang, i) in langs\"\n                :key=\"`Lang${i}`\"\n                :value=\"lang\"\n              >\n                {{ lang.toUpperCase() }}\n              </option>\n            </select>\n          </div>\n        </div>\n        <button class=\"ui button primary\">{{ $t(\"settings.save\") }}</button>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { localSettings } from \"../settings\";\nimport messages from \"../i18n/messages\";\n\nexport default {\n  name: \"SettingsView\",\n  props: [],\n\n  data: function () {\n    return {\n      selectedLang: this.$i18n.locale,\n      langs: Object.keys(messages),\n    };\n  },\n  \n  methods: {\n    saveLang: function () {\n      this.$i18n.locale = this.selectedLang;\n      localSettings.update(\"lang\", this.$i18n.locale);\n    },\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SettingsView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SettingsView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SettingsView.vue?vue&type=template&id=32b7bc76&\"\nimport script from \"./SettingsView.vue?vue&type=script&lang=js&\"\nexport * from \"./SettingsView.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ui container\"},[_c('div',[_c('h2',[_vm._v(_vm._s(_vm.$t(\"insights.insights\")))]),_c('form',{staticClass:\"ui stackable form\"},[_c('div',{staticClass:\"two fields\"},[_c('div',{staticClass:\"field\"},[_c('label',[_vm._v(_vm._s(_vm.$t(\"insights.barcode\")))]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.barcodeFilter),expression:\"barcodeFilter\"}],attrs:{\"placeholder\":_vm.$t('insights.barcode_placeholder')},domProps:{\"value\":(_vm.barcodeFilter)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.barcodeFilter=$event.target.value}}})]),_c('div',{staticClass:\"field\"},[_c('label',[_vm._v(_vm._s(_vm.$t(\"insights.value_tag\")))]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.valueTagFilter),expression:\"valueTagFilter\"}],attrs:{\"type\":\"text\",\"placeholder\":_vm.$t('insights.value_placeholder')},domProps:{\"value\":(_vm.valueTagFilter)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.valueTagFilter=$event.target.value}}})])]),_c('div',{staticClass:\"two fields\"},[_c('div',{staticClass:\"field\"},[_c('label',[_vm._v(_vm._s(_vm.$t(\"insights.type\")))]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.insightTypeFilter),expression:\"insightTypeFilter\"}],staticClass:\"ui search dropdown\",on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.insightTypeFilter=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"value\":\"\"}},[_vm._v(_vm._s(_vm.$t(\"insights.all\")))]),_c('option',{attrs:{\"value\":\"label\"}},[_vm._v(_vm._s(_vm.$t(\"insights.label\")))]),_c('option',{attrs:{\"value\":\"product_weight\"}},[_vm._v(_vm._s(_vm.$t(\"insights.product_weight\")))]),_c('option',{attrs:{\"value\":\"category\"}},[_vm._v(_vm._s(_vm.$t(\"insights.category\")))]),_c('option',{attrs:{\"value\":\"expiration_date\"}},[_vm._v(_vm._s(_vm.$t(\"insights.expiration_date\")))]),_c('option',{attrs:{\"value\":\"packager_code\"}},[_vm._v(_vm._s(_vm.$t(\"insights.packager_code\")))])])]),_c('div',{staticClass:\"field\"},[_c('label',[_vm._v(_vm._s(_vm.$t(\"insights.annotated\")))]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.annotationFilter),expression:\"annotationFilter\"}],staticClass:\"ui search dropdown\",on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.annotationFilter=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"value\":\"\"}},[_vm._v(_vm._s(_vm.$t(\"insights.all\")))]),_c('option',{attrs:{\"value\":\"-1\"}},[_vm._v(_vm._s(_vm.$t(\"insights.skipped\")))]),_c('option',{attrs:{\"value\":\"0\"}},[_vm._v(_vm._s(_vm.$t(\"insights.rejected\")))]),_c('option',{attrs:{\"value\":\"1\"}},[_vm._v(_vm._s(_vm.$t(\"insights.accepted\")))]),_c('option',{attrs:{\"value\":\"not_annotated\"}},[_vm._v(_vm._s(_vm.$t(\"insights.not_annotated\")))])])])]),_c('input',{staticClass:\"ui submit button primary\",attrs:{\"type\":\"submit\"},domProps:{\"value\":_vm.$t('insights.search')},on:{\"click\":function($event){$event.preventDefault();return _vm.loadInsights.apply(null, arguments)}}})]),_c('div',{staticClass:\"ui divider\"}),(!_vm.loading)?_c('p',[_c('strong',[_vm._v(_vm._s(_vm.$t(\"insights.count\")))]),_vm._v(\" \"+_vm._s(_vm.resultCount)+\" \")]):_vm._e()]),_c('LoadingSpinner',{attrs:{\"show\":_vm.loading}}),(!_vm.loading)?_c('table',{staticClass:\"ui celled table\"},[_c('thead',{staticClass:\"mobile hidden\"},[_c('tr',[_c('th',[_vm._v(_vm._s(_vm.$t(\"insights.barcode\")))]),_c('th',[_vm._v(_vm._s(_vm.$t(\"insights.id\")))]),_c('th',[_vm._v(_vm._s(_vm.$t(\"insights.type\")))]),_c('th',[_vm._v(_vm._s(_vm.$t(\"insights.value\")))]),_c('th',[_vm._v(_vm._s(_vm.$t(\"insights.created_at\")))]),_c('th',[_vm._v(_vm._s(_vm.$t(\"insights.completed_at\")))]),_c('th',[_vm._v(_vm._s(_vm.$t(\"insights.annotation\")))]),_c('th',[_vm._v(_vm._s(_vm.$t(\"insights.automatic\")))])])]),_c('tbody',_vm._l((_vm.insights),function(insight){return _c('tr',{key:insight.id},[_c('td',{attrs:{\"data-label\":\"Barcode\"}},[_c('span',{staticClass:\"mobile only list__label\"},[_vm._v(_vm._s(_vm.$t(\"insights.barcode\"))+\" \")]),_c('a',{attrs:{\"href\":\"#\"},on:{\"click\":function($event){return _vm.filterBarcode(insight.barcode)}}},[_vm._v(_vm._s(insight.barcode))]),_c('a',{attrs:{\"target\":\"_blank\",\"href\":_vm.getProductUrl(insight.barcode)}},[_c('i',{staticClass:\"large icon eye link_icon\"})]),_c('a',{attrs:{\"target\":\"_blank\",\"href\":_vm.getProductEditUrl(insight.barcode)}},[_c('i',{staticClass:\"large icon edit link_icon\"})])]),_c('td',{attrs:{\"data-label\":\"Id\"}},[_c('span',{staticClass:\"mobile only list__label\"},[_vm._v(_vm._s(_vm.$t(\"insights.id\"))+\" \")]),_vm._v(_vm._s(insight.id)+\" \")]),_c('td',{attrs:{\"data-label\":\"Type\"}},[_c('span',{staticClass:\"mobile only list__label\"},[_vm._v(_vm._s(_vm.$t(\"insights.type\"))+\" \")]),_vm._v(_vm._s(insight.type)+\" \")]),_c('td',{attrs:{\"data-label\":\"Value\"}},[_c('span',{staticClass:\"mobile only list__label\"},[_vm._v(_vm._s(_vm.$t(\"insights.value\"))+\" \")]),_vm._v(_vm._s(insight.value || insight.value_tag)+\" \"),(_vm.getQuestionUrl(insight.type, insight.value_tag))?_c('a',{attrs:{\"target\":\"_blank\",\"href\":_vm.getQuestionUrl(insight.type, insight.value_tag)}},[_c('i',{staticClass:\"large icon external alternate link_icon\"})]):_vm._e()]),_c('td',{attrs:{\"data-label\":\"Created at\"}},[_c('span',{staticClass:\"mobile only list__label\"},[_vm._v(_vm._s(_vm.$t(\"insights.created_at\"))+\" \")]),_vm._v(_vm._s(_vm.formatDatetime(insight.timestamp))+\" \")]),_c('td',{attrs:{\"data-label\":\"Completed at\"}},[_c('span',{staticClass:\"mobile only list__label\"},[_vm._v(_vm._s(_vm.$t(\"insights.completed_at\"))+\" \")]),_vm._v(_vm._s(_vm.formatDatetime(insight.completed_at))+\" \")]),_c('td',{attrs:{\"data-label\":\"Annotation\"}},[_c('span',{staticClass:\"mobile only list__label\"},[_vm._v(_vm._s(_vm.$t(\"insights.annotation\"))+\" \")]),(insight.annotation == 1)?_c('i',{staticClass:\"large green checkmark icon\"}):(insight.annotation == 0)?_c('i',{staticClass:\"large red times icon\"}):(insight.annotation == -1)?_c('i',{staticClass:\"large grey question icon\"}):_vm._e()]),_c('td',{attrs:{\"data-label\":\"Automatic\"}},[_c('span',{staticClass:\"mobile only list__label\"},[_vm._v(_vm._s(_vm.$t(\"insights.automatic\"))+\" \")]),(insight.automatic_processing)?_c('i',{staticClass:\"large green checkmark icon\"}):_vm._e()])])}),0)]):_vm._e(),(_vm.resultCount)?_c('div',[_c('pagination',{attrs:{\"page-count\":_vm.pageCount},on:{\"change\":_vm.updatedPage},model:{value:(_vm.currentPage),callback:function ($$v) {_vm.currentPage=$$v},expression:\"currentPage\"}})],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',{staticClass:\"pagination\"},[(_vm.paginationLabels.first)?_c('li',{staticClass:\"pagination-item mobile hidden\"},[_c('button',{staticClass:\"compact ui button\",attrs:{\"disabled\":_vm.hasFirst},domProps:{\"innerHTML\":_vm._s(_vm.paginationLabels.first)},on:{\"click\":_vm.first}})]):_vm._e(),(_vm.paginationLabels.prev)?_c('li',{staticClass:\"pagination-item mobile hidden\"},[_c('button',{staticClass:\"compact ui button\",attrs:{\"disabled\":_vm.hasFirst},domProps:{\"innerHTML\":_vm._s(_vm.paginationLabels.prev)},on:{\"click\":_vm.prev}})]):_vm._e(),_vm._l((_vm.items),function(page){return _c('li',{key:page.label,staticClass:\"pagination-item\"},[(page.disable)?_c('span',[_vm._v(\"...\")]):_c('button',{staticClass:\"compact ui button\",class:(\"\" + (page.active ? 'primary' : '')),on:{\"click\":function($event){return _vm.goto(page.label)}}},[_vm._v(_vm._s(page.label))])])}),(_vm.paginationLabels.next)?_c('li',{staticClass:\"pagination-item mobile hidden\"},[_c('button',{staticClass:\"compact ui button\",attrs:{\"disabled\":_vm.hasLast},domProps:{\"innerHTML\":_vm._s(_vm.paginationLabels.next)},on:{\"click\":_vm.next}})]):_vm._e(),(_vm.paginationLabels.last)?_c('li',{staticClass:\"pagination-item mobile hidden\"},[_c('button',{staticClass:\"compact ui button\",attrs:{\"disabled\":_vm.hasLast},domProps:{\"innerHTML\":_vm._s(_vm.paginationLabels.last)},on:{\"click\":_vm.last}})]):_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <ul class=\"pagination\">\n    <li class=\"pagination-item mobile hidden\" v-if=\"paginationLabels.first\">\n      <button\n        @click=\"first\"\n        :disabled=\"hasFirst\"\n        class=\"compact ui button\"\n        v-html=\"paginationLabels.first\"\n      ></button>\n    </li>\n\n    <li class=\"pagination-item mobile hidden\" v-if=\"paginationLabels.prev\">\n      <button\n        @click=\"prev\"\n        :disabled=\"hasFirst\"\n        class=\"compact ui button\"\n        v-html=\"paginationLabels.prev\"\n      ></button>\n    </li>\n\n    <li v-for=\"page in items\" :key=\"page.label\" class=\"pagination-item\">\n      <span v-if=\"page.disable\">...</span>\n      <button\n        v-else\n        @click=\"goto(page.label)\"\n        class=\"compact ui button\"\n        :class=\"`${page.active ? 'primary' : ''}`\"\n      >{{ page.label }}</button>\n    </li>\n\n    <li v-if=\"paginationLabels.next\" class=\"pagination-item mobile hidden\">\n      <button\n        @click=\"next\"\n        :disabled=\"hasLast\"\n        class=\"compact ui button\"\n        v-html=\"paginationLabels.next\"\n      ></button>\n    </li>\n\n    <li v-if=\"paginationLabels.last\" class=\"pagination-item mobile hidden\">\n      <button\n        @click=\"last\"\n        :disabled=\"hasLast\"\n        class=\"compact ui button\"\n        v-html=\"paginationLabels.last\"\n      ></button>\n    </li>\n  </ul>\n</template>\n\n<script>\nexport default {\n  props: {\n    value: {\n      // current page\n      type: Number,\n      required: true\n    },\n    pageCount: {\n      // page numbers\n      type: Number,\n      required: true\n    },\n    labels: {\n      type: Object,\n      required: false,\n      default: () => ({})\n    }\n  },\n\n  data() {\n    return {\n      paginationLabels: {\n        first: \"&laquo;\",\n        prev: \"&lsaquo;\",\n        next: \"&rsaquo;\",\n        last: \"&raquo;\"\n      }\n    };\n  },\n\n  mounted() {\n    if (this.value > this.pageCount) {\n      this.$emit(\"input\", this.pageCount);\n    }\n  },\n\n  computed: {\n    items() {\n      let valPrev = this.value > 1 ? this.value - 1 : 1; // for easier navigation - gives one previous page\n      let valNext =\n        this.value < this.pageCount ? this.value + 1 : this.pageCount; // one next page\n      let extraPrev = valPrev === 3 ? 2 : null;\n      let extraNext =\n        valNext === this.pageCount - 2 ? this.pageCount - 1 : null;\n      let dotsBefore = valPrev > 3 ? 2 : null;\n      let dotsAfter = valNext < this.pageCount - 2 ? this.pageCount - 1 : null;\n\n      let output = [];\n\n      for (let i = 1; i <= this.pageCount; i += 1) {\n        if (\n          [\n            1,\n            this.pageCount,\n            this.value,\n            valPrev,\n            valNext,\n            extraPrev,\n            extraNext,\n            dotsBefore,\n            dotsAfter\n          ].includes(i)\n        ) {\n          output.push({\n            label: i,\n            active: this.value === i,\n            disable: [dotsBefore, dotsAfter].includes(i)\n          });\n        }\n      }\n\n      return output;\n    },\n\n    hasFirst() {\n      return this.value === 1;\n    },\n\n    hasLast() {\n      return this.value === this.pageCount;\n    }\n  },\n\n  watch: {\n    value: function() {\n      this.$emit(\"change\");\n    }\n  },\n\n  methods: {\n    first() {\n      if (!this.hasFirst) {\n        this.$emit(\"input\", 1);\n      }\n    },\n\n    prev() {\n      if (!this.hasFirst) {\n        this.$emit(\"input\", this.value - 1);\n      }\n    },\n\n    goto(page) {\n      this.$emit(\"input\", page);\n    },\n\n    next() {\n      if (!this.hasLast) {\n        this.$emit(\"input\", this.value + 1);\n      }\n    },\n\n    last() {\n      if (!this.hasLast) {\n        this.$emit(\"input\", this.pageCount);\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n.pagination {\n  padding-inline-start: 0;\n  text-align: center;\n}\n.pagination-item {\n  display: inline-block;\n  list-style: none;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Pagination.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Pagination.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Pagination.vue?vue&type=template&id=4e54b946&scoped=true&\"\nimport script from \"./Pagination.vue?vue&type=script&lang=js&\"\nexport * from \"./Pagination.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Pagination.vue?vue&type=style&index=0&id=4e54b946&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4e54b946\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"ui container\">\n    <div>\n      <h2>{{ $t(\"insights.insights\") }}</h2>\n      <form class=\"ui stackable form\">\n        <div class=\"two fields\">\n          <div class=\"field\">\n            <label>{{ $t(\"insights.barcode\") }}</label>\n            <input\n              :placeholder=\"$t('insights.barcode_placeholder')\"\n              v-model=\"barcodeFilter\"\n            />\n          </div>\n          <div class=\"field\">\n            <label>{{ $t(\"insights.value_tag\") }}</label>\n            <input\n              type=\"text\"\n              :placeholder=\"$t('insights.value_placeholder')\"\n              v-model=\"valueTagFilter\"\n            />\n          </div>\n        </div>\n        <div class=\"two fields\">\n          <div class=\"field\">\n            <label>{{ $t(\"insights.type\") }}</label>\n            <select class=\"ui search dropdown\" v-model=\"insightTypeFilter\">\n              <option value>{{ $t(\"insights.all\") }}</option>\n              <option value=\"label\">{{ $t(\"insights.label\") }}</option>\n              <option value=\"product_weight\">{{\n                $t(\"insights.product_weight\")\n              }}</option>\n              <option value=\"category\">{{ $t(\"insights.category\") }}</option>\n              <option value=\"expiration_date\">{{\n                $t(\"insights.expiration_date\")\n              }}</option>\n              <option value=\"packager_code\">{{\n                $t(\"insights.packager_code\")\n              }}</option>\n            </select>\n          </div>\n          <div class=\"field\">\n            <label>{{ $t(\"insights.annotated\") }}</label>\n            <select class=\"ui search dropdown\" v-model=\"annotationFilter\">\n              <option value>{{ $t(\"insights.all\") }}</option>\n              <option value=\"-1\">{{ $t(\"insights.skipped\") }}</option>\n              <option value=\"0\">{{ $t(\"insights.rejected\") }}</option>\n              <option value=\"1\">{{ $t(\"insights.accepted\") }}</option>\n              <option value=\"not_annotated\">{{\n                $t(\"insights.not_annotated\")\n              }}</option>\n            </select>\n          </div>\n        </div>\n        <input\n          class=\"ui submit button primary\"\n          type=\"submit\"\n          :value=\"$t('insights.search')\"\n          @click.prevent=\"loadInsights\"\n        />\n      </form>\n      <div class=\"ui divider\" />\n      <p v-if=\"!loading\">\n        <strong>{{ $t(\"insights.count\") }}</strong>\n        {{ resultCount }}\n      </p>\n    </div>\n    <LoadingSpinner :show=\"loading\" />\n    <table class=\"ui celled table\" v-if=\"!loading\">\n      <thead class=\"mobile hidden\">\n        <tr>\n          <th>{{ $t(\"insights.barcode\") }}</th>\n          <th>{{ $t(\"insights.id\") }}</th>\n          <th>{{ $t(\"insights.type\") }}</th>\n          <th>{{ $t(\"insights.value\") }}</th>\n          <th>{{ $t(\"insights.created_at\") }}</th>\n          <th>{{ $t(\"insights.completed_at\") }}</th>\n          <th>{{ $t(\"insights.annotation\") }}</th>\n          <th>{{ $t(\"insights.automatic\") }}</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"insight in insights\" :key=\"insight.id\">\n          <td data-label=\"Barcode\">\n            <span class=\"mobile only list__label\"\n              >{{ $t(\"insights.barcode\") }} </span\n            ><a href=\"#\" @click=\"filterBarcode(insight.barcode)\">{{\n              insight.barcode\n            }}</a\n            ><a target=\"_blank\" :href=\"getProductUrl(insight.barcode)\"\n              ><i class=\"large icon eye link_icon\"/></a\n            ><a target=\"_blank\" :href=\"getProductEditUrl(insight.barcode)\"\n              ><i class=\"large icon edit link_icon\"\n            /></a>\n          </td>\n          <td data-label=\"Id\">\n            <span class=\"mobile only list__label\">{{ $t(\"insights.id\") }} </span\n            >{{ insight.id }}\n          </td>\n          <td data-label=\"Type\">\n            <span class=\"mobile only list__label\"\n              >{{ $t(\"insights.type\") }} </span\n            >{{ insight.type }}\n          </td>\n          <td data-label=\"Value\">\n            <span class=\"mobile only list__label\"\n              >{{ $t(\"insights.value\") }} </span\n            >{{ insight.value || insight.value_tag }}\n            <a\n              target=\"_blank\"\n              :href=\"getQuestionUrl(insight.type, insight.value_tag)\"\n              v-if=\"getQuestionUrl(insight.type, insight.value_tag)\"\n              ><i class=\"large icon external alternate link_icon\"\n            /></a>\n          </td>\n          <td data-label=\"Created at\">\n            <span class=\"mobile only list__label\"\n              >{{ $t(\"insights.created_at\") }} </span\n            >{{ formatDatetime(insight.timestamp) }}\n          </td>\n          <td data-label=\"Completed at\">\n            <span class=\"mobile only list__label\"\n              >{{ $t(\"insights.completed_at\") }} </span\n            >{{ formatDatetime(insight.completed_at) }}\n          </td>\n          <td data-label=\"Annotation\">\n            <span class=\"mobile only list__label\"\n              >{{ $t(\"insights.annotation\") }}\n            </span>\n            <i\n              v-if=\"insight.annotation == 1\"\n              class=\"large green checkmark icon\"\n            ></i>\n            <i\n              v-else-if=\"insight.annotation == 0\"\n              class=\"large red times icon\"\n            ></i>\n            <i\n              v-else-if=\"insight.annotation == -1\"\n              class=\"large grey question icon\"\n            ></i>\n          </td>\n          <td data-label=\"Automatic\">\n            <span class=\"mobile only list__label\"\n              >{{ $t(\"insights.automatic\") }}\n            </span>\n            <i\n              v-if=\"insight.automatic_processing\"\n              class=\"large green checkmark icon\"\n            ></i>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n    <div v-if=\"resultCount\">\n      <pagination\n        v-model=\"currentPage\"\n        :page-count=\"pageCount\"\n        v-on:change=\"updatedPage\"\n      ></pagination>\n    </div>\n  </div>\n</template>\n\n<script>\nimport robotoffService from \"../robotoff\";\nimport Pagination from \"../components/Pagination\";\nimport LoadingSpinner from \"../components/LoadingSpinner\";\nimport { getURLParam } from \"../utils\";\nimport offService from \"../off\";\n\nexport default {\n  name: \"InsightListView\",\n  components: { Pagination, LoadingSpinner },\n  data: function() {\n    return {\n      currentPage: 1,\n      insights: [],\n      pageSize: 25,\n      resultCount: 0,\n      barcodeFilter: getURLParam(\"code\"),\n      insightTypeFilter: \"\",\n      annotationFilter: \"\",\n      valueTagFilter: \"\",\n      loading: false,\n    };\n  },\n  computed: {\n    pageCount: function() {\n      if (this.resultCount == 0) {\n        return 0;\n      }\n\n      let count = Math.floor(this.resultCount / this.pageSize);\n      if (this.resultCount % this.pageSize !== 0) {\n        count += 1;\n      }\n      return count;\n    },\n  },\n  methods: {\n    getProductUrl: function(code) {\n      if (!code) {\n        return \"\";\n      }\n      return offService.getProductUrl(code);\n    },\n    getProductEditUrl: function(code) {\n      if (!code) {\n        return \"\";\n      }\n      return offService.getProductEditUrl(code);\n    },\n    getQuestionUrl: function(type, value_tag) {\n      if (\n        !value_tag ||\n        ![\"category\", \"brand\", \"product_weight\", \"label\"].includes(type)\n      ) {\n        return \"\";\n      }\n      return `https://hunger.openfoodfacts.org/questions?type=${type}&value_tag=${value_tag}`;\n    },\n    filterBarcode: function(code) {\n      this.barcodeFilter = code;\n      this.loadInsights();\n    },\n    formatDatetime: function(datetime) {\n      if (!datetime) {\n        return null;\n      }\n      return datetime.split(\".\")[0];\n    },\n    updatedPage: function() {\n      this.loadInsights();\n    },\n    loadInsights: function() {\n      this.loading = true;\n      robotoffService\n        .getInsights(\n          this.barcodeFilter,\n          this.insightTypeFilter,\n          this.valueTagFilter,\n          this.annotationFilter,\n          this.currentPage,\n          this.pageSize\n        )\n        .then((result) => {\n          this.insights = result.data.insights;\n          this.resultCount = result.data.count;\n          this.loading = false;\n        })\n        .catch(() => {\n          this.loading = false;\n        });\n    },\n  },\n  mounted() {\n    this.loadInsights();\n  },\n};\n</script>\n<style>\n.list__label {\n  font-weight: bold;\n}\na > .link_icon {\n  margin: 5px;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InsightListView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InsightListView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./InsightListView.vue?vue&type=template&id=0ac7f909&\"\nimport script from \"./InsightListView.vue?vue&type=script&lang=js&\"\nexport * from \"./InsightListView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./InsightListView.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ui container\"},[_c('div',[_c('h2',[_vm._v(_vm._s(_vm.$t(\"logos.search\")))]),_c('div',{staticClass:\"ui divider hidden\"}),_c('form',{staticClass:\"ui form\",on:{\"submit\":function($event){$event.preventDefault();return _vm.search.apply(null, arguments)}}},[_c('div',{staticClass:\"three fields\"},[_c('div',{staticClass:\"field\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.value),expression:\"value\",modifiers:{\"trim\":true}}],attrs:{\"type\":\"text\",\"name\":\"value\",\"placeholder\":_vm.$t('logos.value')},domProps:{\"value\":(_vm.value)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.value=$event.target.value.trim()},\"blur\":function($event){return _vm.$forceUpdate()}}})]),_c('div',{staticClass:\"field\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.barcode),expression:\"barcode\",modifiers:{\"trim\":true}}],attrs:{\"type\":\"text\",\"name\":\"barcode\",\"placeholder\":_vm.$t('logos.barcode')},domProps:{\"value\":(_vm.barcode)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.barcode=$event.target.value.trim()},\"blur\":function($event){return _vm.$forceUpdate()}}})]),_c('div',{staticClass:\"field\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.type),expression:\"type\"}],staticClass:\"ui fluid dropdown\",on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.type=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"value\":\"\"}},[_vm._v(_vm._s(_vm.$t(\"logos.type\")))]),_c('option',{attrs:{\"value\":\"label\"}},[_vm._v(_vm._s(_vm.$t(\"logos.label\")))]),_c('option',{attrs:{\"value\":\"brand\"}},[_vm._v(_vm._s(_vm.$t(\"logos.brand\")))]),_c('option',{attrs:{\"value\":\"packager_code\"}},[_vm._v(_vm._s(_vm.$t(\"logos.packager_code\")))]),_c('option',{attrs:{\"value\":\"packaging\"}},[_vm._v(_vm._s(_vm.$t(\"logos.packaging\")))]),_c('option',{attrs:{\"value\":\"qr_code\"}},[_vm._v(_vm._s(_vm.$t(\"logos.qr_code\")))]),_c('option',{attrs:{\"value\":\"category\"}},[_vm._v(_vm._s(_vm.$t(\"logos.category\")))]),_c('option',{attrs:{\"value\":\"nutrition_label\"}},[_vm._v(_vm._s(_vm.$t(\"logos.nutrition_label\")))]),_c('option',{attrs:{\"value\":\"store\"}},[_vm._v(_vm._s(_vm.$t(\"logos.store\")))])])]),_c('div',{staticClass:\"field\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.count),expression:\"count\",modifiers:{\"trim\":true}}],attrs:{\"type\":\"number\",\"name\":\"count\"},domProps:{\"value\":(_vm.count)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.count=$event.target.value.trim()},\"blur\":function($event){return _vm.$forceUpdate()}}})]),_c('div',{staticClass:\"field\"},[_c('button',{staticClass:\"ui button primary\",attrs:{\"type\":\"submit\"}},[_vm._v(_vm._s(_vm.$t(\"logos.search\")))])])])]),_c('div',{staticClass:\"ui divider hidden\"}),_c('LoadingSpinner',{attrs:{\"show\":_vm.loading}}),(!_vm.loading && _vm.logos.length > 0)?_c('div',[_c('p',[_vm._v(_vm._s(_vm.$t(\"logos.number_of_results\"))+\" \"+_vm._s(_vm.resultCount))]),_c('LogoCardGrid',{attrs:{\"logos\":_vm.logos,\"selectable\":false}})],1):_vm._e(),(!_vm.loading && _vm.logos.length == 0)?_c('div',[_c('p',[_c('strong',[_vm._v(_vm._s(_vm.$t(\"logos.no_found\")))])])]):_vm._e()],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"ui grid\"},_vm._l((_vm.logos),function(logo){return _c('div',{key:logo.id,staticClass:\"four wide mobile-landscape eight wide mobile four wide tablet three wide computer column\"},[_c('div',{staticClass:\"ui fluid card ann-logo\",class:{selected: logo.selected, annotated: logo.annotation_type },on:{\"click\":function($event){return _vm.toggleSelectLogo(logo)}}},[_c('div',{staticClass:\"content actions\"},[_c('div',{staticClass:\"left floated meta\"},[_c('router-link',{attrs:{\"to\":_vm.editLogoURL(logo),\"target\":\"_blank\"}},[_c('i',{staticClass:\"edit icon\"})])],1),_c('div',{staticClass:\"right floated meta\"},[_c('router-link',{attrs:{\"to\":_vm.externalLogoURL(logo),\"target\":\"_blank\"}},[_c('i',{staticClass:\"external alternate icon blue\"})])],1)]),_c('div',{staticClass:\"content logo-image\"},[_c('img',{attrs:{\"loading\":\"lazy\",\"src\":logo.image.url}})]),_c('div',{staticClass:\"content distance\"},[(logo.distance)?_c('p',[_vm._v(_vm._s(_vm.$t(\"logos.distance\"))+\" \"+_vm._s(logo.distance.toFixed(1)))]):_vm._e(),(logo.annotation_value)?_c('p',[_vm._v(_vm._s(_vm.$t(\"logos.annotation\"))+_vm._s(logo.annotation_value)+\" (\"+_vm._s(logo.annotation_type)+\")\")]):(logo.annotation_type)?_c('p',[_vm._v(_vm._s(_vm.$t(\"logos.annotation\"))+\"(\"+_vm._s(logo.annotation_type)+\")\")]):_vm._e()])])])}),0)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div class=\"ui grid\">\n      <div\n        class=\"four wide mobile-landscape eight wide mobile four wide tablet three wide computer column\"\n        v-for=\"logo in logos\"\n        :key=\"logo.id\"\n      >\n        <div\n          class=\"ui fluid card ann-logo\"\n          @click=\"toggleSelectLogo(logo)\"\n          :class=\"{selected: logo.selected, annotated: logo.annotation_type }\"\n        >\n          <div class=\"content actions\">\n            <div class=\"left floated meta\">\n              <router-link :to=\"editLogoURL(logo)\" target=\"_blank\">\n                <i class=\"edit icon\"></i>\n              </router-link>\n            </div>\n            <div class=\"right floated meta\">\n              <router-link :to=\"externalLogoURL(logo)\" target=\"_blank\">\n                <i class=\"external alternate icon blue\"></i>\n              </router-link>\n            </div>\n          </div>\n          <div class=\"content logo-image\">\n            <img loading=\"lazy\" :src=\"logo.image.url\" />\n          </div>\n          <div class=\"content distance\">\n            <p v-if=\"logo.distance\">{{$t(\"logos.distance\")}} {{ logo.distance.toFixed(1) }}</p>\n            <p\n              v-if=\"logo.annotation_value\"\n            >{{$t(\"logos.annotation\")}}{{ logo.annotation_value }} ({{ logo.annotation_type }})</p>\n            <p\n              v-else-if=\"logo.annotation_type\"\n            >{{$t(\"logos.annotation\")}}({{ logo.annotation_type }})</p>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"LogoCardGrid\",\n  props: {\n    logos: {\n      type: Array,\n      required: true\n    },\n    selectable: {\n      type: Boolean,\n      default: true\n    }\n  },\n  data: function() {\n    return {};\n  },\n  methods: {\n    externalLogoURL: function(logo) {\n      return `/logos?logo_id=${logo.id}`;\n    },\n    editLogoURL: function(logo) {\n      return `/logos/${logo.id}`;\n    },\n    toggleSelectLogo: function(logo) {\n      if (!this.selectable || logo.annotation_value) return;\n      this.$emit(\"toggle-select-logo\", logo);\n    }\n  },\n  computed: {},\n  mounted() {}\n};\n</script>\n\n<style scoped>\n.ann-logo.selected {\n  background-color: #4a5971;\n  color: #ffffff;\n}\n\n.ann-logo.annotated {\n  background-color: #797979;\n  color: #ffffff;\n}\n.ui.card {\n  height: 100%;\n}\n\n.ui.card>.actions {\n  flex-grow: 0;\n}\n\n.ui.card>.logo-image {\n  display: flex;\n  align-items: center;\n  flex-grow: 1;\n  justify-content: center;\n}\n\n.ui.card>.logo-image>img {\n  max-width: 100%;\n}\n\n.ui.card>.distance {\n  flex-grow: 0;\n}\n\n@media only screen\nand (max-width: 767px)\nand (orientation: landscape) {\n  .ui.grid>[class*=\"four wide mobile-landscape\"].column {\n    width: 25%!important;\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LogoCardGrid.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LogoCardGrid.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LogoCardGrid.vue?vue&type=template&id=4b9a2898&scoped=true&\"\nimport script from \"./LogoCardGrid.vue?vue&type=script&lang=js&\"\nexport * from \"./LogoCardGrid.vue?vue&type=script&lang=js&\"\nimport style0 from \"./LogoCardGrid.vue?vue&type=style&index=0&id=4b9a2898&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4b9a2898\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"ui container\">\n    <div>\n      <h2>{{$t(\"logos.search\")}}</h2>\n      <div class=\"ui divider hidden\" />\n      <form class=\"ui form\" v-on:submit.prevent=\"search\">\n        <div class=\"three fields\">\n          <div class=\"field\">\n            <input type=\"text\" name=\"value\" :placeholder=\"$t('logos.value')\" v-model.trim=\"value\" />\n          </div>\n          <div class=\"field\">\n            <input type=\"text\" name=\"barcode\" :placeholder=\"$t('logos.barcode')\" v-model.trim=\"barcode\" />\n          </div>\n          <div class=\"field\">\n            <select class=\"ui fluid dropdown\" v-model=\"type\">\n              <option value>{{$t(\"logos.type\")}}</option>\n              <option value=\"label\">{{$t(\"logos.label\")}}</option>\n              <option value=\"brand\">{{$t(\"logos.brand\")}}</option>\n              <option value=\"packager_code\">{{$t(\"logos.packager_code\")}}</option>\n              <option value=\"packaging\">{{$t(\"logos.packaging\")}}</option>\n              <option value=\"qr_code\">{{$t(\"logos.qr_code\")}}</option>\n              <option value=\"category\">{{$t(\"logos.category\")}}</option>\n              <option value=\"nutrition_label\">{{$t(\"logos.nutrition_label\")}}</option>\n              <option value=\"store\">{{$t(\"logos.store\")}}</option>\n            </select>\n          </div>\n          <div class=\"field\">\n            <input type=\"number\" name=\"count\" v-model.trim=\"count\" />\n          </div>\n          <div class=\"field\">\n            <button type=\"submit\" class=\"ui button primary\">{{$t(\"logos.search\")}}</button>\n          </div>\n        </div>\n      </form>\n      <div class=\"ui divider hidden\" />\n      <LoadingSpinner :show=\"loading\" />\n      <div v-if=\"!loading && logos.length > 0\">\n        <p>{{$t(\"logos.number_of_results\")}} {{ resultCount }}</p>\n        <LogoCardGrid :logos=\"logos\" :selectable=\"false\" />\n      </div>\n      <div v-if=\"!loading && logos.length == 0\">\n        <p>\n          <strong>{{$t(\"logos.no_found\")}}</strong>\n        </p>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport robotoffService from \"../robotoff\";\nimport offService from \"../off\";\nimport LogoCardGrid from \"../components/LogoCardGrid\";\nimport LoadingSpinner from \"../components/LoadingSpinner\";\n\n\nconst transformLogo = logo => {\n  logo.image.url = robotoffService.getCroppedImageUrl(\n    offService.getImageUrl(logo.image.source_image),\n    logo.bounding_box\n  )\n  return logo;\n};\n\nexport default {\n  name: \"InsightListView\",\n  components: { LogoCardGrid , LoadingSpinner},\n  data: function() {\n    return {\n      logos: [],\n      value: \"\",\n      barcode: \"\",\n      type: \"\",\n      resultCount: 0,\n      count: 25,\n      loading: false\n    };\n  },\n  computed: {},\n  methods: {\n    search: function() {\n      this.loading = true\n      robotoffService\n        .searchLogos(this.barcode, this.value, this.type, this.count)\n        .then(({ data }) => {\n          this.logos = data.logos.map(transformLogo);\n          this.resultCount = data.count;\n          this.loading = false;\n        })\n        .catch(() => {\n          this.loading = false;\n        })\n    }\n  },\n  mounted() {\n    this.search();\n  }\n};\n</script>\n\n<style scoped>\n.borderless-button {\n  color: #2185d0;\n  cursor: pointer;\n}\n\n.borderless-button:hover {\n  text-decoration: underline;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LogoSearchView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LogoSearchView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LogoSearchView.vue?vue&type=template&id=ade22f58&scoped=true&\"\nimport script from \"./LogoSearchView.vue?vue&type=script&lang=js&\"\nexport * from \"./LogoSearchView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./LogoSearchView.vue?vue&type=style&index=0&id=ade22f58&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ade22f58\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ui container\"},[_c('h2',[_vm._v(_vm._s(_vm.$t(\"logos.annotations\")))]),_c('LoadingSpinner',{attrs:{\"show\":_vm.logos.length== 0 && _vm.loading}}),(_vm.logos.length > 0)?_c('div',[_c('form',{staticClass:\"ui form\",on:{\"submit\":function($event){$event.preventDefault();return _vm.sendAnnotations.apply(null, arguments)}}},[_c('div',{staticClass:\"three fields\"},[_c('div',{staticClass:\"field\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.valueInput),expression:\"valueInput\",modifiers:{\"trim\":true}}],attrs:{\"type\":\"text\",\"name\":\"value\",\"placeholder\":_vm.$t('logos.value')},domProps:{\"value\":(_vm.valueInput)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.valueInput=$event.target.value.trim()},\"blur\":function($event){return _vm.$forceUpdate()}}})]),_c('div',{staticClass:\"field\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.typeInput),expression:\"typeInput\"}],staticClass:\"ui fluid dropdown\",on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.typeInput=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"value\":\"\"}},[_vm._v(_vm._s(_vm.$t(\"logos.type\")))]),_c('option',{attrs:{\"value\":\"label\"}},[_vm._v(_vm._s(_vm.$t(\"logos.label\")))]),_c('option',{attrs:{\"value\":\"brand\"}},[_vm._v(_vm._s(_vm.$t(\"logos.brand\")))]),_c('option',{attrs:{\"value\":\"packager_code\"}},[_vm._v(_vm._s(_vm.$t(\"logos.packager_code\")))]),_c('option',{attrs:{\"value\":\"packaging\"}},[_vm._v(_vm._s(_vm.$t(\"logos.packaging\")))]),_c('option',{attrs:{\"value\":\"qr_code\"}},[_vm._v(_vm._s(_vm.$t(\"logos.qr_code\")))]),_c('option',{attrs:{\"value\":\"category\"}},[_vm._v(_vm._s(_vm.$t(\"logos.category\")))]),_c('option',{attrs:{\"value\":\"nutrition_label\"}},[_vm._v(_vm._s(_vm.$t(\"logos.nutrition_label\")))]),_c('option',{attrs:{\"value\":\"store\"}},[_vm._v(_vm._s(_vm.$t(\"logos.store\")))])])]),_c('div',{staticClass:\"field\"},[_c('LoadingSpinner',{attrs:{\"size\":'medium',\"centered\":false,\"show\":_vm.logos.length > 0 && _vm.loading}}),(!_vm.loading)?_c('button',{staticClass:\"ui button primary\",class:{ disabled: !_vm.isValidAnnotation },attrs:{\"type\":\"submit\",\"tabindex\":\"0\"}},[_vm._v(_vm._s(_vm.$t(\"logos.submit\")))]):_vm._e()],1)])]),_c('div',{staticClass:\"ui divider hidden\"}),(_vm.logos.length > 0)?_c('div',[_c('div',[_c('p',[_c('span',{staticClass:\"borderless-button\",on:{\"click\":function($event){return _vm.selectLogos(true)}}},[_vm._v(_vm._s(_vm.$t(\"logos.select_all\")))]),_vm._v(\" / \"),_c('span',{staticClass:\"borderless-button\",on:{\"click\":function($event){return _vm.selectLogos(false)}}},[_vm._v(_vm._s(_vm.$t(\"logos.unselect_all\")))])])]),_c('div',{staticClass:\"ui divider hidden\"}),(_vm.selectedLogos.length > 0)?_c('LogoCardGrid',{attrs:{\"logos\":_vm.selectedLogos},on:{\"toggle-select-logo\":_vm.toggleSelectLogo}}):_vm._e(),(_vm.unselectedLogos.length > 0)?_c('LogoCardGrid',{attrs:{\"logos\":_vm.unselectedLogos},on:{\"toggle-select-logo\":_vm.toggleSelectLogo}}):_vm._e()],1):_vm._e()]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"ui container\">\n    <h2>{{$t(\"logos.annotations\")}}</h2>\n    <LoadingSpinner :show=\"logos.length== 0 && loading\" />\n    <div v-if=\"logos.length > 0\">\n      <form class=\"ui form\" v-on:submit.prevent=\"sendAnnotations\">\n        <div class=\"three fields\">\n          <div class=\"field\">\n            <input type=\"text\" name=\"value\" :placeholder=\"$t('logos.value')\" v-model.trim=\"valueInput\" />\n          </div>\n          <div class=\"field\">\n            <select class=\"ui fluid dropdown\" v-model=\"typeInput\">\n              <option value>{{$t(\"logos.type\")}}</option>\n              <option value=\"label\">{{$t(\"logos.label\")}}</option>\n              <option value=\"brand\">{{$t(\"logos.brand\")}}</option>\n              <option value=\"packager_code\">{{$t(\"logos.packager_code\")}}</option>\n              <option value=\"packaging\">{{$t(\"logos.packaging\")}}</option>\n              <option value=\"qr_code\">{{$t(\"logos.qr_code\")}}</option>\n              <option value=\"category\">{{$t(\"logos.category\")}}</option>\n              <option value=\"nutrition_label\">{{$t(\"logos.nutrition_label\")}}</option>\n              <option value=\"store\">{{$t(\"logos.store\")}}</option>\n            </select>\n          </div>\n          <div class=\"field\">\n            <LoadingSpinner :size=\"'medium'\" :centered=\"false\" :show=\"logos.length > 0 && loading\" />\n            <button\n              v-if=\"!loading\"\n              type=\"submit\"\n              class=\"ui button primary\"\n              tabindex=\"0\"\n              :class=\"{ disabled: !isValidAnnotation }\"\n            >{{$t(\"logos.submit\")}}</button>\n          </div>\n        </div>\n      </form>\n      <div class=\"ui divider hidden\" />\n      <div v-if=\"logos.length > 0\">\n        <div>\n          <p>\n            <span @click=\"selectLogos(true)\" class=\"borderless-button\">{{$t(\"logos.select_all\")}}</span> /\n            <span @click=\"selectLogos(false)\" class=\"borderless-button\">{{$t(\"logos.unselect_all\")}}</span>\n          </p>\n        </div>\n        <div class=\"ui divider hidden\" />\n        <LogoCardGrid\n          v-if=\"selectedLogos.length > 0\"\n          :logos=\"selectedLogos\"\n          v-on:toggle-select-logo=\"toggleSelectLogo\"\n        />\n        <LogoCardGrid\n          :logos=\"unselectedLogos\"\n          v-on:toggle-select-logo=\"toggleSelectLogo\"\n          v-if=\"unselectedLogos.length > 0\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport robotoffService from \"../robotoff\";\nimport offService from \"../off\";\nimport LogoCardGrid from \"../components/LogoCardGrid\";\nimport { getURLParam } from \"../utils\";\nimport LoadingSpinner from \"../components/LoadingSpinner\";\n\n\nconst transformLogo = logo => {\n  logo.image.url = robotoffService.getCroppedImageUrl(\n    offService.getImageUrl(logo.image.source_image), logo.bounding_box\n  )\n  logo.selected = false;\n  return logo;\n};\n\nconst getAnnCount = defaultValue => {\n  const count = getURLParam(\"count\");\n  if (count.length == 0) return defaultValue;\n  return parseInt(count, 10) || defaultValue;\n};\n\nexport default {\n  name: \"InsightListView\",\n  components: { LogoCardGrid , LoadingSpinner },\n  data: function() {\n    return {\n      logos: [],\n      noLogoAvailable: false,\n      valueInput: \"\",\n      typeInput: \"\",\n      targetLogoId: getURLParam(\"logo_id\"),\n      annCount: getAnnCount(100),\n      loading: false\n    };\n  },\n  computed: {\n    isValidAnnotation: function() {\n      if (this.logos.length === 0) return false;\n      if (this.typeInput.length === 0) return false;\n      if (this.selectedLogos.length === 0) return false;\n      if (\n        this.valueInput.length === 0 &&\n        [\"label\", \"brand\", \"category\", \"store\"].includes(this.typeInput)\n      )\n        return false;\n      return true;\n    },\n    selectedLogos: function() {\n      return this.logos.filter(l => l.selected === true);\n    },\n    unselectedLogos: function() {\n      return this.logos.filter(l => l.selected === false);\n    }\n  },\n  methods: {\n    loadLogos: function() {\n      this.loading = true;\n      robotoffService\n        .getLogoAnnotations(this.targetLogoId, getURLParam(\"index\"), this.annCount)\n        .then(({ data }) => {\n          const results = data.results;\n          robotoffService\n            .getLogosImages(results.map(r => r.logo_id))\n            .then(response => {\n              this.loading = false;\n              const logoData = response.data.logos;\n              this.logos = results\n                .map(r => ({\n                  distance: r.distance,\n                  ...logoData.filter(l => l.id == r.logo_id)[0]\n                }))\n                .map(transformLogo);\n            })\n            .catch(() => {\n              this.loading = false;\n            })\n        })\n        .catch (() => {\n          this.loading = false;\n        })\n    },\n    toggleSelectLogo: function(logo) {\n      const logoId = logo.id;\n      const l = this.logos.filter(logo => logo.id === logoId)[0];\n      l.selected = !l.selected;\n    },\n    sendAnnotations: function() {\n      let value = this.valueInput.toLowerCase();\n\n      if (this.typeInput === \"packager_code\" || this.typeInput === \"qr_code\") {\n        value = \"\";\n      }\n      const annotations = this.selectedLogos.map(logo => ({\n        logo_id: logo.id,\n        value: value,\n        type: this.typeInput\n      }))\n      this.loading = true;\n      robotoffService\n        .annotateLogos(annotations)\n        .then(() => {\n          this.loading = false;\n          this.targetLogoId = \"\";\n          this.loadLogos();\n        })\n        .catch(() => {\n          this.loading = false;\n        })\n      this.valueInput = \"\";\n      this.typeInput = \"\";\n    },\n    selectLogos: function(select) {\n      this.logos.forEach(logo => {\n        if (logo.annotation_value) return;\n        logo.selected = select;\n      });\n    }\n  },\n  mounted() {\n    this.loadLogos();\n  }\n};\n</script>\n\n<style scoped>\n.borderless-button {\n  color: #2185d0;\n  cursor: pointer;\n}\n\n.borderless-button:hover {\n  text-decoration: underline;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LogoAnnotationView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LogoAnnotationView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LogoAnnotationView.vue?vue&type=template&id=2b92e4f2&scoped=true&\"\nimport script from \"./LogoAnnotationView.vue?vue&type=script&lang=js&\"\nexport * from \"./LogoAnnotationView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./LogoAnnotationView.vue?vue&type=style&index=0&id=2b92e4f2&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2b92e4f2\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ui container\"},[_c('div',[_c('h2',[_vm._v(_vm._s(_vm.$t(\"logos.detail\")))]),_c('p',[_vm._v(_vm._s(_vm.$t(\"logos.id\"))+\" \"+_vm._s(_vm.logoId))]),_c('p',[_vm._v(_vm._s(_vm.$t(\"logos.barcode\"))+\" \"+_vm._s(_vm.barcode))]),_c('p',[_c('a',{attrs:{\"href\":_vm.imageURL}},[_vm._v(_vm._s(_vm.$t(\"logos.full_image\")))])]),_c('img',{attrs:{\"width\":\"300px\",\"src\":_vm.cropURL}}),_c('div',{staticClass:\"ui divider\"}),_c('form',{staticClass:\"ui form\",on:{\"submit\":function($event){$event.preventDefault();return _vm.updateLogo.apply(null, arguments)}}},[_c('div',{staticClass:\"three fields\"},[_c('div',{staticClass:\"field\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.annotationValue),expression:\"annotationValue\",modifiers:{\"trim\":true}}],attrs:{\"type\":\"text\",\"name\":\"value\",\"placeholder\":_vm.$t('logos.value')},domProps:{\"value\":(_vm.annotationValue)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.annotationValue=$event.target.value.trim()},\"blur\":function($event){return _vm.$forceUpdate()}}})]),_c('div',{staticClass:\"field\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.annotationType),expression:\"annotationType\"}],staticClass:\"ui fluid dropdown\",on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.annotationType=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"value\":\"\"}},[_vm._v(_vm._s(_vm.$t(\"logos.type\")))]),_c('option',{attrs:{\"value\":\"label\"}},[_vm._v(_vm._s(_vm.$t(\"logos.label\")))]),_c('option',{attrs:{\"value\":\"brand\"}},[_vm._v(_vm._s(_vm.$t(\"logos.brand\")))]),_c('option',{attrs:{\"value\":\"packager_code\"}},[_vm._v(_vm._s(_vm.$t(\"logos.packager_code\")))]),_c('option',{attrs:{\"value\":\"packaging\"}},[_vm._v(_vm._s(_vm.$t(\"logos.packaging\")))]),_c('option',{attrs:{\"value\":\"qr_code\"}},[_vm._v(_vm._s(_vm.$t(\"logos.qr_code\")))]),_c('option',{attrs:{\"value\":\"category\"}},[_vm._v(_vm._s(_vm.$t(\"logos.category\")))]),_c('option',{attrs:{\"value\":\"nutrition_label\"}},[_vm._v(_vm._s(_vm.$t(\"logos.nutrition_label\")))]),_c('option',{attrs:{\"value\":\"store\"}},[_vm._v(_vm._s(_vm.$t(\"logos.store\")))])])]),_c('div',{staticClass:\"field\"},[_c('LoadingSpinner',{attrs:{\"size\":'medium',\"centered\":false,\"show\":_vm.loading}}),(!_vm.loading)?_c('button',{staticClass:\"ui button primary\",attrs:{\"type\":\"submit\",\"tabindex\":\"0\"}},[_vm._v(_vm._s(_vm.$t(\"logos.update\")))]):_vm._e()],1)])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"ui container\">\n    <div>\n      <h2>{{$t(\"logos.detail\")}}</h2>\n      <p>{{$t(\"logos.id\")}} {{ logoId }}</p>\n      <p>{{$t(\"logos.barcode\")}} {{ barcode }}</p>\n      <p>\n        <a :href=\"imageURL\">{{$t(\"logos.full_image\")}}</a>\n      </p>\n      <img width=\"300px\" :src=\"cropURL\" />\n      <div class=\"ui divider\" />\n      <form class=\"ui form\" v-on:submit.prevent=\"updateLogo\">\n        <div class=\"three fields\">\n          <div class=\"field\">\n            <input type=\"text\" name=\"value\" :placeholder=\"$t('logos.value')\" v-model.trim=\"annotationValue\" />\n          </div>\n          <div class=\"field\">\n            <select class=\"ui fluid dropdown\" v-model=\"annotationType\">\n              <option value>{{$t(\"logos.type\")}}</option>\n              <option value=\"label\">{{$t(\"logos.label\")}}</option>\n              <option value=\"brand\">{{$t(\"logos.brand\")}}</option>\n              <option value=\"packager_code\">{{$t(\"logos.packager_code\")}}</option>\n              <option value=\"packaging\">{{$t(\"logos.packaging\")}}</option>\n              <option value=\"qr_code\">{{$t(\"logos.qr_code\")}}</option>\n              <option value=\"category\">{{$t(\"logos.category\")}}</option>\n              <option value=\"nutrition_label\">{{$t(\"logos.nutrition_label\")}}</option>\n              <option value=\"store\">{{$t(\"logos.store\")}}</option>\n            </select>\n          </div>\n          <div class=\"field\">\n            <LoadingSpinner :size=\"'medium'\" :centered=\"false\" :show=\"loading\" />\n            <button v-if=\"!loading\" type=\"submit\" class=\"ui button primary\" tabindex=\"0\">{{$t(\"logos.update\")}}</button>\n          </div>\n        </div>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport LoadingSpinner from \"../components/LoadingSpinner\";\nimport robotoffService from \"../robotoff\";\nimport offService from \"../off\";\n\nconst getImageURL = logo => offService.getImageUrl(logo.image.source_image);\n\nconst getCropURL = logo => {\n  return robotoffService.getCroppedImageUrl(\n    getImageURL(logo), logo.bounding_box\n  )\n};\n\nexport default {\n  name: \"InsightListView\",\n  components: {LoadingSpinner},\n  data: function() {\n    return {\n      annotationValue: \"\",\n      annotationType: \"\",\n      imageURL: \"\",\n      cropURL: \"\",\n      barcode: \"\",\n      loading: false\n    };\n  },\n  computed: {\n    logoId: function() {\n      return this.$route.params.id;\n    }\n  },\n  methods: {\n    loadLogo: function() {\n      this.loading = true;\n      robotoffService\n        .loadLogo(this.logoId)\n        .then(({ data }) => {\n          this.imageURL = getImageURL(data);\n          this.cropURL = getCropURL(data);\n          this.annotationValue = data.annotation_value;\n          this.annotationType = data.annotation_type;\n          this.barcode = data.image.barcode;\n          this.loading = false;\n        })\n        .catch(() => {\n          this.loading = false;\n        })\n    },\n    updateLogo: function() {\n      if (this.annotationType.length == 0) return;\n      let value = this.annotationValue.toLowerCase();\n      if (\n        this.annotationType === \"packager_code\" ||\n        this.annotationType === \"qr_code\"\n      ) {\n        value = \"\";\n      }\n      this.loading = true;\n      robotoffService\n        .updateLogo(this.logoId, value, this.annotationType)\n        .then(() => {\n          this.loading = false;\n          window.console.log(\"Updated!\");\n        })\n        .catch(() => {\n          this.loading = false;\n        })\n    }\n  },\n  mounted() {\n    this.loadLogo();\n  }\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LogoUpdateView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LogoUpdateView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LogoUpdateView.vue?vue&type=template&id=1cc33b8e&\"\nimport script from \"./LogoUpdateView.vue?vue&type=script&lang=js&\"\nexport * from \"./LogoUpdateView.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},_vm._l((_vm.labels.fr),function(card){return _c('div',{key:card.value_tag,staticClass:\"ui card\"},[_c('router-link',{attrs:{\"to\":card.url,\"target\":\"_blank\"}},[_c('div',{staticClass:\"image\"},[_c('img',{attrs:{\"src\":card.logo}})]),_c('div',{staticClass:\"content\"},[_c('span',{staticClass:\"header\"},[_vm._v(_vm._s(card.value_tag))]),_c('div',{staticClass:\"floating ui label\",class:card.remainingQuestions === '0' ? 'green' : 'red'},[_vm._v(\" \"+_vm._s(card.remainingQuestions || \"...\")+\" \")])])])],1)}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"container\">\n    <div class=\"ui card\" v-for=\"card in labels.fr\" :key=\"card.value_tag\">\n      <router-link :to=\"card.url\" target=\"_blank\">\n        <div class=\"image\">\n          <img :src=\"card.logo\" />\n        </div>\n        <div class=\"content\">\n          <span class=\"header\">{{ card.value_tag }}</span>\n          <div\n            class=\"floating ui label\"\n            :class=\"card.remainingQuestions === '0' ? 'green' : 'red'\"\n          >\n            {{ card.remainingQuestions || \"...\" }}\n          </div>\n        </div>\n      </router-link>\n    </div>\n  </div>\n</template>\n\n<script>\nimport robotoffService from \"../robotoff\";\n\nconst fr_labels = [\n  {\n    url: \"questions?type=label&value_tag=en:organic\",\n    value_tag: \"en:organic\",\n    logo:\n      \"https://world-fr.openfoodfacts.org/images/lang/fr/labels/bio.96x90.png\",\n  },\n  {\n    url: \"questions?type=label&value_tag=en:eu-organic\",\n    value_tag: \"en:eu-organic\",\n    logo:\n      \"https://world.openfoodfacts.org/images/lang/en/labels/eu-organic.135x90.svg\",\n  },\n  {\n    url: \"questions?type=label&value_tag=en:ab-agriculture-biologique\",\n    value_tag: \"en:ab-agriculture-biologique\",\n    logo:\n      \"https://world.openfoodfacts.org/images/lang/en/labels/ab-agriculture-biologique.74x90.svg\",\n  },\n  {\n    url: \"questions?type=label&value_tag=en:eg-oko-verordnung\",\n    value_tag: \"en:eg-oko-verordnung\",\n    logo:\n      \"https://world-fr.openfoodfacts.org/images/lang/en/labels/eg-oko-verordnung.110x90.svg\",\n  },\n  {\n    url: \"questions?type=label&value_tag=fr:haute-valeur-environnementale\",\n    value_tag: \"fr:haute-valeur-environnementale\",\n    logo:\n      \"https://world-fr.openfoodfacts.org/images/lang/fr/labels/haute-valeur-environnementale.90x90.svg\",\n  },\n  {\n    url: \"questions?type=label&value_tag=fr:label-rouge\",\n    value_tag: \"fr:label-rouge\",\n    logo:\n      \"https://world-fr.openfoodfacts.org/images/lang/fr/labels/label-rouge.90x90.svg\",\n  },\n  {\n    url: \"questions?type=label&value_tag=fr:bleu-blanc-coeur\",\n    value_tag: \"fr:bleu-blanc-coeur\",\n    logo:\n      \"https://world-fr.openfoodfacts.org/images/lang/fr/labels/bleu-blanc-coeur.98x90.svg\",\n  },\n  {\n    url: \"questions?type=label&value_tag=en:roundtable-on-sustainable-palm-oil\",\n    value_tag: \"en:roundtable-on-sustainable-palm-oil\",\n    logo:\n      \"https://world-fr.openfoodfacts.org/images/lang/en/labels/roundtable-on-sustainable-palm-oil.90x90.svg\",\n  },\n  {\n    url:\n      \"questions?type=label&country=en:france&value_tag=en:rainforest-alliance\",\n    value_tag: \"en:rainforest-alliance\",\n    logo:\n      \"https://world-fr.openfoodfacts.org/images/lang/en/labels/rainforest-alliance.90x90.svg\",\n  },\n  {\n    url: \"questions?type=label&value_tag=fr:fairtrade\",\n    value_tag: \"fr:fairtrade\",\n    logo:\n      \"https://world-fr.openfoodfacts.org/images/lang/en/labels/fairtrade-international.77x90.svg\",\n  },\n  {\n    url: \"questions?type=label&value_tag=fr:max-havelaar\",\n    value_tag: \"fr:Max-Havelaar\",\n    logo:\n      \"https://world-fr.openfoodfacts.org/images/lang/en/labels/fairtrade-international.77x90.svg\",\n  },\n  {\n    url: \"questions?type=label&value_tag=en:sustainable-seafood-msc\",\n    value_tag: \"en:sustainable-seafood-msc\",\n    logo:\n      \"https://world-fr.openfoodfacts.org/images/lang/en/labels/sustainable-seafood-msc.126x90.svg\",\n  },\n  {\n    url: \"questions?type=label&value_tag=en:responsible-aquaculture-asc\",\n    value_tag: \"en:responsible-aquaculture-asc\",\n    logo:\n      \"https://world-fr.openfoodfacts.org/images/lang/en/labels/responsible-aquaculture-asc.188x90.svg\",\n  },\n];\n\nexport default {\n  name: \"EcoScoreMenuView\",\n  data: function() {\n    return {\n      zzzzzzzz: \"lklqjsdskljsljf\",\n      labels: {\n        fr: fr_labels,\n      },\n    };\n  },\n  computed: {},\n  methods: {\n    setRemainingQuestions: function({ value_tag }) {\n      const count = 10;\n      robotoffService\n        .questions(\"random\", \"label\", value_tag, null, null, count)\n        .then((result) => {\n          this.labels = {\n            ...this.labels,\n            fr: this.labels.fr.map((dataLabel) => {\n              if (value_tag !== dataLabel.value_tag) {\n                return dataLabel;\n              }\n              return {\n                ...dataLabel,\n                remainingQuestions:\n                  result.data.count === 0 ? \"0\" : result.data.count,\n              };\n            }),\n          };\n        });\n    },\n  },\n  mounted() {\n    const vm = this;\n    this.labels.fr.forEach((labelData) => {\n      vm.setRemainingQuestions(labelData);\n    });\n  },\n};\n</script>\n\n<style scoped>\n.container {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(310px, 1fr));\n}\n.header {\n  color: black;\n  font-size: 1.5rem;\n  padding: 0 0 1rem 0.5rem;\n}\n.card {\n  width: 300px;\n  height: 350px;\n}\n.image {\n  text-align: center;\n  height: 300px;\n  width: 300px;\n  position: relative;\n}\n.image img {\n  max-height: 100%;\n  max-width: 100%;\n  height: 300px;\n  width: 300px;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EcoScoreMenu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EcoScoreMenu.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EcoScoreMenu.vue?vue&type=template&id=46339154&scoped=true&\"\nimport script from \"./EcoScoreMenu.vue?vue&type=script&lang=js&\"\nexport * from \"./EcoScoreMenu.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EcoScoreMenu.vue?vue&type=style&index=0&id=46339154&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"46339154\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ui\"},[_c('div',_vm._l((_vm.labels),function(lab){return _c('button',{key:lab,staticClass:\"ui big button\",class:{ primary: lab === _vm.label },on:{\"click\":function($event){return _vm.setLabel(lab)}}},[_vm._v(\" \"+_vm._s(lab)+\" \")])}),0),(_vm.loading)?_c('div',[_c('LoadingSpinner',{attrs:{\"show\":\"\"}})],1):(_vm.noRemainingQuestion)?_c('div',[_vm._v(\"No more questions\")]):_c('div',[_c('h3',[_vm._v(\" \"+_vm._s(_vm.questions[0].question)+\" \"),_c('span',{staticClass:\"ui big label\"},[_vm._v(_vm._s(_vm.questions[0].value))]),_c('br'),_c('img',{staticClass:\"logo\",attrs:{\"src\":_vm.labelLogo[_vm.label]}})]),_c('div',{staticClass:\"ui grid stackable\"},_vm._l((_vm.questions),function(question){return _c('div',{key:question.insight_id,staticClass:\"ui\",class:{ selected: question.selected },on:{\"click\":function($event){return _vm.toggle(question.insight_id)}}},[_c('img',{attrs:{\"src\":question.source_image_url}}),(question.selected)?_c('div',{staticClass:\"filter\"}):_vm._e()])}),0),_c('button',{staticClass:\"ui big positive button validateButton\",on:{\"click\":function($event){return _vm.validate()}}},[_c('i',{staticClass:\"check icon\"}),_vm._v(\" \"+_vm._s(_vm.nbSelected)+\" \")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"ui\">\n    <div>\n      <button\n        class=\"ui big button\"\n        @click=\"setLabel(lab)\"\n        v-for=\"lab in labels\"\n        :key=\"lab\"\n        :class=\"{ primary: lab === label }\"\n      >\n        {{ lab }}\n      </button>\n    </div>\n    <div v-if=\"loading\"><LoadingSpinner show /></div>\n    <div v-else-if=\"noRemainingQuestion\">No more questions</div>\n    <div v-else>\n      <h3>\n        {{ questions[0].question }}\n        <span class=\"ui big label\">{{ questions[0].value }}</span>\n        <br />\n        <img class=\"logo\" :src=\"labelLogo[label]\" />\n      </h3>\n      <div class=\"ui grid stackable\">\n        <div\n          class=\"ui\"\n          v-for=\"question in questions\"\n          :key=\"question.insight_id\"\n          @click=\"toggle(question.insight_id)\"\n          :class=\"{ selected: question.selected }\"\n        >\n          <img :src=\"question.source_image_url\" />\n          <div v-if=\"question.selected\" class=\"filter\"></div>\n        </div>\n      </div>\n      <button class=\"ui big positive button validateButton\" @click=\"validate()\">\n        <i class=\"check icon\"></i>\n        {{ nbSelected }}\n      </button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport robotoffService from \"../robotoff\";\nimport LoadingSpinner from \"../components/LoadingSpinner\";\n\nconst NO_QUESTION_LEFT = \"NO_QUESTION_LEFT\";\nconst LOADING = \"LOADING\";\n\nconst labels = [\"en:eu-organic\", \"en:sustainable-seafood-msc\"];\n\nexport default {\n  name: \"QuestionView\",\n  components: { LoadingSpinner },\n  data: function() {\n    return {\n      status: LOADING,\n      labels: labels,\n      label: \"en:eu-organic\",\n      labelLogo: {\n        \"en:eu-organic\":\n          \"https://world.openfoodfacts.org/images/lang/en/labels/eu-organic.135x90.svg\",\n        \"en:sustainable-seafood-msc\":\n          \"https://world-fr.openfoodfacts.org/images/lang/en/labels/sustainable-seafood-msc.126x90.svg\",\n      },\n      questions: [],\n    };\n  },\n  methods: {\n    validate() {\n      const validatedInsights = this.questions\n        .filter(({ selected }) => selected === true)\n        .map(({ insight_id }) => insight_id);\n\n      validatedInsights.forEach((insight_id, index) => {\n        setTimeout(function() {\n          robotoffService.annotate(insight_id, 1);\n        }, index * 100);\n      });\n      this.questions = [];\n      this.fetchNewQuestions();\n    },\n    toggle(insight_id) {\n      this.questions = this.questions.map((x) =>\n        x.insight_id === insight_id ? { ...x, selected: !x.selected } : x\n      );\n    },\n    setLabel(label) {\n      if (this.label !== label) {\n        this.label = label;\n        this.questions = [];\n        this.fetchNewQuestions();\n      }\n    },\n    fetchNewQuestions() {\n      this.status = LOADING;\n      const count = 50;\n      robotoffService\n        .questions(\"random\", \"label\", this.label, null, null, count)\n        .then((result) => {\n          if (result.data.questions.length == 0) {\n            this.status = NO_QUESTION_LEFT;\n            return;\n          }\n          const refQuestion =\n            this.questions.length > 0\n              ? this.questions[0].question\n              : result.data.questions[0].question;\n          const refValue =\n            this.questions.length > 0\n              ? this.questions[0].value\n              : result.data.questions[0].value;\n          const indsighIdAlreadyInQuestions = this.questions.map(\n            ({ insight_id }) => insight_id\n          );\n\n          this.questions = [\n            ...this.questions,\n            ...result.data.questions.filter(\n              ({ insight_id, question, value }) =>\n                !indsighIdAlreadyInQuestions.includes(insight_id) &&\n                refValue === value &&\n                refQuestion === question\n            ),\n          ];\n          this.status = \"done\";\n        });\n    },\n  },\n  computed: {\n    loading: function() {\n      return this.status === LOADING && this.questions.length === 0;\n    },\n    noRemainingQuestion: function() {\n      return this.status === NO_QUESTION_LEFT;\n    },\n    nbSelected: function() {\n      return this.questions.filter((x) => x.selected === true).length;\n    },\n  },\n  mounted() {\n    this.fetchNewQuestions();\n  },\n};\n</script>\n\n<style scoped>\n.filter {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(0, 255, 0, 0.3);\n}\nh3 {\n  margin-bottom: 4rem;\n  text-align: center;\n}\n.logo {\n  height: 4rem;\n  width: auto;\n}\n.selected {\n  position: relative;\n}\n.selected img {\n  filter: url(\"#teal-lightgreen\");\n  border: solid green 5px;\n}\n.container {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(310px, 1fr));\n}\n.header {\n  color: black;\n  font-size: 1.5rem;\n  padding: 0 0 1rem 0.5rem;\n}\n.card {\n  width: 300px;\n  height: 350px;\n}\n.image {\n  text-align: center;\n  height: 300px;\n  width: 300px;\n  position: relative;\n}\nimg {\n  max-height: 100%;\n  max-width: 100%;\n  height: 300px;\n  width: 300px;\n}\n.validateButton {\n  position: fixed;\n  right: 50px;\n  bottom: 50px;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./secretTool.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./secretTool.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./secretTool.vue?vue&type=template&id=8b162032&scoped=true&\"\nimport script from \"./secretTool.vue?vue&type=script&lang=js&\"\nexport * from \"./secretTool.vue?vue&type=script&lang=js&\"\nimport style0 from \"./secretTool.vue?vue&type=style&index=0&id=8b162032&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8b162032\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ui grid stackable\"},[_c('div',{staticClass:\"five wide column centered\"},[_c('div',{staticClass:\"insight-column\"},[_c('QuestionFilter',{model:{value:(_vm.filters),callback:function ($$v) {_vm.filters=$$v},expression:\"filters\"}}),_c('div',{staticClass:\"ui divider\"}),_c('div',{staticClass:\"ui hidden divider\"}),(_vm.currentQuestion)?_c('div',[_c('h3',[_vm._v(_vm._s(_vm.currentQuestion.question))]),_c('div',[_c('div',{staticClass:\"ui big label\"},[_vm._v(_vm._s(_vm.currentQuestion.value))])]),_c('div',{staticClass:\"ui divider hidden\"}),_c('cropper',{staticStyle:{\"height\":\"300px\",\"margin\":\"auto\"},attrs:{\"src\":_vm.currentQuestionImageUrl,\"transitions\":false,\"canvas\":false,\"checkOrientation\":false,\"crossOrigine\":false,\"default-position\":{\n            left: 0,\n            top: 0,\n          },\"stencilSize\":function (ref) {\n              var boundaries = ref.boundaries;\n\n              return {\n                width: boundaries.width,\n                height: boundaries.height,\n              };\n            },\"default-boundaries\":\"fit\",\"stencil-props\":{\n            handlers: {},\n            movable: false,\n            resizable: false,\n          }}}),_c('div',{staticClass:\"ui divider hidden\"}),_c('div',[_c('button',{staticClass:\"ui big negative button annotate\",attrs:{\"data-inverted\":\"\",\"data-tooltip\":\"Shortcut: N\"},on:{\"click\":function($event){return _vm.annotate(0)}}},[_c('i',{staticClass:\"trash icon\"}),_vm._v(\" \"+_vm._s(_vm.$t(\"questions.no\"))+\" \")]),_c('button',{staticClass:\"ui big button annotate\",attrs:{\"data-inverted\":\"\",\"data-tooltip\":\"Shortcut: K\"},on:{\"click\":function($event){return _vm.annotate(-1)}}},[_c('i',{staticClass:\"question icon\"}),_vm._v(\" \"+_vm._s(_vm.$t(\"questions.skip\"))+\" \")]),_c('button',{staticClass:\"ui big positive button annotate\",attrs:{\"data-inverted\":\"\",\"data-tooltip\":\"Shortcut: O\"},on:{\"click\":function($event){return _vm.annotate(1)}}},[_c('i',{staticClass:\"check icon\"}),_vm._v(\" \"+_vm._s(_vm.$t(\"questions.yes\"))+\" \")])])],1):_c('div',{staticClass:\"flex-center\",staticStyle:{\"margin-top\":\"100px\"}},[_c('LoadingSpinner',{attrs:{\"show\":_vm.loading}}),(_vm.noRemainingQuestion)?_c('div',[_c('h2',[_vm._v(_vm._s(_vm.$t(\"questions.no_questions_remaining\")))])]):_vm._e()],1)],1)]),_c('div',{staticClass:\"six wide column centered\"},[_c('Product',{attrs:{\"barcode\":_vm.currentQuestionBarcode}})],1),_c('div',{staticClass:\"three wide column annotation-column\"},[_c('AnnotationCounter',{attrs:{\"remainingCount\":_vm.productIds.length,\"lastAnnotations\":_vm.lastAnnotations,\"sessionAnnotatedCount\":_vm.sessionAnnotatedCount}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default [\n  \"11791423\",\n  \"20024703\",\n  \"20080181\",\n  \"20093709\",\n  \"20266387\",\n  \"20452735\",\n  \"20884338\",\n  \"20961725\",\n  \"26065007\",\n  \"7622210713780\",\n  \"5010477348395\",\n  \"3182180012190\",\n  \"3175681066632\",\n  \"3033710073467\",\n  \"3664346306003\",\n  \"3366321051983\",\n  \"3242274000059\",\n  \"5010477348517\",\n  \"7622210444141\",\n  \"3168930010890\",\n  \"7613034916891\",\n  \"7613036024419\",\n  \"7613037059281\",\n  \"5038862130929\",\n  \"5411188118121\",\n  \"3017760635295\",\n  \"7613036668910\",\n  \"3023291122005\",\n  \"3175681135895\",\n  \"5010477348432\",\n  \"3502110009401\",\n  \"3073781071955\",\n  \"5038862162500\",\n  \"8000500290767\",\n  \"8719200082267\",\n  \"3256540001794\",\n  \"3392460481671\",\n  \"3168930008996\",\n  \"3256540000643\",\n  \"3095756308019\",\n  \"3155251204350\",\n  \"3431410001023\",\n  \"3083681093926\",\n  \"3017760000406\",\n  \"3564700002841\",\n  \"7613036277563\",\n  \"3560071172305\",\n  \"3038350013507\",\n  \"3038354221106\",\n  \"3229820796581\",\n  \"3245412155154\",\n  \"3248830862963\",\n  \"3256224311126\",\n  \"3273220182246\",\n  \"3521042004322\",\n  \"3560071099220\",\n  \"5410188031102\",\n  \"5053827209564\",\n  \"3021762416769\",\n  \"3029330002765\",\n  \"3103220009079\",\n  \"3178531008110\",\n  \"3242274004651\",\n  \"3250392571313\",\n  \"3259011105977\",\n  \"3270190207702\",\n  \"3284230007146\",\n  \"3538280837254\",\n  \"3560071013066\",\n  \"3599740004050\",\n  \"3599740007297\",\n  \"4006985902977\",\n  \"4008400390529\",\n  \"5010477348319\",\n  \"7614500035788\",\n  \"8410031936506\",\n  \"3083681012293\",\n  \"3240931531106\",\n  \"3250392355289\",\n  \"3760049797756\",\n  \"4056489009412\",\n  \"3021761206811\",\n  \"7613037091182\",\n  \"7613037987355\",\n  \"3019081240103\",\n  \"3103220041734\",\n  \"3250392409494\",\n  \"3252920039395\",\n  \"3255290251466\",\n  \"3380380077296\",\n  \"3560070778126\",\n  \"3560071006327\",\n  \"3564700008867\",\n  \"7613036667852\",\n  \"3168930156833\",\n  \"3580280744834\",\n  \"3033491279744\",\n  \"5053827204163\",\n  \"3041090061639\",\n  \"3155251205388\",\n  \"3229820788098\",\n  \"7613034938688\",\n  \"3664346305983\",\n  \"8719200031524\",\n  \"3073781099249\",\n  \"3302740776106\",\n  \"3178530408379\",\n  \"3178530404241\",\n  \"3421557501142\",\n  \"5410188011326\",\n  \"7613038406541\",\n  \"3184670001363\",\n  \"3178530405743\",\n  \"3245412590214\",\n  \"3103220033838\",\n  \"5038862160506\",\n  \"3045320104196\",\n  \"3056440083599\",\n  \"3498425800058\",\n  \"3123340008288\",\n  \"7622210337115\",\n  \"3366321052386\",\n  \"3083681057843\",\n  \"8721800082318\",\n  \"3023260005872\",\n  \"3033710001057\",\n  \"3083680085335\",\n  \"4056489009979\",\n  \"3182180012183\",\n  \"5053827216722\",\n  \"3250392559748\",\n  \"3302748497027\",\n  \"4003247102304\",\n  \"3284230001991\",\n  \"3095757413019\",\n  \"3228857000920\",\n  \"3259426021053\",\n  \"3366321054236\",\n  \"5010477348593\",\n  \"3276170011185\",\n  \"8714100614754\",\n  \"3095757047108\",\n  \"3103220033371\",\n  \"5053827199667\",\n  \"3095758914010\",\n];\n","<template>\n  <div class=\"ui grid stackable\">\n    <div class=\"five wide column centered\">\n      <div class=\"insight-column\">\n        <QuestionFilter v-model=\"filters\" />\n        <div class=\"ui divider\" />\n        <div class=\"ui hidden divider\"></div>\n        <div v-if=\"currentQuestion\">\n          <h3>{{ currentQuestion.question }}</h3>\n          <div>\n            <div class=\"ui big label\">{{ currentQuestion.value }}</div>\n          </div>\n          <div class=\"ui divider hidden\"></div>\n          <cropper\n            style=\"height: 300px; margin:auto\"\n            :src=\"currentQuestionImageUrl\"\n            :transitions=\"false\"\n            :canvas=\"false\"\n            :checkOrientation=\"false\"\n            :crossOrigine=\"false\"\n            :default-position=\"{\n              left: 0,\n              top: 0,\n            }\"\n            :stencilSize=\"\n              ({ boundaries }) => {\n                return {\n                  width: boundaries.width,\n                  height: boundaries.height,\n                };\n              }\n            \"\n            default-boundaries=\"fit\"\n            :stencil-props=\"{\n              handlers: {},\n              movable: false,\n              resizable: false,\n            }\"\n          />\n          <div class=\"ui divider hidden\"></div>\n\n          <div>\n            <button\n              data-inverted\n              data-tooltip=\"Shortcut: N\"\n              class=\"ui big negative button annotate\"\n              @click=\"annotate(0)\"\n            >\n              <i class=\"trash icon\"></i>\n              {{ $t(\"questions.no\") }}\n            </button>\n            <button\n              data-inverted\n              data-tooltip=\"Shortcut: K\"\n              class=\"ui big button annotate\"\n              @click=\"annotate(-1)\"\n            >\n              <i class=\"question icon\"></i>\n              {{ $t(\"questions.skip\") }}\n            </button>\n            <button\n              data-inverted\n              data-tooltip=\"Shortcut: O\"\n              class=\"ui big positive button annotate\"\n              @click=\"annotate(1)\"\n            >\n              <i class=\"check icon\"></i>\n              {{ $t(\"questions.yes\") }}\n            </button>\n          </div>\n        </div>\n        <div class=\"flex-center\" v-else style=\"margin-top: 100px\">\n          <LoadingSpinner :show=\"loading\" />\n          <div v-if=\"noRemainingQuestion\">\n            <h2>{{ $t(\"questions.no_questions_remaining\") }}</h2>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"six wide column centered\">\n      <Product :barcode=\"currentQuestionBarcode\" />\n    </div>\n    <div class=\"three wide column annotation-column\">\n      <AnnotationCounter\n        :remainingCount=\"productIds.length\"\n        :lastAnnotations=\"lastAnnotations\"\n        :sessionAnnotatedCount=\"sessionAnnotatedCount\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nimport { Cropper } from \"vue-advanced-cropper\";\nimport robotoffService from \"../robotoff\";\nimport { NO_QUESTION_LEFT } from \"../const\";\nimport Product from \"../components/Product\";\nimport LoadingSpinner from \"../components/LoadingSpinner\";\nimport AnnotationCounter from \"../components/AnnotationCounter\";\nimport productIds from \"./questions.js\";\n\nexport default {\n  name: \"QuestionView\",\n  components: {\n    Product,\n    AnnotationCounter,\n    LoadingSpinner,\n    Cropper,\n  },\n  data: function() {\n    return {\n      valueTagTimeout: null,\n      questionBuffer: [],\n      currentQuestion: null,\n      remainingQuestionCount: productIds.length,\n      lastAnnotations: [],\n      sessionAnnotatedCount: 0,\n      seenInsightIds: new Set(),\n      productIds,\n    };\n  },\n  watch: {\n    filters: {\n      handler: function(newFilters, oldFilters) {\n        if (\n          oldFilters === null ||\n          JSON.stringify(newFilters) !== JSON.stringify(oldFilters)\n        ) {\n          // when filters change reload questions\n          this.loadQuestions(true);\n        }\n      },\n      deep: true,\n    },\n    questionBuffer: function(newBuffer) {\n      // update the current question\n      if (\n        this.questionBuffer.length > 0 &&\n        this.questionBuffer[0] !== NO_QUESTION_LEFT\n      ) {\n        this.currentQuestion = this.questionBuffer[0];\n      } else {\n        this.currentQuestion = null;\n      }\n\n      // Fetch new questions to keep more than 9 questions in the buffer.\n      // Also send request for buffer sizes 0, 1, 2, 3 In cas a network problem occured\n      if (\n        (newBuffer.length == 9 || newBuffer.length < 4) &&\n        !newBuffer.includes(NO_QUESTION_LEFT)\n      ) {\n        this.loadQuestions(false);\n      }\n    },\n  },\n  methods: {\n    loadQuestions: async function(clean = false) {\n      if (clean) {\n        this.questionBuffer = [];\n      }\n      console.log(\"loadQuestions\");\n      while (this.productIds.length > 0 && this.questionBuffer < 5) {\n        const productIndex = Math.floor(this.productIds.length * Math.random());\n        const [code] = this.productIds.splice(productIndex, 1);\n\n        const result = await robotoffService.questionsByProductCode(code);\n        console.log(result);\n        this.remainingQuestionCount = result.data.count;\n\n        const dataToAdd = [];\n        result.data.questions.forEach((q) => {\n          if (!this.seenInsightIds.has(q.insight_id)) {\n            dataToAdd.push(q);\n            this.seenInsightIds.add(q.insight_id);\n          }\n        });\n        this.questionBuffer = [...this.questionBuffer, ...dataToAdd];\n      }\n\n      if (this.questionBuffer.length === 0 && this.productIds.length === 0) {\n        this.questionBuffer = [NO_QUESTION_LEFT];\n      }\n    },\n\n    updateLastAnnotations(question, annotation) {\n      this.lastAnnotations.push({\n        question,\n        annotation,\n      });\n\n      if (this.lastAnnotations.length > 10) {\n        this.lastAnnotations.shift();\n      }\n    },\n    annotate: function(annotation) {\n      if (annotation !== -1) {\n        robotoffService.annotate(this.currentQuestion.insight_id, annotation);\n        this.updateLastAnnotations(this.currentQuestion, annotation);\n        this.remainingQuestionCount -= 1;\n        this.sessionAnnotatedCount += 1;\n      }\n      this.currentQuestion = null;\n      this.questionBuffer = [...this.questionBuffer.slice(1)];\n    },\n    updateRemainingQuestionCount: function(newCount) {\n      this.remainingQuestionCount = newCount;\n    },\n  },\n  computed: {\n    currentQuestionImageUrl: function() {\n      if (this.currentQuestion.source_image_url) {\n        return this.currentQuestion.source_image_url;\n      }\n      return \"https://static.openfoodfacts.org/images/image-placeholder.png\";\n    },\n    loading: function() {\n      return !this.noRemainingQuestion && this.currentQuestion == null;\n    },\n    noRemainingQuestion: function() {\n      return (\n        this.questionBuffer.length === 1 &&\n        this.questionBuffer[0] === NO_QUESTION_LEFT\n      );\n    },\n    currentQuestionBarcode: function() {\n      if (this.currentQuestion && this.currentQuestion !== NO_QUESTION_LEFT) {\n        return this.currentQuestion.barcode;\n      } else {\n        return null;\n      }\n    },\n  },\n  mounted() {\n    const vm = this;\n    this.loadQuestions();\n    window.addEventListener(\"keyup\", function(event) {\n      if (event.target.nodeName == \"BODY\") {\n        if (event.key === \"k\") vm.annotate(-1);\n        if (event.key === \"n\") vm.annotate(0);\n        if (event.key === \"o\") vm.annotate(1);\n        if (event.key === \"p\") vm.rotateImage();\n      }\n    });\n  },\n};\n</script>\n\n<style scoped>\nbutton.annotate {\n  padding: 2rem 2.5rem;\n}\n\n.flex-center {\n  display: flex;\n  justify-content: center;\n}\n\n.insight-column {\n  text-align: center;\n}\n\n.annotation-column {\n  background-color: #686868;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SubsetQuestionView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SubsetQuestionView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SubsetQuestionView.vue?vue&type=template&id=51c14bb9&scoped=true&\"\nimport script from \"./SubsetQuestionView.vue?vue&type=script&lang=js&\"\nexport * from \"./SubsetQuestionView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SubsetQuestionView.vue?vue&type=style&index=0&id=51c14bb9&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"51c14bb9\",\n  null\n  \n)\n\nexport default component.exports","import Vue from \"vue\";\nimport VueRouter from \"vue-router\";\nimport VueI18n from \"vue-i18n\";\nimport Viewer from \"v-viewer\";\nimport VueMatomo from \"vue-matomo\";\nimport \"./semantic-ui-utils/main.css\";\nimport App from \"./App.vue\";\nimport QuestionView from \"./views/QuestionView.vue\";\nimport NutritionView from \"./views/NutritionView.vue\";\nimport NutritionInteractiveView from \"./views/NutritionInteractiveView.vue\";\nimport TableAnnotation from \"./views/TableAnnotation.vue\";\nimport SettingsView from \"./views/SettingsView.vue\";\nimport InsightListView from \"./views/InsightListView.vue\";\nimport LogoSearchView from \"./views/LogoSearchView.vue\";\nimport LogoAnnotationView from \"./views/LogoAnnotationView.vue\";\nimport LogoUpdateView from \"./views/LogoUpdateView.vue\";\nimport EcoScoreMenu from \"./views/EcoScoreMenu.vue\";\nimport SecretTool from \"./views/secretTool.vue\";\nimport SubsetQuestionView from \"./views/SubsetQuestionView.vue\";\nimport \"viewerjs/dist/viewer.css\";\nimport SuiVue from \"semantic-ui-vue\";\nimport messages from \"./i18n/messages\";\nimport { getLang } from \"./settings\";\n\nVue.use(SuiVue);\nVue.use(VueRouter);\nVue.use(Viewer);\nVue.use(VueI18n);\nVue.config.productionTip = false;\n\nVue.directive(\"focus\", {\n  componentUpdated: function(el) {\n    el.firstElementChild.focus();\n  },\n  inserted: function(el) {\n    el.firstElementChild.focus();\n  },\n});\n\nconst routes = [\n  { path: \"/\", redirect: \"/questions\" },\n  { path: \"/insights\", component: InsightListView },\n  { path: \"/questions\", component: QuestionView },\n  { path: \"/eco-score\", component: EcoScoreMenu },\n  { path: \"/secretTools\", component: SecretTool },\n  { path: \"/nutritions\", component: NutritionView },\n  { path: \"/nutritionInteractive\", component: NutritionInteractiveView },\n  { path: \"/nutritionInteractive/:code\", component: NutritionInteractiveView },\n  { path: \"/table\", component: TableAnnotation },\n  { path: \"/settings\", component: SettingsView },\n  { path: \"/logos\", component: LogoAnnotationView },\n  { path: \"/logos/search\", component: LogoSearchView },\n  { path: \"/logos/:id\", component: LogoUpdateView },\n  { path: \"/subsetQuestion\", component: SubsetQuestionView },\n];\n\nconst router = new VueRouter({\n  mode: \"history\",\n  routes,\n});\n\nconst i18n = new VueI18n({\n  locale: getLang(),\n  messages,\n  fallbackLocale: \"en\",\n});\n\nVue.use(VueMatomo, {\n  // Configure your matomo server and site by providing\n  host: \"https://analytics.openfoodfacts.org/\",\n  siteId: 3,\n  router: router, // Enables automatically registering page views on the router\n});\n\nnew Vue({\n  router,\n  i18n,\n  render: (h) => h(App),\n}).$mount(\"#app\");\n","module.exports = __webpack_public_path__ + \"img/questionsScreenshot.6522c541.png\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=27d0d616&scoped=true&lang=css&\"","module.exports = __webpack_public_path__ + \"img/logoNameLabel.b6c61dca.png\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LoadingSpinner.vue?vue&type=style&index=0&id=66aae622&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LogoCardGrid.vue?vue&type=style&index=0&id=4b9a2898&scoped=true&lang=css&\"","var map = {\n\t\"./logo.png\": \"cf05\",\n\t\"./logoGeneral.png\": \"9228\",\n\t\"./logoNameLabel.png\": \"830b\",\n\t\"./memLogo.png\": \"9d5d\",\n\t\"./questionsScreenshot.png\": \"6192\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"9142\";","module.exports = __webpack_public_path__ + \"img/logoGeneral.6d043eae.png\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TableAnnotation.vue?vue&type=style&index=0&id=6d01ef04&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./QuestionView.vue?vue&type=style&index=0&id=1e9968b6&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LogoSearchView.vue?vue&type=style&index=0&id=ade22f58&scoped=true&lang=css&\"","module.exports = __webpack_public_path__ + \"img/memLogo.7d2de489.png\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Pagination.vue?vue&type=style&index=0&id=4e54b946&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InsightListView.vue?vue&type=style&index=0&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&id=cc9a30dc&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./secretTool.vue?vue&type=style&index=0&id=8b162032&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SubsetQuestionView.vue?vue&type=style&index=0&id=51c14bb9&scoped=true&lang=css&\"","module.exports = __webpack_public_path__ + \"img/logo.6c31b90b.png\";","var map = {\n\t\"./brands.json\": \"bf35\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"d731\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EcoScoreMenu.vue?vue&type=style&index=0&id=46339154&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InteractiveImage.vue?vue&type=style&index=0&id=195fffac&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NutritionInteractiveView.vue?vue&type=style&index=0&id=db4d336a&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Product.vue?vue&type=style&index=0&id=592dbe0e&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NutritionTable.vue?vue&type=style&index=0&id=19f70efe&scoped=true&lang=css&\""],"sourceRoot":""}